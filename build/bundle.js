(function(e){function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}var t={};return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&'object'==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,'default',{enumerable:!0,value:e}),2&t&&'string'!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e['default']}:function getModuleExports(){return e};return __webpack_require__.d(t,'a',t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p='',__webpack_require__(__webpack_require__.s='./src/init.js')})({"./node_modules/acorn/dist/acorn.es.js":/*!*********************************************!*\
  !*** ./node_modules/acorn/dist/acorn.es.js ***!
  \*********************************************//*! exports provided: version, parse, parseExpressionAt, tokenizer, parse_dammit, LooseParser, pluginsLoose, addLooseExports, Parser, plugins, defaultOptions, Position, SourceLocation, getLineInfo, Node, TokenType, tokTypes, keywordTypes, TokContext, tokContexts, isIdentifierChar, isIdentifierStart, Token, isNewLine, lineBreak, lineBreakG, nonASCIIwhitespace */function(e,t,n){'use strict';function isInAstralSet(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function isIdentifierStart(e,t){return 65>e?36==e:!!(91>e)||(97>e?95==e:!!(123>e)||(65535>=e?170<=e&&c.test(r(e)):!1!==t&&isInAstralSet(e,p)))}function isIdentifierChar(e,t){return 48>e?36==e:!!(58>e)||!(65>e)&&(!!(91>e)||(97>e?95==e:!!(123>e)||(65535>=e?170<=e&&u.test(r(e)):!1!==t&&(isInAstralSet(e,p)||isInAstralSet(e,m)))))}function binop(e,t){return new g(e,{beforeExpr:!0,binop:t})}function kw(e,t){return void 0===t&&(t={}),t.keyword=e,_[e]=new g(e,t)}function isNewLine(e,t){return 10===e||13===e||!t&&(8232===e||8233===e)}function has(e,t){return C.call(e,t)}function getLineInfo(e,t){for(var n=1,r=0;;){x.lastIndex=r;var a=x.exec(e);if(a&&a.index<t)++n,r=a.index+a[0].length;else return new R(n,t-r)}}function getOptions(e){var t={};for(var n in w)t[n]=e&&has(e,n)?e[n]:w[n];if(2015<=t.ecmaVersion&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=5>t.ecmaVersion),S(t.onToken)){var r=t.onToken;t.onToken=function(e){return r.push(e)}}return S(t.onComment)&&(t.onComment=pushComment(t,t.onComment)),t}function pushComment(e,t){return function(n,r,a,o,i,s){var l={type:n?'Block':'Line',value:r,start:a,end:o};e.locations&&(l.loc=new F(this,i,s)),e.ranges&&(l.range=[a,o]),t.push(l)}}function keywordRegexp(e){return new RegExp('^(?:'+e.replace(/ /g,'|')+')$')}function DestructuringErrors(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}function finishNodeAt(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}function codePointToString$1(e){return 65535>=e?r(e):(e-=65536,r((e>>10)+55296,(1023&e)+56320))}function isSyntaxCharacter(e){return 36===e||40<=e&&43>=e||46===e||63===e||91<=e&&94>=e||123<=e&&125>=e}function isRegExpIdentifierStart(e){return isIdentifierStart(e,!0)||36===e||95===e}function isRegExpIdentifierPart(e){return isIdentifierChar(e,!0)||36===e||95===e||8204===e||8205===e}function isControlLetter(e){return 65<=e&&90>=e||97<=e&&122>=e}function isValidUnicode(e){return 0<=e&&1114111>=e}function isCharacterClassEscape(e){return 100===e||68===e||115===e||83===e||119===e||87===e}function isUnicodePropertyNameCharacter(e){return isControlLetter(e)||95===e}function isUnicodePropertyValueCharacter(e){return isUnicodePropertyNameCharacter(e)||isDecimalDigit(e)}function isDecimalDigit(e){return 48<=e&&57>=e}function isHexDigit(e){return 48<=e&&57>=e||65<=e&&70>=e||97<=e&&102>=e}function hexToInt(e){return 65<=e&&70>=e?10+(e-65):97<=e&&102>=e?10+(e-97):e-48}function isOctalDigit(e){return 48<=e&&55>=e}function codePointToString(e){return 65535>=e?r(e):(e-=65536,r((e>>10)+55296,(1023&e)+56320))}function parse(e,t){return new M(t,e).parse()}function parseExpressionAt(e,t,n){var r=new M(n,e,t);return r.nextToken(),r.parseExpression()}function tokenizer(e,t){return new M(t,e)}function addLooseExports(e,t,n){ne=e,re=t,ae=n}var r=String.fromCharCode;n.r(t),n.d(t,'version',function(){return te}),n.d(t,'parse',function(){return parse}),n.d(t,'parseExpressionAt',function(){return parseExpressionAt}),n.d(t,'tokenizer',function(){return tokenizer}),n.d(t,'parse_dammit',function(){return ne}),n.d(t,'LooseParser',function(){return re}),n.d(t,'pluginsLoose',function(){return ae}),n.d(t,'addLooseExports',function(){return addLooseExports}),n.d(t,'Parser',function(){return M}),n.d(t,'plugins',function(){return L}),n.d(t,'defaultOptions',function(){return w}),n.d(t,'Position',function(){return R}),n.d(t,'SourceLocation',function(){return F}),n.d(t,'getLineInfo',function(){return getLineInfo}),n.d(t,'Node',function(){return W}),n.d(t,'TokenType',function(){return g}),n.d(t,'tokTypes',function(){return y}),n.d(t,'keywordTypes',function(){return _}),n.d(t,'TokContext',function(){return j}),n.d(t,'tokContexts',function(){return X}),n.d(t,'isIdentifierChar',function(){return isIdentifierChar}),n.d(t,'isIdentifierStart',function(){return isIdentifierStart}),n.d(t,'Token',function(){return Q}),n.d(t,'isNewLine',function(){return isNewLine}),n.d(t,'lineBreak',function(){return E}),n.d(t,'lineBreakG',function(){return x}),n.d(t,'nonASCIIwhitespace',function(){return A});var a={3:'abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile',5:'class enum extends super const export import',6:'enum',strict:'implements interface let package private protected public static yield',strictBind:'eval arguments'},o='break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this',i={5:o,6:o+' const class extends export import super'},s=/^in(stanceof)?$/,l='\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEF\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7B9\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC',d='\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F',c=new RegExp('['+l+']'),u=new RegExp('['+l+d+']');l=d=null;var p=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],m=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239],g=function TokenType(e,t){void 0===t&&(t={}),this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null},h={beforeExpr:!0},f={startsExpr:!0},_={},y={num:new g('num',f),regexp:new g('regexp',f),string:new g('string',f),name:new g('name',f),eof:new g('eof'),bracketL:new g('[',{beforeExpr:!0,startsExpr:!0}),bracketR:new g(']'),braceL:new g('{',{beforeExpr:!0,startsExpr:!0}),braceR:new g('}'),parenL:new g('(',{beforeExpr:!0,startsExpr:!0}),parenR:new g(')'),comma:new g(',',h),semi:new g(';',h),colon:new g(':',h),dot:new g('.'),question:new g('?',h),arrow:new g('=>',h),template:new g('template'),invalidTemplate:new g('invalidTemplate'),ellipsis:new g('...',h),backQuote:new g('`',f),dollarBraceL:new g('${',{beforeExpr:!0,startsExpr:!0}),eq:new g('=',{beforeExpr:!0,isAssign:!0}),assign:new g('_=',{beforeExpr:!0,isAssign:!0}),incDec:new g('++/--',{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new g('!/~',{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:binop('||',1),logicalAND:binop('&&',2),bitwiseOR:binop('|',3),bitwiseXOR:binop('^',4),bitwiseAND:binop('&',5),equality:binop('==/!=/===/!==',6),relational:binop('</>/<=/>=',7),bitShift:binop('<</>>/>>>',8),plusMin:new g('+/-',{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:binop('%',10),star:binop('*',10),slash:binop('/',10),starstar:new g('**',{beforeExpr:!0}),_break:kw('break'),_case:kw('case',h),_catch:kw('catch'),_continue:kw('continue'),_debugger:kw('debugger'),_default:kw('default',h),_do:kw('do',{isLoop:!0,beforeExpr:!0}),_else:kw('else',h),_finally:kw('finally'),_for:kw('for',{isLoop:!0}),_function:kw('function',f),_if:kw('if'),_return:kw('return',h),_switch:kw('switch'),_throw:kw('throw',h),_try:kw('try'),_var:kw('var'),_const:kw('const'),_while:kw('while',{isLoop:!0}),_with:kw('with'),_new:kw('new',{beforeExpr:!0,startsExpr:!0}),_this:kw('this',f),_super:kw('super',f),_class:kw('class',f),_extends:kw('extends',h),_export:kw('export'),_import:kw('import'),_null:kw('null',f),_true:kw('true',f),_false:kw('false',f),_in:kw('in',{beforeExpr:!0,binop:7}),_instanceof:kw('instanceof',{beforeExpr:!0,binop:7}),_typeof:kw('typeof',{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:kw('void',{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:kw('delete',{beforeExpr:!0,prefix:!0,startsExpr:!0})},E=/\r\n?|\n|\u2028|\u2029/,x=new RegExp(E.source,'g'),A=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,b=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,T=Object.prototype,C=T.hasOwnProperty,v=T.toString,S=Array.isArray||function(e){return'[object Array]'===v.call(e)},R=function Position(e,t){this.line=e,this.column=t};R.prototype.offset=function offset(e){return new R(this.line,this.column+e)};var F=function SourceLocation(e,t,n){this.start=t,this.end=n,null!==e.sourceFile&&(this.source=e.sourceFile)},w={ecmaVersion:7,sourceType:'script',onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},L={},M=function Parser(e,t,n){this.options=e=getOptions(e),this.sourceFile=e.sourceFile,this.keywords=keywordRegexp(i[6<=e.ecmaVersion?6:5]);var r='';if(!e.allowReserved){for(var o=e.ecmaVersion;;o--)if(r=a[o])break;'module'===e.sourceType&&(r+=' await')}this.reservedWords=keywordRegexp(r);var s=(r?r+' ':'')+a.strict;this.reservedWordsStrict=keywordRegexp(s),this.reservedWordsStrictBind=keywordRegexp(s+' '+a.strictBind),this.input=t+'',this.containsEsc=!1,this.loadPlugins(e.plugins),n?(this.pos=n,this.lineStart=this.input.lastIndexOf('\n',n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(E).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=y.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule='module'===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&e.allowHashBang&&'#!'===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterFunctionScope(),this.regexpState=null};M.prototype.isKeyword=function isKeyword(e){return this.keywords.test(e)},M.prototype.isReservedWord=function isReservedWord(e){return this.reservedWords.test(e)},M.prototype.extend=function extend(e,t){this[e]=t(this[e])},M.prototype.loadPlugins=function loadPlugins(e){var t=this;for(var n in e){var r=L[n];if(!r)throw new Error('Plugin \''+n+'\' not found');r(t,e[n])}},M.prototype.parse=function parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)};var I=M.prototype,D=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/;I.strictDirective=function(e){for(var t=this;;){b.lastIndex=e,e+=b.exec(t.input)[0].length;var n=D.exec(t.input.slice(e));if(!n)return!1;if('use strict'===(n[1]||n[2]))return!0;e+=n[0].length}},I.eat=function(e){return this.type===e&&(this.next(),!0)},I.isContextual=function(e){return this.type===y.name&&this.value===e&&!this.containsEsc},I.eatContextual=function(e){return!!this.isContextual(e)&&(this.next(),!0)},I.expectContextual=function(e){this.eatContextual(e)||this.unexpected()},I.canInsertSemicolon=function(){return this.type===y.eof||this.type===y.braceR||E.test(this.input.slice(this.lastTokEnd,this.start))},I.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},I.semicolon=function(){this.eat(y.semi)||this.insertSemicolon()||this.unexpected()},I.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},I.expect=function(e){this.eat(e)||this.unexpected()},I.unexpected=function(e){this.raise(null==e?this.start:e,'Unexpected token')},I.checkPatternErrors=function(e,t){if(e){-1<e.trailingComma&&this.raiseRecoverable(e.trailingComma,'Comma is not permitted after the rest element');var n=t?e.parenthesizedAssign:e.parenthesizedBind;-1<n&&this.raiseRecoverable(n,'Parenthesized pattern')}},I.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;return t?void(0<=n&&this.raise(n,'Shorthand property assignments are valid only in destructuring patterns'),0<=r&&this.raiseRecoverable(r,'Redefinition of __proto__ property')):0<=n||0<=r},I.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,'Yield expression cannot be a default value'),this.awaitPos&&this.raise(this.awaitPos,'Await expression cannot be a default value')},I.isSimpleAssignTarget=function(e){return'ParenthesizedExpression'===e.type?this.isSimpleAssignTarget(e.expression):'Identifier'===e.type||'MemberExpression'===e.type};var B=M.prototype;B.parseTopLevel=function(e){var t=this,n={};for(e.body||(e.body=[]);this.type!==y.eof;){var r=t.parseStatement(!0,!0,n);e.body.push(r)}return this.adaptDirectivePrologue(e.body),this.next(),6<=this.options.ecmaVersion&&(e.sourceType=this.options.sourceType),this.finishNode(e,'Program')};var N={kind:'loop'},P={kind:'switch'};B.isLet=function(){if(6>this.options.ecmaVersion||!this.isContextual('let'))return!1;b.lastIndex=this.pos;var e=b.exec(this.input),t=this.pos+e[0].length,n=this.input.charCodeAt(t);if(91===n||123===n)return!0;if(isIdentifierStart(n,!0)){for(var r=t+1;isIdentifierChar(this.input.charCodeAt(r),!0);)++r;var a=this.input.slice(t,r);if(!s.test(a))return!0}return!1},B.isAsyncFunction=function(){if(8>this.options.ecmaVersion||!this.isContextual('async'))return!1;b.lastIndex=this.pos;var e=b.exec(this.input),t=this.pos+e[0].length;return!E.test(this.input.slice(this.pos,t))&&'function'===this.input.slice(t,t+8)&&(t+8===this.input.length||!isIdentifierChar(this.input.charAt(t+8)))},B.parseStatement=function(e,t,n){var r=this.type,a=this.startNode(),o;switch(this.isLet()&&(r=y._var,o='let'),r){case y._break:case y._continue:return this.parseBreakContinueStatement(a,r.keyword);case y._debugger:return this.parseDebuggerStatement(a);case y._do:return this.parseDoStatement(a);case y._for:return this.parseForStatement(a);case y._function:return!e&&6<=this.options.ecmaVersion&&this.unexpected(),this.parseFunctionStatement(a,!1);case y._class:return e||this.unexpected(),this.parseClass(a,!0);case y._if:return this.parseIfStatement(a);case y._return:return this.parseReturnStatement(a);case y._switch:return this.parseSwitchStatement(a);case y._throw:return this.parseThrowStatement(a);case y._try:return this.parseTryStatement(a);case y._const:case y._var:return o=o||this.value,e||'var'===o||this.unexpected(),this.parseVarStatement(a,o);case y._while:return this.parseWhileStatement(a);case y._with:return this.parseWithStatement(a);case y.braceL:return this.parseBlock();case y.semi:return this.parseEmptyStatement(a);case y._export:case y._import:return this.options.allowImportExportEverywhere||(!t&&this.raise(this.start,'\'import\' and \'export\' may only appear at the top level'),!this.inModule&&this.raise(this.start,'\'import\' and \'export\' may appear only with \'sourceType: module\'')),r===y._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e||this.unexpected(),this.next(),this.parseFunctionStatement(a,!0);var i=this.value,s=this.parseExpression();return r===y.name&&'Identifier'===s.type&&this.eat(y.colon)?this.parseLabeledStatement(a,i,s):this.parseExpressionStatement(a,s);}},B.parseBreakContinueStatement=function(e,t){var n=this,r='break'===t;this.next(),this.eat(y.semi)||this.insertSemicolon()?e.label=null:this.type===y.name?(e.label=this.parseIdent(),this.semicolon()):this.unexpected();for(var a=0,o;a<this.labels.length;++a)if(o=n.labels[a],null==e.label||o.name===e.label.name){if(null!=o.kind&&(r||'loop'===o.kind))break;if(e.label&&r)break}return a===this.labels.length&&this.raise(e.start,'Unsyntactic '+t),this.finishNode(e,r?'BreakStatement':'ContinueStatement')},B.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,'DebuggerStatement')},B.parseDoStatement=function(e){return this.next(),this.labels.push(N),e.body=this.parseStatement(!1),this.labels.pop(),this.expect(y._while),e.test=this.parseParenExpression(),6<=this.options.ecmaVersion?this.eat(y.semi):this.semicolon(),this.finishNode(e,'DoWhileStatement')},B.parseForStatement=function(e){this.next();var t=9<=this.options.ecmaVersion&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual('await')?this.lastTokStart:-1;if(this.labels.push(N),this.enterLexicalScope(),this.expect(y.parenL),this.type===y.semi)return-1<t&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===y._var||this.type===y._const||n){var r=this.startNode(),a=n?'let':this.value;return(this.next(),this.parseVar(r,!0,a),this.finishNode(r,'VariableDeclaration'),(this.type===y._in||6<=this.options.ecmaVersion&&this.isContextual('of'))&&1===r.declarations.length&&!('var'!==a&&r.declarations[0].init))?(9<=this.options.ecmaVersion&&(this.type===y._in?-1<t&&this.unexpected(t):e.await=-1<t),this.parseForIn(e,r)):(-1<t&&this.unexpected(t),this.parseFor(e,r))}var o=new DestructuringErrors,i=this.parseExpression(!0,o);return this.type===y._in||6<=this.options.ecmaVersion&&this.isContextual('of')?(9<=this.options.ecmaVersion&&(this.type===y._in?-1<t&&this.unexpected(t):e.await=-1<t),this.toAssignable(i,!1,o),this.checkLVal(i),this.parseForIn(e,i)):(this.checkExpressionErrors(o,!0),-1<t&&this.unexpected(t),this.parseFor(e,i))},B.parseFunctionStatement=function(e,t){return this.next(),this.parseFunction(e,!0,!1,t)},B.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement(!this.strict&&this.type===y._function),e.alternate=this.eat(y._else)?this.parseStatement(!this.strict&&this.type===y._function):null,this.finishNode(e,'IfStatement')},B.parseReturnStatement=function(e){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,'\'return\' outside of function'),this.next(),this.eat(y.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,'ReturnStatement')},B.parseSwitchStatement=function(e){var t=this;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(y.braceL),this.labels.push(P),this.enterLexicalScope();for(var n=!1,r;this.type!==y.braceR;)if(t.type===y._case||t.type===y._default){var a=t.type===y._case;r&&t.finishNode(r,'SwitchCase'),e.cases.push(r=t.startNode()),r.consequent=[],t.next(),a?r.test=t.parseExpression():(n&&t.raiseRecoverable(t.lastTokStart,'Multiple default clauses'),n=!0,r.test=null),t.expect(y.colon)}else r||t.unexpected(),r.consequent.push(t.parseStatement(!0));return this.exitLexicalScope(),r&&this.finishNode(r,'SwitchCase'),this.next(),this.labels.pop(),this.finishNode(e,'SwitchStatement')},B.parseThrowStatement=function(e){return this.next(),E.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,'Illegal newline after throw'),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,'ThrowStatement')};var O=[];B.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===y._catch){var t=this.startNode();this.next(),this.eat(y.parenL)?(t.param=this.parseBindingAtom(),this.enterLexicalScope(),this.checkLVal(t.param,'let'),this.expect(y.parenR)):(10>this.options.ecmaVersion&&this.unexpected(),t.param=null,this.enterLexicalScope()),t.body=this.parseBlock(!1),this.exitLexicalScope(),e.handler=this.finishNode(t,'CatchClause')}return e.finalizer=this.eat(y._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,'Missing catch or finally clause'),this.finishNode(e,'TryStatement')},B.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,'VariableDeclaration')},B.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(N),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,'WhileStatement')},B.parseWithStatement=function(e){return this.strict&&this.raise(this.start,'\'with\' in strict mode'),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement(!1),this.finishNode(e,'WithStatement')},B.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,'EmptyStatement')},B.parseLabeledStatement=function(e,t,n){for(var r=this,a=0,o=r.labels,s;a<o.length;a+=1)s=o[a],s.name===t&&r.raise(n.start,'Label \''+t+'\' is already declared');for(var l=this.type.isLoop?'loop':this.type===y._switch?'switch':null,d=this.labels.length-1,i;0<=d&&(i=r.labels[d],i.statementStart===e.start);d--)i.statementStart=r.start,i.kind=l;return this.labels.push({name:t,kind:l,statementStart:this.start}),e.body=this.parseStatement(!0),('ClassDeclaration'===e.body.type||'VariableDeclaration'===e.body.type&&'var'!==e.body.kind||'FunctionDeclaration'===e.body.type&&(this.strict||e.body.generator||e.body.async))&&this.raiseRecoverable(e.body.start,'Invalid labeled declaration'),this.labels.pop(),e.label=n,this.finishNode(e,'LabeledStatement')},B.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,'ExpressionStatement')},B.parseBlock=function(e){var t=this;void 0===e&&(e=!0);var n=this.startNode();for(n.body=[],this.expect(y.braceL),e&&this.enterLexicalScope();!this.eat(y.braceR);){var r=t.parseStatement(!0);n.body.push(r)}return e&&this.exitLexicalScope(),this.finishNode(n,'BlockStatement')},B.parseFor=function(e,t){return e.init=t,this.expect(y.semi),e.test=this.type===y.semi?null:this.parseExpression(),this.expect(y.semi),e.update=this.type===y.parenR?null:this.parseExpression(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,'ForStatement')},B.parseForIn=function(e,t){var n=this.type===y._in?'ForInStatement':'ForOfStatement';return this.next(),'ForInStatement'==n&&('AssignmentPattern'===t.type||'VariableDeclaration'===t.type&&null!=t.declarations[0].init&&(this.strict||'Identifier'!==t.declarations[0].id.type))&&this.raise(t.start,'Invalid assignment in for-in loop head'),e.left=t,e.right='ForInStatement'==n?this.parseExpression():this.parseMaybeAssign(),this.expect(y.parenR),this.exitLexicalScope(),e.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(e,n)},B.parseVar=function(e,t,n){var r=this;for(e.declarations=[],e.kind=n;;){var a=r.startNode();if(r.parseVarId(a,n),r.eat(y.eq)?a.init=r.parseMaybeAssign(t):'const'!==n||r.type===y._in||6<=r.options.ecmaVersion&&r.isContextual('of')?'Identifier'===a.id.type||t&&(r.type===y._in||r.isContextual('of'))?a.init=null:r.raise(r.lastTokEnd,'Complex binding patterns require an initialization value'):r.unexpected(),e.declarations.push(r.finishNode(a,'VariableDeclarator')),!r.eat(y.comma))break}return e},B.parseVarId=function(e,t){e.id=this.parseBindingAtom(t),this.checkLVal(e.id,t,!1)},B.parseFunction=function(e,t,n,r){this.initFunction(e),(9<=this.options.ecmaVersion||6<=this.options.ecmaVersion&&!r)&&(e.generator=this.eat(y.star)),8<=this.options.ecmaVersion&&(e.async=!!r),t&&(e.id='nullableID'===t&&this.type!==y.name?null:this.parseIdent(),e.id&&this.checkLVal(e.id,this.inModule&&!this.inFunction?'let':'var'));var a=this.inGenerator,o=this.inAsync,i=this.yieldPos,s=this.awaitPos,l=this.inFunction;return this.inGenerator=e.generator,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),t||(e.id=this.type===y.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n),this.inGenerator=a,this.inAsync=o,this.yieldPos=i,this.awaitPos=s,this.inFunction=l,this.finishNode(e,t?'FunctionDeclaration':'FunctionExpression')},B.parseFunctionParams=function(e){this.expect(y.parenL),e.params=this.parseBindingList(y.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams()},B.parseClass=function(e,t){var n=this;this.next(),this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),a=!1;for(r.body=[],this.expect(y.braceL);!this.eat(y.braceR);){var o=n.parseClassMember(r);o&&'MethodDefinition'===o.type&&'constructor'===o.kind&&(a&&n.raise(o.start,'Duplicate constructor in the same class'),a=!0)}return e.body=this.finishNode(r,'ClassBody'),this.finishNode(e,t?'ClassDeclaration':'ClassExpression')},B.parseClassMember=function(e){var t=this;if(this.eat(y.semi))return null;var n=this.startNode(),r=function(e,r){void 0===r&&(r=!1);var a=t.start,o=t.startLoc;return!!t.eatContextual(e)&&(!(t.type===y.parenL||r&&t.canInsertSemicolon())||(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(a,o),n.key.name=e,t.finishNode(n.key,'Identifier'),!1))};n.kind='method',n.static=r('static');var a=this.eat(y.star),o=!1;a||(8<=this.options.ecmaVersion&&r('async',!0)?(o=!0,a=9<=this.options.ecmaVersion&&this.eat(y.star)):r('get')?n.kind='get':r('set')&&(n.kind='set')),n.key||this.parsePropertyName(n);var i=n.key;return n.computed||n.static||('Identifier'!==i.type||'constructor'!==i.name)&&('Literal'!==i.type||'constructor'!==i.value)?n.static&&'Identifier'===i.type&&'prototype'===i.name&&this.raise(i.start,'Classes may not have a static property named prototype'):('method'!==n.kind&&this.raise(i.start,'Constructor can\'t have get/set modifier'),a&&this.raise(i.start,'Constructor can\'t be a generator'),o&&this.raise(i.start,'Constructor can\'t be an async method'),n.kind='constructor'),this.parseClassMethod(e,n,a,o),'get'===n.kind&&0!==n.value.params.length&&this.raiseRecoverable(n.value.start,'getter should have no params'),'set'===n.kind&&1!==n.value.params.length&&this.raiseRecoverable(n.value.start,'setter should have exactly one param'),'set'===n.kind&&'RestElement'===n.value.params[0].type&&this.raiseRecoverable(n.value.params[0].start,'Setter cannot use rest params'),n},B.parseClassMethod=function(e,t,n,r){t.value=this.parseMethod(n,r),e.body.push(this.finishNode(t,'MethodDefinition'))},B.parseClassId=function(e,t){e.id=this.type===y.name?this.parseIdent():!0===t?this.unexpected():null},B.parseClassSuper=function(e){e.superClass=this.eat(y._extends)?this.parseExprSubscripts():null},B.parseExport=function(e,t){var n=this;if(this.next(),this.eat(y.star))return this.expectContextual('from'),this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,'ExportAllDeclaration');if(this.eat(y._default)){this.checkExport(t,'default',this.lastTokStart);var r;if(this.type===y._function||(r=this.isAsyncFunction())){var a=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(a,'nullableID',!1,r)}else if(this.type===y._class){var o=this.startNode();e.declaration=this.parseClass(o,'nullableID')}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,'ExportDefaultDeclaration')}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(!0),'VariableDeclaration'===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual('from'))this.type!==y.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,i=e.specifiers,l;s<i.length;s+=1)l=i[s],n.checkUnreserved(l.local);e.source=null}this.semicolon()}return this.finishNode(e,'ExportNamedDeclaration')},B.checkExport=function(e,t,n){e&&(has(e,t)&&this.raiseRecoverable(n,'Duplicate export \''+t+'\''),e[t]=!0)},B.checkPatternExport=function(e,t){var n=this,r=t.type;if('Identifier'===r)this.checkExport(e,t.name,t.start);else if('ObjectPattern'===r)for(var a=0,o=t.properties,i;a<o.length;a+=1)i=o[a],n.checkPatternExport(e,i);else if('ArrayPattern'===r)for(var s=0,l=t.elements,d;s<l.length;s+=1)d=l[s],d&&n.checkPatternExport(e,d);else'Property'===r?this.checkPatternExport(e,t.value):'AssignmentPattern'===r?this.checkPatternExport(e,t.left):'RestElement'===r?this.checkPatternExport(e,t.argument):'ParenthesizedExpression'===r&&this.checkPatternExport(e,t.expression)},B.checkVariableExport=function(e,t){var n=this;if(e)for(var r=0,a=t,o;r<a.length;r+=1)o=a[r],n.checkPatternExport(e,o.id)},B.shouldParseExportStatement=function(){return'var'===this.type.keyword||'const'===this.type.keyword||'class'===this.type.keyword||'function'===this.type.keyword||this.isLet()||this.isAsyncFunction()},B.parseExportSpecifiers=function(e){var t=this,n=[],r=!0;for(this.expect(y.braceL);!this.eat(y.braceR);){if(!!r)r=!1;else if(t.expect(y.comma),t.afterTrailingComma(y.braceR))break;var a=t.startNode();a.local=t.parseIdent(!0),a.exported=t.eatContextual('as')?t.parseIdent(!0):a.local,t.checkExport(e,a.exported.name,a.exported.start),n.push(t.finishNode(a,'ExportSpecifier'))}return n},B.parseImport=function(e){return this.next(),this.type===y.string?(e.specifiers=O,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual('from'),e.source=this.type===y.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,'ImportDeclaration')},B.parseImportSpecifiers=function(){var e=this,t=[],n=!0;if(this.type===y.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,'let'),t.push(this.finishNode(r,'ImportDefaultSpecifier')),!this.eat(y.comma))return t}if(this.type===y.star){var a=this.startNode();return this.next(),this.expectContextual('as'),a.local=this.parseIdent(),this.checkLVal(a.local,'let'),t.push(this.finishNode(a,'ImportNamespaceSpecifier')),t}for(this.expect(y.braceL);!this.eat(y.braceR);){if(!!n)n=!1;else if(e.expect(y.comma),e.afterTrailingComma(y.braceR))break;var o=e.startNode();o.imported=e.parseIdent(!0),e.eatContextual('as')?o.local=e.parseIdent():(e.checkUnreserved(o.imported),o.local=o.imported),e.checkLVal(o.local,'let'),t.push(e.finishNode(o,'ImportSpecifier'))}return t},B.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},B.isDirectiveCandidate=function(e){return'ExpressionStatement'===e.type&&'Literal'===e.expression.type&&'string'==typeof e.expression.value&&('"'===this.input[e.start]||'\''===this.input[e.start])};var k=M.prototype;k.toAssignable=function(e,t,n){var r=this;if(6<=this.options.ecmaVersion&&e)switch(e.type){case'Identifier':this.inAsync&&'await'===e.name&&this.raise(e.start,'Can not use \'await\' as identifier inside an async function');break;case'ObjectPattern':case'ArrayPattern':case'RestElement':break;case'ObjectExpression':e.type='ObjectPattern',n&&this.checkPatternErrors(n,!0);for(var a=0,o=e.properties,i;a<o.length;a+=1)i=o[a],r.toAssignable(i,t),'RestElement'===i.type&&('ArrayPattern'===i.argument.type||'ObjectPattern'===i.argument.type)&&r.raise(i.argument.start,'Unexpected token');break;case'Property':'init'!==e.kind&&this.raise(e.key.start,'Object pattern can\'t contain getter or setter'),this.toAssignable(e.value,t);break;case'ArrayExpression':e.type='ArrayPattern',n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case'SpreadElement':e.type='RestElement',this.toAssignable(e.argument,t),'AssignmentPattern'===e.argument.type&&this.raise(e.argument.start,'Rest elements cannot have a default value');break;case'AssignmentExpression':'='!==e.operator&&this.raise(e.left.end,'Only \'=\' operator can be used for specifying default value.'),e.type='AssignmentPattern',delete e.operator,this.toAssignable(e.left,t);case'AssignmentPattern':break;case'ParenthesizedExpression':this.toAssignable(e.expression,t);break;case'MemberExpression':if(!t)break;default:this.raise(e.start,'Assigning to rvalue');}else n&&this.checkPatternErrors(n,!0);return e},k.toAssignableList=function(e,t){for(var n=this,r=e.length,a=0,o;a<r;a++)o=e[a],o&&n.toAssignable(o,t);if(r){var i=e[r-1];6===this.options.ecmaVersion&&t&&i&&'RestElement'===i.type&&'Identifier'!==i.argument.type&&this.unexpected(i.argument.start)}return e},k.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,'SpreadElement')},k.parseRestBinding=function(){var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==y.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,'RestElement')},k.parseBindingAtom=function(){if(6<=this.options.ecmaVersion)switch(this.type){case y.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(y.bracketR,!0,!0),this.finishNode(e,'ArrayPattern');case y.braceL:return this.parseObj(!0);}return this.parseIdent()},k.parseBindingList=function(e,t,n){for(var r=this,a=[],o=!0;!this.eat(e);)if(o?o=!1:r.expect(y.comma),t&&r.type===y.comma)a.push(null);else if(n&&r.afterTrailingComma(e))break;else if(r.type===y.ellipsis){var i=r.parseRestBinding();r.parseBindingListItem(i),a.push(i),r.type===y.comma&&r.raise(r.start,'Comma is not permitted after the rest element'),r.expect(e);break}else{var s=r.parseMaybeDefault(r.start,r.startLoc);r.parseBindingListItem(s),a.push(s)}return a},k.parseBindingListItem=function(e){return e},k.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),6>this.options.ecmaVersion||!this.eat(y.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,'AssignmentPattern')},k.checkLVal=function(e,t,n){var r=this;switch(e.type){case'Identifier':this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?'Binding ':'Assigning to ')+e.name+' in strict mode'),n&&(has(n,e.name)&&this.raiseRecoverable(e.start,'Argument name clash'),n[e.name]=!0),t&&'none'!==t&&(('var'===t&&!this.canDeclareVarName(e.name)||'var'!==t&&!this.canDeclareLexicalName(e.name))&&this.raiseRecoverable(e.start,'Identifier \''+e.name+'\' has already been declared'),'var'===t?this.declareVarName(e.name):this.declareLexicalName(e.name));break;case'MemberExpression':t&&this.raiseRecoverable(e.start,'Binding member expression');break;case'ObjectPattern':for(var a=0,o=e.properties,i;a<o.length;a+=1)i=o[a],r.checkLVal(i,t,n);break;case'Property':this.checkLVal(e.value,t,n);break;case'ArrayPattern':for(var s=0,l=e.elements,d;s<l.length;s+=1)d=l[s],d&&r.checkLVal(d,t,n);break;case'AssignmentPattern':this.checkLVal(e.left,t,n);break;case'RestElement':this.checkLVal(e.argument,t,n);break;case'ParenthesizedExpression':this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?'Binding':'Assigning to')+' rvalue');}};var U=M.prototype;U.checkPropClash=function(e,t,n){if(!(9<=this.options.ecmaVersion&&'SpreadElement'===e.type)&&!(6<=this.options.ecmaVersion&&(e.computed||e.method||e.shorthand))){var r=e.key,a;switch(r.type){case'Identifier':a=r.name;break;case'Literal':a=r.value+'';break;default:return;}var o=e.kind;if(6<=this.options.ecmaVersion)return void('__proto__'===a&&'init'===o&&(t.proto&&(n&&0>n.doubleProto?n.doubleProto=r.start:this.raiseRecoverable(r.start,'Redefinition of __proto__ property')),t.proto=!0));a='$'+a;var i=t[a];if(i){var s;s='init'===o?this.strict&&i.init||i.get||i.set:i.init||i[o],s&&this.raiseRecoverable(r.start,'Redefinition of property')}else i=t[a]={init:!1,get:!1,set:!1};i[o]=!0}},U.parseExpression=function(e,t){var n=this,r=this.start,a=this.startLoc,o=this.parseMaybeAssign(e,t);if(this.type===y.comma){var i=this.startNodeAt(r,a);for(i.expressions=[o];this.eat(y.comma);)i.expressions.push(n.parseMaybeAssign(e,t));return this.finishNode(i,'SequenceExpression')}return o},U.parseMaybeAssign=function(e,t,n){if(this.inGenerator&&this.isContextual('yield'))return this.parseYield();var r=!1,a=-1,o=-1;t?(a=t.parenthesizedAssign,o=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new DestructuringErrors,r=!0);var i=this.start,s=this.startLoc;(this.type===y.parenL||this.type===y.name)&&(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,i,s)),this.type.isAssign){var d=this.startNodeAt(i,s);return d.operator=this.value,d.left=this.type===y.eq?this.toAssignable(l,!1,t):l,r||DestructuringErrors.call(t),t.shorthandAssign=-1,this.checkLVal(l),this.next(),d.right=this.parseMaybeAssign(e),this.finishNode(d,'AssignmentExpression')}return r&&this.checkExpressionErrors(t,!0),-1<a&&(t.parenthesizedAssign=a),-1<o&&(t.trailingComma=o),l},U.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,a=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return a;if(this.eat(y.question)){var o=this.startNodeAt(n,r);return o.test=a,o.consequent=this.parseMaybeAssign(),this.expect(y.colon),o.alternate=this.parseMaybeAssign(e),this.finishNode(o,'ConditionalExpression')}return a},U.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,a=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?a:a.start===n&&'ArrowFunctionExpression'===a.type?a:this.parseExprOp(a,n,r,-1,e)},U.parseExprOp=function(e,t,n,r,a){var o=this.type.binop;if(null!=o&&(!a||this.type!==y._in)&&o>r){var i=this.type===y.logicalOR||this.type===y.logicalAND,s=this.value;this.next();var l=this.start,d=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,d,o,a),u=this.buildBinary(t,n,e,c,s,i);return this.parseExprOp(u,t,n,r,a)}return e},U.buildBinary=function(e,t,n,r,a,o){var i=this.startNodeAt(e,t);return i.left=n,i.operator=a,i.right=r,this.finishNode(i,o?'LogicalExpression':'BinaryExpression')},U.parseMaybeUnary=function(e,t){var n=this,r=this.start,a=this.startLoc,o;if(this.isContextual('await')&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))o=this.parseAwait(),t=!0;else if(this.type.prefix){var i=this.startNode(),s=this.type===y.incDec;i.operator=this.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),s?this.checkLVal(i.argument):this.strict&&'delete'===i.operator&&'Identifier'===i.argument.type?this.raiseRecoverable(i.start,'Deleting local variable in strict mode'):t=!0,o=this.finishNode(i,s?'UpdateExpression':'UnaryExpression')}else{if(o=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=n.startNodeAt(r,a);l.operator=n.value,l.prefix=!1,l.argument=o,n.checkLVal(o),n.next(),o=n.finishNode(l,'UpdateExpression')}}return!t&&this.eat(y.starstar)?this.buildBinary(r,a,o,this.parseMaybeUnary(null,!1),'**',!1):o},U.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e),a='ArrowFunctionExpression'===r.type&&')'!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||a)return r;var o=this.parseSubscripts(r,t,n);return e&&'MemberExpression'===o.type&&(e.parenthesizedAssign>=o.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=o.start&&(e.parenthesizedBind=-1)),o},U.parseSubscripts=function(e,t,n,r){for(var a=this,o=8<=this.options.ecmaVersion&&'Identifier'===e.type&&'async'===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&'async'===this.input.slice(e.start,e.end),i=void 0;;)if((i=a.eat(y.bracketL))||a.eat(y.dot)){var s=a.startNodeAt(t,n);s.object=e,s.property=i?a.parseExpression():a.parseIdent(!0),s.computed=!!i,i&&a.expect(y.bracketR),e=a.finishNode(s,'MemberExpression')}else if(!r&&a.eat(y.parenL)){var l=new DestructuringErrors,d=a.yieldPos,c=a.awaitPos;a.yieldPos=0,a.awaitPos=0;var u=a.parseExprList(y.parenR,8<=a.options.ecmaVersion,!1,l);if(o&&!a.canInsertSemicolon()&&a.eat(y.arrow))return a.checkPatternErrors(l,!1),a.checkYieldAwaitInDefaultParams(),a.yieldPos=d,a.awaitPos=c,a.parseArrowExpression(a.startNodeAt(t,n),u,!0);a.checkExpressionErrors(l,!0),a.yieldPos=d||a.yieldPos,a.awaitPos=c||a.awaitPos;var p=a.startNodeAt(t,n);p.callee=e,p.arguments=u,e=a.finishNode(p,'CallExpression')}else if(a.type===y.backQuote){var m=a.startNodeAt(t,n);m.tag=e,m.quasi=a.parseTemplate({isTagged:!0}),e=a.finishNode(m,'TaggedTemplateExpression')}else return e},U.parseExprAtom=function(e){var t=this.potentialArrowAt===this.start,n;switch(this.type){case y._super:return this.inFunction||this.raise(this.start,'\'super\' outside of function or class'),n=this.startNode(),this.next(),this.type!==y.dot&&this.type!==y.bracketL&&this.type!==y.parenL&&this.unexpected(),this.finishNode(n,'Super');case y._this:return n=this.startNode(),this.next(),this.finishNode(n,'ThisExpression');case y.name:var r=this.start,a=this.startLoc,o=this.containsEsc,i=this.parseIdent(this.type!==y.name);if(8<=this.options.ecmaVersion&&!o&&'async'===i.name&&!this.canInsertSemicolon()&&this.eat(y._function))return this.parseFunction(this.startNodeAt(r,a),!1,!1,!0);if(t&&!this.canInsertSemicolon()){if(this.eat(y.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[i],!1);if(8<=this.options.ecmaVersion&&'async'===i.name&&this.type===y.name&&!o)return i=this.parseIdent(),(this.canInsertSemicolon()||!this.eat(y.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[i],!0)}return i;case y.regexp:var s=this.value;return n=this.parseLiteral(s.value),n.regex={pattern:s.pattern,flags:s.flags},n;case y.num:case y.string:return this.parseLiteral(this.value);case y._null:case y._true:case y._false:return n=this.startNode(),n.value=this.type===y._null?null:this.type===y._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,'Literal');case y.parenL:var l=this.start,d=this.parseParenAndDistinguishExpression(t);return e&&(0>e.parenthesizedAssign&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=l),0>e.parenthesizedBind&&(e.parenthesizedBind=l)),d;case y.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(y.bracketR,!0,!0,e),this.finishNode(n,'ArrayExpression');case y.braceL:return this.parseObj(!1,e);case y._function:return n=this.startNode(),this.next(),this.parseFunction(n,!1);case y._class:return this.parseClass(this.startNode(),!1);case y._new:return this.parseNew();case y.backQuote:return this.parseTemplate();default:this.unexpected();}},U.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,'Literal')},U.parseParenExpression=function(){this.expect(y.parenL);var e=this.parseExpression();return this.expect(y.parenR),e},U.parseParenAndDistinguishExpression=function(e){var t=this,n=this.start,r=this.startLoc,a=8<=this.options.ecmaVersion,o;if(6<=this.options.ecmaVersion){this.next();var i=this.start,s=this.startLoc,l=[],d=!0,c=!1,u=new DestructuringErrors,p=this.yieldPos,m=this.awaitPos,g;for(this.yieldPos=0,this.awaitPos=0;this.type!==y.parenR;)if(d?d=!1:t.expect(y.comma),a&&t.afterTrailingComma(y.parenR,!0)){c=!0;break}else if(t.type===y.ellipsis){g=t.start,l.push(t.parseParenItem(t.parseRestBinding())),t.type===y.comma&&t.raise(t.start,'Comma is not permitted after the rest element');break}else l.push(t.parseMaybeAssign(!1,u,t.parseParenItem));var h=this.start,f=this.startLoc;if(this.expect(y.parenR),e&&!this.canInsertSemicolon()&&this.eat(y.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=m,this.parseParenArrowList(n,r,l);(!l.length||c)&&this.unexpected(this.lastTokStart),g&&this.unexpected(g),this.checkExpressionErrors(u,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=m||this.awaitPos,1<l.length?(o=this.startNodeAt(i,s),o.expressions=l,this.finishNodeAt(o,'SequenceExpression',h,f)):o=l[0]}else o=this.parseParenExpression();if(this.options.preserveParens){var _=this.startNodeAt(n,r);return _.expression=o,this.finishNode(_,'ParenthesizedExpression')}return o},U.parseParenItem=function(e){return e},U.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var G=[];U.parseNew=function(){var e=this.startNode(),t=this.parseIdent(!0);if(6<=this.options.ecmaVersion&&this.eat(y.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),('target'!==e.property.name||n)&&this.raiseRecoverable(e.property.start,'The only valid meta property for new is new.target'),this.inFunction||this.raiseRecoverable(e.start,'new.target can only be used in functions'),this.finishNode(e,'MetaProperty')}var r=this.start,a=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,a,!0),e.arguments=this.eat(y.parenL)?this.parseExprList(y.parenR,8<=this.options.ecmaVersion,!1):G,this.finishNode(e,'NewExpression')},U.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===y.invalidTemplate?(!t&&this.raiseRecoverable(this.start,'Bad escape sequence in untagged template literal'),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,'\n'),cooked:this.value},this.next(),n.tail=this.type===y.backQuote,this.finishNode(n,'TemplateElement')},U.parseTemplate=function(e){var t=this;void 0===e&&(e={});var n=e.isTagged;void 0===n&&(n=!1);var r=this.startNode();this.next(),r.expressions=[];var a=this.parseTemplateElement({isTagged:n});for(r.quasis=[a];!a.tail;)t.type===y.eof&&t.raise(t.pos,'Unterminated template literal'),t.expect(y.dollarBraceL),r.expressions.push(t.parseExpression()),t.expect(y.braceR),r.quasis.push(a=t.parseTemplateElement({isTagged:n}));return this.next(),this.finishNode(r,'TemplateLiteral')},U.isAsyncProp=function(e){return!e.computed&&'Identifier'===e.key.type&&'async'===e.key.name&&(this.type===y.name||this.type===y.num||this.type===y.string||this.type===y.bracketL||this.type.keyword||9<=this.options.ecmaVersion&&this.type===y.star)&&!E.test(this.input.slice(this.lastTokEnd,this.start))},U.parseObj=function(e,t){var n=this,r=this.startNode(),a=!0,o={};for(r.properties=[],this.next();!this.eat(y.braceR);){if(!!a)a=!1;else if(n.expect(y.comma),n.afterTrailingComma(y.braceR))break;var i=n.parseProperty(e,t);e||n.checkPropClash(i,o,t),r.properties.push(i)}return this.finishNode(r,e?'ObjectPattern':'ObjectExpression')},U.parseProperty=function(e,t){var n=this.startNode(),r,a,o,i;if(9<=this.options.ecmaVersion&&this.eat(y.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===y.comma&&this.raise(this.start,'Comma is not permitted after the rest element'),this.finishNode(n,'RestElement')):(this.type===y.parenL&&t&&(0>t.parenthesizedAssign&&(t.parenthesizedAssign=this.start),0>t.parenthesizedBind&&(t.parenthesizedBind=this.start)),n.argument=this.parseMaybeAssign(!1,t),this.type===y.comma&&t&&0>t.trailingComma&&(t.trailingComma=this.start),this.finishNode(n,'SpreadElement'));6<=this.options.ecmaVersion&&(n.method=!1,n.shorthand=!1,(e||t)&&(o=this.start,i=this.startLoc),!e&&(r=this.eat(y.star)));var s=this.containsEsc;return this.parsePropertyName(n),e||s||!(8<=this.options.ecmaVersion)||r||!this.isAsyncProp(n)?a=!1:(a=!0,r=9<=this.options.ecmaVersion&&this.eat(y.star),this.parsePropertyName(n,t)),this.parsePropertyValue(n,e,r,a,o,i,t,s),this.finishNode(n,'Property')},U.parsePropertyValue=function(e,t,n,r,a,o,i,s){if((n||r)&&this.type===y.colon&&this.unexpected(),this.eat(y.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,i),e.kind='init';else if(6<=this.options.ecmaVersion&&this.type===y.parenL)t&&this.unexpected(),e.kind='init',e.method=!0,e.value=this.parseMethod(n,r);else if(!t&&!s&&5<=this.options.ecmaVersion&&!e.computed&&'Identifier'===e.key.type&&('get'===e.key.name||'set'===e.key.name)&&this.type!==y.comma&&this.type!==y.braceR){(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l='get'===e.kind?0:1;if(e.value.params.length!==l){var d=e.value.start;'get'===e.kind?this.raiseRecoverable(d,'getter should have no params'):this.raiseRecoverable(d,'setter should have exactly one param')}else'set'===e.kind&&'RestElement'===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,'Setter cannot use rest params')}else 6<=this.options.ecmaVersion&&!e.computed&&'Identifier'===e.key.type?(this.checkUnreserved(e.key),e.kind='init',t?e.value=this.parseMaybeDefault(a,o,e.key):this.type===y.eq&&i?(0>i.shorthandAssign&&(i.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,o,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()},U.parsePropertyName=function(e){if(6<=this.options.ecmaVersion){if(this.eat(y.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(y.bracketR),e.key;e.computed=!1}return e.key=this.type===y.num||this.type===y.string?this.parseExprAtom():this.parseIdent(!0)},U.initFunction=function(e){e.id=null,6<=this.options.ecmaVersion&&(e.generator=!1,e.expression=!1),8<=this.options.ecmaVersion&&(e.async=!1)},U.parseMethod=function(e,t){var n=this.startNode(),r=this.inGenerator,a=this.inAsync,o=this.yieldPos,i=this.awaitPos,s=this.inFunction;return this.initFunction(n),6<=this.options.ecmaVersion&&(n.generator=e),8<=this.options.ecmaVersion&&(n.async=!!t),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.enterFunctionScope(),this.expect(y.parenL),n.params=this.parseBindingList(y.parenR,!1,8<=this.options.ecmaVersion),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=a,this.yieldPos=o,this.awaitPos=i,this.inFunction=s,this.finishNode(n,'FunctionExpression')},U.parseArrowExpression=function(e,t,n){var r=this.inGenerator,a=this.inAsync,o=this.yieldPos,i=this.awaitPos,s=this.inFunction;return this.enterFunctionScope(),this.initFunction(e),8<=this.options.ecmaVersion&&(e.async=!!n),this.inGenerator=!1,this.inAsync=e.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0),this.inGenerator=r,this.inAsync=a,this.yieldPos=o,this.awaitPos=i,this.inFunction=s,this.finishNode(e,'ArrowFunctionExpression')},U.parseFunctionBody=function(e,t){var n=t&&this.type!==y.braceL,r=this.strict,a=!1;if(n)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=7<=this.options.ecmaVersion&&!this.isSimpleParamList(e.params);(!r||o)&&(a=this.strictDirective(this.end),a&&o&&this.raiseRecoverable(e.start,'Illegal \'use strict\' directive in function with non-simple parameter list'));var i=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(e,!r&&!a&&!t&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=i}this.exitFunctionScope(),this.strict&&e.id&&this.checkLVal(e.id,'none'),this.strict=r},U.isSimpleParamList=function(e){for(var t=0,n=e,r;t<n.length;t+=1)if(r=n[t],'Identifier'!==r.type)return!1;return!0},U.checkParams=function(e,t){for(var n=this,r={},a=0,o=e.params,i;a<o.length;a+=1)i=o[a],n.checkLVal(i,'var',t?null:r)},U.parseExprList=function(e,t,n,r){for(var a=this,o=[],i=!0;!this.eat(e);){if(!!i)i=!1;else if(a.expect(y.comma),t&&a.afterTrailingComma(e))break;var s=void 0;n&&a.type===y.comma?s=null:a.type===y.ellipsis?(s=a.parseSpread(r),r&&a.type===y.comma&&0>r.trailingComma&&(r.trailingComma=a.start)):s=a.parseMaybeAssign(!1,r),o.push(s)}return o},U.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&'yield'===r&&this.raiseRecoverable(t,'Can not use \'yield\' as identifier inside a generator'),this.inAsync&&'await'===r&&this.raiseRecoverable(t,'Can not use \'await\' as identifier inside an async function'),this.isKeyword(r)&&this.raise(t,'Unexpected keyword \''+r+'\''),!(6>this.options.ecmaVersion&&-1!==this.input.slice(t,n).indexOf('\\'))){var a=this.strict?this.reservedWordsStrict:this.reservedWords;a.test(r)&&(!this.inAsync&&'await'===r&&this.raiseRecoverable(t,'Can not use keyword \'await\' outside an async function'),this.raiseRecoverable(t,'The keyword \''+r+'\' is reserved'))}},U.parseIdent=function(e){var t=this.startNode();return e&&'never'===this.options.allowReserved&&(e=!1),this.type===y.name?t.name=this.value:this.type.keyword?(t.name=this.type.keyword,('class'===t.name||'function'===t.name)&&(this.lastTokEnd!==this.lastTokStart+1||46!==this.input.charCodeAt(this.lastTokStart))&&this.context.pop()):this.unexpected(),this.next(),this.finishNode(t,'Identifier'),e||this.checkUnreserved(t),t},U.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===y.semi||this.canInsertSemicolon()||this.type!==y.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(y.star),e.argument=this.parseMaybeAssign()),this.finishNode(e,'YieldExpression')},U.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,'AwaitExpression')};var V=M.prototype;V.raise=function(e,t){var n=getLineInfo(this.input,e);t+=' ('+n.line+':'+n.column+')';var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r},V.raiseRecoverable=V.raise,V.curPosition=function(){if(this.options.locations)return new R(this.curLine,this.pos-this.lineStart)};var H=M.prototype,z=Object.assign||function(e){for(var t=[],n=arguments.length-1;0<n--;)t[n]=arguments[n+1];for(var r=0,a=t,o;r<a.length;r+=1)for(var i in o=a[r],o)has(o,i)&&(e[i]=o[i]);return e};H.enterFunctionScope=function(){this.scopeStack.push({var:{},lexical:{},childVar:{},parentLexical:{}})},H.exitFunctionScope=function(){this.scopeStack.pop()},H.enterLexicalScope=function(){var e=this.scopeStack[this.scopeStack.length-1],t={var:{},lexical:{},childVar:{},parentLexical:{}};this.scopeStack.push(t),z(t.parentLexical,e.lexical,e.parentLexical)},H.exitLexicalScope=function(){var e=this.scopeStack.pop(),t=this.scopeStack[this.scopeStack.length-1];z(t.childVar,e.var,e.childVar)},H.canDeclareVarName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.parentLexical,e)},H.canDeclareLexicalName=function(e){var t=this.scopeStack[this.scopeStack.length-1];return!has(t.lexical,e)&&!has(t.var,e)&&!has(t.childVar,e)},H.declareVarName=function(e){this.scopeStack[this.scopeStack.length-1].var[e]=!0},H.declareLexicalName=function(e){this.scopeStack[this.scopeStack.length-1].lexical[e]=!0};var W=function Node(e,t,n){this.type='',this.start=t,this.end=0,e.options.locations&&(this.loc=new F(e,n)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])},$=M.prototype;$.startNode=function(){return new W(this,this.start,this.startLoc)},$.startNodeAt=function(e,t){return new W(this,e,t)},$.finishNode=function(e,t){return finishNodeAt.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},$.finishNodeAt=function(e,t,n,r){return finishNodeAt.call(this,e,t,n,r)};var j=function TokContext(e,t,n,r,a){this.token=e,this.isExpr=!!t,this.preserveSpace=!!n,this.override=r,this.generator=!!a},X={b_stat:new j('{',!1),b_expr:new j('{',!0),b_tmpl:new j('${',!1),p_stat:new j('(',!1),p_expr:new j('(',!0),q_tmpl:new j('`',!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new j('function',!1),f_expr:new j('function',!0),f_expr_gen:new j('function',!0,!1,null,!0),f_gen:new j('function',!1,!1,null,!0)},K=M.prototype;K.initialContext=function(){return[X.b_stat]},K.braceIsBlock=function(e){var t=this.curContext();return t===X.f_expr||t===X.f_stat||(e===y.colon&&(t===X.b_stat||t===X.b_expr)?!t.isExpr:e===y._return||e===y.name&&this.exprAllowed?E.test(this.input.slice(this.lastTokEnd,this.start)):e===y._else||e===y.semi||e===y.eof||e===y.parenR||e===y.arrow||(e===y.braceL?t===X.b_stat:e!==y._var&&e!==y.name&&!this.exprAllowed))},K.inGeneratorContext=function(){for(var e=this,t=this.context.length-1,n;1<=t;t--)if(n=e.context[t],'function'===n.token)return n.generator;return!1},K.updateContext=function(e){var t=this.type,n;t.keyword&&e===y.dot?this.exprAllowed=!1:(n=t.updateContext)?n.call(this,e):this.exprAllowed=t.beforeExpr},y.parenR.updateContext=y.braceR.updateContext=function(){if(1===this.context.length)return void(this.exprAllowed=!0);var e=this.context.pop();e===X.b_stat&&'function'===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr},y.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?X.b_stat:X.b_expr),this.exprAllowed=!0},y.dollarBraceL.updateContext=function(){this.context.push(X.b_tmpl),this.exprAllowed=!0},y.parenL.updateContext=function(e){var t=e===y._if||e===y._for||e===y._with||e===y._while;this.context.push(t?X.p_stat:X.p_expr),this.exprAllowed=!0},y.incDec.updateContext=function(){},y._function.updateContext=y._class.updateContext=function(e){e.beforeExpr&&e!==y.semi&&e!==y._else&&(e!==y.colon&&e!==y.braceL||this.curContext()!==X.b_stat)?this.context.push(X.f_expr):this.context.push(X.f_stat),this.exprAllowed=!1},y.backQuote.updateContext=function(){this.curContext()===X.q_tmpl?this.context.pop():this.context.push(X.q_tmpl),this.exprAllowed=!1},y.star.updateContext=function(e){if(e===y._function){var t=this.context.length-1;this.context[t]=this.context[t]===X.f_expr?X.f_expr_gen:X.f_gen}this.exprAllowed=!0},y.name.updateContext=function(e){var t=!1;6<=this.options.ecmaVersion&&e!==y.dot&&('of'===this.value&&!this.exprAllowed||'yield'===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var Y={$LONE:['ASCII','ASCII_Hex_Digit','AHex','Alphabetic','Alpha','Any','Assigned','Bidi_Control','Bidi_C','Bidi_Mirrored','Bidi_M','Case_Ignorable','CI','Cased','Changes_When_Casefolded','CWCF','Changes_When_Casemapped','CWCM','Changes_When_Lowercased','CWL','Changes_When_NFKC_Casefolded','CWKCF','Changes_When_Titlecased','CWT','Changes_When_Uppercased','CWU','Dash','Default_Ignorable_Code_Point','DI','Deprecated','Dep','Diacritic','Dia','Emoji','Emoji_Component','Emoji_Modifier','Emoji_Modifier_Base','Emoji_Presentation','Extender','Ext','Grapheme_Base','Gr_Base','Grapheme_Extend','Gr_Ext','Hex_Digit','Hex','IDS_Binary_Operator','IDSB','IDS_Trinary_Operator','IDST','ID_Continue','IDC','ID_Start','IDS','Ideographic','Ideo','Join_Control','Join_C','Logical_Order_Exception','LOE','Lowercase','Lower','Math','Noncharacter_Code_Point','NChar','Pattern_Syntax','Pat_Syn','Pattern_White_Space','Pat_WS','Quotation_Mark','QMark','Radical','Regional_Indicator','RI','Sentence_Terminal','STerm','Soft_Dotted','SD','Terminal_Punctuation','Term','Unified_Ideograph','UIdeo','Uppercase','Upper','Variation_Selector','VS','White_Space','space','XID_Continue','XIDC','XID_Start','XIDS'],General_Category:['Cased_Letter','LC','Close_Punctuation','Pe','Connector_Punctuation','Pc','Control','Cc','cntrl','Currency_Symbol','Sc','Dash_Punctuation','Pd','Decimal_Number','Nd','digit','Enclosing_Mark','Me','Final_Punctuation','Pf','Format','Cf','Initial_Punctuation','Pi','Letter','L','Letter_Number','Nl','Line_Separator','Zl','Lowercase_Letter','Ll','Mark','M','Combining_Mark','Math_Symbol','Sm','Modifier_Letter','Lm','Modifier_Symbol','Sk','Nonspacing_Mark','Mn','Number','N','Open_Punctuation','Ps','Other','C','Other_Letter','Lo','Other_Number','No','Other_Punctuation','Po','Other_Symbol','So','Paragraph_Separator','Zp','Private_Use','Co','Punctuation','P','punct','Separator','Z','Space_Separator','Zs','Spacing_Mark','Mc','Surrogate','Cs','Symbol','S','Titlecase_Letter','Lt','Unassigned','Cn','Uppercase_Letter','Lu'],Script:['Adlam','Adlm','Ahom','Anatolian_Hieroglyphs','Hluw','Arabic','Arab','Armenian','Armn','Avestan','Avst','Balinese','Bali','Bamum','Bamu','Bassa_Vah','Bass','Batak','Batk','Bengali','Beng','Bhaiksuki','Bhks','Bopomofo','Bopo','Brahmi','Brah','Braille','Brai','Buginese','Bugi','Buhid','Buhd','Canadian_Aboriginal','Cans','Carian','Cari','Caucasian_Albanian','Aghb','Chakma','Cakm','Cham','Cherokee','Cher','Common','Zyyy','Coptic','Copt','Qaac','Cuneiform','Xsux','Cypriot','Cprt','Cyrillic','Cyrl','Deseret','Dsrt','Devanagari','Deva','Duployan','Dupl','Egyptian_Hieroglyphs','Egyp','Elbasan','Elba','Ethiopic','Ethi','Georgian','Geor','Glagolitic','Glag','Gothic','Goth','Grantha','Gran','Greek','Grek','Gujarati','Gujr','Gurmukhi','Guru','Han','Hani','Hangul','Hang','Hanunoo','Hano','Hatran','Hatr','Hebrew','Hebr','Hiragana','Hira','Imperial_Aramaic','Armi','Inherited','Zinh','Qaai','Inscriptional_Pahlavi','Phli','Inscriptional_Parthian','Prti','Javanese','Java','Kaithi','Kthi','Kannada','Knda','Katakana','Kana','Kayah_Li','Kali','Kharoshthi','Khar','Khmer','Khmr','Khojki','Khoj','Khudawadi','Sind','Lao','Laoo','Latin','Latn','Lepcha','Lepc','Limbu','Limb','Linear_A','Lina','Linear_B','Linb','Lisu','Lycian','Lyci','Lydian','Lydi','Mahajani','Mahj','Malayalam','Mlym','Mandaic','Mand','Manichaean','Mani','Marchen','Marc','Masaram_Gondi','Gonm','Meetei_Mayek','Mtei','Mende_Kikakui','Mend','Meroitic_Cursive','Merc','Meroitic_Hieroglyphs','Mero','Miao','Plrd','Modi','Mongolian','Mong','Mro','Mroo','Multani','Mult','Myanmar','Mymr','Nabataean','Nbat','New_Tai_Lue','Talu','Newa','Nko','Nkoo','Nushu','Nshu','Ogham','Ogam','Ol_Chiki','Olck','Old_Hungarian','Hung','Old_Italic','Ital','Old_North_Arabian','Narb','Old_Permic','Perm','Old_Persian','Xpeo','Old_South_Arabian','Sarb','Old_Turkic','Orkh','Oriya','Orya','Osage','Osge','Osmanya','Osma','Pahawh_Hmong','Hmng','Palmyrene','Palm','Pau_Cin_Hau','Pauc','Phags_Pa','Phag','Phoenician','Phnx','Psalter_Pahlavi','Phlp','Rejang','Rjng','Runic','Runr','Samaritan','Samr','Saurashtra','Saur','Sharada','Shrd','Shavian','Shaw','Siddham','Sidd','SignWriting','Sgnw','Sinhala','Sinh','Sora_Sompeng','Sora','Soyombo','Soyo','Sundanese','Sund','Syloti_Nagri','Sylo','Syriac','Syrc','Tagalog','Tglg','Tagbanwa','Tagb','Tai_Le','Tale','Tai_Tham','Lana','Tai_Viet','Tavt','Takri','Takr','Tamil','Taml','Tangut','Tang','Telugu','Telu','Thaana','Thaa','Thai','Tibetan','Tibt','Tifinagh','Tfng','Tirhuta','Tirh','Ugaritic','Ugar','Vai','Vaii','Warang_Citi','Wara','Yi','Yiii','Zanabazar_Square','Zanb']};Array.prototype.push.apply(Y.$LONE,Y.General_Category),Y.gc=Y.General_Category,Y.sc=Y.Script_Extensions=Y.scx=Y.Script;var q=M.prototype,Z=function RegExpValidationState(e){this.parser=e,this.validFlags='gim'+(6<=e.options.ecmaVersion?'uy':'')+(9<=e.options.ecmaVersion?'s':''),this.source='',this.flags='',this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue='',this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Z.prototype.reset=function reset(e,t,n){var r=-1!==n.indexOf('u');this.start=0|e,this.source=t+'',this.flags=n,this.switchU=r&&6<=this.parser.options.ecmaVersion,this.switchN=r&&9<=this.parser.options.ecmaVersion},Z.prototype.raise=function raise(e){this.parser.raiseRecoverable(this.start,'Invalid regular expression: /'+this.source+'/: '+e)},Z.prototype.at=function at(e){var t=this.source,n=t.length;if(e>=n)return-1;var r=t.charCodeAt(e);return!this.switchU||55295>=r||57344<=r||e+1>=n?r:(r<<10)+t.charCodeAt(e+1)-56613888},Z.prototype.nextIndex=function nextIndex(e){var t=this.source,n=t.length;if(e>=n)return n;var r=t.charCodeAt(e);return!this.switchU||55295>=r||57344<=r||e+1>=n?e+1:e+2},Z.prototype.current=function current(){return this.at(this.pos)},Z.prototype.lookahead=function lookahead(){return this.at(this.nextIndex(this.pos))},Z.prototype.advance=function advance(){this.pos=this.nextIndex(this.pos)},Z.prototype.eat=function eat(e){return this.current()===e&&(this.advance(),!0)},q.validateRegExpFlags=function(e){for(var t=this,n=e.validFlags,r=e.flags,a=0,o;a<r.length;a++)o=r.charAt(a),-1===n.indexOf(o)&&t.raise(e.start,'Invalid regular expression flag'),-1<r.indexOf(o,a+1)&&t.raise(e.start,'Duplicate regular expression flag')},q.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&9<=this.options.ecmaVersion&&0<e.groupNames.length&&(e.switchN=!0,this.regexp_pattern(e))},q.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue='',e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise('Unmatched \')\''),(e.eat(93)||e.eat(125))&&e.raise('Lone quantifier brackets')),e.maxBackReference>e.numCapturingParens&&e.raise('Invalid escape');for(var t=0,n=e.backReferenceNames,r;t<n.length;t+=1)r=n[t],-1===e.groupNames.indexOf(r)&&e.raise('Invalid named capture referenced')},q.regexp_disjunction=function(e){var t=this;for(this.regexp_alternative(e);e.eat(124);)t.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise('Nothing to repeat'),e.eat(123)&&e.raise('Lone quantifier brackets')},q.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););},q.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise('Invalid quantifier'),!0):(e.switchU?!!this.regexp_eatAtom(e):!!this.regexp_eatExtendedAtom(e))&&(this.regexp_eatQuantifier(e),!0)},q.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(9<=this.options.ecmaVersion&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise('Unterminated group'),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1},q.regexp_eatQuantifier=function(e,t){return void 0===t&&(t=!1),!!this.regexp_eatQuantifierPrefix(e,t)&&(e.eat(63),!0)},q.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)},q.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,a=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(a=e.lastIntValue),e.eat(125)))return-1!==a&&a<r&&!t&&e.raise('numbers out of order in {} quantifier'),!0;e.switchU&&!t&&e.raise('Incomplete quantifier'),e.pos=n}return!1},q.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)},q.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1},q.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise('Unterminated group')}e.pos=t}return!1},q.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(9<=this.options.ecmaVersion?this.regexp_groupSpecifier(e):63===e.current()&&e.raise('Invalid group'),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise('Unterminated group')}return!1},q.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)},q.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise('Nothing to repeat'),!1},q.regexp_eatSyntaxCharacter=function(e){var t=e.current();return!!isSyntaxCharacter(t)&&(e.lastIntValue=t,e.advance(),!0)},q.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;-1!==(n=e.current())&&!isSyntaxCharacter(n);)e.advance();return e.pos!==t},q.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return!(-1===t||36===t||40<=t&&43>=t||46===t||63===t||91===t||94===t||124===t)&&(e.advance(),!0)},q.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e))return-1!==e.groupNames.indexOf(e.lastStringValue)&&e.raise('Duplicate capture group name'),void e.groupNames.push(e.lastStringValue);e.raise('Invalid group')}},q.regexp_eatGroupName=function(e){if(e.lastStringValue='',e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise('Invalid capture group name')}return!1},q.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue='',this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=codePointToString$1(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=codePointToString$1(e.lastIntValue);return!0}return!1},q.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=e.current();return(e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierStart(n))?(e.lastIntValue=n,!0):(e.pos=t,!1)},q.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=e.current();return(e.advance(),92===n&&this.regexp_eatRegExpUnicodeEscapeSequence(e)&&(n=e.lastIntValue),isRegExpIdentifierPart(n))?(e.lastIntValue=n,!0):(e.pos=t,!1)},q.regexp_eatAtomEscape=function(e){return!!(this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e))||(e.switchU&&(99===e.current()&&e.raise('Invalid unicode escape'),e.raise('Invalid escape')),!1)},q.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var r=e.lastIntValue;if(e.switchU)return r>e.maxBackReference&&(e.maxBackReference=r),!0;if(r<=e.numCapturingParens)return!0;e.pos=t}return!1},q.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise('Invalid named reference')}return!1},q.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)},q.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1},q.regexp_eatZero=function(e){return!(48!==e.current()||isDecimalDigit(e.lookahead()))&&(e.lastIntValue=0,e.advance(),!0)},q.regexp_eatControlEscape=function(e){var t=e.current();return 116===t?(e.lastIntValue=9,e.advance(),!0):110===t?(e.lastIntValue=10,e.advance(),!0):118===t?(e.lastIntValue=11,e.advance(),!0):102===t?(e.lastIntValue=12,e.advance(),!0):114===t&&(e.lastIntValue=13,e.advance(),!0)},q.regexp_eatControlLetter=function(e){var t=e.current();return!!isControlLetter(t)&&(e.lastIntValue=t%32,e.advance(),!0)},q.regexp_eatRegExpUnicodeEscapeSequence=function(e){var t=e.pos;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var n=e.lastIntValue;if(e.switchU&&55296<=n&&56319>=n){var r=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(56320<=a&&57343>=a)return e.lastIntValue=1024*(n-55296)+(a-56320)+65536,!0}e.pos=r,e.lastIntValue=n}return!0}if(e.switchU&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&isValidUnicode(e.lastIntValue))return!0;e.switchU&&e.raise('Invalid unicode escape'),e.pos=t}return!1},q.regexp_eatIdentityEscape=function(e){if(e.switchU)return!!this.regexp_eatSyntaxCharacter(e)||!!e.eat(47)&&(e.lastIntValue=47,!0);var t=e.current();return!(99===t||e.switchN&&107===t)&&(e.lastIntValue=t,e.advance(),!0)},q.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(49<=t&&57>=t){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while(48<=(t=e.current())&&57>=t);return!0}return!1},q.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(isCharacterClassEscape(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&9<=this.options.ecmaVersion&&(80===t||112===t)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise('Invalid property name')}return!1},q.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var a=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,a),!0}return!1},q.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Y.hasOwnProperty(t)&&-1!==Y[t].indexOf(n)||e.raise('Invalid property name')},q.regexp_validateUnicodePropertyNameOrValue=function(e,t){-1===Y.$LONE.indexOf(t)&&e.raise('Invalid property name')},q.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue='';isUnicodePropertyNameCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return''!==e.lastStringValue},q.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue='';isUnicodePropertyValueCharacter(t=e.current());)e.lastStringValue+=codePointToString$1(t),e.advance();return''!==e.lastStringValue},q.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)},q.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise('Unterminated character class')}return!1},q.regexp_classRanges=function(e){for(var t=this,n;this.regexp_eatClassAtom(e);)if(n=e.lastIntValue,e.eat(45)&&t.regexp_eatClassAtom(e)){var r=e.lastIntValue;e.switchU&&(-1===n||-1===r)&&e.raise('Invalid character class'),-1!==n&&-1!==r&&n>r&&e.raise('Range out of order in character class')}},q.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(99===n||isOctalDigit(n))&&e.raise('Invalid class escape'),e.raise('Invalid escape')}e.pos=t}var r=e.current();return 93!==r&&(e.lastIntValue=r,e.advance(),!0)},q.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)},q.regexp_eatClassControlLetter=function(e){var t=e.current();return!!(isDecimalDigit(t)||95===t)&&(e.lastIntValue=t%32,e.advance(),!0)},q.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise('Invalid escape'),e.pos=t}return!1},q.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isDecimalDigit(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t},q.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;isHexDigit(n=e.current());)e.lastIntValue=16*e.lastIntValue+hexToInt(n),e.advance();return e.pos!==t},q.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;e.lastIntValue=3>=t&&this.regexp_eatOctalDigit(e)?64*t+8*n+e.lastIntValue:8*t+n}else e.lastIntValue=t;return!0}return!1},q.regexp_eatOctalDigit=function(e){var t=e.current();return isOctalDigit(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)},q.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0,a;r<t;++r){if(a=e.current(),!isHexDigit(a))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+hexToInt(a),e.advance()}return!0};var Q=function Token(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new F(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])},J=M.prototype;J.next=function(){this.options.onToken&&this.options.onToken(new Q(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},J.getToken=function(){return this.next(),new Q(this)},'undefined'!=typeof Symbol&&(J[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===y.eof,value:t}}}}),J.curContext=function(){return this.context[this.context.length-1]},J.nextToken=function(){var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(y.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},J.readToken=function(e){return isIdentifierStart(e,6<=this.options.ecmaVersion)||92===e?this.readWord():this.getTokenFromCode(e)},J.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(55295>=e||57344<=e)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},J.skipBlockComment=function(){var e=this,t=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf('*/',this.pos+=2);if(-1===r&&this.raise(this.pos-2,'Unterminated comment'),this.pos=r+2,this.options.locations){x.lastIndex=n;for(var a;(a=x.exec(this.input))&&a.index<this.pos;)++e.curLine,e.lineStart=a.index+a[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,t,this.curPosition())},J.skipLineComment=function(e){for(var t=this,n=this.pos,r=this.options.onComment&&this.curPosition(),a=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!isNewLine(a);)a=t.input.charCodeAt(++t.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(n+e,this.pos),n,this.pos,r,this.curPosition())},J.skipSpace=function(){var e=this;loop:for(;this.pos<this.input.length;){var t=e.input.charCodeAt(e.pos);switch(t){case 32:case 160:++e.pos;break;case 13:10===e.input.charCodeAt(e.pos+1)&&++e.pos;case 10:case 8232:case 8233:++e.pos,e.options.locations&&(++e.curLine,e.lineStart=e.pos);break;case 47:switch(e.input.charCodeAt(e.pos+1)){case 42:e.skipBlockComment();break;case 47:e.skipLineComment(2);break;default:break loop;}break;default:if(8<t&&14>t||5760<=t&&A.test(r(t)))++e.pos;else break loop;}}},J.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)},J.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(48<=e&&57>=e)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return 6<=this.options.ecmaVersion&&46===e&&46===t?(this.pos+=3,this.finishToken(y.ellipsis)):(++this.pos,this.finishToken(y.dot))},J.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(y.assign,2):this.finishOp(y.slash,1)},J.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=42===e?y.star:y.modulo;return 7<=this.options.ecmaVersion&&42===e&&42===t&&(++n,r=y.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(y.assign,n+1):this.finishOp(r,n)},J.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?y.logicalOR:y.logicalAND,2):61===t?this.finishOp(y.assign,2):this.finishOp(124===e?y.bitwiseOR:y.bitwiseAND,1)},J.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(y.assign,2):this.finishOp(y.bitwiseXOR,1)},J.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?45===t&&!this.inModule&&62===this.input.charCodeAt(this.pos+2)&&(0===this.lastTokEnd||E.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(y.incDec,2):61===t?this.finishOp(y.assign,2):this.finishOp(y.plusMin,1)},J.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(y.assign,n+1):this.finishOp(y.bitShift,n)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(n=2),this.finishOp(y.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},J.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(y.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&6<=this.options.ecmaVersion?(this.pos+=2,this.finishToken(y.arrow)):this.finishOp(61===e?y.eq:y.prefix,1)},J.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(y.parenL);case 41:return++this.pos,this.finishToken(y.parenR);case 59:return++this.pos,this.finishToken(y.semi);case 44:return++this.pos,this.finishToken(y.comma);case 91:return++this.pos,this.finishToken(y.bracketL);case 93:return++this.pos,this.finishToken(y.bracketR);case 123:return++this.pos,this.finishToken(y.braceL);case 125:return++this.pos,this.finishToken(y.braceR);case 58:return++this.pos,this.finishToken(y.colon);case 63:return++this.pos,this.finishToken(y.question);case 96:if(6>this.options.ecmaVersion)break;return++this.pos,this.finishToken(y.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(6<=this.options.ecmaVersion){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(y.prefix,1);}this.raise(this.pos,'Unexpected character \''+codePointToString(e)+'\'')},J.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)},J.readRegexp=function(){for(var e=this,t=this.pos,n,r;;){e.pos>=e.input.length&&e.raise(t,'Unterminated regular expression');var a=e.input.charAt(e.pos);if(E.test(a)&&e.raise(t,'Unterminated regular expression'),!n){if('['===a)r=!0;else if(']'===a&&r)r=!1;else if('/'===a&&!r)break;n='\\'===a}else n=!1;++e.pos}var o=this.input.slice(t,this.pos);++this.pos;var i=this.pos,s=this.readWord1();this.containsEsc&&this.unexpected(i);var l=this.regexpState||(this.regexpState=new Z(this));l.reset(t,o,s),this.validateRegExpFlags(l),this.validateRegExpPattern(l);var d=null;try{d=new RegExp(o,s)}catch(t){}return this.finishToken(y.regexp,{pattern:o,flags:s,value:d})},J.readInt=function(t,n){for(var r=this,a=this.pos,o=0,s=0,i=null==n?Infinity:n;s<i;++s){var e=r.input.charCodeAt(r.pos),l=void 0;if(l=97<=e?e-97+10:65<=e?e-65+10:48<=e&&57>=e?e-48:Infinity,l>=t)break;++r.pos,o=o*t+l}return this.pos===a||null!=n&&this.pos-a!==n?null:o},J.readRadixNumber=function(e){this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,'Expected number in radix '+e),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,'Identifier directly after number'),this.finishToken(y.num,t)},J.readNumber=function(e){var t=this.pos;e||null!==this.readInt(10)||this.raise(t,'Invalid number');var n=2<=this.pos-t&&48===this.input.charCodeAt(t);n&&this.strict&&this.raise(t,'Invalid number'),n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1);var r=this.input.charCodeAt(this.pos);46!==r||n||(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),69!==r&&101!==r||n||(r=this.input.charCodeAt(++this.pos),(43===r||45===r)&&++this.pos,null===this.readInt(10)&&this.raise(t,'Invalid number')),isIdentifierStart(this.fullCharCodeAtPos())&&this.raise(this.pos,'Identifier directly after number');var a=this.input.slice(t,this.pos),o=n?parseInt(a,8):parseFloat(a);return this.finishToken(y.num,o)},J.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(123===e){6>this.options.ecmaVersion&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf('}',this.pos)-this.pos),++this.pos,1114111<t&&this.invalidStringToken(n,'Code point out of bounds')}else t=this.readHexChar(4);return t},J.readString=function(e){for(var t=this,n='',r=++this.pos;;){t.pos>=t.input.length&&t.raise(t.start,'Unterminated string constant');var a=t.input.charCodeAt(t.pos);if(a===e)break;92===a?(n+=t.input.slice(r,t.pos),n+=t.readEscapedChar(!1),r=t.pos):(isNewLine(a,10<=t.options.ecmaVersion)&&t.raise(t.start,'Unterminated string constant'),++t.pos)}return n+=this.input.slice(r,this.pos++),this.finishToken(y.string,n)};var ee={};J.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===ee)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1},J.invalidStringToken=function(e,t){if(this.inTemplateElement&&9<=this.options.ecmaVersion)throw ee;else this.raise(e,t)},J.readTmplToken=function(){for(var e=this,t='',n=this.pos;;){e.pos>=e.input.length&&e.raise(e.start,'Unterminated template');var a=e.input.charCodeAt(e.pos);if(96===a||36===a&&123===e.input.charCodeAt(e.pos+1))return e.pos===e.start&&(e.type===y.template||e.type===y.invalidTemplate)?36===a?(e.pos+=2,e.finishToken(y.dollarBraceL)):(++e.pos,e.finishToken(y.backQuote)):(t+=e.input.slice(n,e.pos),e.finishToken(y.template,t));if(92===a)t+=e.input.slice(n,e.pos),t+=e.readEscapedChar(!0),n=e.pos;else if(isNewLine(a)){switch(t+=e.input.slice(n,e.pos),++e.pos,a){case 13:10===e.input.charCodeAt(e.pos)&&++e.pos;case 10:t+='\n';break;default:t+=r(a);}e.options.locations&&(++e.curLine,e.lineStart=e.pos),n=e.pos}else++e.pos}},J.readInvalidTemplateToken=function(){for(var e=this;this.pos<this.input.length;this.pos++)switch(e.input[e.pos]){case'\\':++e.pos;break;case'$':if('{'!==e.input[e.pos+1])break;case'`':return e.finishToken(y.invalidTemplate,e.input.slice(e.start,e.pos));}this.raise(this.start,'Unterminated template')},J.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return'\n';case 114:return'\r';case 120:return r(this.readHexChar(2));case 117:return codePointToString(this.readCodePoint());case 116:return'\t';case 98:return'\b';case 118:return'\x0B';case 102:return'\f';case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),'';default:if(48<=t&&55>=t){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],a=parseInt(n,8);return 255<a&&(n=n.slice(0,-1),a=parseInt(n,8)),this.pos+=n.length-1,t=this.input.charCodeAt(this.pos),('0'!==n||56===t||57===t)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-n.length,e?'Octal literal in template string':'Octal literal in strict mode'),r(a)}return r(t);}},J.readHexChar=function(e){var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,'Bad character escape sequence'),r},J.readWord1=function(){var e=this;this.containsEsc=!1;for(var t='',n=!0,r=this.pos,a=6<=this.options.ecmaVersion,o;this.pos<this.input.length;){if(o=e.fullCharCodeAtPos(),isIdentifierChar(o,a))e.pos+=65535>=o?1:2;else if(92===o){e.containsEsc=!0,t+=e.input.slice(r,e.pos);var i=e.pos;117!==e.input.charCodeAt(++e.pos)&&e.invalidStringToken(e.pos,'Expecting Unicode escape sequence \\uXXXX'),++e.pos;var s=e.readCodePoint();(n?isIdentifierStart:isIdentifierChar)(s,a)||e.invalidStringToken(i,'Invalid Unicode escape'),t+=codePointToString(s),r=e.pos}else break;n=!1}return t+this.input.slice(r,this.pos)},J.readWord=function(){var e=this.readWord1(),t=y.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,'Escape sequence in keyword '+e),t=_[e]),this.finishToken(t,e)};var te='5.7.3',ne,re,ae},"./node_modules/dat.gui/build/dat.gui.module.js":/*!******************************************************!*\
  !*** ./node_modules/dat.gui/build/dat.gui.module.js ***!
  \******************************************************//*! exports provided: color, controllers, dom, gui, GUI, default */function(e,t,n){'use strict';function colorToString(e,t){var n=e.__state.conversionName.toString(),i=o(e.r),r=o(e.g),l=o(e.b),d=e.a,a=o(e.h),c=e.s.toFixed(1),s=e.v.toFixed(1);if(t||'THREE_CHAR_HEX'===n||'SIX_CHAR_HEX'===n){for(var u=e.hex.toString(16);6>u.length;)u='0'+u;return'#'+u}return'CSS_RGB'===n?'rgb('+i+','+r+','+l+')':'CSS_RGBA'===n?'rgba('+i+','+r+','+l+','+d+')':'HEX'===n?'0x'+e.hex.toString(16):'RGB_ARRAY'===n?'['+i+','+r+','+l+']':'RGBA_ARRAY'===n?'['+i+','+r+','+l+','+d+']':'RGB_OBJ'===n?'{r:'+i+',g:'+r+',b:'+l+'}':'RGBA_OBJ'===n?'{r:'+i+',g:'+r+',b:'+l+',a:'+d+'}':'HSV_OBJ'===n?'{h:'+a+',s:'+c+',v:'+s+'}':'HSVA_OBJ'===n?'{h:'+a+',s:'+c+',v:'+s+',a:'+d+'}':'unknown format'}function defineRGBComponent(e,t,n){Object.defineProperty(e,t,{get:function get$$1(){return'RGB'===this.__state.space?this.__state[t]:(A.recalculateRGB(this,t,n),this.__state[t])},set:function set$$1(e){'RGB'!==this.__state.space&&(A.recalculateRGB(this,t,n),this.__state.space='RGB'),this.__state[t]=e}})}function defineHSVComponent(e,t){Object.defineProperty(e,t,{get:function get$$1(){return'HSV'===this.__state.space?this.__state[t]:(A.recalculateHSV(this),this.__state[t])},set:function set$$1(e){'HSV'!==this.__state.space&&(A.recalculateHSV(this),this.__state.space='HSV'),this.__state[t]=e}})}function cssValueToPixels(e){if('0'===e||l.isUndefined(e))return 0;var t=e.match(C);return l.isNull(t)?0:parseFloat(t[1])}function numDecimals(e){var t=e.toString();return-1<t.indexOf('.')?t.length-t.indexOf('.')-1:0}function roundToDecimal(e,t){var n=r(10,t);return o(e*n)/n}function map(e,t,n,r,a){return r+(a-r)*((e-t)/(n-t))}function linearGradient(e,t,n,r){e.style.background='',l.each(B,function(a){e.style.cssText+='background: '+a+'linear-gradient('+t+', '+n+' 0%, '+r+' 100%); '})}function hueGradient(e){e.style.background='',e.style.cssText+='background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);',e.style.cssText+='background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);',e.style.cssText+='background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);'}function addRow(e,t,n){var r=document.createElement('li');return t&&r.appendChild(t),n?e.__ul.insertBefore(r,n):e.__ul.appendChild(r),e.onResize(),r}function removeListeners(e){S.unbind(window,'resize',e.__resizeHandler),e.saveToLocalStorageIfPossible&&S.unbind(window,'unload',e.saveToLocalStorageIfPossible)}function markPresetModified(e,t){var n=e.__preset_select[e.__preset_select.selectedIndex];n.innerHTML=t?n.value+'*':n.value}function augmentController(e,t,n){if(n.__li=t,n.__gui=e,l.extend(n,{options:function options(t){if(1<arguments.length){var r=n.__li.nextElementSibling;return n.remove(),_add(e,n.object,n.property,{before:r,factoryArgs:[l.toArray(arguments)]})}if(l.isArray(t)||l.isObject(t)){var a=n.__li.nextElementSibling;return n.remove(),_add(e,n.object,n.property,{before:a,factoryArgs:[t]})}},name:function name(e){return n.__li.firstElementChild.firstElementChild.innerHTML=e,n},listen:function listen(){return n.__gui.listen(n),n},remove:function remove(){return n.__gui.remove(n),n}}),n instanceof M){var a=new L(n.object,n.property,{min:n.__min,max:n.__max,step:n.__step});l.each(['updateDisplay','onChange','onFinishChange','step','min','max'],function(e){var t=n[e],r=a[e];n[e]=a[e]=function(){var e=Array.prototype.slice.call(arguments);return r.apply(a,e),t.apply(n,e)}}),S.addClass(t,'has-slider'),n.domElement.insertBefore(a.domElement,n.domElement.firstElementChild)}else if(n instanceof L){var o=function r(t){if(l.isNumber(n.__min)&&l.isNumber(n.__max)){var a=n.__li.firstElementChild.firstElementChild.innerHTML,o=-1<n.__gui.__listening.indexOf(n);n.remove();var i=_add(e,n.object,n.property,{before:n.__li.nextElementSibling,factoryArgs:[n.__min,n.__max,n.__step]});return i.name(a),o&&i.listen(),i}return t};n.min=l.compose(o,n.min),n.max=l.compose(o,n.max)}else n instanceof v?(S.bind(t,'click',function(){S.fakeEvent(n.__checkbox,'click')}),S.bind(n.__checkbox,'click',function(t){t.stopPropagation()})):n instanceof I?(S.bind(t,'click',function(){S.fakeEvent(n.__button,'click')}),S.bind(t,'mouseover',function(){S.addClass(n.__button,'hover')}),S.bind(t,'mouseout',function(){S.removeClass(n.__button,'hover')})):n instanceof D&&(S.addClass(t,'color'),n.updateDisplay=l.compose(function(e){return t.style.borderLeftColor=n.__color.toString(),e},n.updateDisplay),n.updateDisplay());n.setValue=l.compose(function(t){return e.getRoot().__preset_select&&n.isModified()&&markPresetModified(e.getRoot(),!0),t},n.setValue)}function recallSavedValue(e,t){var n=e.getRoot(),r=n.__rememberedObjects.indexOf(t.object);if(-1!==r){var a=n.__rememberedObjectIndecesToControllers[r];if(void 0===a&&(a={},n.__rememberedObjectIndecesToControllers[r]=a),a[t.property]=t,n.load&&n.load.remembered){var o=n.load.remembered,i=void 0;if(o[e.preset])i=o[e.preset];else if(o[H])i=o[H];else return;if(i[r]&&void 0!==i[r][t.property]){var s=i[r][t.property];t.initialValue=s,t.setValue(s)}}}}function _add(e,t,n,r){if(void 0===t[n])throw new Error('Object "'+t+'" has no property "'+n+'"');var a;if(r.color)a=new D(t,n);else{var o=[t,n].concat(r.factoryArgs);a=N.apply(e,o)}r.before instanceof b&&(r.before=r.before.__li),recallSavedValue(e,a),S.addClass(a.domElement,'c');var i=document.createElement('span');S.addClass(i,'property-name'),i.innerHTML=a.property;var s=document.createElement('div');s.appendChild(i),s.appendChild(a.domElement);var l=addRow(e,s,r.before);return S.addClass(l,Y.CLASS_CONTROLLER_ROW),a instanceof D?S.addClass(l,'color'):S.addClass(l,h(a.getValue())),augmentController(e,l,a),e.__controllers.push(a),a}function getLocalStorageHash(e,t){return document.location.href+'.'+t}function addPresetOption(e,t,n){var r=document.createElement('option');r.innerHTML=t,r.value=t,e.__preset_select.appendChild(r),n&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function showHideExplain(e,t){t.style.display=e.useLocalStorage?'block':'none'}function addSaveMenu(e){var t=e.__save_row=document.createElement('li');S.addClass(e.domElement,'has-save'),e.__ul.insertBefore(t,e.__ul.firstChild),S.addClass(t,'save-row');var n=document.createElement('span');n.innerHTML='&nbsp;',S.addClass(n,'button gears');var r=document.createElement('span');r.innerHTML='Save',S.addClass(r,'button'),S.addClass(r,'save');var a=document.createElement('span');a.innerHTML='New',S.addClass(a,'button'),S.addClass(a,'save-as');var o=document.createElement('span');o.innerHTML='Revert',S.addClass(o,'button'),S.addClass(o,'revert');var i=e.__preset_select=document.createElement('select');if(e.load&&e.load.remembered?l.each(e.load.remembered,function(t,n){addPresetOption(e,n,n===e.preset)}):addPresetOption(e,H,!1),S.bind(i,'change',function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(i),t.appendChild(n),t.appendChild(r),t.appendChild(a),t.appendChild(o),z){var s=document.getElementById('dg-local-explain'),d=document.getElementById('dg-local-storage'),c=document.getElementById('dg-save-locally');c.style.display='block','true'===localStorage.getItem(getLocalStorageHash(e,'isLocal'))&&d.setAttribute('checked','checked'),showHideExplain(e,s),S.bind(d,'change',function(){e.useLocalStorage=!e.useLocalStorage,showHideExplain(e,s)})}var u=document.getElementById('dg-new-constructor');S.bind(u,'keydown',function(t){t.metaKey&&(67===t.which||67===t.keyCode)&&W.hide()}),S.bind(n,'click',function(){u.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),W.show(),u.focus(),u.select()}),S.bind(r,'click',function(){e.save()}),S.bind(a,'click',function(){var t=prompt('Enter a new preset name.');t&&e.saveAs(t)}),S.bind(o,'click',function(){e.revert()})}function addResizeHandle(t){function drag(r){return r.preventDefault(),t.width+=n-r.clientX,t.onResize(),n=r.clientX,!1}function dragStop(){S.removeClass(t.__closeButton,Y.CLASS_DRAG),S.unbind(window,'mousemove',drag),S.unbind(window,'mouseup',dragStop)}function dragStart(r){return r.preventDefault(),n=r.clientX,S.addClass(t.__closeButton,Y.CLASS_DRAG),S.bind(window,'mousemove',drag),S.bind(window,'mouseup',dragStop),!1}var n;t.__resize_handle=document.createElement('div'),l.extend(t.__resize_handle.style,{width:'6px',marginLeft:'-3px',height:'200px',cursor:'ew-resize',position:'absolute'}),S.bind(t.__resize_handle,'mousedown',dragStart),S.bind(t.__closeButton,'mousedown',dragStart),t.domElement.insertBefore(t.__resize_handle,t.domElement.firstElementChild)}function setWidth(e,t){e.domElement.style.width=t+'px',e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+'px'),e.__closeButton&&(e.__closeButton.style.width=t+'px')}function getCurrentPreset(e,t){var n={};return l.each(e.__rememberedObjects,function(r,a){var o={},i=e.__rememberedObjectIndecesToControllers[a];l.each(i,function(e,n){o[n]=t?e.initialValue:e.getValue()}),n[a]=o}),n}function setPresetSelectIndex(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}function updateDisplays(e){0!==e.length&&P.call(window,function(){updateDisplays(e)}),l.each(e,function(e){e.updateDisplay()})}var r=Math.pow,a=Math.floor,o=Math.round;n.r(t),n.d(t,'color',function(){return q}),n.d(t,'controllers',function(){return Z}),n.d(t,'dom',function(){return Q}),n.d(t,'gui',function(){return J}),n.d(t,'GUI',function(){return ee});var i=Array.prototype.forEach,s=Array.prototype.slice,l={BREAK:{},extend:function extend(e){return this.each(s.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(t[n])||(e[n]=t[n])}.bind(this))},this),e},defaults:function defaults(e){return this.each(s.call(arguments,1),function(t){var n=this.isObject(t)?Object.keys(t):[];n.forEach(function(n){this.isUndefined(e[n])&&(e[n]=t[n])}.bind(this))},this),e},compose:function compose(){var e=s.call(arguments);return function(){for(var t=s.call(arguments),n=e.length-1;0<=n;n--)t=[e[n].apply(this,t)];return t[0]}},each:function each(e,t,n){if(e)if(i&&e.forEach&&e.forEach===i)e.forEach(t,n);else if(e.length===e.length+0){var r=void 0,a=void 0;for(r=0,a=e.length;r<a;r++)if(r in e&&t.call(n,e[r],r)===this.BREAK)return}else for(var o in e)if(t.call(n,e[o],o)===this.BREAK)return},defer:function defer(e){setTimeout(e,0)},debounce:function debounce(e,t,n){var r;return function(){var a=this,o=arguments,i=n||!r;clearTimeout(r),r=setTimeout(function delayed(){r=null,n||e.apply(a,o)},t),i&&e.apply(a,o)}},toArray:function toArray(e){return e.toArray?e.toArray():s.call(e)},isUndefined:function isUndefined(e){return void 0===e},isNull:function isNull(e){return null===e},isNaN:function(e){function isNaN(){return e.apply(this,arguments)}return isNaN.toString=function(){return e.toString()},isNaN}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function isObject(e){return e===Object(e)},isNumber:function isNumber(e){return e===e+0},isString:function isString(e){return e===e+''},isBoolean:function isBoolean(e){return!1===e||!0===e},isFunction:function isFunction(e){return'[object Function]'===Object.prototype.toString.call(e)}},d=[{litmus:l.isString,conversions:{THREE_CHAR_HEX:{read:function read(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:colorToString},SIX_CHAR_HEX:{read:function read(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:'HEX',hex:parseInt('0x'+t[1].toString(),0)}},write:colorToString},CSS_RGB:{read:function read(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:colorToString},CSS_RGBA:{read:function read(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:'RGB',r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:colorToString}}},{litmus:l.isNumber,conversions:{HEX:{read:function read(e){return{space:'HEX',hex:e,conversionName:'HEX'}},write:function write(e){return e.hex}}}},{litmus:l.isArray,conversions:{RGB_ARRAY:{read:function read(e){return 3===e.length&&{space:'RGB',r:e[0],g:e[1],b:e[2]}},write:function write(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function read(e){return 4===e.length&&{space:'RGB',r:e[0],g:e[1],b:e[2],a:e[3]}},write:function write(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:l.isObject,conversions:{RGBA_OBJ:{read:function read(e){return!!(l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b)&&l.isNumber(e.a))&&{space:'RGB',r:e.r,g:e.g,b:e.b,a:e.a}},write:function write(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function read(e){return!!(l.isNumber(e.r)&&l.isNumber(e.g)&&l.isNumber(e.b))&&{space:'RGB',r:e.r,g:e.g,b:e.b}},write:function write(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function read(e){return!!(l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v)&&l.isNumber(e.a))&&{space:'HSV',h:e.h,s:e.s,v:e.v,a:e.a}},write:function write(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function read(e){return!!(l.isNumber(e.h)&&l.isNumber(e.s)&&l.isNumber(e.v))&&{space:'HSV',h:e.h,s:e.s,v:e.v}},write:function write(e){return{h:e.h,s:e.s,v:e.v}}}}}],c=void 0,u=void 0,p=function interpret(){u=!1;var e=1<arguments.length?l.toArray(arguments):arguments[0];return l.each(d,function(t){if(t.litmus(e))return l.each(t.conversions,function(t,n){if(c=t.read(e),!1===u&&!1!==c)return u=c,c.conversionName=n,c.conversion=t,l.BREAK}),l.BREAK}),u},m=void 0,g={hsv_to_rgb:function hsv_to_rgb(e,n,r){var o=a(e/60)%6,i=e/60-a(e/60),s=r*(1-n),l=r*(1-i*n),d=r*(1-(1-i)*n),t=[[r,d,s],[l,r,s],[s,r,d],[s,l,r],[d,s,r],[r,s,l]][o];return{r:255*t[0],g:255*t[1],b:255*t[2]}},rgb_to_hsv:function rgb_to_hsv(e,t,n){var r=Math.min(e,t,n),a=Math.max(e,t,n),o=a-r,i=void 0,l=void 0;if(0!==a)l=o/a;else return{h:NaN,s:0,v:0};return i=e===a?(t-n)/o:t===a?2+(n-e)/o:4+(e-t)/o,i/=6,0>i&&(i+=1),{h:360*i,s:l,v:a/255}},rgb_to_hex:function rgb_to_hex(e,t,n){var r=this.hex_with_component(0,2,e);return r=this.hex_with_component(r,1,t),r=this.hex_with_component(r,0,n),r},component_from_hex:function component_from_hex(e,t){return 255&e>>8*t},hex_with_component:function hex_with_component(e,t,n){return n<<(m=8*t)|e&~(255<<m)}},h='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&'function'==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?'symbol':typeof e},f=function(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')},_=function(){function defineProperties(e,t){for(var n=0,r;n<t.length;n++)r=t[n],r.enumerable=r.enumerable||!1,r.configurable=!0,'value'in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),y=function get(e,t,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(void 0===r){var a=Object.getPrototypeOf(e);return null===a?void 0:get(a,t,n)}if('value'in r)return r.value;var o=r.get;return void 0===o?void 0:o.call(n)},E=function(e,t){if('function'!=typeof t&&null!==t)throw new TypeError('Super expression must either be null or a function, not '+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},x=function(e,t){if(!e)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return t&&('object'==typeof t||'function'==typeof t)?t:e},A=function(){function Color(){if(f(this,Color),this.__state=p.apply(this,arguments),!1===this.__state)throw new Error('Failed to interpret color arguments');this.__state.a=this.__state.a||1}return _(Color,[{key:'toString',value:function toString(){return colorToString(this)}},{key:'toHexString',value:function toHexString(){return colorToString(this,!0)}},{key:'toOriginal',value:function toOriginal(){return this.__state.conversion.write(this)}}]),Color}();A.recalculateRGB=function(e,t,n){if('HEX'===e.__state.space)e.__state[t]=g.component_from_hex(e.__state.hex,n);else if('HSV'===e.__state.space)l.extend(e.__state,g.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v));else throw new Error('Corrupted color state')},A.recalculateHSV=function(e){var t=g.rgb_to_hsv(e.r,e.g,e.b);l.extend(e.__state,{s:t.s,v:t.v}),l.isNaN(t.h)?l.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},A.COMPONENTS=['r','g','b','h','s','v','hex','a'],defineRGBComponent(A.prototype,'r',2),defineRGBComponent(A.prototype,'g',1),defineRGBComponent(A.prototype,'b',0),defineHSVComponent(A.prototype,'h'),defineHSVComponent(A.prototype,'s'),defineHSVComponent(A.prototype,'v'),Object.defineProperty(A.prototype,'a',{get:function get$$1(){return this.__state.a},set:function set$$1(e){this.__state.a=e}}),Object.defineProperty(A.prototype,'hex',{get:function get$$1(){return'HEX'!==!this.__state.space&&(this.__state.hex=g.rgb_to_hex(this.r,this.g,this.b)),this.__state.hex},set:function set$$1(e){this.__state.space='HEX',this.__state.hex=e}});var b=function(){function Controller(e,t){f(this,Controller),this.initialValue=e[t],this.domElement=document.createElement('div'),this.object=e,this.property=t,this.__onChange=void 0,this.__onFinishChange=void 0}return _(Controller,[{key:'onChange',value:function onChange(e){return this.__onChange=e,this}},{key:'onFinishChange',value:function onFinishChange(e){return this.__onFinishChange=e,this}},{key:'setValue',value:function setValue(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:'getValue',value:function getValue(){return this.object[this.property]}},{key:'updateDisplay',value:function updateDisplay(){return this}},{key:'isModified',value:function isModified(){return this.initialValue!==this.getValue()}}]),Controller}(),T={};l.each({HTMLEvents:['change'],MouseEvents:['click','mousemove','mousedown','mouseup','mouseover'],KeyboardEvents:['keydown']},function(e,t){l.each(e,function(n){T[n]=t})});var C=/(\d+(\.\d+)?)px/,S={makeSelectable:function makeSelectable(e,t){void 0===e||void 0===e.style||(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?'auto':'none',e.style.KhtmlUserSelect=t?'auto':'none',e.unselectable=t?'on':'off')},makeFullscreen:function makeFullscreen(e,t,n){var r=n,a=t;l.isUndefined(a)&&(a=!0),l.isUndefined(r)&&(r=!0),e.style.position='absolute',a&&(e.style.left=0,e.style.right=0),r&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function fakeEvent(e,t,n,r){var a=n||{},o=T[t];if(!o)throw new Error('Event type '+t+' not supported.');var i=document.createEvent(o);switch(o){case'MouseEvents':{var s=a.x||a.clientX||0,d=a.y||a.clientY||0;i.initMouseEvent(t,a.bubbles||!1,a.cancelable||!0,window,a.clickCount||1,0,0,s,d,!1,!1,!1,!1,0,null);break}case'KeyboardEvents':{var c=i.initKeyboardEvent||i.initKeyEvent;l.defaults(a,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,a.bubbles||!1,a.cancelable,window,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.keyCode,a.charCode);break}default:{i.initEvent(t,a.bubbles||!1,a.cancelable||!0);break}}l.defaults(i,r),e.dispatchEvent(i)},bind:function bind(e,t,n,r){return e.addEventListener?e.addEventListener(t,n,r||!1):e.attachEvent&&e.attachEvent('on'+t,n),S},unbind:function unbind(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,r||!1):e.detachEvent&&e.detachEvent('on'+t,n),S},addClass:function addClass(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var n=e.className.split(/ +/);-1===n.indexOf(t)&&(n.push(t),e.className=n.join(' ').replace(/^\s+/,'').replace(/\s+$/,''))}return S},removeClass:function removeClass(e,t){if(!t)e.className=void 0;else if(e.className===t)e.removeAttribute('class');else{var n=e.className.split(/ +/),r=n.indexOf(t);-1!==r&&(n.splice(r,1),e.className=n.join(' '))}return S},hasClass:function hasClass(e,t){return new RegExp('(?:^|\\s+)'+t+'(?:\\s+|$)').test(e.className)||!1},getWidth:function getWidth(e){var t=getComputedStyle(e);return cssValueToPixels(t['border-left-width'])+cssValueToPixels(t['border-right-width'])+cssValueToPixels(t['padding-left'])+cssValueToPixels(t['padding-right'])+cssValueToPixels(t.width)},getHeight:function getHeight(e){var t=getComputedStyle(e);return cssValueToPixels(t['border-top-width'])+cssValueToPixels(t['border-bottom-width'])+cssValueToPixels(t['padding-top'])+cssValueToPixels(t['padding-bottom'])+cssValueToPixels(t.height)},getOffset:function getOffset(e){var t=e,n={left:0,top:0};if(t.offsetParent)do n.left+=t.offsetLeft,n.top+=t.offsetTop,t=t.offsetParent;while(t);return n},isActive:function isActive(e){return e===document.activeElement&&(e.type||e.href)}},v=function(e){function BooleanController(e,t){f(this,BooleanController);var n=x(this,(BooleanController.__proto__||Object.getPrototypeOf(BooleanController)).call(this,e,t)),r=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement('input'),n.__checkbox.setAttribute('type','checkbox'),S.bind(n.__checkbox,'change',function onChange(){r.setValue(!r.__prev)},!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return E(BooleanController,e),_(BooleanController,[{key:'setValue',value:function setValue(e){var t=y(BooleanController.prototype.__proto__||Object.getPrototypeOf(BooleanController.prototype),'setValue',this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),t}},{key:'updateDisplay',value:function updateDisplay(){return!0===this.getValue()?(this.__checkbox.setAttribute('checked','checked'),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),y(BooleanController.prototype.__proto__||Object.getPrototypeOf(BooleanController.prototype),'updateDisplay',this).call(this)}}]),BooleanController}(b),R=function(e){function OptionController(e,t,n){f(this,OptionController);var r=x(this,(OptionController.__proto__||Object.getPrototypeOf(OptionController)).call(this,e,t)),a=n,o=r;if(r.__select=document.createElement('select'),l.isArray(a)){var i={};l.each(a,function(e){i[e]=e}),a=i}return l.each(a,function(e,t){var n=document.createElement('option');n.innerHTML=t,n.setAttribute('value',e),o.__select.appendChild(n)}),r.updateDisplay(),S.bind(r.__select,'change',function(){var e=this.options[this.selectedIndex].value;o.setValue(e)}),r.domElement.appendChild(r.__select),r}return E(OptionController,e),_(OptionController,[{key:'setValue',value:function setValue(e){var t=y(OptionController.prototype.__proto__||Object.getPrototypeOf(OptionController.prototype),'setValue',this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),t}},{key:'updateDisplay',value:function updateDisplay(){return S.isActive(this.__select)?this:(this.__select.value=this.getValue(),y(OptionController.prototype.__proto__||Object.getPrototypeOf(OptionController.prototype),'updateDisplay',this).call(this))}}]),OptionController}(b),F=function(e){function StringController(e,t){function onChange(){r.setValue(r.__input.value)}f(this,StringController);var n=x(this,(StringController.__proto__||Object.getPrototypeOf(StringController)).call(this,e,t)),r=n;return n.__input=document.createElement('input'),n.__input.setAttribute('type','text'),S.bind(n.__input,'keyup',onChange),S.bind(n.__input,'change',onChange),S.bind(n.__input,'blur',function onBlur(){r.__onFinishChange&&r.__onFinishChange.call(r,r.getValue())}),S.bind(n.__input,'keydown',function(t){13===t.keyCode&&this.blur()}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return E(StringController,e),_(StringController,[{key:'updateDisplay',value:function updateDisplay(){return S.isActive(this.__input)||(this.__input.value=this.getValue()),y(StringController.prototype.__proto__||Object.getPrototypeOf(StringController.prototype),'updateDisplay',this).call(this)}}]),StringController}(b),w=function(e){function NumberController(e,t,n){f(this,NumberController);var o=x(this,(NumberController.__proto__||Object.getPrototypeOf(NumberController)).call(this,e,t)),i=n||{};return o.__min=i.min,o.__max=i.max,o.__step=i.step,o.__impliedStep=l.isUndefined(o.__step)?0===o.initialValue?1:r(10,a(Math.log(Math.abs(o.initialValue))/Math.LN10))/10:o.__step,o.__precision=numDecimals(o.__impliedStep),o}return E(NumberController,e),_(NumberController,[{key:'setValue',value:function setValue(e){var t=e;return void 0!==this.__min&&t<this.__min?t=this.__min:void 0!==this.__max&&t>this.__max&&(t=this.__max),void 0!==this.__step&&0!=t%this.__step&&(t=o(t/this.__step)*this.__step),y(NumberController.prototype.__proto__||Object.getPrototypeOf(NumberController.prototype),'setValue',this).call(this,t)}},{key:'min',value:function min(e){return this.__min=e,this}},{key:'max',value:function max(e){return this.__max=e,this}},{key:'step',value:function step(e){return this.__step=e,this.__impliedStep=e,this.__precision=numDecimals(e),this}}]),NumberController}(b),L=function(e){function NumberControllerBox(e,t,n){function onFinish(){a.__onFinishChange&&a.__onFinishChange.call(a,a.getValue())}function onMouseDrag(t){var e=o-t.clientY;a.setValue(a.getValue()+e*a.__impliedStep),o=t.clientY}function onMouseUp(){S.unbind(window,'mousemove',onMouseDrag),S.unbind(window,'mouseup',onMouseUp),onFinish()}f(this,NumberControllerBox);var r=x(this,(NumberControllerBox.__proto__||Object.getPrototypeOf(NumberControllerBox)).call(this,e,t,n));r.__truncationSuspended=!1;var a=r,o=void 0;return r.__input=document.createElement('input'),r.__input.setAttribute('type','text'),S.bind(r.__input,'change',function onChange(){var e=parseFloat(a.__input.value);l.isNaN(e)||a.setValue(e)}),S.bind(r.__input,'blur',function onBlur(){onFinish()}),S.bind(r.__input,'mousedown',function onMouseDown(t){S.bind(window,'mousemove',onMouseDrag),S.bind(window,'mouseup',onMouseUp),o=t.clientY}),S.bind(r.__input,'keydown',function(t){13===t.keyCode&&(a.__truncationSuspended=!0,this.blur(),a.__truncationSuspended=!1,onFinish())}),r.updateDisplay(),r.domElement.appendChild(r.__input),r}return E(NumberControllerBox,e),_(NumberControllerBox,[{key:'updateDisplay',value:function updateDisplay(){return this.__input.value=this.__truncationSuspended?this.getValue():roundToDecimal(this.getValue(),this.__precision),y(NumberControllerBox.prototype.__proto__||Object.getPrototypeOf(NumberControllerBox.prototype),'updateDisplay',this).call(this)}}]),NumberControllerBox}(w),M=function(e){function NumberControllerSlider(e,t,n,r,a){function onMouseDrag(t){t.preventDefault();var e=i.__background.getBoundingClientRect();return i.setValue(map(t.clientX,e.left,e.right,i.__min,i.__max)),!1}function onMouseUp(){S.unbind(window,'mousemove',onMouseDrag),S.unbind(window,'mouseup',onMouseUp),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}function onTouchMove(t){var e=t.touches[0].clientX,n=i.__background.getBoundingClientRect();i.setValue(map(e,n.left,n.right,i.__min,i.__max))}function onTouchEnd(){S.unbind(window,'touchmove',onTouchMove),S.unbind(window,'touchend',onTouchEnd),i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}f(this,NumberControllerSlider);var o=x(this,(NumberControllerSlider.__proto__||Object.getPrototypeOf(NumberControllerSlider)).call(this,e,t,{min:n,max:r,step:a})),i=o;return o.__background=document.createElement('div'),o.__foreground=document.createElement('div'),S.bind(o.__background,'mousedown',function onMouseDown(t){document.activeElement.blur(),S.bind(window,'mousemove',onMouseDrag),S.bind(window,'mouseup',onMouseUp),onMouseDrag(t)}),S.bind(o.__background,'touchstart',function onTouchStart(t){1!==t.touches.length||(S.bind(window,'touchmove',onTouchMove),S.bind(window,'touchend',onTouchEnd),onTouchMove(t))}),S.addClass(o.__background,'slider'),S.addClass(o.__foreground,'slider-fg'),o.updateDisplay(),o.__background.appendChild(o.__foreground),o.domElement.appendChild(o.__background),o}return E(NumberControllerSlider,e),_(NumberControllerSlider,[{key:'updateDisplay',value:function updateDisplay(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+'%',y(NumberControllerSlider.prototype.__proto__||Object.getPrototypeOf(NumberControllerSlider.prototype),'updateDisplay',this).call(this)}}]),NumberControllerSlider}(w),I=function(e){function FunctionController(e,t,n){f(this,FunctionController);var r=x(this,(FunctionController.__proto__||Object.getPrototypeOf(FunctionController)).call(this,e,t));return r.__button=document.createElement('div'),r.__button.innerHTML=void 0===n?'Fire':n,S.bind(r.__button,'click',function(t){return t.preventDefault(),r.fire(),!1}),S.addClass(r.__button,'button'),r.domElement.appendChild(r.__button),r}return E(FunctionController,e),_(FunctionController,[{key:'fire',value:function fire(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),FunctionController}(b),D=function(e){function ColorController(e,t){function fieldDown(t){setSV(t),S.bind(window,'mousemove',setSV),S.bind(window,'touchmove',setSV),S.bind(window,'mouseup',fieldUpSV),S.bind(window,'touchend',fieldUpSV)}function fieldDownH(t){setH(t),S.bind(window,'mousemove',setH),S.bind(window,'touchmove',setH),S.bind(window,'mouseup',fieldUpH),S.bind(window,'touchend',fieldUpH)}function fieldUpSV(){S.unbind(window,'mousemove',setSV),S.unbind(window,'touchmove',setSV),S.unbind(window,'mouseup',fieldUpSV),S.unbind(window,'touchend',fieldUpSV),onFinish()}function fieldUpH(){S.unbind(window,'mousemove',setH),S.unbind(window,'touchmove',setH),S.unbind(window,'mouseup',fieldUpH),S.unbind(window,'touchend',fieldUpH),onFinish()}function onBlur(){var e=p(this.value);!1===e?this.value=r.__color.toString():(r.__color.__state=e,r.setValue(r.__color.toOriginal()))}function onFinish(){r.__onFinishChange&&r.__onFinishChange.call(r,r.__color.toOriginal())}function setSV(t){-1===t.type.indexOf('touch')&&t.preventDefault();var e=r.__saturation_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,a=n.clientX,o=n.clientY,i=(a-e.left)/(e.right-e.left),s=1-(o-e.top)/(e.bottom-e.top);return 1<s?s=1:0>s&&(s=0),1<i?i=1:0>i&&(i=0),r.__color.v=s,r.__color.s=i,r.setValue(r.__color.toOriginal()),!1}function setH(t){-1===t.type.indexOf('touch')&&t.preventDefault();var e=r.__hue_field.getBoundingClientRect(),n=t.touches&&t.touches[0]||t,a=n.clientY,o=1-(a-e.top)/(e.bottom-e.top);return 1<o?o=1:0>o&&(o=0),r.__color.h=360*o,r.setValue(r.__color.toOriginal()),!1}f(this,ColorController);var n=x(this,(ColorController.__proto__||Object.getPrototypeOf(ColorController)).call(this,e,t));n.__color=new A(n.getValue()),n.__temp=new A(0);var r=n;n.domElement=document.createElement('div'),S.makeSelectable(n.domElement,!1),n.__selector=document.createElement('div'),n.__selector.className='selector',n.__saturation_field=document.createElement('div'),n.__saturation_field.className='saturation-field',n.__field_knob=document.createElement('div'),n.__field_knob.className='field-knob',n.__field_knob_border='2px solid ',n.__hue_knob=document.createElement('div'),n.__hue_knob.className='hue-knob',n.__hue_field=document.createElement('div'),n.__hue_field.className='hue-field',n.__input=document.createElement('input'),n.__input.type='text',n.__input_textShadow='0 1px 1px ',S.bind(n.__input,'keydown',function(t){13===t.keyCode&&onBlur.call(this)}),S.bind(n.__input,'blur',onBlur),S.bind(n.__selector,'mousedown',function(){S.addClass(this,'drag').bind(window,'mouseup',function(){S.removeClass(r.__selector,'drag')})}),S.bind(n.__selector,'touchstart',function(){S.addClass(this,'drag').bind(window,'touchend',function(){S.removeClass(r.__selector,'drag')})});var a=document.createElement('div');return l.extend(n.__selector.style,{width:'122px',height:'102px',padding:'3px',backgroundColor:'#222',boxShadow:'0px 1px 3px rgba(0,0,0,0.3)'}),l.extend(n.__field_knob.style,{position:'absolute',width:'12px',height:'12px',border:n.__field_knob_border+(.5>n.__color.v?'#fff':'#000'),boxShadow:'0px 1px 3px rgba(0,0,0,0.5)',borderRadius:'12px',zIndex:1}),l.extend(n.__hue_knob.style,{position:'absolute',width:'15px',height:'2px',borderRight:'4px solid #fff',zIndex:1}),l.extend(n.__saturation_field.style,{width:'100px',height:'100px',border:'1px solid #555',marginRight:'3px',display:'inline-block',cursor:'pointer'}),l.extend(a.style,{width:'100%',height:'100%',background:'none'}),linearGradient(a,'top','rgba(0,0,0,0)','#000'),l.extend(n.__hue_field.style,{width:'15px',height:'100px',border:'1px solid #555',cursor:'ns-resize',position:'absolute',top:'3px',right:'3px'}),hueGradient(n.__hue_field),l.extend(n.__input.style,{outline:'none',textAlign:'center',color:'#fff',border:0,fontWeight:'bold',textShadow:n.__input_textShadow+'rgba(0,0,0,0.7)'}),S.bind(n.__saturation_field,'mousedown',fieldDown),S.bind(n.__saturation_field,'touchstart',fieldDown),S.bind(n.__field_knob,'mousedown',fieldDown),S.bind(n.__field_knob,'touchstart',fieldDown),S.bind(n.__hue_field,'mousedown',fieldDownH),S.bind(n.__hue_field,'touchstart',fieldDownH),n.__saturation_field.appendChild(a),n.__selector.appendChild(n.__field_knob),n.__selector.appendChild(n.__saturation_field),n.__selector.appendChild(n.__hue_field),n.__hue_field.appendChild(n.__hue_knob),n.domElement.appendChild(n.__input),n.domElement.appendChild(n.__selector),n.updateDisplay(),n}return E(ColorController,e),_(ColorController,[{key:'updateDisplay',value:function updateDisplay(){var e=p(this.getValue());if(!1!==e){var t=!1;l.each(A.COMPONENTS,function(n){if(!l.isUndefined(e[n])&&!l.isUndefined(this.__color.__state[n])&&e[n]!==this.__color.__state[n])return t=!0,{}},this),t&&l.extend(this.__color.__state,e)}l.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var n=.5>this.__color.v||.5<this.__color.s?255:0,r=255-n;l.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+'px',marginTop:100*(1-this.__color.v)-7+'px',backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+'rgb('+n+','+n+','+n+')'}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+'px',this.__temp.s=1,this.__temp.v=1,linearGradient(this.__saturation_field,'left','#fff',this.__temp.toHexString()),this.__input.value=this.__color.toString(),l.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:'rgb('+n+','+n+','+n+')',textShadow:this.__input_textShadow+'rgba('+r+','+r+','+r+',.7)'})}}]),ColorController}(b),B=['-moz-','-o-','-webkit-','-ms-',''],N=function ControllerFactory(e,t){var n=e[t];return l.isArray(arguments[2])||l.isObject(arguments[2])?new R(e,t,arguments[2]):l.isNumber(n)?l.isNumber(arguments[2])&&l.isNumber(arguments[3])?l.isNumber(arguments[4])?new M(e,t,arguments[2],arguments[3],arguments[4]):new M(e,t,arguments[2],arguments[3]):l.isNumber(arguments[4])?new L(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(e,t,{min:arguments[2],max:arguments[3]}):l.isString(n)?new F(e,t):l.isFunction(n)?new I(e,t,''):l.isBoolean(n)?new v(e,t):null},P=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function requestAnimationFrame(e){setTimeout(e,1e3/60)},O=function(){function CenteredDiv(){f(this,CenteredDiv),this.backgroundElement=document.createElement('div'),l.extend(this.backgroundElement.style,{backgroundColor:'rgba(0,0,0,0.8)',top:0,left:0,display:'none',zIndex:'1000',opacity:0,WebkitTransition:'opacity 0.2s linear',transition:'opacity 0.2s linear'}),S.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position='fixed',this.domElement=document.createElement('div'),l.extend(this.domElement.style,{position:'fixed',display:'none',zIndex:'1001',opacity:0,WebkitTransition:'-webkit-transform 0.2s ease-out, opacity 0.2s linear',transition:'transform 0.2s ease-out, opacity 0.2s linear'}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var e=this;S.bind(this.backgroundElement,'click',function(){e.hide()})}return _(CenteredDiv,[{key:'show',value:function show(){var e=this;this.backgroundElement.style.display='block',this.domElement.style.display='block',this.domElement.style.opacity=0,this.domElement.style.webkitTransform='scale(1.1)',this.layout(),l.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform='scale(1)'})}},{key:'hide',value:function e(){var t=this,e=function hide(){t.domElement.style.display='none',t.backgroundElement.style.display='none',S.unbind(t.domElement,'webkitTransitionEnd',hide),S.unbind(t.domElement,'transitionend',hide),S.unbind(t.domElement,'oTransitionEnd',hide)};S.bind(this.domElement,'webkitTransitionEnd',e),S.bind(this.domElement,'transitionend',e),S.bind(this.domElement,'oTransitionEnd',e),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform='scale(1.1)'}},{key:'layout',value:function layout(){this.domElement.style.left=window.innerWidth/2-S.getWidth(this.domElement)/2+'px',this.domElement.style.top=window.innerHeight/2-S.getHeight(this.domElement)/2+'px'}}]),CenteredDiv}(),k=function ___$insertStyle(e){if(e&&'undefined'!=typeof window){var t=document.createElement('style');return t.setAttribute('type','text/css'),t.innerHTML=e,document.head.appendChild(t),e}}('.dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px \'Lucida Grande\', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n');({load:function load(e,t){var n=t||document,r=n.createElement('link');r.type='text/css',r.rel='stylesheet',r.href=e,n.getElementsByTagName('head')[0].appendChild(r)},inject:function inject(e,t){var n=t||document,r=document.createElement('style');r.type='text/css',r.innerHTML=e;var a=n.getElementsByTagName('head')[0];try{a.appendChild(r)}catch(t){}}}).inject(k);var U='dg',G=72,V=20,H='Default',z=function(){try{return!!window.localStorage}catch(t){return!1}}(),W=void 0,$=!0,j=void 0,X=!1,K=[],Y=function GUI(e){var t=this,n=e||{};this.domElement=document.createElement('div'),this.__ul=document.createElement('ul'),this.domElement.appendChild(this.__ul),S.addClass(this.domElement,U),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=l.defaults(n,{closeOnTop:!1,autoPlace:!0,width:GUI.DEFAULT_WIDTH}),n=l.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),l.isUndefined(n.load)?n.load={preset:H}:n.preset&&(n.load.preset=n.preset),l.isUndefined(n.parent)&&n.hideable&&K.push(this),n.resizable=l.isUndefined(n.parent)&&n.resizable,n.autoPlace&&l.isUndefined(n.scrollable)&&(n.scrollable=!0);var r=z&&'true'===localStorage.getItem(getLocalStorageHash(this,'isLocal')),a=void 0,o=void 0;if(Object.defineProperties(this,{parent:{get:function get$$1(){return n.parent}},scrollable:{get:function get$$1(){return n.scrollable}},autoPlace:{get:function get$$1(){return n.autoPlace}},closeOnTop:{get:function get$$1(){return n.closeOnTop}},preset:{get:function get$$1(){return t.parent?t.getRoot().preset:n.load.preset},set:function set$$1(e){t.parent?t.getRoot().preset=e:n.load.preset=e,setPresetSelectIndex(this),t.revert()}},width:{get:function get$$1(){return n.width},set:function set$$1(e){n.width=e,setWidth(t,e)}},name:{get:function get$$1(){return n.name},set:function set$$1(e){n.name=e,o&&(o.innerHTML=n.name)}},closed:{get:function get$$1(){return n.closed},set:function set$$1(e){n.closed=e,n.closed?S.addClass(t.__ul,GUI.CLASS_CLOSED):S.removeClass(t.__ul,GUI.CLASS_CLOSED),this.onResize(),t.__closeButton&&(t.__closeButton.innerHTML=e?GUI.TEXT_OPEN:GUI.TEXT_CLOSED)}},load:{get:function get$$1(){return n.load}},useLocalStorage:{get:function get$$1(){return r},set:function set$$1(e){z&&(r=e,e?S.bind(window,'unload',a):S.unbind(window,'unload',a),localStorage.setItem(getLocalStorageHash(t,'isLocal'),e))}}}),l.isUndefined(n.parent)){if(this.closed=n.closed||!1,S.addClass(this.domElement,GUI.CLASS_MAIN),S.makeSelectable(this.domElement,!1),z&&r){t.useLocalStorage=!0;var i=localStorage.getItem(getLocalStorageHash(this,'gui'));i&&(n.load=JSON.parse(i))}this.__closeButton=document.createElement('div'),this.__closeButton.innerHTML=GUI.TEXT_CLOSED,S.addClass(this.__closeButton,GUI.CLASS_CLOSE_BUTTON),n.closeOnTop?(S.addClass(this.__closeButton,GUI.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(S.addClass(this.__closeButton,GUI.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),S.bind(this.__closeButton,'click',function(){t.closed=!t.closed})}else{void 0===n.closed&&(n.closed=!0);var s=document.createTextNode(n.name);S.addClass(s,'controller-name'),o=addRow(t,s);var d=function onClickTitle(n){return n.preventDefault(),t.closed=!t.closed,!1};S.addClass(this.__ul,GUI.CLASS_CLOSED),S.addClass(o,'title'),S.bind(o,'click',d),n.closed||(this.closed=!1)}n.autoPlace&&(l.isUndefined(n.parent)&&($&&(j=document.createElement('div'),S.addClass(j,U),S.addClass(j,GUI.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(j),$=!1),j.appendChild(this.domElement),S.addClass(this.domElement,GUI.CLASS_AUTO_PLACE)),!this.parent&&setWidth(t,n.width)),this.__resizeHandler=function(){t.onResizeDebounced()},S.bind(window,'resize',this.__resizeHandler),S.bind(this.__ul,'webkitTransitionEnd',this.__resizeHandler),S.bind(this.__ul,'transitionend',this.__resizeHandler),S.bind(this.__ul,'oTransitionEnd',this.__resizeHandler),this.onResize(),n.resizable&&addResizeHandle(this),a=function saveToLocalStorage(){z&&'true'===localStorage.getItem(getLocalStorageHash(t,'isLocal'))&&localStorage.setItem(getLocalStorageHash(t,'gui'),JSON.stringify(t.getSaveObject()))},this.saveToLocalStorageIfPossible=a,n.parent||function resetWidth(){var e=t.getRoot();e.width+=1,l.defer(function(){e.width-=1})}()};Y.toggleHide=function(){X=!X,l.each(K,function(e){e.domElement.style.display=X?'none':''})},Y.CLASS_AUTO_PLACE='a',Y.CLASS_AUTO_PLACE_CONTAINER='ac',Y.CLASS_MAIN='main',Y.CLASS_CONTROLLER_ROW='cr',Y.CLASS_TOO_TALL='taller-than-window',Y.CLASS_CLOSED='closed',Y.CLASS_CLOSE_BUTTON='close-button',Y.CLASS_CLOSE_TOP='close-top',Y.CLASS_CLOSE_BOTTOM='close-bottom',Y.CLASS_DRAG='drag',Y.DEFAULT_WIDTH=245,Y.TEXT_CLOSED='Close Controls',Y.TEXT_OPEN='Open Controls',Y._keydownHandler=function(t){'text'!==document.activeElement.type&&(t.which===G||t.keyCode===G)&&Y.toggleHide()},S.bind(window,'keydown',Y._keydownHandler,!1),l.extend(Y.prototype,{add:function add(e,t){return _add(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function addColor(e,t){return _add(this,e,t,{color:!0})},remove:function remove(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;l.defer(function(){t.onResize()})},destroy:function destroy(){if(this.parent)throw new Error('Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.');this.autoPlace&&j.removeChild(this.domElement);var e=this;l.each(this.__folders,function(t){e.removeFolder(t)}),S.unbind(window,'keydown',Y._keydownHandler,!1),removeListeners(this)},addFolder:function addFolder(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var n=new Y(t);this.__folders[e]=n;var r=addRow(this,n.domElement);return S.addClass(r,'folder'),n},removeFolder:function removeFolder(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],removeListeners(e);var t=this;l.each(e.__folders,function(t){e.removeFolder(t)}),l.defer(function(){t.onResize()})},open:function open(){this.closed=!1},close:function close(){this.closed=!0},hide:function hide(){this.domElement.style.display='none'},show:function show(){this.domElement.style.display=''},onResize:function onResize(){var e=this.getRoot();if(e.scrollable){var t=S.getOffset(e.__ul).top,n=0;l.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(n+=S.getHeight(t))}),window.innerHeight-t-V<n?(S.addClass(e.domElement,Y.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-V+'px'):(S.removeClass(e.domElement,Y.CLASS_TOO_TALL),e.__ul.style.height='auto')}e.__resize_handle&&l.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+'px'}),e.__closeButton&&(e.__closeButton.style.width=e.width+'px')},onResizeDebounced:l.debounce(function(){this.onResize()},50),remember:function remember(){if(l.isUndefined(W)&&(W=new O,W.domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error('You can only call remember on a top level GUI.');var e=this;l.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&addSaveMenu(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&setWidth(this,this.width)},getRoot:function getRoot(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function getSaveObject(){var e=this.load;return e.closed=this.closed,0<this.__rememberedObjects.length&&(e.preset=this.preset,!e.remembered&&(e.remembered={}),e.remembered[this.preset]=getCurrentPreset(this)),e.folders={},l.each(this.__folders,function(t,n){e.folders[n]=t.getSaveObject()}),e},save:function save(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=getCurrentPreset(this),markPresetModified(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function saveAs(e){this.load.remembered||(this.load.remembered={},this.load.remembered[H]=getCurrentPreset(this,!0)),this.load.remembered[e]=getCurrentPreset(this),this.preset=e,addPresetOption(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function revert(e){l.each(this.__controllers,function(t){this.getRoot().load.remembered?recallSavedValue(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),l.each(this.__folders,function(e){e.revert(e)}),e||markPresetModified(this.getRoot(),!1)},listen:function listen(e){var t=0===this.__listening.length;this.__listening.push(e),t&&updateDisplays(this.__listening)},updateDisplay:function updateDisplay(){l.each(this.__controllers,function(e){e.updateDisplay()}),l.each(this.__folders,function(e){e.updateDisplay()})}});var q={Color:A,math:g,interpret:p},Z={Controller:b,BooleanController:v,OptionController:R,StringController:F,NumberController:w,NumberControllerBox:L,NumberControllerSlider:M,FunctionController:I,ColorController:D},Q={dom:S},J={GUI:Y},ee=Y;t['default']={color:q,controllers:Z,dom:Q,gui:J,GUI:ee}},"./node_modules/gl-matrix/lib/gl-matrix.js":/*!*************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix.js ***!
  \*************************************************//*! exports provided: glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 */function(e,t,n){'use strict';n.r(t);var r=n(/*! ./gl-matrix/common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js');n.d(t,'glMatrix',function(){return r});var a=n(/*! ./gl-matrix/mat2.js */'./node_modules/gl-matrix/lib/gl-matrix/mat2.js');n.d(t,'mat2',function(){return a});var o=n(/*! ./gl-matrix/mat2d.js */'./node_modules/gl-matrix/lib/gl-matrix/mat2d.js');n.d(t,'mat2d',function(){return o});var i=n(/*! ./gl-matrix/mat3.js */'./node_modules/gl-matrix/lib/gl-matrix/mat3.js');n.d(t,'mat3',function(){return i});var s=n(/*! ./gl-matrix/mat4.js */'./node_modules/gl-matrix/lib/gl-matrix/mat4.js');n.d(t,'mat4',function(){return s});var l=n(/*! ./gl-matrix/quat.js */'./node_modules/gl-matrix/lib/gl-matrix/quat.js');n.d(t,'quat',function(){return l});var d=n(/*! ./gl-matrix/quat2.js */'./node_modules/gl-matrix/lib/gl-matrix/quat2.js');n.d(t,'quat2',function(){return d});var c=n(/*! ./gl-matrix/vec2.js */'./node_modules/gl-matrix/lib/gl-matrix/vec2.js');n.d(t,'vec2',function(){return c});var u=n(/*! ./gl-matrix/vec3.js */'./node_modules/gl-matrix/lib/gl-matrix/vec3.js');n.d(t,'vec3',function(){return u});var p=n(/*! ./gl-matrix/vec4.js */'./node_modules/gl-matrix/lib/gl-matrix/vec4.js');n.d(t,'vec4',function(){return p})},"./node_modules/gl-matrix/lib/gl-matrix/common.js":/*!********************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/common.js ***!
  \********************************************************//*! exports provided: EPSILON, ARRAY_TYPE, RANDOM, setMatrixArrayType, toRadian, equals */function(e,t,n){'use strict';function setMatrixArrayType(e){a=e}function toRadian(e){return e*s}function equals(e,t){return r(e-t)<=o*Math.max(1,r(e),r(t))}var r=Math.abs;n.r(t),n.d(t,'EPSILON',function(){return o}),n.d(t,'ARRAY_TYPE',function(){return a}),n.d(t,'RANDOM',function(){return i}),n.d(t,'setMatrixArrayType',function(){return setMatrixArrayType}),n.d(t,'toRadian',function(){return toRadian}),n.d(t,'equals',function(){return equals});var o=1e-6,a='undefined'==typeof Float32Array?Array:Float32Array,i=Math.random,s=Math.PI/180},"./node_modules/gl-matrix/lib/gl-matrix/mat2.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2.js ***!
  \******************************************************//*! exports provided: create, clone, copy, identity, fromValues, set, transpose, invert, adjoint, determinant, multiply, rotate, scale, fromRotation, fromScaling, str, frob, LDU, add, subtract, exactEquals, equals, multiplyScalar, multiplyScalarAndAdd, mul, sub */function(e,t,n){'use strict';function create(){var e=new d.ARRAY_TYPE(4);return d.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e}function clone(e){var t=new d.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function fromValues(e,t,n,r){var a=new d.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function set(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function transpose(e,t){if(e===t){var n=t[1];e[1]=t[2],e[2]=n}else e[0]=t[0],e[1]=t[2],e[2]=t[1],e[3]=t[3];return e}function invert(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*o-a*r;return i?(i=1/i,e[0]=o*i,e[1]=-r*i,e[2]=-a*i,e[3]=n*i,e):null}function adjoint(e,t){var n=t[0];return e[0]=t[3],e[1]=-t[1],e[2]=-t[2],e[3]=n,e}function determinant(e){return e[0]*e[3]-e[2]*e[1]}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1],d=n[2],c=n[3];return e[0]=r*s+o*l,e[1]=a*s+i*l,e[2]=r*d+o*c,e[3]=a*d+i*c,e}function rotate(e,t,n){var a=t[0],i=t[1],l=t[2],d=t[3],u=o(n),p=r(n);return e[0]=a*p+l*u,e[1]=i*p+d*u,e[2]=a*-u+l*p,e[3]=i*-u+d*p,e}function scale(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=a*s,e[2]=o*l,e[3]=i*l,e}function fromRotation(e,t){var n=o(t),a=r(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e}function str(e){return'mat2('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}function frob(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2))}function LDU(e,t,n,r){return e[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-e[2]*n[1],[e,t,n]}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=t[0],c=t[1],u=t[2],p=t[3];return s(n-i)<=d.EPSILON*l(1,s(n),s(i))&&s(r-c)<=d.EPSILON*l(1,s(r),s(c))&&s(a-u)<=d.EPSILON*l(1,s(a),s(u))&&s(o-p)<=d.EPSILON*l(1,s(o),s(p))}function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function multiplyScalarAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}var r=Math.cos,o=Math.sin,i=Math.pow,s=Math.abs,l=Math.max;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'copy',function(){return copy}),n.d(t,'identity',function(){return identity}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'set',function(){return set}),n.d(t,'transpose',function(){return transpose}),n.d(t,'invert',function(){return invert}),n.d(t,'adjoint',function(){return adjoint}),n.d(t,'determinant',function(){return determinant}),n.d(t,'multiply',function(){return multiply}),n.d(t,'rotate',function(){return rotate}),n.d(t,'scale',function(){return scale}),n.d(t,'fromRotation',function(){return fromRotation}),n.d(t,'fromScaling',function(){return fromScaling}),n.d(t,'str',function(){return str}),n.d(t,'frob',function(){return frob}),n.d(t,'LDU',function(){return LDU}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'multiplyScalar',function(){return multiplyScalar}),n.d(t,'multiplyScalarAndAdd',function(){return multiplyScalarAndAdd}),n.d(t,'mul',function(){return a}),n.d(t,'sub',function(){return c});var d=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=multiply,c=subtract},"./node_modules/gl-matrix/lib/gl-matrix/mat2d.js":/*!*******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat2d.js ***!
  \*******************************************************//*! exports provided: create, clone, copy, identity, fromValues, set, invert, determinant, multiply, rotate, scale, translate, fromRotation, fromScaling, fromTranslation, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){'use strict';function create(){var e=new u.ARRAY_TYPE(6);return u.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function clone(e){var t=new u.ARRAY_TYPE(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function fromValues(e,t,n,r,a,o){var i=new u.ARRAY_TYPE(6);return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i[4]=a,i[5]=o,i}function set(e,t,n,r,a,o,i){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e}function invert(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=n*o-r*a;return l?(l=1/l,e[0]=o*l,e[1]=-r*l,e[2]=-a*l,e[3]=n*l,e[4]=(a*s-o*i)*l,e[5]=(r*i-n*s)*l,e):null}function determinant(e){return e[0]*e[3]-e[1]*e[2]}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=n[0],c=n[1],u=n[2],p=n[3],m=n[4],g=n[5];return e[0]=r*d+o*c,e[1]=a*d+i*c,e[2]=r*u+o*p,e[3]=a*u+i*p,e[4]=r*m+o*g+s,e[5]=a*m+i*g+l,e}function rotate(e,t,n){var a=t[0],i=t[1],l=t[2],d=t[3],u=t[4],p=t[5],m=o(n),g=r(n);return e[0]=a*g+l*m,e[1]=i*g+d*m,e[2]=a*-m+l*g,e[3]=i*-m+d*g,e[4]=u,e[5]=p,e}function scale(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=n[0],c=n[1];return e[0]=r*d,e[1]=a*d,e[2]=o*c,e[3]=i*c,e[4]=s,e[5]=l,e}function translate(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=n[0],c=n[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=r*d+o*c+s,e[5]=a*d+i*c+l,e}function fromRotation(e,t){var n=o(t),a=r(t);return e[0]=a,e[1]=n,e[2]=-n,e[3]=a,e[4]=0,e[5]=0,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function str(e){return'mat2d('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+')'}function frob(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2)+i(e[4],2)+i(e[5],2)+1)}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e}function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e}function multiplyScalarAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],d=e[5],c=t[0],p=t[1],m=t[2],g=t[3],h=t[4],f=t[5];return s(n-c)<=u.EPSILON*l(1,s(n),s(c))&&s(r-p)<=u.EPSILON*l(1,s(r),s(p))&&s(a-m)<=u.EPSILON*l(1,s(a),s(m))&&s(o-g)<=u.EPSILON*l(1,s(o),s(g))&&s(i-h)<=u.EPSILON*l(1,s(i),s(h))&&s(d-f)<=u.EPSILON*l(1,s(d),s(f))}var r=Math.cos,o=Math.sin,i=Math.pow,s=Math.abs,l=Math.max;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'copy',function(){return copy}),n.d(t,'identity',function(){return identity}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'set',function(){return set}),n.d(t,'invert',function(){return invert}),n.d(t,'determinant',function(){return determinant}),n.d(t,'multiply',function(){return multiply}),n.d(t,'rotate',function(){return rotate}),n.d(t,'scale',function(){return scale}),n.d(t,'translate',function(){return translate}),n.d(t,'fromRotation',function(){return fromRotation}),n.d(t,'fromScaling',function(){return fromScaling}),n.d(t,'fromTranslation',function(){return fromTranslation}),n.d(t,'str',function(){return str}),n.d(t,'frob',function(){return frob}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiplyScalar',function(){return multiplyScalar}),n.d(t,'multiplyScalarAndAdd',function(){return multiplyScalarAndAdd}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'mul',function(){return a}),n.d(t,'sub',function(){return d});var u=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=multiply,d=subtract},"./node_modules/gl-matrix/lib/gl-matrix/mat3.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat3.js ***!
  \******************************************************//*! exports provided: create, fromMat4, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, rotate, scale, fromTranslation, fromRotation, fromScaling, fromMat2d, fromQuat, normalFromMat4, projection, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){'use strict';function create(){var e=new d.ARRAY_TYPE(9);return d.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function fromMat4(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function clone(e){var t=new d.ARRAY_TYPE(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fromValues(e,t,n,r,a,o,i,s,l){var c=new d.ARRAY_TYPE(9);return c[0]=e,c[1]=t,c[2]=n,c[3]=r,c[4]=a,c[5]=o,c[6]=i,c[7]=s,c[8]=l,c}function set(e,t,n,r,a,o,i,s,l,d){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e[8]=d,e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function transpose(e,t){if(e===t){var n=t[1],r=t[2],a=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=a}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function invert(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],u=c*i-s*d,p=-c*o+s*l,m=d*o-i*l,g=n*u+r*p+a*m;return g?(g=1/g,e[0]=u*g,e[1]=(-c*r+a*d)*g,e[2]=(s*r-a*i)*g,e[3]=p*g,e[4]=(c*n-a*l)*g,e[5]=(-s*n+a*o)*g,e[6]=m*g,e[7]=(-d*n+r*l)*g,e[8]=(i*n-r*o)*g,e):null}function adjoint(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8];return e[0]=i*c-s*d,e[1]=a*d-r*c,e[2]=r*s-a*i,e[3]=s*l-o*c,e[4]=n*c-a*l,e[5]=a*o-n*s,e[6]=o*d-i*l,e[7]=r*l-n*d,e[8]=n*i-r*o,e}function determinant(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],s=e[6],l=e[7],d=e[8];return t*(d*o-i*l)+n*(-d*a+i*s)+r*(l*a-o*s)}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],p=n[0],m=n[1],g=n[2],h=n[3],f=n[4],_=n[5],y=n[6],E=n[7],x=n[8];return e[0]=p*r+m*i+g*d,e[1]=p*a+m*s+g*c,e[2]=p*o+m*l+g*u,e[3]=h*r+f*i+_*d,e[4]=h*a+f*s+_*c,e[5]=h*o+f*l+_*u,e[6]=y*r+E*i+x*d,e[7]=y*a+E*s+x*c,e[8]=y*o+E*l+x*u,e}function translate(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],p=n[0],m=n[1];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=s,e[5]=l,e[6]=p*r+m*i+d,e[7]=p*a+m*s+c,e[8]=p*o+m*l+u,e}function rotate(e,t,n){var a=t[0],i=t[1],l=t[2],d=t[3],u=t[4],p=t[5],m=t[6],g=t[7],h=t[8],f=o(n),s=r(n);return e[0]=s*a+f*d,e[1]=s*i+f*u,e[2]=s*l+f*p,e[3]=s*d-f*a,e[4]=s*u-f*i,e[5]=s*p-f*l,e[6]=m,e[7]=g,e[8]=h,e}function scale(e,t,n){var r=n[0],a=n[1];return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=a*t[3],e[4]=a*t[4],e[5]=a*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function fromRotation(e,t){var n=o(t),a=r(t);return e[0]=a,e[1]=n,e[2]=0,e[3]=-n,e[4]=a,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function fromMat2d(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function fromQuat(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,s=r+r,l=a+a,d=n*i,c=r*i,u=r*s,p=a*i,m=a*s,g=a*l,h=o*i,f=o*s,_=o*l;return e[0]=1-u-g,e[3]=c-_,e[6]=p+f,e[1]=c+_,e[4]=1-d-g,e[7]=m-h,e[2]=p-f,e[5]=m+h,e[8]=1-d-u,e}function normalFromMat4(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],u=t[9],p=t[10],m=t[11],g=t[12],h=t[13],f=t[14],_=t[15],y=n*s-r*i,E=n*l-a*i,x=n*d-o*i,A=r*l-a*s,b=r*d-o*s,T=a*d-o*l,C=c*h-u*g,v=c*f-p*g,S=c*_-m*g,R=u*f-p*h,F=u*_-m*h,w=p*_-m*f,L=y*w-E*F+x*R+A*S-b*v+T*C;return L?(L=1/L,e[0]=(s*w-l*F+d*R)*L,e[1]=(l*S-i*w-d*v)*L,e[2]=(i*F-s*S+d*C)*L,e[3]=(a*F-r*w-o*R)*L,e[4]=(n*w-a*S+o*v)*L,e[5]=(r*S-n*F-o*C)*L,e[6]=(h*T-f*b+_*A)*L,e[7]=(f*x-g*T-_*E)*L,e[8]=(g*b-h*x+_*y)*L,e):null}function projection(e,t,n){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/n,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function str(e){return'mat3('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+')'}function frob(e){return Math.sqrt(i(e[0],2)+i(e[1],2)+i(e[2],2)+i(e[3],2)+i(e[4],2)+i(e[5],2)+i(e[6],2)+i(e[7],2)+i(e[8],2))}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e}function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e}function multiplyScalarAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],c=e[5],u=e[6],p=e[7],m=e[8],g=t[0],h=t[1],f=t[2],_=t[3],y=t[4],E=t[5],x=t[6],A=t[7],b=t[8];return s(n-g)<=d.EPSILON*l(1,s(n),s(g))&&s(r-h)<=d.EPSILON*l(1,s(r),s(h))&&s(a-f)<=d.EPSILON*l(1,s(a),s(f))&&s(o-_)<=d.EPSILON*l(1,s(o),s(_))&&s(i-y)<=d.EPSILON*l(1,s(i),s(y))&&s(c-E)<=d.EPSILON*l(1,s(c),s(E))&&s(u-x)<=d.EPSILON*l(1,s(u),s(x))&&s(p-A)<=d.EPSILON*l(1,s(p),s(A))&&s(m-b)<=d.EPSILON*l(1,s(m),s(b))}var r=Math.cos,o=Math.sin,i=Math.pow,s=Math.abs,l=Math.max;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'fromMat4',function(){return fromMat4}),n.d(t,'clone',function(){return clone}),n.d(t,'copy',function(){return copy}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'set',function(){return set}),n.d(t,'identity',function(){return identity}),n.d(t,'transpose',function(){return transpose}),n.d(t,'invert',function(){return invert}),n.d(t,'adjoint',function(){return adjoint}),n.d(t,'determinant',function(){return determinant}),n.d(t,'multiply',function(){return multiply}),n.d(t,'translate',function(){return translate}),n.d(t,'rotate',function(){return rotate}),n.d(t,'scale',function(){return scale}),n.d(t,'fromTranslation',function(){return fromTranslation}),n.d(t,'fromRotation',function(){return fromRotation}),n.d(t,'fromScaling',function(){return fromScaling}),n.d(t,'fromMat2d',function(){return fromMat2d}),n.d(t,'fromQuat',function(){return fromQuat}),n.d(t,'normalFromMat4',function(){return normalFromMat4}),n.d(t,'projection',function(){return projection}),n.d(t,'str',function(){return str}),n.d(t,'frob',function(){return frob}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiplyScalar',function(){return multiplyScalar}),n.d(t,'multiplyScalarAndAdd',function(){return multiplyScalarAndAdd}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'mul',function(){return a}),n.d(t,'sub',function(){return c});var d=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=multiply,c=subtract},"./node_modules/gl-matrix/lib/gl-matrix/mat4.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/mat4.js ***!
  \******************************************************//*! exports provided: create, clone, copy, fromValues, set, identity, transpose, invert, adjoint, determinant, multiply, translate, scale, rotate, rotateX, rotateY, rotateZ, fromTranslation, fromScaling, fromRotation, fromXRotation, fromYRotation, fromZRotation, fromRotationTranslation, fromQuat2, getTranslation, getScaling, getRotation, fromRotationTranslationScale, fromRotationTranslationScaleOrigin, fromQuat, frustum, perspective, perspectiveFromFieldOfView, ortho, lookAt, targetTo, str, frob, add, subtract, multiplyScalar, multiplyScalarAndAdd, exactEquals, equals, mul, sub */function(e,t,n){'use strict';function create(){var e=new u.ARRAY_TYPE(16);return u.ARRAY_TYPE!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function clone(e){var t=new u.ARRAY_TYPE(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function fromValues(e,t,n,r,a,o,i,s,l,d,c,p,m,g,h,f){var _=new u.ARRAY_TYPE(16);return _[0]=e,_[1]=t,_[2]=n,_[3]=r,_[4]=a,_[5]=o,_[6]=i,_[7]=s,_[8]=l,_[9]=d,_[10]=c,_[11]=p,_[12]=m,_[13]=g,_[14]=h,_[15]=f,_}function set(e,t,n,r,a,o,i,s,l,d,c,u,p,m,g,h,f){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e[8]=d,e[9]=c,e[10]=u,e[11]=p,e[12]=m,e[13]=g,e[14]=h,e[15]=f,e}function identity(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function transpose(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],o=t[6],i=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=a,e[13]=i,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function invert(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],u=t[9],p=t[10],m=t[11],g=t[12],h=t[13],f=t[14],_=t[15],y=n*s-r*i,E=n*l-a*i,x=n*d-o*i,A=r*l-a*s,b=r*d-o*s,T=a*d-o*l,C=c*h-u*g,v=c*f-p*g,S=c*_-m*g,R=u*f-p*h,F=u*_-m*h,w=p*_-m*f,L=y*w-E*F+x*R+A*S-b*v+T*C;return L?(L=1/L,e[0]=(s*w-l*F+d*R)*L,e[1]=(a*F-r*w-o*R)*L,e[2]=(h*T-f*b+_*A)*L,e[3]=(p*b-u*T-m*A)*L,e[4]=(l*S-i*w-d*v)*L,e[5]=(n*w-a*S+o*v)*L,e[6]=(f*x-g*T-_*E)*L,e[7]=(c*T-p*x+m*E)*L,e[8]=(i*F-s*S+d*C)*L,e[9]=(r*S-n*F-o*C)*L,e[10]=(g*b-h*x+_*y)*L,e[11]=(u*x-c*b-m*y)*L,e[12]=(s*v-i*R-l*C)*L,e[13]=(n*R-r*v+a*C)*L,e[14]=(h*E-g*A-f*y)*L,e[15]=(c*A-u*E+p*y)*L,e):null}function adjoint(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=t[4],s=t[5],l=t[6],d=t[7],c=t[8],u=t[9],p=t[10],m=t[11],g=t[12],h=t[13],f=t[14],_=t[15];return e[0]=s*(p*_-m*f)-u*(l*_-d*f)+h*(l*m-d*p),e[1]=-(r*(p*_-m*f)-u*(a*_-o*f)+h*(a*m-o*p)),e[2]=r*(l*_-d*f)-s*(a*_-o*f)+h*(a*d-o*l),e[3]=-(r*(l*m-d*p)-s*(a*m-o*p)+u*(a*d-o*l)),e[4]=-(i*(p*_-m*f)-c*(l*_-d*f)+g*(l*m-d*p)),e[5]=n*(p*_-m*f)-c*(a*_-o*f)+g*(a*m-o*p),e[6]=-(n*(l*_-d*f)-i*(a*_-o*f)+g*(a*d-o*l)),e[7]=n*(l*m-d*p)-i*(a*m-o*p)+c*(a*d-o*l),e[8]=i*(u*_-m*h)-c*(s*_-d*h)+g*(s*m-d*u),e[9]=-(n*(u*_-m*h)-c*(r*_-o*h)+g*(r*m-o*u)),e[10]=n*(s*_-d*h)-i*(r*_-o*h)+g*(r*d-o*s),e[11]=-(n*(s*m-d*u)-i*(r*m-o*u)+c*(r*d-o*s)),e[12]=-(i*(u*f-p*h)-c*(s*f-l*h)+g*(s*p-l*u)),e[13]=n*(u*f-p*h)-c*(r*f-a*h)+g*(r*p-a*u),e[14]=-(n*(s*f-l*h)-i*(r*f-a*h)+g*(r*l-a*s)),e[15]=n*(s*p-l*u)-i*(r*p-a*u)+c*(r*l-a*s),e}function determinant(e){var t=e[0],n=e[1],r=e[2],a=e[3],o=e[4],i=e[5],s=e[6],l=e[7],d=e[8],c=e[9],u=e[10],p=e[11],m=e[12],g=e[13],h=e[14],f=e[15];return(t*i-n*o)*(u*f-p*h)-(t*s-r*o)*(c*f-p*g)+(t*l-a*o)*(c*h-u*g)+(n*s-r*i)*(d*f-p*m)-(n*l-a*i)*(d*h-u*m)+(r*l-a*s)*(d*g-c*m)}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],u=t[8],p=t[9],m=t[10],g=t[11],h=t[12],f=t[13],_=t[14],y=t[15],E=n[0],x=n[1],A=n[2],b=n[3];return e[0]=E*r+x*s+A*u+b*h,e[1]=E*a+x*l+A*p+b*f,e[2]=E*o+x*d+A*m+b*_,e[3]=E*i+x*c+A*g+b*y,E=n[4],x=n[5],A=n[6],b=n[7],e[4]=E*r+x*s+A*u+b*h,e[5]=E*a+x*l+A*p+b*f,e[6]=E*o+x*d+A*m+b*_,e[7]=E*i+x*c+A*g+b*y,E=n[8],x=n[9],A=n[10],b=n[11],e[8]=E*r+x*s+A*u+b*h,e[9]=E*a+x*l+A*p+b*f,e[10]=E*o+x*d+A*m+b*_,e[11]=E*i+x*c+A*g+b*y,E=n[12],x=n[13],A=n[14],b=n[15],e[12]=E*r+x*s+A*u+b*h,e[13]=E*a+x*l+A*p+b*f,e[14]=E*o+x*d+A*m+b*_,e[15]=E*i+x*c+A*g+b*y,e}function translate(e,t,n){var r=n[0],a=n[1],o=n[2],i=void 0,s=void 0,l=void 0,d=void 0,c=void 0,u=void 0,p=void 0,m=void 0,g=void 0,h=void 0,f=void 0,_=void 0;return t===e?(e[12]=t[0]*r+t[4]*a+t[8]*o+t[12],e[13]=t[1]*r+t[5]*a+t[9]*o+t[13],e[14]=t[2]*r+t[6]*a+t[10]*o+t[14],e[15]=t[3]*r+t[7]*a+t[11]*o+t[15]):(i=t[0],s=t[1],l=t[2],d=t[3],c=t[4],u=t[5],p=t[6],m=t[7],g=t[8],h=t[9],f=t[10],_=t[11],e[0]=i,e[1]=s,e[2]=l,e[3]=d,e[4]=c,e[5]=u,e[6]=p,e[7]=m,e[8]=g,e[9]=h,e[10]=f,e[11]=_,e[12]=i*r+c*a+g*o+t[12],e[13]=s*r+u*a+h*o+t[13],e[14]=l*r+p*a+f*o+t[14],e[15]=d*r+m*a+_*o+t[15]),e}function scale(e,t,n){var r=n[0],a=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function rotate(e,n,r,a){var d=a[0],p=a[1],m=a[2],g=o(d*d+p*p+m*m),h=void 0,s=void 0,c=void 0,t=void 0,f=void 0,_=void 0,y=void 0,E=void 0,x=void 0,A=void 0,b=void 0,T=void 0,C=void 0,v=void 0,S=void 0,R=void 0,F=void 0,w=void 0,L=void 0,M=void 0,I=void 0,D=void 0,B=void 0,N=void 0;return g<u.EPSILON?null:(g=1/g,d*=g,p*=g,m*=g,h=l(r),s=i(r),c=1-s,t=n[0],f=n[1],_=n[2],y=n[3],E=n[4],x=n[5],A=n[6],b=n[7],T=n[8],C=n[9],v=n[10],S=n[11],R=d*d*c+s,F=p*d*c+m*h,w=m*d*c-p*h,L=d*p*c-m*h,M=p*p*c+s,I=m*p*c+d*h,D=d*m*c+p*h,B=p*m*c-d*h,N=m*m*c+s,e[0]=t*R+E*F+T*w,e[1]=f*R+x*F+C*w,e[2]=_*R+A*F+v*w,e[3]=y*R+b*F+S*w,e[4]=t*L+E*M+T*I,e[5]=f*L+x*M+C*I,e[6]=_*L+A*M+v*I,e[7]=y*L+b*M+S*I,e[8]=t*D+E*B+T*N,e[9]=f*D+x*B+C*N,e[10]=_*D+A*B+v*N,e[11]=y*D+b*B+S*N,n!==e&&(e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15]),e)}function rotateX(e,t,n){var r=l(n),a=i(n),o=t[4],s=t[5],d=t[6],c=t[7],u=t[8],p=t[9],m=t[10],g=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*a+u*r,e[5]=s*a+p*r,e[6]=d*a+m*r,e[7]=c*a+g*r,e[8]=u*a-o*r,e[9]=p*a-s*r,e[10]=m*a-d*r,e[11]=g*a-c*r,e}function rotateY(e,t,n){var r=l(n),a=i(n),o=t[0],s=t[1],d=t[2],c=t[3],u=t[8],p=t[9],m=t[10],g=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a-u*r,e[1]=s*a-p*r,e[2]=d*a-m*r,e[3]=c*a-g*r,e[8]=o*r+u*a,e[9]=s*r+p*a,e[10]=d*r+m*a,e[11]=c*r+g*a,e}function rotateZ(e,t,n){var r=l(n),a=i(n),o=t[0],s=t[1],d=t[2],c=t[3],u=t[4],p=t[5],m=t[6],g=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*a+u*r,e[1]=s*a+p*r,e[2]=d*a+m*r,e[3]=c*a+g*r,e[4]=u*a-o*r,e[5]=p*a-s*r,e[6]=m*a-d*r,e[7]=g*a-c*r,e}function fromTranslation(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fromScaling(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotation(e,n,r){var a=r[0],d=r[1],p=r[2],m=o(a*a+d*d+p*p),g=void 0,s=void 0,c=void 0;return m<u.EPSILON?null:(m=1/m,a*=m,d*=m,p*=m,g=l(n),s=i(n),c=1-s,e[0]=a*a*c+s,e[1]=d*a*c+p*g,e[2]=p*a*c-d*g,e[3]=0,e[4]=a*d*c-p*g,e[5]=d*d*c+s,e[6]=p*d*c+a*g,e[7]=0,e[8]=a*p*c+d*g,e[9]=d*p*c-a*g,e[10]=p*p*c+s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function fromXRotation(e,t){var n=l(t),r=i(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromYRotation(e,t){var n=l(t),r=i(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromZRotation(e,t){var n=l(t),r=i(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function fromRotationTranslation(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=r+r,l=a+a,d=o+o,c=r*s,u=r*l,p=r*d,m=a*l,g=a*d,h=o*d,f=i*s,_=i*l,y=i*d;return e[0]=1-(m+h),e[1]=u+y,e[2]=p-_,e[3]=0,e[4]=u-y,e[5]=1-(c+h),e[6]=g+f,e[7]=0,e[8]=p+_,e[9]=g-f,e[10]=1-(c+m),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fromQuat2(e,t){var n=new u.ARRAY_TYPE(3),r=-t[0],a=-t[1],o=-t[2],i=t[3],s=t[4],l=t[5],d=t[6],c=t[7],p=r*r+a*a+o*o+i*i;return 0<p?(n[0]=2*(s*i+c*r+l*o-d*a)/p,n[1]=2*(l*i+c*a+d*r-s*o)/p,n[2]=2*(d*i+c*o+s*a-l*r)/p):(n[0]=2*(s*i+c*r+l*o-d*a),n[1]=2*(l*i+c*a+d*r-s*o),n[2]=2*(d*i+c*o+s*a-l*r)),fromRotationTranslation(e,t,n),e}function getTranslation(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function getScaling(e,t){var n=t[0],r=t[1],a=t[2],i=t[4],s=t[5],l=t[6],d=t[8],c=t[9],u=t[10];return e[0]=o(n*n+r*r+a*a),e[1]=o(i*i+s*s+l*l),e[2]=o(d*d+c*c+u*u),e}function getRotation(e,t){var n=t[0]+t[5]+t[10],r=0;return 0<n?(r=2*o(n+1),e[3]=.25*r,e[0]=(t[6]-t[9])/r,e[1]=(t[8]-t[2])/r,e[2]=(t[1]-t[4])/r):t[0]>t[5]&&t[0]>t[10]?(r=2*o(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/r,e[0]=.25*r,e[1]=(t[1]+t[4])/r,e[2]=(t[8]+t[2])/r):t[5]>t[10]?(r=2*o(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/r,e[0]=(t[1]+t[4])/r,e[1]=.25*r,e[2]=(t[6]+t[9])/r):(r=2*o(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/r,e[0]=(t[8]+t[2])/r,e[1]=(t[6]+t[9])/r,e[2]=.25*r),e}function fromRotationTranslationScale(e,t,n,r){var a=t[0],o=t[1],i=t[2],s=t[3],l=a+a,d=o+o,c=i+i,u=a*l,p=a*d,m=a*c,g=o*d,h=o*c,f=i*c,_=s*l,y=s*d,E=s*c,x=r[0],A=r[1],b=r[2];return e[0]=(1-(g+f))*x,e[1]=(p+E)*x,e[2]=(m-y)*x,e[3]=0,e[4]=(p-E)*A,e[5]=(1-(u+f))*A,e[6]=(h+_)*A,e[7]=0,e[8]=(m+y)*b,e[9]=(h-_)*b,e[10]=(1-(u+g))*b,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fromRotationTranslationScaleOrigin(e,t,n,r,a){var o=t[0],i=t[1],s=t[2],l=t[3],d=o+o,c=i+i,u=s+s,p=o*d,m=o*c,g=o*u,h=i*c,f=i*u,_=s*u,y=l*d,E=l*c,x=l*u,A=r[0],b=r[1],T=r[2],C=a[0],v=a[1],S=a[2],R=(1-(h+_))*A,F=(m+x)*A,w=(g-E)*A,L=(m-x)*b,M=(1-(p+_))*b,I=(f+y)*b,D=(g+E)*T,B=(f-y)*T,N=(1-(p+h))*T;return e[0]=R,e[1]=F,e[2]=w,e[3]=0,e[4]=L,e[5]=M,e[6]=I,e[7]=0,e[8]=D,e[9]=B,e[10]=N,e[11]=0,e[12]=n[0]+C-(R*C+L*v+D*S),e[13]=n[1]+v-(F*C+M*v+B*S),e[14]=n[2]+S-(w*C+I*v+N*S),e[15]=1,e}function fromQuat(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n+n,s=r+r,l=a+a,d=n*i,c=r*i,u=r*s,p=a*i,m=a*s,g=a*l,h=o*i,f=o*s,_=o*l;return e[0]=1-u-g,e[1]=c+_,e[2]=p-f,e[3]=0,e[4]=c-_,e[5]=1-d-g,e[6]=m+h,e[7]=0,e[8]=p+f,e[9]=m-h,e[10]=1-d-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function frustum(e,t,n,r,a,o,i){var s=1/(n-t),l=1/(a-r),d=1/(o-i);return e[0]=2*o*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*o*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(i+o)*d,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*(i*o)*d,e[15]=0,e}function perspective(e,t,n,a,o){var i=1/r(t/2),s;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=o&&o!==Infinity?(s=1/(a-o),e[10]=(o+a)*s,e[14]=2*o*a*s):(e[10]=-1,e[14]=-2*a),e}function perspectiveFromFieldOfView(e,t,n,o){var i=r(t.upDegrees*a/180),s=r(t.downDegrees*a/180),l=r(t.leftDegrees*a/180),d=r(t.rightDegrees*a/180),c=2/(l+d),u=2/(i+s);return e[0]=c,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(.5*((l-d)*c)),e[9]=.5*((i-s)*u),e[10]=o/(n-o),e[11]=-1,e[12]=0,e[13]=0,e[14]=o*n/(n-o),e[15]=0,e}function ortho(e,t,n,r,a,o,i){var s=1/(t-n),l=1/(r-a),d=1/(o-i);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*d,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(i+o)*d,e[15]=1,e}function lookAt(e,t,n,r){var a=void 0,i=void 0,s=void 0,l=void 0,c=void 0,p=void 0,m=void 0,g=void 0,h=void 0,f=void 0,_=t[0],y=t[1],E=t[2],x=r[0],A=r[1],b=r[2],T=n[0],C=n[1],v=n[2];return d(_-T)<u.EPSILON&&d(y-C)<u.EPSILON&&d(E-v)<u.EPSILON?identity(e):(m=_-T,g=y-C,h=E-v,f=1/o(m*m+g*g+h*h),m*=f,g*=f,h*=f,a=A*h-b*g,i=b*m-x*h,s=x*g-A*m,f=o(a*a+i*i+s*s),f?(f=1/f,a*=f,i*=f,s*=f):(a=0,i=0,s=0),l=g*s-h*i,c=h*a-m*s,p=m*i-g*a,f=o(l*l+c*c+p*p),f?(f=1/f,l*=f,c*=f,p*=f):(l=0,c=0,p=0),e[0]=a,e[1]=l,e[2]=m,e[3]=0,e[4]=i,e[5]=c,e[6]=g,e[7]=0,e[8]=s,e[9]=p,e[10]=h,e[11]=0,e[12]=-(a*_+i*y+s*E),e[13]=-(l*_+c*y+p*E),e[14]=-(m*_+g*y+h*E),e[15]=1,e)}function targetTo(e,t,n,r){var a=t[0],i=t[1],s=t[2],l=r[0],d=r[1],c=r[2],u=a-n[0],p=i-n[1],m=s-n[2],g=u*u+p*p+m*m;0<g&&(g=1/o(g),u*=g,p*=g,m*=g);var h=d*m-c*p,f=c*u-l*m,_=l*p-d*u;return g=h*h+f*f+_*_,0<g&&(g=1/o(g),h*=g,f*=g,_*=g),e[0]=h,e[1]=f,e[2]=_,e[3]=0,e[4]=p*_-m*f,e[5]=m*h-u*_,e[6]=u*f-p*h,e[7]=0,e[8]=u,e[9]=p,e[10]=m,e[11]=0,e[12]=a,e[13]=i,e[14]=s,e[15]=1,e}function str(e){return'mat4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+', '+e[8]+', '+e[9]+', '+e[10]+', '+e[11]+', '+e[12]+', '+e[13]+', '+e[14]+', '+e[15]+')'}function frob(e){return o(s(e[0],2)+s(e[1],2)+s(e[2],2)+s(e[3],2)+s(e[4],2)+s(e[5],2)+s(e[6],2)+s(e[7],2)+s(e[8],2)+s(e[9],2)+s(e[10],2)+s(e[11],2)+s(e[12],2)+s(e[13],2)+s(e[14],2)+s(e[15],2))}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function multiplyScalar(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function multiplyScalarAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],l=e[6],p=e[7],m=e[8],g=e[9],h=e[10],f=e[11],_=e[12],y=e[13],E=e[14],x=e[15],A=t[0],b=t[1],T=t[2],C=t[3],v=t[4],S=t[5],R=t[6],F=t[7],w=t[8],L=t[9],M=t[10],I=t[11],D=t[12],B=t[13],N=t[14],P=t[15];return d(n-A)<=u.EPSILON*c(1,d(n),d(A))&&d(r-b)<=u.EPSILON*c(1,d(r),d(b))&&d(a-T)<=u.EPSILON*c(1,d(a),d(T))&&d(o-C)<=u.EPSILON*c(1,d(o),d(C))&&d(i-v)<=u.EPSILON*c(1,d(i),d(v))&&d(s-S)<=u.EPSILON*c(1,d(s),d(S))&&d(l-R)<=u.EPSILON*c(1,d(l),d(R))&&d(p-F)<=u.EPSILON*c(1,d(p),d(F))&&d(m-w)<=u.EPSILON*c(1,d(m),d(w))&&d(g-L)<=u.EPSILON*c(1,d(g),d(L))&&d(h-M)<=u.EPSILON*c(1,d(h),d(M))&&d(f-I)<=u.EPSILON*c(1,d(f),d(I))&&d(_-D)<=u.EPSILON*c(1,d(_),d(D))&&d(y-B)<=u.EPSILON*c(1,d(y),d(B))&&d(E-N)<=u.EPSILON*c(1,d(E),d(N))&&d(x-P)<=u.EPSILON*c(1,d(x),d(P))}var r=Math.tan,o=Math.sqrt,i=Math.cos,l=Math.sin,a=Math.PI,s=Math.pow,d=Math.abs,c=Math.max;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'copy',function(){return copy}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'set',function(){return set}),n.d(t,'identity',function(){return identity}),n.d(t,'transpose',function(){return transpose}),n.d(t,'invert',function(){return invert}),n.d(t,'adjoint',function(){return adjoint}),n.d(t,'determinant',function(){return determinant}),n.d(t,'multiply',function(){return multiply}),n.d(t,'translate',function(){return translate}),n.d(t,'scale',function(){return scale}),n.d(t,'rotate',function(){return rotate}),n.d(t,'rotateX',function(){return rotateX}),n.d(t,'rotateY',function(){return rotateY}),n.d(t,'rotateZ',function(){return rotateZ}),n.d(t,'fromTranslation',function(){return fromTranslation}),n.d(t,'fromScaling',function(){return fromScaling}),n.d(t,'fromRotation',function(){return fromRotation}),n.d(t,'fromXRotation',function(){return fromXRotation}),n.d(t,'fromYRotation',function(){return fromYRotation}),n.d(t,'fromZRotation',function(){return fromZRotation}),n.d(t,'fromRotationTranslation',function(){return fromRotationTranslation}),n.d(t,'fromQuat2',function(){return fromQuat2}),n.d(t,'getTranslation',function(){return getTranslation}),n.d(t,'getScaling',function(){return getScaling}),n.d(t,'getRotation',function(){return getRotation}),n.d(t,'fromRotationTranslationScale',function(){return fromRotationTranslationScale}),n.d(t,'fromRotationTranslationScaleOrigin',function(){return fromRotationTranslationScaleOrigin}),n.d(t,'fromQuat',function(){return fromQuat}),n.d(t,'frustum',function(){return frustum}),n.d(t,'perspective',function(){return perspective}),n.d(t,'perspectiveFromFieldOfView',function(){return perspectiveFromFieldOfView}),n.d(t,'ortho',function(){return ortho}),n.d(t,'lookAt',function(){return lookAt}),n.d(t,'targetTo',function(){return targetTo}),n.d(t,'str',function(){return str}),n.d(t,'frob',function(){return frob}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiplyScalar',function(){return multiplyScalar}),n.d(t,'multiplyScalarAndAdd',function(){return multiplyScalarAndAdd}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'mul',function(){return p}),n.d(t,'sub',function(){return m});var u=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),p=multiply,m=subtract},"./node_modules/gl-matrix/lib/gl-matrix/quat.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat.js ***!
  \******************************************************//*! exports provided: create, identity, setAxisAngle, getAxisAngle, multiply, rotateX, rotateY, rotateZ, calculateW, slerp, random, invert, conjugate, fromMat3, fromEuler, str, clone, fromValues, copy, set, add, mul, scale, dot, lerp, length, len, squaredLength, sqrLen, normalize, exactEquals, equals, rotationTo, sqlerp, setAxes */function(e,t,n){'use strict';function create(){var e=new d.ARRAY_TYPE(4);return d.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function identity(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function setAxisAngle(e,t,n){n*=.5;var r=l(n);return e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=i(n),e}function getAxisAngle(e,t){var n=2*r(t[3]),a=l(n/2);return a>d.EPSILON?(e[0]=t[0]/a,e[1]=t[1]/a,e[2]=t[2]/a):(e[0]=1,e[1]=0,e[2]=0),n}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1],d=n[2],c=n[3];return e[0]=r*c+i*s+a*d-o*l,e[1]=a*c+i*l+o*s-r*d,e[2]=o*c+i*d+r*l-a*s,e[3]=i*c-r*s-a*l-o*d,e}function rotateX(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],s=t[3],d=l(n),c=i(n);return e[0]=r*c+s*d,e[1]=a*c+o*d,e[2]=o*c-a*d,e[3]=s*c-r*d,e}function rotateY(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],s=t[3],d=l(n),c=i(n);return e[0]=r*c-o*d,e[1]=a*c+s*d,e[2]=o*c+r*d,e[3]=s*c-a*d,e}function rotateZ(e,t,n){n*=.5;var r=t[0],a=t[1],o=t[2],s=t[3],d=l(n),c=i(n);return e[0]=r*c+a*d,e[1]=a*c-r*d,e[2]=o*c+s*d,e[3]=s*c-o*d,e}function calculateW(e,t){var n=t[0],r=t[1],a=t[2];return e[0]=n,e[1]=r,e[2]=a,e[3]=o(Math.abs(1-n*n-r*r-a*a)),e}function slerp(e,n,a,o){var t=n[0],i=n[1],s=n[2],c=n[3],u=a[0],p=a[1],m=a[2],g=a[3],h=void 0,f=void 0,_=void 0,y=void 0,E=void 0;return f=t*u+i*p+s*m+c*g,0>f&&(f=-f,u=-u,p=-p,m=-m,g=-g),1-f>d.EPSILON?(h=r(f),_=l(h),y=l((1-o)*h)/_,E=l(o*h)/_):(y=1-o,E=o),e[0]=y*t+E*u,e[1]=y*i+E*p,e[2]=y*s+E*m,e[3]=y*c+E*g,e}function random(e){var t=d.RANDOM(),n=d.RANDOM(),r=d.RANDOM(),s=o(1-t),c=o(t);return e[0]=s*l(2*a*n),e[1]=s*i(2*a*n),e[2]=c*l(2*a*r),e[3]=c*i(2*a*r),e}function invert(e,t){var n=t[0],r=t[1],a=t[2],o=t[3],i=n*n+r*r+a*a+o*o,s=i?1/i:0;return e[0]=-n*s,e[1]=-r*s,e[2]=-a*s,e[3]=o*s,e}function conjugate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function fromMat3(e,t){var n=t[0]+t[4]+t[8],r=void 0;if(0<n)r=o(n+1),e[3]=.5*r,r=.5/r,e[0]=(t[5]-t[7])*r,e[1]=(t[6]-t[2])*r,e[2]=(t[1]-t[3])*r;else{var a=0;t[4]>t[0]&&(a=1),t[8]>t[3*a+a]&&(a=2);var i=(a+1)%3,s=(a+2)%3;r=o(t[3*a+a]-t[3*i+i]-t[3*s+s]+1),e[a]=.5*r,r=.5/r,e[3]=(t[3*i+s]-t[3*s+i])*r,e[i]=(t[3*i+a]+t[3*a+i])*r,e[s]=(t[3*s+a]+t[3*a+s])*r}return e}function fromEuler(e,t,n,r){var o=.5*a/180;t*=o,n*=o,r*=o;var s=l(t),d=i(t),c=l(n),u=i(n),p=l(r),m=i(r);return e[0]=s*u*m-d*c*p,e[1]=d*c*m+s*u*p,e[2]=d*u*p-s*c*m,e[3]=d*u*m+s*c*p,e}function str(e){return'quat('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}var r=Math.acos,o=Math.sqrt,i=Math.cos,l=Math.sin,a=Math.PI;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'identity',function(){return identity}),n.d(t,'setAxisAngle',function(){return setAxisAngle}),n.d(t,'getAxisAngle',function(){return getAxisAngle}),n.d(t,'multiply',function(){return multiply}),n.d(t,'rotateX',function(){return rotateX}),n.d(t,'rotateY',function(){return rotateY}),n.d(t,'rotateZ',function(){return rotateZ}),n.d(t,'calculateW',function(){return calculateW}),n.d(t,'slerp',function(){return slerp}),n.d(t,'random',function(){return random}),n.d(t,'invert',function(){return invert}),n.d(t,'conjugate',function(){return conjugate}),n.d(t,'fromMat3',function(){return fromMat3}),n.d(t,'fromEuler',function(){return fromEuler}),n.d(t,'str',function(){return str}),n.d(t,'clone',function(){return p}),n.d(t,'fromValues',function(){return m}),n.d(t,'copy',function(){return g}),n.d(t,'set',function(){return h}),n.d(t,'add',function(){return f}),n.d(t,'mul',function(){return _}),n.d(t,'scale',function(){return y}),n.d(t,'dot',function(){return E}),n.d(t,'lerp',function(){return x}),n.d(t,'length',function(){return A}),n.d(t,'len',function(){return b}),n.d(t,'squaredLength',function(){return T}),n.d(t,'sqrLen',function(){return C}),n.d(t,'normalize',function(){return v}),n.d(t,'exactEquals',function(){return S}),n.d(t,'equals',function(){return R}),n.d(t,'rotationTo',function(){return F}),n.d(t,'sqlerp',function(){return w}),n.d(t,'setAxes',function(){return L});var d=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),s=n(/*! ./mat3.js */'./node_modules/gl-matrix/lib/gl-matrix/mat3.js'),c=n(/*! ./vec3.js */'./node_modules/gl-matrix/lib/gl-matrix/vec3.js'),u=n(/*! ./vec4.js */'./node_modules/gl-matrix/lib/gl-matrix/vec4.js'),p=u.clone,m=u.fromValues,g=u.copy,h=u.set,f=u.add,_=multiply,y=u.scale,E=u.dot,x=u.lerp,A=u.length,b=A,T=u.squaredLength,C=T,v=u.normalize,S=u.exactEquals,R=u.equals,F=function(){var e=c.create(),t=c.fromValues(1,0,0),n=c.fromValues(0,1,0);return function(r,o,a){var i=c.dot(o,a);return-.999999>i?(c.cross(e,t,o),1e-6>c.len(e)&&c.cross(e,n,o),c.normalize(e,e),setAxisAngle(r,e,Math.PI),r):.999999<i?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(c.cross(e,o,a),r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=1+i,v(r,r))}}(),w=function(){var e=create(),n=create();return function(r,o,a,i,s,l){return slerp(e,o,s,l),slerp(n,a,i,l),slerp(r,e,n,2*l*(1-l)),r}}(),L=function(){var e=s.create();return function(t,n,r,a){return e[0]=r[0],e[3]=r[1],e[6]=r[2],e[1]=a[0],e[4]=a[1],e[7]=a[2],e[2]=-n[0],e[5]=-n[1],e[8]=-n[2],v(t,fromMat3(t,e))}}()},"./node_modules/gl-matrix/lib/gl-matrix/quat2.js":/*!*******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/quat2.js ***!
  \*******************************************************//*! exports provided: create, clone, fromValues, fromRotationTranslationValues, fromRotationTranslation, fromTranslation, fromRotation, fromMat4, copy, identity, set, getReal, getDual, setReal, setDual, getTranslation, translate, rotateX, rotateY, rotateZ, rotateByQuatAppend, rotateByQuatPrepend, rotateAroundAxis, add, multiply, mul, scale, dot, lerp, invert, conjugate, length, len, squaredLength, sqrLen, normalize, str, exactEquals, equals */function(e,t,n){'use strict';function create(){var e=new l.ARRAY_TYPE(8);return l.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0),e[3]=1,e}function clone(e){var t=new l.ARRAY_TYPE(8);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function fromValues(e,t,n,r,a,o,i,s){var d=new l.ARRAY_TYPE(8);return d[0]=e,d[1]=t,d[2]=n,d[3]=r,d[4]=a,d[5]=o,d[6]=i,d[7]=s,d}function fromRotationTranslationValues(e,t,n,r,a,o,i){var s=new l.ARRAY_TYPE(8);s[0]=e,s[1]=t,s[2]=n,s[3]=r;var d=.5*a,c=.5*o,u=.5*i;return s[4]=d*r+c*n-u*t,s[5]=c*r+u*e-d*n,s[6]=u*r+d*t-c*e,s[7]=-d*e-c*t-u*n,s}function fromRotationTranslation(e,n,r){var t=.5*r[0],a=.5*r[1],o=.5*r[2],i=n[0],s=n[1],l=n[2],d=n[3];return e[0]=i,e[1]=s,e[2]=l,e[3]=d,e[4]=t*d+a*l-o*s,e[5]=a*d+o*i-t*l,e[6]=o*d+t*s-a*i,e[7]=-t*i-a*s-o*l,e}function fromTranslation(e,n){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=.5*n[0],e[5]=.5*n[1],e[6]=.5*n[2],e[7]=0,e}function fromRotation(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function fromMat4(e,n){var r=s.create();d.getRotation(r,n);var a=new l.ARRAY_TYPE(3);return d.getTranslation(a,n),fromRotationTranslation(e,r,a),e}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function identity(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e}function set(e,t,n,r,a,o,i,s,l){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=o,e[5]=i,e[6]=s,e[7]=l,e}function getDual(e,t){return e[0]=t[4],e[1]=t[5],e[2]=t[6],e[3]=t[7],e}function setDual(e,t){return e[4]=t[0],e[5]=t[1],e[6]=t[2],e[7]=t[3],e}function getTranslation(e,t){var n=t[4],r=t[5],a=t[6],o=t[7],i=-t[0],s=-t[1],l=-t[2],d=t[3];return e[0]=2*(n*d+o*i+r*l-a*s),e[1]=2*(r*d+o*s+a*i-n*l),e[2]=2*(a*d+o*l+n*s-r*i),e}function translate(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=.5*n[0],l=.5*n[1],d=.5*n[2],c=t[4],u=t[5],p=t[6],m=t[7];return e[0]=r,e[1]=a,e[2]=o,e[3]=i,e[4]=i*s+a*d-o*l+c,e[5]=i*l+o*s-r*d+u,e[6]=i*d+r*l-a*s+p,e[7]=-r*s-a*l-o*d+m,e}function rotateX(e,t,n){var r=-t[0],a=-t[1],o=-t[2],i=t[3],l=t[4],d=t[5],c=t[6],u=t[7],p=l*i+u*r+d*o-c*a,m=d*i+u*a+c*r-l*o,g=c*i+u*o+l*a-d*r,h=u*i-l*r-d*a-c*o;return s.rotateX(e,t,n),r=e[0],a=e[1],o=e[2],i=e[3],e[4]=p*i+h*r+m*o-g*a,e[5]=m*i+h*a+g*r-p*o,e[6]=g*i+h*o+p*a-m*r,e[7]=h*i-p*r-m*a-g*o,e}function rotateY(e,t,n){var r=-t[0],a=-t[1],o=-t[2],i=t[3],l=t[4],d=t[5],c=t[6],u=t[7],p=l*i+u*r+d*o-c*a,m=d*i+u*a+c*r-l*o,g=c*i+u*o+l*a-d*r,h=u*i-l*r-d*a-c*o;return s.rotateY(e,t,n),r=e[0],a=e[1],o=e[2],i=e[3],e[4]=p*i+h*r+m*o-g*a,e[5]=m*i+h*a+g*r-p*o,e[6]=g*i+h*o+p*a-m*r,e[7]=h*i-p*r-m*a-g*o,e}function rotateZ(e,t,n){var r=-t[0],a=-t[1],o=-t[2],i=t[3],l=t[4],d=t[5],c=t[6],u=t[7],p=l*i+u*r+d*o-c*a,m=d*i+u*a+c*r-l*o,g=c*i+u*o+l*a-d*r,h=u*i-l*r-d*a-c*o;return s.rotateZ(e,t,n),r=e[0],a=e[1],o=e[2],i=e[3],e[4]=p*i+h*r+m*o-g*a,e[5]=m*i+h*a+g*r-p*o,e[6]=g*i+h*o+p*a-m*r,e[7]=h*i-p*r-m*a-g*o,e}function rotateByQuatAppend(e,t,n){var r=n[0],a=n[1],o=n[2],i=n[3],s=t[0],l=t[1],d=t[2],c=t[3];return e[0]=s*i+c*r+l*o-d*a,e[1]=l*i+c*a+d*r-s*o,e[2]=d*i+c*o+s*a-l*r,e[3]=c*i-s*r-l*a-d*o,s=t[4],l=t[5],d=t[6],c=t[7],e[4]=s*i+c*r+l*o-d*a,e[5]=l*i+c*a+d*r-s*o,e[6]=d*i+c*o+s*a-l*r,e[7]=c*i-s*r-l*a-d*o,e}function rotateByQuatPrepend(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[0],l=n[1],d=n[2],c=n[3];return e[0]=r*c+i*s+a*d-o*l,e[1]=a*c+i*l+o*s-r*d,e[2]=o*c+i*d+r*l-a*s,e[3]=i*c-r*s-a*l-o*d,s=n[4],l=n[5],d=n[6],c=n[7],e[4]=r*c+i*s+a*d-o*l,e[5]=a*c+i*l+o*s-r*d,e[6]=o*c+i*d+r*l-a*s,e[7]=i*c-r*s-a*l-o*d,e}function rotateAroundAxis(e,t,n,a){if(o(a)<l.EPSILON)return copy(e,t);var i=r(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);a*=.5;var d=Math.sin(a),s=d*n[0]/i,c=d*n[1]/i,u=d*n[2]/i,p=Math.cos(a),m=t[0],g=t[1],h=t[2],f=t[3];e[0]=m*p+f*s+g*u-h*c,e[1]=g*p+f*c+h*s-m*u,e[2]=h*p+f*u+m*c-g*s,e[3]=f*p-m*s-g*c-h*u;var _=t[4],y=t[5],E=t[6],x=t[7];return e[4]=_*p+x*s+y*u-E*c,e[5]=y*p+x*c+E*s-_*u,e[6]=E*p+x*u+_*c-y*s,e[7]=x*p-_*s-y*c-E*u,e}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e}function multiply(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3],s=n[4],l=n[5],d=n[6],c=n[7],u=t[4],p=t[5],m=t[6],g=t[7],h=n[0],f=n[1],_=n[2],y=n[3];return e[0]=r*y+i*h+a*_-o*f,e[1]=a*y+i*f+o*h-r*_,e[2]=o*y+i*_+r*f-a*h,e[3]=i*y-r*h-a*f-o*_,e[4]=r*c+i*s+a*d-o*l+u*y+g*h+p*_-m*f,e[5]=a*c+i*l+o*s-r*d+p*y+g*f+m*h-u*_,e[6]=o*c+i*d+r*l-a*s+m*y+g*_+u*f-p*h,e[7]=i*c-r*s-a*l-o*d+g*y-u*h-p*f-m*_,e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e}function lerp(e,n,r,a){var o=1-a;return 0>p(n,r)&&(a=-a),e[0]=n[0]*o+r[0]*a,e[1]=n[1]*o+r[1]*a,e[2]=n[2]*o+r[2]*a,e[3]=n[3]*o+r[3]*a,e[4]=n[4]*o+r[4]*a,e[5]=n[5]*o+r[5]*a,e[6]=n[6]*o+r[6]*a,e[7]=n[7]*o+r[7]*a,e}function invert(e,t){var n=h(t);return e[0]=-t[0]/n,e[1]=-t[1]/n,e[2]=-t[2]/n,e[3]=t[3]/n,e[4]=-t[4]/n,e[5]=-t[5]/n,e[6]=-t[6]/n,e[7]=t[7]/n,e}function conjugate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e[4]=-t[4],e[5]=-t[5],e[6]=-t[6],e[7]=t[7],e}function normalize(e,t){var n=h(t);if(0<n){n=r(n);var a=t[0]/n,o=t[1]/n,i=t[2]/n,s=t[3]/n,l=t[4],d=t[5],c=t[6],u=t[7],p=a*l+o*d+i*c+s*u;e[0]=a,e[1]=o,e[2]=i,e[3]=s,e[4]=(l-a*p)/n,e[5]=(d-o*p)/n,e[6]=(c-i*p)/n,e[7]=(u-s*p)/n}return e}function str(e){return'quat2('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+', '+e[4]+', '+e[5]+', '+e[6]+', '+e[7]+')'}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]}function equals(e,t){var n=e[0],r=e[1],a=e[2],s=e[3],d=e[4],c=e[5],u=e[6],p=e[7],m=t[0],g=t[1],h=t[2],f=t[3],_=t[4],y=t[5],E=t[6],x=t[7];return o(n-m)<=l.EPSILON*i(1,o(n),o(m))&&o(r-g)<=l.EPSILON*i(1,o(r),o(g))&&o(a-h)<=l.EPSILON*i(1,o(a),o(h))&&o(s-f)<=l.EPSILON*i(1,o(s),o(f))&&o(d-_)<=l.EPSILON*i(1,o(d),o(_))&&o(c-y)<=l.EPSILON*i(1,o(c),o(y))&&o(u-E)<=l.EPSILON*i(1,o(u),o(E))&&o(p-x)<=l.EPSILON*i(1,o(p),o(x))}var r=Math.sqrt,o=Math.abs,i=Math.max;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'fromRotationTranslationValues',function(){return fromRotationTranslationValues}),n.d(t,'fromRotationTranslation',function(){return fromRotationTranslation}),n.d(t,'fromTranslation',function(){return fromTranslation}),n.d(t,'fromRotation',function(){return fromRotation}),n.d(t,'fromMat4',function(){return fromMat4}),n.d(t,'copy',function(){return copy}),n.d(t,'identity',function(){return identity}),n.d(t,'set',function(){return set}),n.d(t,'getReal',function(){return a}),n.d(t,'getDual',function(){return getDual}),n.d(t,'setReal',function(){return c}),n.d(t,'setDual',function(){return setDual}),n.d(t,'getTranslation',function(){return getTranslation}),n.d(t,'translate',function(){return translate}),n.d(t,'rotateX',function(){return rotateX}),n.d(t,'rotateY',function(){return rotateY}),n.d(t,'rotateZ',function(){return rotateZ}),n.d(t,'rotateByQuatAppend',function(){return rotateByQuatAppend}),n.d(t,'rotateByQuatPrepend',function(){return rotateByQuatPrepend}),n.d(t,'rotateAroundAxis',function(){return rotateAroundAxis}),n.d(t,'add',function(){return add}),n.d(t,'multiply',function(){return multiply}),n.d(t,'mul',function(){return u}),n.d(t,'scale',function(){return scale}),n.d(t,'dot',function(){return p}),n.d(t,'lerp',function(){return lerp}),n.d(t,'invert',function(){return invert}),n.d(t,'conjugate',function(){return conjugate}),n.d(t,'length',function(){return m}),n.d(t,'len',function(){return g}),n.d(t,'squaredLength',function(){return h}),n.d(t,'sqrLen',function(){return f}),n.d(t,'normalize',function(){return normalize}),n.d(t,'str',function(){return str}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals});var l=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),s=n(/*! ./quat.js */'./node_modules/gl-matrix/lib/gl-matrix/quat.js'),d=n(/*! ./mat4.js */'./node_modules/gl-matrix/lib/gl-matrix/mat4.js'),a=s.copy,c=s.copy,u=multiply,p=s.dot,m=s.length,g=m,h=s.squaredLength,f=h},"./node_modules/gl-matrix/lib/gl-matrix/vec2.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec2.js ***!
  \******************************************************//*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, cross, lerp, random, transformMat2, transformMat2d, transformMat3, transformMat4, rotate, angle, str, exactEquals, equals, len, sub, mul, div, dist, sqrDist, sqrLen, forEach */function(e,t,n){'use strict';function create(){var e=new g.ARRAY_TYPE(2);return g.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0),e}function clone(e){var t=new g.ARRAY_TYPE(2);return t[0]=e[0],t[1]=e[1],t}function fromValues(e,t){var n=new g.ARRAY_TYPE(2);return n[0]=e,n[1]=t,n}function copy(e,t){return e[0]=t[0],e[1]=t[1],e}function set(e,t,n){return e[0]=t,e[1]=n,e}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function multiply(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}function divide(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}function ceil(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e}function floor(e,t){return e[0]=p(t[0]),e[1]=p(t[1]),e}function min(e,t,n){return e[0]=u(t[0],n[0]),e[1]=u(t[1],n[1]),e}function max(e,t,n){return e[0]=c(t[0],n[0]),e[1]=c(t[1],n[1]),e}function round(e,t){return e[0]=m(t[0]),e[1]=m(t[1]),e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function scaleAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}function distance(e,t){var n=t[0]-e[0],r=t[1]-e[1];return o(n*n+r*r)}function squaredDistance(e,t){var n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function length(e){var t=e[0],n=e[1];return o(t*t+n*n)}function squaredLength(e){var t=e[0],n=e[1];return t*t+n*n}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e}function inverse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function normalize(e,t){var n=t[0],r=t[1],a=n*n+r*r;return 0<a&&(a=1/o(a),e[0]=t[0]*a,e[1]=t[1]*a),e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]}function cross(e,t,n){var r=t[0]*n[1]-t[1]*n[0];return e[0]=e[1]=0,e[2]=r,e}function lerp(e,n,r,a){var t=n[0],o=n[1];return e[0]=t+a*(r[0]-t),e[1]=o+a*(r[1]-o),e}function random(e,t){t=t||1;var n=2*g.RANDOM()*l;return e[0]=i(n)*t,e[1]=s(n)*t,e}function transformMat2(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a,e[1]=n[1]*r+n[3]*a,e}function transformMat2d(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[2]*a+n[4],e[1]=n[1]*r+n[3]*a+n[5],e}function transformMat3(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[3]*a+n[6],e[1]=n[1]*r+n[4]*a+n[7],e}function transformMat4(e,t,n){var r=t[0],a=t[1];return e[0]=n[0]*r+n[4]*a+n[12],e[1]=n[1]*r+n[5]*a+n[13],e}function rotate(e,t,n,r){var a=t[0]-n[0],o=t[1]-n[1],l=s(r),d=i(r);return e[0]=a*d-o*l+n[0],e[1]=a*l+o*d+n[1],e}function angle(e,t){var n=e[0],r=e[1],a=t[0],i=t[1],s=n*n+r*r;0<s&&(s=1/o(s));var d=a*a+i*i;0<d&&(d=1/o(d));var c=(n*a+r*i)*s*d;return 1<c?0:-1>c?l:Math.acos(c)}function str(e){return'vec2('+e[0]+', '+e[1]+')'}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]}function equals(e,t){var n=e[0],r=e[1],a=t[0],o=t[1];return d(n-a)<=g.EPSILON*c(1,d(n),d(a))&&d(r-o)<=g.EPSILON*c(1,d(r),d(o))}var r=Math.ceil,o=Math.sqrt,i=Math.cos,s=Math.sin,l=Math.PI,d=Math.abs,c=Math.max,u=Math.min,p=Math.floor,m=Math.round;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'copy',function(){return copy}),n.d(t,'set',function(){return set}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiply',function(){return multiply}),n.d(t,'divide',function(){return divide}),n.d(t,'ceil',function(){return ceil}),n.d(t,'floor',function(){return floor}),n.d(t,'min',function(){return min}),n.d(t,'max',function(){return max}),n.d(t,'round',function(){return round}),n.d(t,'scale',function(){return scale}),n.d(t,'scaleAndAdd',function(){return scaleAndAdd}),n.d(t,'distance',function(){return distance}),n.d(t,'squaredDistance',function(){return squaredDistance}),n.d(t,'length',function(){return length}),n.d(t,'squaredLength',function(){return squaredLength}),n.d(t,'negate',function(){return negate}),n.d(t,'inverse',function(){return inverse}),n.d(t,'normalize',function(){return normalize}),n.d(t,'dot',function(){return dot}),n.d(t,'cross',function(){return cross}),n.d(t,'lerp',function(){return lerp}),n.d(t,'random',function(){return random}),n.d(t,'transformMat2',function(){return transformMat2}),n.d(t,'transformMat2d',function(){return transformMat2d}),n.d(t,'transformMat3',function(){return transformMat3}),n.d(t,'transformMat4',function(){return transformMat4}),n.d(t,'rotate',function(){return rotate}),n.d(t,'angle',function(){return angle}),n.d(t,'str',function(){return str}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'len',function(){return a}),n.d(t,'sub',function(){return h}),n.d(t,'mul',function(){return f}),n.d(t,'div',function(){return _}),n.d(t,'dist',function(){return y}),n.d(t,'sqrDist',function(){return E}),n.d(t,'sqrLen',function(){return x}),n.d(t,'forEach',function(){return A});var g=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=length,h=subtract,f=multiply,_=divide,y=distance,E=squaredDistance,x=squaredLength,A=function(){var e=create();return function(t,n,r,a,o,s){var d,i;for(n||(n=2),r||(r=0),i=a?u(a*n+r,t.length):t.length,d=r;d<i;d+=n)e[0]=t[d],e[1]=t[d+1],o(e,e,s),t[d]=e[0],t[d+1]=e[1];return t}}()},"./node_modules/gl-matrix/lib/gl-matrix/vec3.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec3.js ***!
  \******************************************************//*! exports provided: create, clone, length, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, squaredLength, negate, inverse, normalize, dot, cross, lerp, hermite, bezier, random, transformMat4, transformMat3, transformQuat, rotateX, rotateY, rotateZ, angle, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */function(e,t,n){'use strict';function create(){var e=new g.ARRAY_TYPE(3);return g.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function clone(e){var t=new g.ARRAY_TYPE(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function length(e){var t=e[0],n=e[1],r=e[2];return o(t*t+n*n+r*r)}function fromValues(e,t,n){var r=new g.ARRAY_TYPE(3);return r[0]=e,r[1]=t,r[2]=n,r}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function set(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function multiply(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function divide(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function ceil(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e[2]=r(t[2]),e}function floor(e,t){return e[0]=p(t[0]),e[1]=p(t[1]),e[2]=p(t[2]),e}function min(e,t,n){return e[0]=u(t[0],n[0]),e[1]=u(t[1],n[1]),e[2]=u(t[2],n[2]),e}function max(e,t,n){return e[0]=c(t[0],n[0]),e[1]=c(t[1],n[1]),e[2]=c(t[2],n[2]),e}function round(e,t){return e[0]=m(t[0]),e[1]=m(t[1]),e[2]=m(t[2]),e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function scaleAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function distance(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return o(n*n+r*r+a*a)}function squaredDistance(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function squaredLength(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function inverse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function normalize(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return 0<i&&(i=1/o(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function cross(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],s=n[1],l=n[2];return e[0]=a*l-o*s,e[1]=o*i-r*l,e[2]=r*s-a*i,e}function lerp(e,n,r,a){var t=n[0],o=n[1],i=n[2];return e[0]=t+a*(r[0]-t),e[1]=o+a*(r[1]-o),e[2]=i+a*(r[2]-i),e}function hermite(e,n,r,a,o,i){var t=i*i,s=t*(2*i-3)+1,l=t*(i-2)+i,d=t*(i-1),c=t*(3-2*i);return e[0]=n[0]*s+r[0]*l+a[0]*d+o[0]*c,e[1]=n[1]*s+r[1]*l+a[1]*d+o[1]*c,e[2]=n[2]*s+r[2]*l+a[2]*d+o[2]*c,e}function bezier(e,n,r,a,o,i){var t=1-i,s=t*t,l=i*i,d=s*t,c=3*i*s,u=3*l*t,p=l*i;return e[0]=n[0]*d+r[0]*c+a[0]*u+o[0]*p,e[1]=n[1]*d+r[1]*c+a[1]*u+o[1]*p,e[2]=n[2]*d+r[2]*c+a[2]*u+o[2]*p,e}function random(e,t){t=t||1;var n=2*g.RANDOM()*l,r=2*g.RANDOM()-1,a=o(1-r*r)*t;return e[0]=i(n)*a,e[1]=s(n)*a,e[2]=r*t,e}function transformMat4(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,e[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,e[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,e[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,e}function transformMat3(e,t,n){var r=t[0],a=t[1],o=t[2];return e[0]=r*n[0]+a*n[3]+o*n[6],e[1]=r*n[1]+a*n[4]+o*n[7],e[2]=r*n[2]+a*n[5]+o*n[8],e}function transformQuat(e,t,n){var r=n[0],a=n[1],o=n[2],i=n[3],s=t[0],l=t[1],d=t[2],c=a*d-o*l,u=o*s-r*d,p=r*l-a*s,m=a*p-o*u,g=o*c-r*p,h=r*u-a*c,f=2*i;return c*=f,u*=f,p*=f,m*=2,g*=2,h*=2,e[0]=s+c+m,e[1]=l+u+g,e[2]=d+p+h,e}function rotateX(e,t,n,a){var o=[],l=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],l[0]=o[0],l[1]=o[1]*i(a)-o[2]*s(a),l[2]=o[1]*s(a)+o[2]*i(a),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function rotateY(e,t,n,a){var o=[],l=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],l[0]=o[2]*s(a)+o[0]*i(a),l[1]=o[1],l[2]=o[2]*i(a)-o[0]*s(a),e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function rotateZ(e,t,n,a){var o=[],l=[];return o[0]=t[0]-n[0],o[1]=t[1]-n[1],o[2]=t[2]-n[2],l[0]=o[0]*i(a)-o[1]*s(a),l[1]=o[0]*s(a)+o[1]*i(a),l[2]=o[2],e[0]=l[0]+n[0],e[1]=l[1]+n[1],e[2]=l[2]+n[2],e}function angle(e,t){var n=fromValues(e[0],e[1],e[2]),r=fromValues(t[0],t[1],t[2]);normalize(n,n),normalize(r,r);var a=dot(n,r);return 1<a?0:-1>a?l:Math.acos(a)}function str(e){return'vec3('+e[0]+', '+e[1]+', '+e[2]+')'}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=t[0],i=t[1],s=t[2];return d(n-o)<=g.EPSILON*c(1,d(n),d(o))&&d(r-i)<=g.EPSILON*c(1,d(r),d(i))&&d(a-s)<=g.EPSILON*c(1,d(a),d(s))}var r=Math.ceil,o=Math.sqrt,i=Math.cos,s=Math.sin,l=Math.PI,d=Math.abs,c=Math.max,u=Math.min,p=Math.floor,m=Math.round;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'length',function(){return length}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'copy',function(){return copy}),n.d(t,'set',function(){return set}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiply',function(){return multiply}),n.d(t,'divide',function(){return divide}),n.d(t,'ceil',function(){return ceil}),n.d(t,'floor',function(){return floor}),n.d(t,'min',function(){return min}),n.d(t,'max',function(){return max}),n.d(t,'round',function(){return round}),n.d(t,'scale',function(){return scale}),n.d(t,'scaleAndAdd',function(){return scaleAndAdd}),n.d(t,'distance',function(){return distance}),n.d(t,'squaredDistance',function(){return squaredDistance}),n.d(t,'squaredLength',function(){return squaredLength}),n.d(t,'negate',function(){return negate}),n.d(t,'inverse',function(){return inverse}),n.d(t,'normalize',function(){return normalize}),n.d(t,'dot',function(){return dot}),n.d(t,'cross',function(){return cross}),n.d(t,'lerp',function(){return lerp}),n.d(t,'hermite',function(){return hermite}),n.d(t,'bezier',function(){return bezier}),n.d(t,'random',function(){return random}),n.d(t,'transformMat4',function(){return transformMat4}),n.d(t,'transformMat3',function(){return transformMat3}),n.d(t,'transformQuat',function(){return transformQuat}),n.d(t,'rotateX',function(){return rotateX}),n.d(t,'rotateY',function(){return rotateY}),n.d(t,'rotateZ',function(){return rotateZ}),n.d(t,'angle',function(){return angle}),n.d(t,'str',function(){return str}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'sub',function(){return a}),n.d(t,'mul',function(){return h}),n.d(t,'div',function(){return f}),n.d(t,'dist',function(){return _}),n.d(t,'sqrDist',function(){return y}),n.d(t,'len',function(){return E}),n.d(t,'sqrLen',function(){return x}),n.d(t,'forEach',function(){return A});var g=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=subtract,h=multiply,f=divide,_=distance,y=squaredDistance,E=length,x=squaredLength,A=function(){var e=create();return function(t,n,r,a,o,s){var d,i;for(n||(n=3),r||(r=0),i=a?u(a*n+r,t.length):t.length,d=r;d<i;d+=n)e[0]=t[d],e[1]=t[d+1],e[2]=t[d+2],o(e,e,s),t[d]=e[0],t[d+1]=e[1],t[d+2]=e[2];return t}}()},"./node_modules/gl-matrix/lib/gl-matrix/vec4.js":/*!******************************************************!*\
  !*** ./node_modules/gl-matrix/lib/gl-matrix/vec4.js ***!
  \******************************************************//*! exports provided: create, clone, fromValues, copy, set, add, subtract, multiply, divide, ceil, floor, min, max, round, scale, scaleAndAdd, distance, squaredDistance, length, squaredLength, negate, inverse, normalize, dot, lerp, random, transformMat4, transformQuat, str, exactEquals, equals, sub, mul, div, dist, sqrDist, len, sqrLen, forEach */function(e,t,n){'use strict';function create(){var e=new u.ARRAY_TYPE(4);return u.ARRAY_TYPE!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function clone(e){var t=new u.ARRAY_TYPE(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function fromValues(e,t,n,r){var a=new u.ARRAY_TYPE(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function copy(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function set(e,t,n,r,a){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e}function add(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e}function subtract(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e}function multiply(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}function divide(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e[3]=t[3]/n[3],e}function ceil(e,t){return e[0]=r(t[0]),e[1]=r(t[1]),e[2]=r(t[2]),e[3]=r(t[3]),e}function floor(e,t){return e[0]=l(t[0]),e[1]=l(t[1]),e[2]=l(t[2]),e[3]=l(t[3]),e}function min(e,t,n){return e[0]=d(t[0],n[0]),e[1]=d(t[1],n[1]),e[2]=d(t[2],n[2]),e[3]=d(t[3],n[3]),e}function max(e,t,n){return e[0]=s(t[0],n[0]),e[1]=s(t[1],n[1]),e[2]=s(t[2],n[2]),e[3]=s(t[3],n[3]),e}function round(e,t){return e[0]=c(t[0]),e[1]=c(t[1]),e[2]=c(t[2]),e[3]=c(t[3]),e}function scale(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function scaleAndAdd(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e}function distance(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],i=t[3]-e[3];return o(n*n+r*r+a*a+i*i)}function squaredDistance(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2],o=t[3]-e[3];return n*n+r*r+a*a+o*o}function length(e){var t=e[0],n=e[1],r=e[2],a=e[3];return o(t*t+n*n+r*r+a*a)}function squaredLength(e){var t=e[0],n=e[1],r=e[2],a=e[3];return t*t+n*n+r*r+a*a}function negate(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function inverse(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function normalize(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],s=n*n+r*r+a*a+i*i;return 0<s&&(s=1/o(s),e[0]=n*s,e[1]=r*s,e[2]=a*s,e[3]=i*s),e}function dot(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function lerp(e,n,r,a){var t=n[0],o=n[1],i=n[2],s=n[3];return e[0]=t+a*(r[0]-t),e[1]=o+a*(r[1]-o),e[2]=i+a*(r[2]-i),e[3]=s+a*(r[3]-s),e}function random(e,t){t=t||1;var n,r,a,i,s,l;do n=2*u.RANDOM()-1,r=2*u.RANDOM()-1,s=n*n+r*r;while(1<=s);do a=2*u.RANDOM()-1,i=2*u.RANDOM()-1,l=a*a+i*i;while(1<=l);var c=o((1-s)/l);return e[0]=t*n,e[1]=t*r,e[2]=t*a*c,e[3]=t*i*c,e}function transformMat4(e,t,n){var r=t[0],a=t[1],o=t[2],i=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,e[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,e[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,e[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,e}function transformQuat(e,t,n){var r=t[0],a=t[1],o=t[2],i=n[0],s=n[1],l=n[2],d=n[3],c=d*r+s*o-l*a,u=d*a+l*r-i*o,p=d*o+i*a-s*r,m=-i*r-s*a-l*o;return e[0]=c*d+m*-i+u*-l-p*-s,e[1]=u*d+m*-s+p*-i-c*-l,e[2]=p*d+m*-l+c*-s-u*-i,e[3]=t[3],e}function str(e){return'vec4('+e[0]+', '+e[1]+', '+e[2]+', '+e[3]+')'}function exactEquals(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function equals(e,t){var n=e[0],r=e[1],a=e[2],o=e[3],l=t[0],d=t[1],c=t[2],p=t[3];return i(n-l)<=u.EPSILON*s(1,i(n),i(l))&&i(r-d)<=u.EPSILON*s(1,i(r),i(d))&&i(a-c)<=u.EPSILON*s(1,i(a),i(c))&&i(o-p)<=u.EPSILON*s(1,i(o),i(p))}var r=Math.ceil,o=Math.sqrt,i=Math.abs,s=Math.max,d=Math.min,l=Math.floor,c=Math.round;n.r(t),n.d(t,'create',function(){return create}),n.d(t,'clone',function(){return clone}),n.d(t,'fromValues',function(){return fromValues}),n.d(t,'copy',function(){return copy}),n.d(t,'set',function(){return set}),n.d(t,'add',function(){return add}),n.d(t,'subtract',function(){return subtract}),n.d(t,'multiply',function(){return multiply}),n.d(t,'divide',function(){return divide}),n.d(t,'ceil',function(){return ceil}),n.d(t,'floor',function(){return floor}),n.d(t,'min',function(){return min}),n.d(t,'max',function(){return max}),n.d(t,'round',function(){return round}),n.d(t,'scale',function(){return scale}),n.d(t,'scaleAndAdd',function(){return scaleAndAdd}),n.d(t,'distance',function(){return distance}),n.d(t,'squaredDistance',function(){return squaredDistance}),n.d(t,'length',function(){return length}),n.d(t,'squaredLength',function(){return squaredLength}),n.d(t,'negate',function(){return negate}),n.d(t,'inverse',function(){return inverse}),n.d(t,'normalize',function(){return normalize}),n.d(t,'dot',function(){return dot}),n.d(t,'lerp',function(){return lerp}),n.d(t,'random',function(){return random}),n.d(t,'transformMat4',function(){return transformMat4}),n.d(t,'transformQuat',function(){return transformQuat}),n.d(t,'str',function(){return str}),n.d(t,'exactEquals',function(){return exactEquals}),n.d(t,'equals',function(){return equals}),n.d(t,'sub',function(){return a}),n.d(t,'mul',function(){return p}),n.d(t,'div',function(){return m}),n.d(t,'dist',function(){return g}),n.d(t,'sqrDist',function(){return h}),n.d(t,'len',function(){return f}),n.d(t,'sqrLen',function(){return _}),n.d(t,'forEach',function(){return y});var u=n(/*! ./common.js */'./node_modules/gl-matrix/lib/gl-matrix/common.js'),a=subtract,p=multiply,m=divide,g=distance,h=squaredDistance,f=length,_=squaredLength,y=function(){var e=create();return function(t,n,r,a,o,s){var c,i;for(n||(n=4),r||(r=0),i=a?d(a*n+r,t.length):t.length,c=r;c<i;c+=n)e[0]=t[c],e[1]=t[c+1],e[2]=t[c+2],e[3]=t[c+3],o(e,e,s),t[c]=e[0],t[c+1]=e[1],t[c+2]=e[2],t[c+3]=e[3];return t}}()},"./node_modules/gl-wiretap/index.js":/*!******************************************!*\
  !*** ./node_modules/gl-wiretap/index.js ***!
  \******************************************//*! no static exports found */function(e){function glWiretap(e,t={}){function listen(t,m){return'addComment'===m?addComment:'checkThrowError'===m?checkThrowError:'getReadPixelsVariableName'===m?h:'insertVariable'===m?insertVariable:'reset'===m?reset:'setIndent'===m?setIndent:'toString'===m?toString:'getContextVariableName'===m?getContextVariableName:'function'==typeof e[m]?function(){switch(m){case'getError':return n?d.push(`${g}if (${l}.getError() !== ${l}.NONE) throw new Error('error');`):d.push(`${g}${l}.getError();`),e.getError();case'getExtension':{const t=`${l}Variables${u.length}`;d.push(`${g}const ${t} = ${l}.getExtension('${arguments[0]}');`);const n=e.getExtension(arguments[0]);if(n&&'object'==typeof n){const e=glExtensionWiretap(n,{getEntity,useTrackablePrimitives:r,recording:d,contextName:t,contextVariables:u,variables:c,indent:g,onUnrecognizedArgumentLookup:s});return u.push(e),e}return u.push(null),n}case'readPixels':const t=u.indexOf(arguments[6]);let i;if(-1===t){const e=getVariableName(arguments[6]);e?(i=e,d.push(`${g}${e}`)):(i=`${l}Variable${u.length}`,u.push(arguments[6]),d.push(`${g}const ${i} = new ${arguments[6].constructor.name}(${arguments[6].length});`))}else i=`${l}Variable${t}`;h=i;const p=[arguments[0],arguments[1],arguments[2],arguments[3],getEntity(arguments[4]),getEntity(arguments[5]),i];return d.push(`${g}${l}.readPixels(${p.join(', ')});`),a&&writePPM(arguments[2],arguments[3]),o&&o(i,p),e.readPixels.apply(e,arguments);case'drawBuffers':return d.push(`${g}${l}.drawBuffers([${argumentsToString(arguments[0],{contextName:l,contextVariables:u,getEntity,addVariable,variables:c,onUnrecognizedArgumentLookup:s})}]);`),e.drawBuffers(arguments[0]);}let t=e[m].apply(e,arguments);switch(typeof t){case'undefined':return void d.push(`${g}${methodCallToString(m,arguments)};`);case'number':case'boolean':if(r&&-1===u.indexOf(trackablePrimitive(t))){d.push(`${g}const ${l}Variable${u.length} = ${methodCallToString(m,arguments)};`),u.push(t=trackablePrimitive(t));break}default:null===t?d.push(`${methodCallToString(m,arguments)};`):d.push(`${g}const ${l}Variable${u.length} = ${methodCallToString(m,arguments)};`),u.push(t);}return t}:(p[e[m]]=m,e[m])}function toString(){return d.join('\n')}function reset(){for(;0<d.length;)d.pop()}function insertVariable(e,t){c[e]=t}function getEntity(e){const t=p[e];return t?l+'.'+t:e}function setIndent(e){g=' '.repeat(e)}function addVariable(e,t){const n=`${l}Variable${u.length}`;return d.push(`${g}const ${n} = ${t};`),u.push(e),n}function writePPM(e,t){const n=`${l}Variable${u.length}`,r=`imageDatum${m}`;d.push(`${g}let ${r} = ["P3\\n# ${a}.ppm\\n", ${e}, ' ', ${t}, "\\n255\\n"].join("");`),d.push(`${g}for (let i = 0; i < ${r}.length; i += 4) {`),d.push(`${g}  ${r} += ${n}[i] + ' ' + ${n}[i + 1] + ' ' + ${n}[i + 2] + ' ';`),d.push(`${g}}`),d.push(`${g}if (typeof require !== "undefined") {`),d.push(`${g}  require('fs').writeFileSync('./${a}.ppm', ${r});`),d.push(`${g}}`),m++}function addComment(e){d.push(`${g}// ${e}`)}function checkThrowError(){d.push(`${g}(() => {
${g}const error = ${l}.getError();
${g}if (error !== ${l}.NONE) {
${g}  const names = Object.getOwnPropertyNames(gl);
${g}  for (let i = 0; i < names.length; i++) {
${g}    const name = names[i];
${g}    if (${l}[name] === error) {
${g}      throw new Error('${l} threw ' + name);
${g}    }
${g}  }
${g}}
${g}})();`)}function methodCallToString(e,t){return`${l}.${e}(${argumentsToString(t,{contextName:l,contextVariables:u,getEntity,addVariable,variables:c,onUnrecognizedArgumentLookup:s})})`}function getVariableName(e){if(c)for(const t in c)if(c[t]===e)return t;return null}function getContextVariableName(e){const t=u.indexOf(e);return-1===t?null:`${l}Variable${t}`}const{contextName:l='gl',throwGetError:n,useTrackablePrimitives:r,readPixelsFile:a,recording:d=[],variables:c={},onReadPixels:o,onUnrecognizedArgumentLookup:s}=t,i=new Proxy(e,{get:listen}),u=[],p={};let m=0,g='',h;return i}function glExtensionWiretap(e,t){function getExtensionEntity(e){return r.hasOwnProperty(e)?`${a}.${r[e]}`:i(e)}function methodCallToString(e,t){return`${a}.${e}(${argumentsToString(t,{contextName:a,contextVariables:o,getEntity:getExtensionEntity,addVariable,variables:d,onUnrecognizedArgumentLookup:u})})`}function addVariable(e,t){const n=`${a}Variable${o.length}`;return o.push(e),l.push(`${c}const ${n} = ${t};`),n}const n=new Proxy(e,{get:function listen(t,n){return'function'==typeof t[n]?function(){switch(n){case'drawBuffersWEBGL':return l.push(`${c}${a}.drawBuffersWEBGL([${argumentsToString(arguments[0],{contextName:a,contextVariables:o,getEntity:getExtensionEntity,addVariable,variables:d,onUnrecognizedArgumentLookup:u})}]);`),e.drawBuffersWEBGL(arguments[0]);}let t=e[n].apply(e,arguments);switch(typeof t){case'undefined':return void l.push(`${c}${methodCallToString(n,arguments)};`);case'number':case'boolean':s&&-1===o.indexOf(trackablePrimitive(t))?(l.push(`${c}const ${a}Variable${o.length} = ${methodCallToString(n,arguments)};`),o.push(t=trackablePrimitive(t))):(l.push(`${c}const ${a}Variable${o.length} = ${methodCallToString(n,arguments)};`),o.push(t));break;default:null===t?l.push(`${methodCallToString(n,arguments)};`):l.push(`${c}const ${a}Variable${o.length} = ${methodCallToString(n,arguments)};`),o.push(t);}return t}:(r[e[n]]=n,e[n])}}),r={},{contextName:a,contextVariables:o,getEntity:i,useTrackablePrimitives:s,recording:l,variables:d,indent:c,onUnrecognizedArgumentLookup:u}=t;return n}function argumentsToString(e,t){function getVariableName(e){if(n)for(const t in n)if(n[t]===e)return t;return null}const{variables:n}=t;return Array.from(e).map((e)=>{const n=getVariableName(e);return n?n:argumentToString(e,t)}).join(', ')}function argumentToString(e,t){const{contextName:n,contextVariables:r,getEntity:a,addVariable:o,onUnrecognizedArgumentLookup:s}=t;if('undefined'==typeof e)return'undefined';if(null===e)return'null';const l=r.indexOf(e);if(-1<l)return`${n}Variable${l}`;switch(e.constructor.name){case'String':const t=/\n/.test(e),n=/'/.test(e),r=/"/.test(e);return t?'`'+e+'`':n&&!r?'"'+e+'"':!n&&r?'\''+e+'\'':'\''+e+'\'';case'Number':return a(e);case'Boolean':return a(e);case'Array':return o(e,`new ${e.constructor.name}(${Array.from(e).join(',')})`);case'Float32Array':case'Uint8Array':case'Uint16Array':case'Int32Array':return o(e,`new ${e.constructor.name}(${JSON.stringify(Array.from(e))})`);default:if(s){const t=s(e);if(t)return t}throw new Error(`unrecognized argument type ${e.constructor.name}`);}}function trackablePrimitive(e){return new e.constructor(e)}e.exports={glWiretap,glExtensionWiretap},'undefined'!=typeof window&&(glWiretap.glExtensionWiretap=glExtensionWiretap,window.glWiretap=glWiretap)},"./node_modules/gl/browser_index.js":/*!******************************************!*\
  !*** ./node_modules/gl/browser_index.js ***!
  \******************************************//*! no static exports found */function(e){'use strict';e.exports=function createContext(e,t,n){if(e|=0,t|=0,!(0<e&&0<t))return null;var r=document.createElement('canvas');if(!r)return null;var a;r.width=e,r.height=t;try{a=r.getContext('webgl',n)}catch(t){try{a=r.getContext('experimental-webgl',n)}catch(t){return null}}var o=a.getExtension,i={destroy:function(){var e=o.call(a,'WEBGL_lose_context');e&&e.loseContext()}},s={resize:function(e,t){r.width=e,r.height=t}},l=a.getSupportedExtensions().slice();return l.push('STACKGL_destroy_context','STACKGL_resize_drawingbuffer'),a.getSupportedExtensions=function(){return l.slice()},a.getExtension=function(e){var t=e.toLowerCase();return'stackgl_resize_drawingbuffer'===t?s:'stackgl_destroy_context'===t?i:o.call(a,e)},a||null}},"./node_modules/gpu-mock.js/index.js":/*!*******************************************!*\
  !*** ./node_modules/gpu-mock.js/index.js ***!
  \*******************************************//*! no static exports found */function(e){function setupArguments(e){const t=Array(e.length);for(let n=0;n<e.length;n++){const r=e[n];t[n]=r.toArray?r.toArray():r}return t}function mock1D(){const e=setupArguments(arguments),t=new Float32Array(this.output.x);for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=0,this.thread.z=0,t[n]=this._fn.apply(this,e);return t}function mock2D(){const e=setupArguments(arguments),t=Array(this.output.y);for(let n=0;n<this.output.y;n++){const r=new Float32Array(this.output.x);for(let t=0;t<this.output.x;t++)this.thread.x=t,this.thread.y=n,this.thread.z=0,r[t]=this._fn.apply(this,e);t[n]=r}return t}function mock2DGraphical(){const e=setupArguments(arguments);for(let t=0;t<this.output.y;t++)for(let n=0;n<this.output.x;n++)this.thread.x=n,this.thread.y=t,this.thread.z=0,this._fn.apply(this,e)}function mock3D(){const e=setupArguments(arguments),t=Array(this.output.z);for(let n=0;n<this.output.z;n++){const r=Array(this.output.y);for(let t=0;t<this.output.y;t++){const a=new Float32Array(this.output.x);for(let r=0;r<this.output.x;r++)this.thread.x=r,this.thread.y=t,this.thread.z=n,a[r]=this._fn.apply(this,e);r[t]=a}t[n]=r}return t}function apiDecorate(e){return e.setOutput=(t)=>{e.output=setupOutput(t),e.graphical&&setupGraphical(e)},e.toJSON=()=>{throw new Error('Not usable with gpuMock')},e.setConstants=(t)=>(e.constants=t,e),e.setGraphical=(t)=>(e.graphical=t,e),e.setCanvas=(t)=>(e.canvas=t,e),e.setContext=(t)=>(e.context=t,e),e.exec=function(){return new Promise((t,n)=>{try{t(e.apply(e,arguments))}catch(t){n(t)}})},e.getPixels=(t)=>{const{x:n,y:r}=e.output;return t?flipPixels(e._imageData.data,n,r):e._imageData.data.slice(0)},e.color=function(n,r,o,i){'undefined'==typeof i&&(i=1),n=t(255*n),r=t(255*r),o=t(255*o),i=t(255*i);const s=e.output.x,l=e.output.y,d=e.thread.x,c=l-e.thread.y-1,u=d+c*s;e._colorData[4*u+0]=n,e._colorData[4*u+1]=r,e._colorData[4*u+2]=o,e._colorData[4*u+3]=i},e.setWarnVarUsage=()=>e,e.setOptimizeFloatMemory=()=>e,e.setArgumentTypes=()=>e,e.setDebug=()=>e,e.setLoopMaxIterations=()=>e,e.setPipeline=()=>e,e.setPrecision=()=>e,e.setImmutable=()=>e,e.setFunctions=()=>e,e.addSubKernel=()=>e,e.destroy=()=>{},e.validateSettings=()=>{},e.graphical&&e.output&&setupGraphical(e),e}function setupGraphical(e){const{x:t,y:n}=e.output;if(e.context&&e.context.createImageData){const r=new Uint8ClampedArray(4*(t*n));e._imageData=e.context.createImageData(t,n),e._colorData=r}else{const r=new Uint8ClampedArray(4*(t*n));e._imageData={data:r},e._colorData=r}}function setupOutput(e){let t=null;if(!e.length)t=e;else if(3===e.length){const[n,r,a]=e;t={x:n,y:r,z:a}}else if(2===e.length){const[n,r]=e;t={x:n,y:r}}else{const[n]=e;t={x:n}}return t}function flipPixels(e,t,n){const r=4*t,a=new Uint8ClampedArray(4*t),o=e.slice(0);for(let i=0;i<(0|n/2);++i){const e=i*r,t=(n-i-1)*r;a.set(o.subarray(e,e+r)),o.copyWithin(e,t,t+r),o.set(a,t)}return o}var t=Math.floor;e.exports={gpuMock:function gpuMock(e,t={}){function kernel(){return kernel.output.z?mock3D.apply(kernel,arguments):kernel.output.y?kernel.graphical?mock2DGraphical.apply(kernel,arguments):mock2D.apply(kernel,arguments):mock1D.apply(kernel,arguments)}const n=t.output?setupOutput(t.output):null;return kernel._fn=e,kernel.constants=t.constants||null,kernel.context=t.context||null,kernel.canvas=t.canvas||null,kernel.graphical=t.graphical||!1,kernel._imageData=null,kernel._colorData=null,kernel.output=n,kernel.thread={x:0,y:0,z:0},apiDecorate(kernel)}}},"./node_modules/gpu.js/src/alias.js":/*!******************************************!*\
  !*** ./node_modules/gpu.js/src/alias.js ***!
  \******************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ./utils */'./node_modules/gpu.js/src/utils.js');e.exports={alias:function alias(e,t){const n=t.toString();return new Function(`return function ${e} (${r.getArgumentNamesFromString(n).join(', ')}) {
  ${r.getFunctionBodyFromString(n)}
}`)()}}},"./node_modules/gpu.js/src/backend/cpu/function-node.js":/*!**************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/cpu/function-node.js ***!
  \**************************************************************//*! no static exports found */function(e,t,n){const{FunctionNode:r}=n(/*! ../function-node */'./node_modules/gpu.js/src/backend/function-node.js');e.exports={CPUFunctionNode:class CPUFunctionNode extends r{astFunction(e,t){if(!this.isRootKernel){t.push('function'),t.push(' '),t.push(this.name),t.push('(');for(let e=0;e<this.argumentNames.length;++e){const n=this.argumentNames[e];0<e&&t.push(', '),t.push('user_'),t.push(n)}t.push(') {\n')}for(let n=0;n<e.body.body.length;++n)this.astGeneric(e.body.body[n],t),t.push('\n');return this.isRootKernel||t.push('}\n'),t}astReturnStatement(e,t){const n=this.returnType||this.getType(e.argument);return this.returnType||(this.returnType=n),this.isRootKernel?(t.push(this.leadingReturnStatement),this.astGeneric(e.argument,t),t.push(';\n'),t.push(this.followingReturnStatement),t.push('continue;\n')):this.isSubKernel?(t.push(`subKernelResult_${this.name} = `),this.astGeneric(e.argument,t),t.push(';'),t.push(`return subKernelResult_${this.name};`)):(t.push('return '),this.astGeneric(e.argument,t),t.push(';')),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput('Non-numeric literal not supported : '+e.value,e);return t.push(e.value),t}astBinaryExpression(e,t){return t.push('('),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(')'),t}astIdentifierExpression(e,t){if('Identifier'!==e.type)throw this.astErrorOutput('IdentifierExpression - not an Identifier',e);switch(e.name){case'Infinity':t.push('Infinity');break;default:if(this.constants&&this.constants.hasOwnProperty(e.name))t.push('constants_'+e.name);else{const n=this.getKernelArgumentName(e.name);n?t.push('user_'+n):t.push('user_'+e.name)}}return t}astForStatement(e,t){if('ForStatement'!==e.type)throw this.astErrorOutput('Invalid for statement',e);const n=[],r=[],a=[],o=[];let s=null;if(e.init){this.pushState('in-for-loop-init'),this.astGeneric(e.init,n);for(let e=0;e<n.length;e++)n[e].includes&&n[e].includes(',')&&(s=!1);this.popState('in-for-loop-init')}else s=!1;if(e.test?this.astGeneric(e.test,r):s=!1,e.update?this.astGeneric(e.update,a):s=!1,e.body&&(this.pushState('loop-body'),this.astGeneric(e.body,o),this.popState('loop-body')),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s)t.push(`for (${n.join('')};${r.join('')};${a.join('')}){\n`),t.push(o.join('')),t.push('}\n');else{const e=this.getInternalVariableName('safeI');0<n.length&&t.push(n.join(''),';\n'),t.push(`for (let ${e}=0;${e}<LOOP_MAX;${e}++){\n`),0<r.length&&t.push(`if (!${r.join('')}) break;\n`),t.push(o.join('')),t.push(`\n${a.join('')};`),t.push('}\n')}return t}astWhileStatement(e,t){if('WhileStatement'!==e.type)throw this.astErrorOutput('Invalid while statement',e);return t.push('for (let i = 0; i < LOOP_MAX; i++) {'),t.push('if ('),this.astGeneric(e.test,t),t.push(') {\n'),this.astGeneric(e.body,t),t.push('} else {\n'),t.push('break;\n'),t.push('}\n'),t.push('}\n'),t}astDoWhileStatement(e,t){if('DoWhileStatement'!==e.type)throw this.astErrorOutput('Invalid while statement',e);return t.push('for (let i = 0; i < LOOP_MAX; i++) {'),this.astGeneric(e.body,t),t.push('if (!'),this.astGeneric(e.test,t),t.push(') {\n'),t.push('break;\n'),t.push('}\n'),t.push('}\n'),t}astAssignmentExpression(e,t){const n=this.getDeclaration(e.left);if(n&&!n.assignable)throw new this.astErrorOutput(`Variable ${e.left.name} is not assignable here`,e);return this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t}astBlockStatement(e,t){if(this.isState('loop-body')){this.pushState('block-body');for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState('block-body')}else{t.push('{\n');for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);t.push('}\n')}return t}astVariableDeclaration(e,t){'var'===e.kind&&this.warnVarUsage&&this.varWarn(),t.push(`${e.kind} `);const{declarations:n}=e;for(let r=0;r<n.length;r++)0<r&&t.push(','),this.astGeneric(n[r],t);return this.isState('in-for-loop-init')||t.push(';'),t}astIfStatement(e,t){return t.push('if ('),this.astGeneric(e.test,t),t.push(')'),'BlockStatement'===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(' {\n'),this.astGeneric(e.consequent,t),t.push('\n}\n')),e.alternate&&(t.push('else '),'BlockStatement'===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(' {\n'),this.astGeneric(e.alternate,t),t.push('\n}\n'))),t}astSwitchStatement(e,t){const{discriminant:n,cases:r}=e;t.push('switch ('),this.astGeneric(n,t),t.push(') {\n');for(let n=0;n<r.length;n++){if(null===r[n].test){t.push('default:\n'),this.astGeneric(r[n].consequent,t),r[n].consequent&&0<r[n].consequent.length&&t.push('break;\n');continue}t.push('case '),this.astGeneric(r[n].test,t),t.push(':\n'),r[n].consequent&&0<r[n].consequent.length&&(this.astGeneric(r[n].consequent,t),t.push('break;\n'))}t.push('\n}')}astThisExpression(e,t){return t.push('_this'),t}astMemberExpression(e,t){const{signature:n,type:r,property:a,xProperty:o,yProperty:i,zProperty:s,name:l,origin:d}=this.getMemberExpressionDetails(e);switch(n){case'this.thread.value':return t.push(`_this.thread.${l}`),t;case'this.output.value':switch(l){case'x':t.push('outputX');break;case'y':t.push('outputY');break;case'z':t.push('outputZ');break;default:throw this.astErrorOutput('Unexpected expression',e);}return t;case'value':throw this.astErrorOutput('Unexpected expression',e);case'value[]':case'value[][]':case'value[][][]':case'value.value':if('Math'===d)return t.push(Math[l]),t;switch(a){case'r':return t.push(`user_${l}[0]`),t;case'g':return t.push(`user_${l}[1]`),t;case'b':return t.push(`user_${l}[2]`),t;case'a':return t.push(`user_${l}[3]`),t;}break;case'this.constants.value':case'this.constants.value[]':case'this.constants.value[][]':case'this.constants.value[][][]':break;case'fn()[]':return this.astGeneric(e.object,t),t.push('['),this.astGeneric(e.property,t),t.push(']'),t;default:throw this.astErrorOutput('Unexpected expression',e);}if(!e.computed)switch(r){case'Number':case'Integer':case'Float':case'Boolean':return t.push(`${d}_${l}`),t;}const c=this.getKernelArgumentName(l),u=`${d}_${c||l}`;switch(r){case'Array(2)':case'Array(3)':case'Array(4)':case'HTMLImageArray':case'ArrayTexture(1)':case'ArrayTexture(2)':case'ArrayTexture(3)':case'ArrayTexture(4)':case'HTMLImage':default:let e,n;if('constants'===d){const t=this.constants[l];n='Input'===this.constantTypes[l],e=n?t.size:null}else n=this.isInput(c||l),e=n?this.argumentSizes[this.argumentNames.indexOf(l)]:null;t.push(`${u}`),s&&i?n?(t.push('[('),this.astGeneric(s,t),t.push(`*${this.dynamicArguments?'(outputY * outputX)':e[1]*e[0]})+(`),this.astGeneric(i,t),t.push(`*${this.dynamicArguments?'outputX':e[0]})+`),this.astGeneric(o,t),t.push(']')):(t.push('['),this.astGeneric(s,t),t.push(']'),t.push('['),this.astGeneric(i,t),t.push(']'),t.push('['),this.astGeneric(o,t),t.push(']')):i?n?(t.push('[('),this.astGeneric(i,t),t.push(`*${this.dynamicArguments?'outputX':e[0]})+`),this.astGeneric(o,t),t.push(']')):(t.push('['),this.astGeneric(i,t),t.push(']'),t.push('['),this.astGeneric(o,t),t.push(']')):(t.push('['),this.astGeneric(o,t),t.push(']'));}return t}astCallExpression(e,t){if('CallExpression'!==e.type)throw this.astErrorOutput('Unknown CallExpression',e);let n=this.astMemberExpressionUnroll(e.callee);0>this.calledFunctions.indexOf(n)&&this.calledFunctions.push(n);this.isAstMathFunction(e);this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push('(');const r=this.lookupFunctionArgumentTypes(n)||[];for(let a=0;a<e.arguments.length;++a){const o=e.arguments[a];let i=this.getType(o);r[a]||this.triggerImplyArgumentType(n,a,i,this),0<a&&t.push(', '),this.astGeneric(o,t)}return t.push(')'),t}astArrayExpression(e,t){const n=e.elements.length;t.push('new Float32Array([');for(let r=0;r<n;++r){0<r&&t.push(', ');const n=e.elements[r];this.astGeneric(n,t)}return t.push('])'),t}astDebuggerStatement(e,t){return t.push('debugger;'),t}}}},"./node_modules/gpu.js/src/backend/cpu/kernel-string.js":/*!**************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/cpu/kernel-string.js ***!
  \**************************************************************//*! no static exports found */function(e,t,n){function constantsToString(e){const t=[];for(const n in e){const r=e[n];switch(typeof r){case'number':case'boolean':t.push(`${n}:${r}`);}}return`{ ${t.join()} }`}const{utils:r}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),{Input:a}=n(/*! ../../input */'./node_modules/gpu.js/src/input.js');e.exports={cpuKernelString:function cpuKernelString(e){const t=[],n=[],a=[],o=!/^function/.test(e.color.toString());if(t.push('  const { context, canvas, constants } = settings;',`  const output = new Int32Array(${JSON.stringify(Array.from(e.output))});`,`  const _constants = ${constantsToString(e.constants)};`),n.push('    constants: _constants,','    context,','    output,','    thread: {x: 0, y: 0, z: 0},'),e.graphical){t.push(`  const _imageData = context.createImageData(${e.output[0]}, ${e.output[1]});`),t.push(`  const _colorData = new Uint8ClampedArray(${e.output[0]} * ${e.output[1]} * 4);`);const i=r.flattenFunctionToString((o?'function ':'')+e.color.toString(),{thisLookup:(t)=>'_colorData'===t?'_colorData':'_imageData'===t?'_imageData':'output'===t?'output':'thread'===t?'this.thread':JSON.stringify(e[t]),findDependency:()=>null}),s=r.flattenFunctionToString((o?'function ':'')+e.getPixels.toString(),{thisLookup:(t)=>'_colorData'===t?'_colorData':'_imageData'===t?'_imageData':'output'===t?'output':'thread'===t?'this.thread':JSON.stringify(e[t]),findDependency:()=>null});n.push('    _imageData,','    _colorData,',`    color: ${i},`),a.push(`  kernel.getPixels = ${s};`)}const s=[],l=Object.keys(e.constantTypes);for(let t=0;t<l.length;t++)s.push(e.constantTypes[l]);if(-1!==e.argumentTypes.indexOf('HTMLImageArray')||-1!==s.indexOf('HTMLImageArray')){const t=r.flattenFunctionToString((o?'function ':'')+e._imageTo3DArray.toString(),{doNotDefine:['canvas'],findDependency:(t,n)=>'this'===t?(o?'function ':'')+e[n].toString():null,thisLookup:(e)=>'canvas'===e?void 0:'context'===e?'context':void 0});a.push(t),n.push(`    _imageTo2DArray,`),n.push(`    _imageTo3DArray,`)}else if(-1!==e.argumentTypes.indexOf('HTMLImage')||-1!==s.indexOf('HTMLImage')){const t=r.flattenFunctionToString((o?'function ':'')+e._imageTo2DArray.toString(),{findDependency:()=>{debugger}});a.push(t),n.push(`    _imageTo2DArray,`)}return`function(settings) {
${t.join('\n')}
  for (const p in constants) {
    const constant = constants[p];
    switch (typeof constant) {
      case 'number':
      case 'boolean':
        continue;
    }
    _constants[p] = constant;
  }
  const kernel = (function() {
${e._kernelString}
  })
    .apply({ ${n.join('\n')} });
  ${a.join('\n')}
  return kernel;
}`}}},"./node_modules/gpu.js/src/backend/cpu/kernel.js":/*!*******************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/cpu/kernel.js ***!
  \*******************************************************//*! no static exports found */function(e,t,n){var o=Math.floor;const{Kernel:r}=n(/*! ../kernel */'./node_modules/gpu.js/src/backend/kernel.js'),{FunctionBuilder:a}=n(/*! ../function-builder */'./node_modules/gpu.js/src/backend/function-builder.js'),{CPUFunctionNode:i}=n(/*! ./function-node */'./node_modules/gpu.js/src/backend/cpu/function-node.js'),{utils:s}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),{cpuKernelString:l}=n(/*! ./kernel-string */'./node_modules/gpu.js/src/backend/cpu/kernel-string.js');class CPUKernel extends r{static getFeatures(){return this.features}static get features(){return Object.freeze({kernelMap:!0,isIntegerDivisionAccurate:!0})}static get isSupported(){return!0}static isContextMatch(){return!1}static get mode(){return'cpu'}static nativeFunctionArguments(){return null}static nativeFunctionReturnType(){return null}static combineKernels(e){return e}constructor(e,t){super(e,t),this.mergeSettings(e.settings||t),this._imageData=null,this._colorData=null,this._kernelString=null,this.thread={x:0,y:0,z:0},this.translatedSources=null}initCanvas(){return'undefined'==typeof document?'undefined'==typeof OffscreenCanvas?void 0:new OffscreenCanvas(0,0):document.createElement('canvas')}initContext(){return this.canvas?this.canvas.getContext('2d'):null}initPlugins(){return[]}validateSettings(e){if(!this.output||0===this.output.length){if(1!==e.length)throw new Error('Auto output only supported for kernels with only one input');const t=s.getVariableType(e[0],this.strictIntegers);if('Array'===t)this.output=s.getDimensions(t);else if('NumberTexture'===t||'ArrayTexture(4)'===t)this.output=e[0].output;else throw new Error('Auto output not supported for input type: '+t)}if(this.graphical&&2!==this.output.length)throw new Error('Output must have 2 dimensions on graphical mode');this.checkOutput()}translateSource(){if(this.leadingReturnStatement=1<this.output.length?'resultX[x] = ':'result[x] = ',this.subKernels){const e=[];for(let t=0;t<this.subKernels.length;t++){const{name:n}=this.subKernels[t];e.push(1<this.output.length?`resultX_${n}[x] = subKernelResult_${n};\n`:`result_${n}[x] = subKernelResult_${n};\n`)}this.followingReturnStatement=e.join('')}const e=a.fromKernel(this,i);this.translatedSources=e.getPrototypes('kernel'),this.graphical||this.returnType||(this.returnType=e.getKernelResultType())}build(){if(this.setupConstants(),this.setupArguments(arguments),this.validateSettings(arguments),this.translateSource(),this.graphical){const{canvas:e,output:t}=this;if(!e)throw new Error('no canvas available for using graphical output');const n=t[0],r=t[1]||1;e.width=n,e.height=r,this._imageData=this.context.createImageData(n,r),this._colorData=new Uint8ClampedArray(4*(n*r))}const e=this.getKernelString();this.kernelString=e,this.debug&&(console.log('Function output:'),console.log(e));try{this.run=new Function([],e).bind(this)()}catch(t){console.error('An error occurred compiling the javascript: ',t)}}color(e,t,n,r){'undefined'==typeof r&&(r=1),e=o(255*e),t=o(255*t),n=o(255*n),r=o(255*r);const i=this.output[0],s=this.output[1],l=this.thread.x,d=s-this.thread.y-1,c=l+d*i;this._colorData[4*c+0]=e,this._colorData[4*c+1]=t,this._colorData[4*c+2]=n,this._colorData[4*c+3]=r}getKernelString(){if(null!==this._kernelString)return this._kernelString;let e=null,{translatedSources:t}=this;1<t.length?t=t.filter((t)=>/^function/.test(t)?t:(e=t,!1)):e=t.shift();const n=this._kernelString=`  const LOOP_MAX = ${this._getLoopMaxString()}
  const constants = this.constants;
  const _this = this;
  return (${this.argumentNames.map((e)=>'user_'+e).join(', ')}) => {
    ${this._processConstants()}
    ${this._processArguments()}
    ${this.graphical?this._graphicalKernelBody(e):this._resultKernelBody(e)}
    ${0<t.length?t.join('\n'):''}
  };`;return n}toString(){return l(this)}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};`:' 1000;'}_processConstants(){if(!this.constants)return'';const e=[];for(let t in this.constants){const n=this.constantTypes[t];'HTMLImage'===n?e.push(`    const constants_${t} = this._imageTo2DArray(this.constants.${t});\n`):'HTMLImageArray'===n?e.push(`    const constants_${t} = this._imageTo3DArray(this.constants.${t});\n`):'Input'===n?e.push(`    const constants_${t} = this.constants.${t}.value;\n`):e.push(`    const constants_${t} = this.constants.${t};\n`)}return e.join('')}_processArguments(){const e=[];for(let t=0;t<this.argumentTypes.length;t++){const n=`user_${this.argumentNames[t]}`;switch(this.argumentTypes[t]){case'HTMLImage':e.push(`    ${n} = this._imageTo2DArray(${n});\n`);break;case'HTMLImageArray':e.push(`    ${n} = this._imageTo3DArray(${n});\n`);break;case'Input':e.push(`    ${n} = ${n}.value;\n`);break;case'ArrayTexture(1)':case'ArrayTexture(2)':case'ArrayTexture(3)':case'ArrayTexture(4)':case'NumberTexture':case'MemoryOptimizedNumberTexture':e.push(`
    if (${n}.toArray) {
      if (!_this.textureCache) {
        _this.textureCache = [];
        _this.arrayCache = [];
      }
      const textureIndex = _this.textureCache.indexOf(${n});
      if (textureIndex !== -1) {
        ${n} = _this.arrayCache[textureIndex];
      } else {
        _this.textureCache.push(${n});
        ${n} = ${n}.toArray();
        _this.arrayCache.push(${n});
      }
    }`);}}return e.join('')}_imageTo2DArray(e){const t=this.canvas;t.width<e.width&&(t.width=e.width),t.height<e.height&&(t.height=e.height);const n=this.context;n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height).data,a=Array(e.height);let o=0;for(let t=e.height-1;0<=t;t--){const n=a[t]=Array(e.width);for(let t=0;t<e.width;t++){const e=new Float32Array(4);e[0]=r[o++]/255,e[1]=r[o++]/255,e[2]=r[o++]/255,e[3]=r[o++]/255,n[t]=e}}return a}getPixels(e){const[t,n]=this.output;return e?s.flipPixels(this._imageData.data,t,n):this._imageData.data.slice(0)}_imageTo3DArray(e){const t=Array(e.length);for(let n=0;n<e.length;n++)t[n]=this._imageTo2DArray(e[n]);return t}_resultKernelBody(e){switch(this.output.length){case 1:return this._resultKernel1DLoop(e)+this._kernelOutput();case 2:return this._resultKernel2DLoop(e)+this._kernelOutput();case 3:return this._resultKernel3DLoop(e)+this._kernelOutput();default:throw new Error('unsupported size kernel');}}_graphicalKernelBody(e){switch(this.output.length){case 2:return this._graphicalKernel2DLoop(e)+this._graphicalOutput();default:throw new Error('unsupported size kernel');}}_graphicalOutput(){return`
    this._imageData.data.set(this._colorData);
    this.context.putImageData(this._imageData, 0, 0);
    return;`}_getKernelResultTypeConstructorString(){switch(this.returnType){case'LiteralInteger':case'Number':case'Integer':case'Float':return'Float32Array';case'Array(2)':case'Array(3)':case'Array(4)':return'Array';default:if(this.graphical)return'Float32Array';throw new Error(`unhandled returnType ${this.returnType}`);}}_resultKernel1DLoop(e){const{output:t}=this,n=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];
    const result = new ${n}(outputX);
    ${this._mapSubKernels((e)=>`const result_${e.name} = new ${n}(outputX);\n`).join('    ')}
    ${this._mapSubKernels((e)=>`let subKernelResult_${e.name};\n`).join('    ')}
    for (let x = 0; x < outputX; x++) {
      this.thread.x = x;
      this.thread.y = 0;
      this.thread.z = 0;
      ${e}
    }`}_resultKernel2DLoop(e){const{output:t}=this,n=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];
    const outputY = _this.output[1];
    const result = new Array(outputY);
    ${this._mapSubKernels((e)=>`const result_${e.name} = new Array(outputY);\n`).join('    ')}
    ${this._mapSubKernels((e)=>`let subKernelResult_${e.name};\n`).join('    ')}
    for (let y = 0; y < outputY; y++) {
      this.thread.z = 0;
      this.thread.y = y;
      const resultX = result[y] = new ${n}(outputX);
      ${this._mapSubKernels((e)=>`const resultX_${e.name} = result_${e.name}[y] = new ${n}(outputX);\n`).join('')}
      for (let x = 0; x < outputX; x++) {
        this.thread.x = x;
        ${e}
      }
    }`}_graphicalKernel2DLoop(e){const{output:t}=this,n=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];
    const outputY = _this.output[1];
    ${this._mapSubKernels((e)=>`const result_${e.name} = new Array(outputY);\n`).join('    ')}
    ${this._mapSubKernels((e)=>`let subKernelResult_${e.name};\n`).join('    ')}
    for (let y = 0; y < outputY; y++) {
      this.thread.z = 0;
      this.thread.y = y;
      ${this._mapSubKernels((e)=>`const resultX_${e.name} = result_${e.name}[y] = new ${n}(outputX);\n`).join('')}
      for (let x = 0; x < outputX; x++) {
        this.thread.x = x;
        ${e}
      }
    }`}_resultKernel3DLoop(e){const{output:t}=this,n=this._getKernelResultTypeConstructorString();return`  const outputX = _this.output[0];
    const outputY = _this.output[1];
    const outputZ = _this.output[2];
    const result = new Array(outputZ);
    ${this._mapSubKernels((e)=>`const result_${e.name} = new Array(outputZ);\n`).join('    ')}
    ${this._mapSubKernels((e)=>`let subKernelResult_${e.name};\n`).join('    ')}
    for (let z = 0; z < outputZ; z++) {
      this.thread.z = z;
      const resultY = result[z] = new Array(outputY);
      ${this._mapSubKernels((e)=>`const resultY_${e.name} = result_${e.name}[z] = new Array(outputY);\n`).join('      ')}
      for (let y = 0; y < outputY; y++) {
        this.thread.y = y;
        const resultX = resultY[y] = new ${n}(outputX);
        ${this._mapSubKernels((e)=>`const resultX_${e.name} = resultY_${e.name}[y] = new ${n}(outputX);\n`).join('        ')}
        for (let x = 0; x < outputX; x++) {
          this.thread.x = x;
          ${e}
        }
      }
    }`}_kernelOutput(){return this.subKernels?`\n    return {
      result: result,
      ${this.subKernels.map((e)=>`${e.property}: result_${e.name}`).join(',\n      ')}
    };`:'\n    return result;'}_mapSubKernels(e){return null===this.subKernels?['']:this.subKernels.map(e)}destroy(e){e&&delete this.canvas}static destroyContext(){}toJSON(){const e=super.toJSON();return e.functionNodes=a.fromKernel(this,i).toJSON(),e}setOutput(e){super.setOutput(e);const[t,n]=this.output;this.graphical&&(this._imageData=this.context.createImageData(t,n),this._colorData=new Uint8ClampedArray(4*(t*n)))}}e.exports={CPUKernel}},"./node_modules/gpu.js/src/backend/function-builder.js":/*!*************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/function-builder.js ***!
  \*************************************************************//*! no static exports found */function(e){class FunctionBuilder{static fromKernel(e,t,n){const{kernelArguments:r,argumentNames:a,argumentTypes:o,argumentSizes:i,argumentBitRatios:s,constants:l,constantTypes:d,constantBitRatios:c,debug:u,loopMaxIterations:p,nativeFunctions:m,output:g,optimizeFloatMemory:h,precision:f,plugins:_,source:y,subKernels:E,functions:x,leadingReturnStatement:A,followingReturnStatement:b,dynamicArguments:T,dynamicOutput:C,warnVarUsage:v}=e,S=(e,t)=>V.needsArgumentType(e,t),R=(e,t,n)=>{V.assignArgumentType(e,t,n)},F=(e,t,n)=>V.lookupReturnType(e,t,n),w=(e)=>V.lookupFunctionArgumentTypes(e),L=(e,t)=>V.lookupFunctionArgumentName(e,t),M=(e,t)=>V.lookupFunctionArgumentBitRatio(e,t),I=(e,t,n,r)=>{V.assignArgumentType(e,t,n,r)},D=(e,t,n,r)=>{V.trackArgumentSynonym(e,t,n,r)},B=(e,t,n)=>V.lookupArgumentSynonym(e,t,n),N=(e,t,n)=>{V.trackFunctionCall(e,t,n)},P=Object.assign({isRootKernel:!1,onNestedFunction:(e)=>{const n=[];for(let t=0;t<e.params.length;t++)n.push(e.params[t].name);const r=new t(null,Object.assign({},P,{returnType:null,ast:e,name:e.id.name,argumentNames:n,lookupReturnType:F,lookupFunctionArgumentTypes:w,lookupFunctionArgumentName:L,lookupFunctionArgumentBitRatio:M,needsArgumentType:S,assignArgumentType:R,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:D,lookupArgumentSynonym:B,onFunctionCall:N,warnVarUsage:v}));r.traceFunctionAST(e),V.addFunctionNode(r)},lookupReturnType:F,lookupFunctionArgumentTypes:w,lookupFunctionArgumentName:L,lookupFunctionArgumentBitRatio:M,needsArgumentType:S,assignArgumentType:R,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:D,lookupArgumentSynonym:B,onFunctionCall:N,optimizeFloatMemory:h,precision:f,constants:l,constantTypes:d,constantBitRatios:c,debug:u,loopMaxIterations:p,output:g,plugins:_,dynamicArguments:T,dynamicOutput:C},n||{}),O=Object.assign({},P,{isRootKernel:!0,name:'kernel',argumentNames:a,argumentTypes:o,argumentSizes:i,argumentBitRatios:s,leadingReturnStatement:A,followingReturnStatement:b});if('object'==typeof y&&y.functionNodes)return new FunctionBuilder().fromJSON(y.functionNodes,t);const k=new t(y,O);let U=null;x&&(U=x.map((e)=>new t(e.source,{returnType:e.returnType,argumentTypes:e.argumentTypes,output:g,plugins:_,constants:l,constantTypes:d,constantBitRatios:c,optimizeFloatMemory:h,precision:f,lookupReturnType:F,lookupFunctionArgumentTypes:w,lookupFunctionArgumentName:L,lookupFunctionArgumentBitRatio:M,needsArgumentType:S,assignArgumentType:R,triggerImplyArgumentType:I,triggerTrackArgumentSynonym:D,lookupArgumentSynonym:B,onFunctionCall:N})));let G=null;E&&(G=E.map((e)=>{const{name:n,source:r}=e;return new t(r,Object.assign({},P,{name:n,isSubKernel:!0,isRootKernel:!1}))}));const V=new FunctionBuilder({kernel:e,rootNode:k,functionNodes:U,nativeFunctions:m,subKernelNodes:G});return V}constructor(e){if(e=e||{},this.kernel=e.kernel,this.rootNode=e.rootNode,this.functionNodes=e.functionNodes||[],this.subKernelNodes=e.subKernelNodes||[],this.nativeFunctions=e.nativeFunctions||[],this.functionMap={},this.nativeFunctionNames=[],this.lookupChain=[],this.argumentChain=[],this.functionNodeDependencies={},this.functionCalls={},this.rootNode&&(this.functionMap.kernel=this.rootNode),this.functionNodes)for(let e=0;e<this.functionNodes.length;e++)this.functionMap[this.functionNodes[e].name]=this.functionNodes[e];if(this.subKernelNodes)for(let e=0;e<this.subKernelNodes.length;e++)this.functionMap[this.subKernelNodes[e].name]=this.subKernelNodes[e];if(this.nativeFunctions)for(let e=0;e<this.nativeFunctions.length;e++){const t=this.nativeFunctions[e];this.nativeFunctionNames.push(t.name)}}addFunctionNode(e){if(!e.name)throw new Error('functionNode.name needs set');this.functionMap[e.name]=e,e.isRootKernel&&(this.rootNode=e)}traceFunctionCalls(e,t){if(e=e||'kernel',t=t||[],-1<this.nativeFunctionNames.indexOf(e))return-1===t.indexOf(e)&&t.push(e),t;const n=this.functionMap[e];if(n){const r=t.indexOf(e);if(-1===r){t.push(e),n.toString();for(let e=0;e<n.calledFunctions.length;++e)this.traceFunctionCalls(n.calledFunctions[e],t)}else{const e=t.splice(r,1)[0];t.push(e)}}return t}getPrototypeString(e){return this.getPrototypes(e).join('\n')}getPrototypes(e){return this.rootNode&&this.rootNode.toString(),e?this.getPrototypesFromFunctionNames(this.traceFunctionCalls(e,[]).reverse()):this.getPrototypesFromFunctionNames(Object.keys(this.functionMap))}getStringFromFunctionNames(e){const t=[];for(let n=0;n<e.length;++n){const r=this.functionMap[e[n]];r&&t.push(this.functionMap[e[n]].toString())}return t.join('\n')}getPrototypesFromFunctionNames(e){const t=[];for(let n=0;n<e.length;++n){const r=e[n],a=this.nativeFunctionNames.indexOf(r);if(-1<a){t.push(this.nativeFunctions[a].source);continue}const o=this.functionMap[r];o&&t.push(o.toString())}return t}toJSON(){return this.traceFunctionCalls(this.rootNode.name).reverse().map((e)=>{const t=this.nativeFunctions.indexOf(e);if(-1<t)return{name:e,source:this.nativeFunctions[t].source};if(this.functionMap[e])return this.functionMap[e].toJSON();throw new Error(`function ${e} not found`)})}fromJSON(e,t){this.functionMap={};for(let n=0;n<e.length;n++){const r=e[n];this.functionMap[r.settings.name]=new t(r.ast,r.settings)}return this}getString(e){return e?this.getStringFromFunctionNames(this.traceFunctionCalls(e).reverse()):this.getStringFromFunctionNames(Object.keys(this.functionMap))}lookupReturnType(e,t,n){if('CallExpression'!==t.type)throw new Error(`expected ast type of "CallExpression", but is ${t.type}`);if(this._isNativeFunction(e))return this._lookupNativeFunctionReturnType(e);if(this._isFunction(e)){const r=this._getFunction(e);if(r.returnType)return r.returnType;else{for(let e=0;e<this.lookupChain.length;e++)if(this.lookupChain[e].ast===t){if(0===r.argumentTypes.length&&0<t.arguments.length){const a=t.arguments;for(let t=0;t<a.length;t++)this.lookupChain.push({name:n.name,ast:a[e],requestingNode:n}),r.argumentTypes[t]=n.getType(a[t]),this.lookupChain.pop();return r.returnType=r.getType(r.getJsAST())}throw new Error('circlical logic detected!')}this.lookupChain.push({name:n.name,ast:t,requestingNode:n});const e=r.getType(r.getJsAST());return this.lookupChain.pop(),r.returnType=e}}return null}_getFunction(e){return this._isFunction(e)||new Error(`Function ${e} not found`),this.functionMap[e]}_isFunction(e){return!!this.functionMap[e]}_getNativeFunction(e){for(let t=0;t<this.nativeFunctions.length;t++)if(this.nativeFunctions[t].name===e)return this.nativeFunctions[t];return null}_isNativeFunction(e){return!!this._getNativeFunction(e)}_lookupNativeFunctionReturnType(e){let t=this._getNativeFunction(e);if(t)return t.returnType;throw new Error(`Native function ${e} not found`)}lookupFunctionArgumentTypes(e){return this._isNativeFunction(e)?this._getNativeFunction(e).argumentTypes:this._isFunction(e)?this._getFunction(e).argumentTypes:null}lookupFunctionArgumentName(e,t){return this._getFunction(e).argumentNames[t]}lookupFunctionArgumentBitRatio(e,t){if(!this._isFunction(e))throw new Error('function not found');if(this.rootNode.name===e){const e=this.rootNode.argumentNames.indexOf(t);if(-1!==e)return this.rootNode.argumentBitRatios[e];throw new Error('argument bit ratio not found')}else{const t=this._getFunction(e),n=t.argumentSynonym[t.synonymIndex];if(!n)throw new Error('argument synonym not found');return this.lookupFunctionArgumentBitRatio(n.functionName,n.argumentName)}}needsArgumentType(e,t){if(!this._isFunction(e))return!1;const n=this._getFunction(e);return!n.argumentTypes[t]}assignArgumentType(e,t,n){if(this._isFunction(e)){const r=this._getFunction(e);r.argumentTypes[t]||(r.argumentTypes[t]=n)}}trackArgumentSynonym(e,t,n,r){if(this._isFunction(n)){const a=this._getFunction(n);a.argumentSynonym||(a.argumentSynonym={});const o=a.argumentNames[r];a.argumentSynonym[o]||(a.argumentSynonym[o]={}),a.synonymIndex++,a.argumentSynonym[a.synonymIndex]={functionName:e,argumentName:t,calleeArgumentName:o,calleeFunctionName:n}}}lookupArgumentSynonym(e,t,n){if(e===t)return n;if(!this._isFunction(t))return null;const r=this._getFunction(t),a=r.argumentSynonym[r.synonymUseIndex];return a?a.calleeArgumentName===n?(r.synonymUseIndex++,e===t?a.argumentName:this.lookupArgumentSynonym(e,a.functionName,a.argumentName)):null:null}trackFunctionCall(e,t,n){this.functionNodeDependencies[e]||(this.functionNodeDependencies[e]=new Set,this.functionCalls[e]=[]),this.functionNodeDependencies[e].add(t),this.functionCalls[e].push(n)}getKernelResultType(){return this.rootNode.returnType||this.rootNode.getType(this.rootNode.ast)}getSubKernelResultType(e){const t=this.subKernelNodes[e];let n=!1;for(let r=0;r<this.rootNode.functionCalls.length;r++){const e=this.rootNode.functionCalls[r];e.ast.callee.name===t.name&&(n=!0)}if(!n)throw new Error(`SubKernel ${t.name} never called by kernel`);return t.returnType||t.getType(t.getJsAST())}getReturnTypes(){const e={[this.rootNode.name]:this.rootNode.getType(this.rootNode.ast)},t=this.traceFunctionCalls(this.rootNode.name);for(let n=0;n<t.length;n++){const r=t[n],a=this.functionMap[r];e[r]=a.getType(a.ast)}return e}}e.exports={FunctionBuilder}},"./node_modules/gpu.js/src/backend/function-node.js":/*!**********************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/function-node.js ***!
  \**********************************************************//*! no static exports found */function(e,t,n){const r=n(/*! acorn */'./node_modules/acorn/dist/acorn.es.js'),{utils:a}=n(/*! ../utils */'./node_modules/gpu.js/src/utils.js'),{FunctionTracer:o}=n(/*! ./function-tracer */'./node_modules/gpu.js/src/backend/function-tracer.js');class FunctionNode{constructor(e,t){if(!e&&!t.ast)throw new Error('source parameter is missing');if(t=t||{},this.source=e,this.ast=null,this.name='string'==typeof e?t.isRootKernel?'kernel':t.name||a.getFunctionNameFromString(e):null,this.calledFunctions=[],this.constants={},this.constantTypes={},this.constantBitRatios={},this.isRootKernel=!1,this.isSubKernel=!1,this.debug=null,this.declarations=null,this.functions=null,this.identifiers=null,this.contexts=null,this.functionCalls=null,this.states=[],this.needsArgumentType=null,this.assignArgumentType=null,this.lookupReturnType=null,this.lookupFunctionArgumentTypes=null,this.lookupFunctionArgumentBitRatio=null,this.triggerImplyArgumentType=null,this.triggerTrackArgumentSynonym=null,this.lookupArgumentSynonym=null,this.onNestedFunction=null,this.onFunctionCall=null,this.optimizeFloatMemory=null,this.precision=null,this.loopMaxIterations=null,this.argumentNames='string'==typeof this.source?a.getArgumentNamesFromString(this.source):null,this.argumentTypes=[],this.argumentSizes=[],this.argumentBitRatios=null,this.returnType=null,this.output=[],this.plugins=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.dynamicOutput=null,this.dynamicArguments=null,this.strictTypingChecking=!1,this.fixIntegerDivisionAccuracy=null,this.warnVarUsage=!0,t)for(const e in t)t.hasOwnProperty(e)&&this.hasOwnProperty(e)&&(this[e]=t[e]);this.synonymIndex=-1,this.synonymUseIndex=0,this.argumentSynonym={},this.literalTypes={},this.validate(),this._string=null,this._internalVariableNames={}}validate(){if('string'!=typeof this.source&&!this.ast)throw new Error('this.source not a string');if(!this.ast&&!a.isFunctionString(this.source))throw new Error('this.source not a function string');if(!this.name)throw new Error('this.name could not be set');if(0<this.argumentTypes.length&&this.argumentTypes.length!==this.argumentNames.length)throw new Error(`argumentTypes count of ${this.argumentTypes.length} exceeds ${this.argumentNames.length}`);if(1>this.output.length)throw new Error('this.output is not big enough')}isIdentifierConstant(e){return!!this.constants&&this.constants.hasOwnProperty(e)}isInput(e){return'Input'===this.argumentTypes[this.argumentNames.indexOf(e)]}pushState(e){this.states.push(e)}popState(e){if(this.state!==e)throw new Error(`Cannot popState ${e} when in ${this.state}`);this.states.pop()}isState(e){return this.state===e}get state(){return this.states[this.states.length-1]}astMemberExpressionUnroll(e){if('Identifier'===e.type)return e.name;if('ThisExpression'===e.type)return'this';if('MemberExpression'===e.type&&e.object&&e.property)return e.object.hasOwnProperty('name')&&'_'===e.object.name[0]?this.astMemberExpressionUnroll(e.property):this.astMemberExpressionUnroll(e.object)+'.'+this.astMemberExpressionUnroll(e.property);if(e.hasOwnProperty('expressions')){const t=e.expressions[0];if('Literal'===t.type&&0===t.value&&2===e.expressions.length)return this.astMemberExpressionUnroll(e.expressions[1])}throw this.astErrorOutput('Unknown astMemberExpressionUnroll',e)}getJsAST(e){if(this.ast)return this.ast;if('object'==typeof this.source)return this.traceFunctionAST(this.source),this.ast=this.source;if(e=e||r,null===e)throw new Error('Missing JS to AST parser');const t=Object.freeze(e.parse(`const parser_${this.name} = ${this.source};`,{locations:!0})),n=t.body[0].declarations[0].init;if(this.traceFunctionAST(n),!t)throw new Error('Failed to parse JS code');return this.ast=n}traceFunctionAST(e){const{contexts:t,declarations:n,functions:r,identifiers:a,functionCalls:i}=new o(e);this.contexts=t,this.identifiers=a,this.functionCalls=i,this.declarations=[],this.functions=r;for(let t=0;t<n.length;t++){const e=n[t],{ast:r,context:a,name:o,origin:i,forceInteger:s,assignable:l}=e,{init:d}=r,c=this.getDependencies(d);let u=null;if(s)u='Integer';else if(d){const e=this.getType(d);u='Integer'===e||'Float'===e||'Number'===e?'MemberExpression'===d.type?e:'Number':'LiteralInteger'===e?'Number':e}this.declarations.push({valueType:u,dependencies:c,isSafe:this.isSafeDependencies(c),ast:r,name:o,context:a,origin:i,assignable:l})}for(let t=0;t<r.length;t++)this.onNestedFunction(r[t])}getDeclaration(e){for(let t=0;t<this.identifiers.length;t++){const n=this.identifiers[t];if(e===n.ast&&n.context.hasOwnProperty(e.name))for(let t=0;t<this.declarations.length;t++){const r=this.declarations[t];if(r.name===e.name&&r.context[e.name]===n.context[e.name])return r}}return null}getVariableType(e){if('Identifier'!==e.type)throw new Error(`ast of ${e.type} not "Identifier"`);let t=null;const n=this.argumentNames.indexOf(e.name);if(-1===n){const t=this.getDeclaration(e);if(t)return t.valueType}else{const e=this.argumentTypes[n];e&&(t=e)}if(!t&&this.strictTypingChecking)throw new Error(`Declaration of ${name} not found`);return t}getLookupType(e){if(!i.hasOwnProperty(e))throw new Error(`unknown typeLookupMap ${e}`);return i[e]}getConstantType(e){if(this.constantTypes[e]){const t=this.constantTypes[e];return'Float'===t?'Number':t}throw new Error(`Type for constant "${e}" not declared`)}getKernelArgumentName(e){if(!this.lookupArgumentSynonym)return null;const t=this.argumentNames.indexOf(e);return-1===t?null:this.lookupArgumentSynonym('kernel',this.name,e)}toString(){return this._string?this._string:this._string=this.astGeneric(this.getJsAST(),[]).join('').trim()}toJSON(){const e={source:this.source,name:this.name,constants:this.constants,constantTypes:this.constantTypes,isRootKernel:this.isRootKernel,isSubKernel:this.isSubKernel,debug:this.debug,output:this.output,loopMaxIterations:this.loopMaxIterations,argumentNames:this.argumentNames,argumentTypes:this.argumentTypes,argumentSizes:this.argumentSizes,returnType:this.returnType,leadingReturnStatement:this.leadingReturnStatement,followingReturnStatement:this.followingReturnStatement};return{ast:this.ast,settings:e}}getType(e){if(Array.isArray(e))return this.getType(e[e.length-1]);switch(e.type){case'BlockStatement':return this.getType(e.body);case'ArrayExpression':return`Array(${e.elements.length})`;case'Literal':const t=`${e.start},${e.end}`;return this.literalTypes[t]?this.literalTypes[t]:Number.isInteger(e.value)?'LiteralInteger':!0===e.value||!1===e.value?'Boolean':'Number';case'AssignmentExpression':return this.getType(e.left);case'CallExpression':if(this.isAstMathFunction(e))return'Number';if(!e.callee||!e.callee.name){if('SequenceExpression'===e.callee.type&&e.callee.expressions[e.callee.expressions.length-1].property.name){const t=e.callee.expressions[e.callee.expressions.length-1].property.name;return this.inferArgumentTypesIfNeeded(t,e.arguments),this.lookupReturnType(t,e,this)}throw this.astErrorOutput('Unknown call expression',e)}if(e.callee&&e.callee.name){const t=e.callee.name;return this.inferArgumentTypesIfNeeded(t,e.arguments),this.lookupReturnType(t,e,this)}throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e);case'BinaryExpression':switch(e.operator){case'%':case'/':if(this.fixIntegerDivisionAccuracy)return'Number';break;case'>':case'<':return'Boolean';case'&':case'|':case'^':case'<<':case'>>':case'>>>':return'Integer';}const n=this.getType(e.left);return i[n]||n;case'UpdateExpression':return this.getType(e.argument);case'UnaryExpression':return'~'===e.operator?'Integer':this.getType(e.argument);case'VariableDeclaration':{const t=e.declarations;let n;for(let e=0;e<t.length;e++){const r=t[e];n=this.getType(r)}if(!n)throw this.astErrorOutput(`Unable to find type for declaration`,e);return n}case'VariableDeclarator':const r=this.getDeclaration(e.id);if(!r)throw this.astErrorOutput(`Unable to find declarator`,e);if(!r.valueType)throw this.astErrorOutput(`Unable to find declarator valueType`,e);return r.valueType;case'Identifier':if('Infinity'===e.name)return'Number';if(this.isAstVariable(e)){const t=this.getVariableSignature(e);if('value'===t){const t=this.getVariableType(e);if(!t)throw this.astErrorOutput(`Unable to find identifier valueType`,e);return t}}const a=this.findIdentifierOrigin(e);return a&&a.init?this.getType(a.init):null;case'ReturnStatement':return this.getType(e.argument);case'MemberExpression':if(this.isAstMathFunction(e)){switch(e.property.name){case'ceil':return'Integer';case'floor':return'Integer';case'round':return'Integer';}return'Number'}if(this.isAstVariable(e)){const t=this.getVariableSignature(e);switch(t){case'value[]':return this.getLookupType(this.getVariableType(e.object));case'value[][]':return this.getLookupType(this.getVariableType(e.object.object));case'value[][][]':return this.getLookupType(this.getVariableType(e.object.object.object));case'value[][][][]':return this.getLookupType(this.getVariableType(e.object.object.object.object));case'value.thread.value':case'this.thread.value':return'Integer';case'this.output.value':return this.dynamicOutput?'Integer':'LiteralInteger';case'this.constants.value':return this.getConstantType(e.property.name);case'this.constants.value[]':return this.getLookupType(this.getConstantType(e.object.property.name));case'this.constants.value[][]':return this.getLookupType(this.getConstantType(e.object.object.property.name));case'this.constants.value[][][]':return this.getLookupType(this.getConstantType(e.object.object.object.property.name));case'this.constants.value[][][][]':return this.getLookupType(this.getConstantType(e.object.object.object.object.property.name));case'fn()[]':return this.getLookupType(this.getType(e.object));case'fn()[][]':return this.getLookupType(this.getType(e.object));case'fn()[][][]':return this.getLookupType(this.getType(e.object));case'value.value':if(this.isAstMathVariable(e))return'Number';switch(e.property.name){case'r':return this.getLookupType(this.getVariableType(e.object));case'g':return this.getLookupType(this.getVariableType(e.object));case'b':return this.getLookupType(this.getVariableType(e.object));case'a':return this.getLookupType(this.getVariableType(e.object));}case'[][]':return'Number';}throw this.astErrorOutput('Unhandled getType MemberExpression',e)}throw this.astErrorOutput('Unhandled getType MemberExpression',e);case'ConditionalExpression':return this.getType(e.consequent);case'FunctionDeclaration':case'FunctionExpression':const o=this.findLastReturn(e.body);return o?this.getType(o):null;case'IfStatement':return this.getType(e.consequent);default:throw this.astErrorOutput(`Unhandled getType Type "${e.type}"`,e);}}inferArgumentTypesIfNeeded(e,t){for(let n=0;n<t.length;n++){if(!this.needsArgumentType(e,n))continue;const r=this.getType(t[n]);if(!r)throw this.astErrorOutput(`Unable to infer argument ${n}`,t[n]);this.assignArgumentType(e,n,r)}}isAstMathVariable(e){return'MemberExpression'===e.type&&e.object&&'Identifier'===e.object.type&&'Math'===e.object.name&&e.property&&'Identifier'===e.property.type&&-1<['E','PI','SQRT2','SQRT1_2','LN2','LN10','LOG2E','LOG10E'].indexOf(e.property.name)}isAstMathFunction(e){return'CallExpression'===e.type&&e.callee&&'MemberExpression'===e.callee.type&&e.callee.object&&'Identifier'===e.callee.object.type&&'Math'===e.callee.object.name&&e.callee.property&&'Identifier'===e.callee.property.type&&-1<['abs','acos','asin','atan','atan2','ceil','cos','exp','floor','log','log2','max','min','pow','random','round','sign','sin','sqrt','tan'].indexOf(e.callee.property.name)}isAstVariable(e){return'Identifier'===e.type||'MemberExpression'===e.type}isSafe(e){return this.isSafeDependencies(this.getDependencies(e))}isSafeDependencies(e){return!(e&&e.every)||e.every((e)=>e.isSafe)}getDependencies(e,t,n){if(t||(t=[]),!e)return null;if(Array.isArray(e)){for(let r=0;r<e.length;r++)this.getDependencies(e[r],t,n);return t}switch(e.type){case'AssignmentExpression':return this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case'Literal':t.push({origin:'literal',value:e.value,isSafe:!0!==n&&e.value>-Infinity&&e.value<Infinity&&!isNaN(e.value)});break;case'VariableDeclarator':return this.getDependencies(e.init,t,n);case'Identifier':const r=this.getDeclaration(e);if(r)t.push({name:e.name,origin:'declaration',isSafe:!n&&this.isSafeDependencies(r.dependencies)});else if(-1<this.argumentNames.indexOf(e.name))t.push({name:e.name,origin:'argument',isSafe:!1});else if(this.strictTypingChecking)throw new Error(`Cannot find identifier origin "${e.name}"`);break;case'FunctionDeclaration':return this.getDependencies(e.body.body[e.body.body.length-1],t,n);case'ReturnStatement':return this.getDependencies(e.argument,t);case'BinaryExpression':return n='/'===e.operator||'*'===e.operator,this.getDependencies(e.left,t,n),this.getDependencies(e.right,t,n),t;case'UnaryExpression':case'UpdateExpression':return this.getDependencies(e.argument,t,n);case'VariableDeclaration':return this.getDependencies(e.declarations,t,n);case'ArrayExpression':return t.push({origin:'declaration',isSafe:!0}),t;case'CallExpression':return t.push({origin:'function',isSafe:!0}),t;case'MemberExpression':const a=this.getMemberExpressionDetails(e);switch(a.signature){case'value[]':this.getDependencies(e.object,t,n);break;case'value[][]':this.getDependencies(e.object.object,t,n);break;case'value[][][]':this.getDependencies(e.object.object.object,t,n);break;case'this.output.value':this.dynamicOutput&&t.push({name:a.name,origin:'output',isSafe:!1});}if(a)return a.property&&this.getDependencies(a.property,t,n),a.xProperty&&this.getDependencies(a.xProperty,t,n),a.yProperty&&this.getDependencies(a.yProperty,t,n),a.zProperty&&this.getDependencies(a.zProperty,t,n),t;default:throw this.astErrorOutput(`Unhandled type ${e.type} in getDependencies`,e);}return t}getVariableSignature(e){if(!this.isAstVariable(e))throw new Error(`ast of type "${e.type}" is not a variable signature`);if('Identifier'===e.type)return'value';const t=[];for(;!!e;)e.computed?t.push('[]'):'ThisExpression'===e.type?t.unshift('this'):e.property&&e.property.name?'x'===e.property.name||'y'===e.property.name||'z'===e.property.name?t.unshift('.value'):'constants'===e.property.name||'thread'===e.property.name||'output'===e.property.name?t.unshift('.'+e.property.name):t.unshift('.value'):e.name?t.unshift('value'):e.callee&&e.callee.name?t.unshift('fn()'):e.elements?t.unshift('[]'):t.unshift('unknown'),e=e.object;const n=t.join('');return-1<['value','value[]','value[][]','value[][][]','value[][][][]','value.value','value.thread.value','this.thread.value','this.output.value','this.constants.value','this.constants.value[]','this.constants.value[][]','this.constants.value[][][]','this.constants.value[][][][]','fn()[]','fn()[][]','fn()[][][]','[][]'].indexOf(n)?n:null}build(){return 0<this.toString().length}astGeneric(e,t){if(null===e)throw this.astErrorOutput('NULL ast',e);else{if(Array.isArray(e)){for(let n=0;n<e.length;n++)this.astGeneric(e[n],t);return t}switch(e.type){case'FunctionDeclaration':return this.astFunctionDeclaration(e,t);case'FunctionExpression':return this.astFunctionExpression(e,t);case'ReturnStatement':return this.astReturnStatement(e,t);case'Literal':return this.astLiteral(e,t);case'BinaryExpression':return this.astBinaryExpression(e,t);case'Identifier':return this.astIdentifierExpression(e,t);case'AssignmentExpression':return this.astAssignmentExpression(e,t);case'ExpressionStatement':return this.astExpressionStatement(e,t);case'EmptyStatement':return this.astEmptyStatement(e,t);case'BlockStatement':return this.astBlockStatement(e,t);case'IfStatement':return this.astIfStatement(e,t);case'SwitchStatement':return this.astSwitchStatement(e,t);case'BreakStatement':return this.astBreakStatement(e,t);case'ContinueStatement':return this.astContinueStatement(e,t);case'ForStatement':return this.astForStatement(e,t);case'WhileStatement':return this.astWhileStatement(e,t);case'DoWhileStatement':return this.astDoWhileStatement(e,t);case'VariableDeclaration':return this.astVariableDeclaration(e,t);case'VariableDeclarator':return this.astVariableDeclarator(e,t);case'ThisExpression':return this.astThisExpression(e,t);case'SequenceExpression':return this.astSequenceExpression(e,t);case'UnaryExpression':return this.astUnaryExpression(e,t);case'UpdateExpression':return this.astUpdateExpression(e,t);case'LogicalExpression':return this.astLogicalExpression(e,t);case'MemberExpression':return this.astMemberExpression(e,t);case'CallExpression':return this.astCallExpression(e,t);case'ArrayExpression':return this.astArrayExpression(e,t);case'DebuggerStatement':return this.astDebuggerStatement(e,t);case'ConditionalExpression':return this.astConditionalExpression(e,t);}throw this.astErrorOutput('Unknown ast type : '+e.type,e)}}astErrorOutput(e,t){if('string'!=typeof this.source)return new Error(e);const n=a.getAstString(this.source,t),r=this.source.substr(t.start),o=r.split(/\n/),i=0<o.length?o[o.length-1]:0;return new Error(`${e} on line ${o.length}, position ${i.length}:\n ${n}`)}astDebuggerStatement(e,t){return t}astConditionalExpression(e,t){if('ConditionalExpression'!==e.type)throw this.astErrorOutput('Not a conditional expression',e);return t.push('('),this.astGeneric(e.test,t),t.push('?'),this.astGeneric(e.consequent,t),t.push(':'),this.astGeneric(e.alternate,t),t.push(')'),t}astFunction(){throw new Error(`"astFunction" not defined on ${this.constructor.name}`)}astFunctionDeclaration(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}astFunctionExpression(e,t){return this.isChildFunction(e)?t:this.astFunction(e,t)}isChildFunction(e){for(let t=0;t<this.functions.length;t++)if(this.functions[t]===e)return!0;return!1}astReturnStatement(e,t){return t}astLiteral(e,t){return this.literalTypes[`${e.start},${e.end}`]='Number',t}astBinaryExpression(e,t){return t}astIdentifierExpression(e,t){return t}astAssignmentExpression(e,t){return t}astExpressionStatement(e,t){return this.astGeneric(e.expression,t),t.push(';'),t}astEmptyStatement(e,t){return t}astBlockStatement(e,t){return t}astIfStatement(e,t){return t}astSwitchStatement(e,t){return t}astBreakStatement(e,t){return t.push('break;'),t}astContinueStatement(e,t){return t.push('continue;\n'),t}astForStatement(e,t){return t}astWhileStatement(e,t){return t}astDoWhileStatement(e,t){return t}astVariableDeclaration(e,t){const n=e.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput('Unexpected expression',e);const r=[],a=n[0],o=a.init;let i=this.isState('in-for-loop-init')?'Integer':this.getType(o);'LiteralInteger'===i&&(i='Number');const s=typeMap[i];if(!s)throw this.astErrorOutput(`Markup type ${s} not handled`,e);let l=this.getDependencies(a.init);throw new Error('remove me')}astVariableDeclarator(e,t){return this.astGeneric(e.id,t),null!==e.init&&(t.push('='),this.astGeneric(e.init,t)),t}astThisExpression(e,t){return t}astSequenceExpression(e,t){for(let n=0;n<e.expressions.length;n++)0<n&&t.push(','),this.astGeneric(e.expressions,t);return t}astUnaryExpression(e,t){const n=this.checkAndUpconvertBitwiseUnary(e,t);return n?t:(e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t)}checkAndUpconvertBitwiseUnary(){}astUpdateExpression(e,t){return e.prefix?(t.push(e.operator),this.astGeneric(e.argument,t)):(this.astGeneric(e.argument,t),t.push(e.operator)),t}astLogicalExpression(e,t){return t.push('('),this.astGeneric(e.left,t),t.push(e.operator),this.astGeneric(e.right,t),t.push(')'),t}astMemberExpression(e,t){return t}astCallExpression(e,t){return t}astArrayExpression(e,t){return t}getMemberExpressionDetails(e){if('MemberExpression'!==e.type)throw this.astErrorOutput(`Expression ${e.type} not a MemberExpression`,e);let t=null,n=null;const r=this.getVariableSignature(e);switch(r){case'value':return null;case'value.thread.value':case'this.thread.value':case'this.output.value':return{signature:r,type:'Integer',name:e.property.name};case'value[]':if('string'!=typeof e.object.name)throw this.astErrorOutput('Unexpected expression',e);return t=e.object.name,{name:t,origin:'user',signature:r,type:this.getVariableType(e.object),xProperty:e.property};case'value[][]':if('string'!=typeof e.object.object.name)throw this.astErrorOutput('Unexpected expression',e);return t=e.object.object.name,{name:t,origin:'user',signature:r,type:this.getVariableType(e.object.object),yProperty:e.object.property,xProperty:e.property};case'value[][][]':if('string'!=typeof e.object.object.object.name)throw this.astErrorOutput('Unexpected expression',e);return t=e.object.object.object.name,{name:t,origin:'user',signature:r,type:this.getVariableType(e.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case'value[][][][]':if('string'!=typeof e.object.object.object.object.name)throw this.astErrorOutput('Unexpected expression',e);return t=e.object.object.object.object.name,{name:t,origin:'user',signature:r,type:this.getVariableType(e.object.object.object.object),zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property};case'value.value':if('string'!=typeof e.property.name)throw this.astErrorOutput('Unexpected expression',e);if(this.isAstMathVariable(e))return t=e.property.name,{name:t,origin:'Math',type:'Number',signature:r};switch(e.property.name){case'r':case'g':case'b':case'a':return t=e.object.name,{name:t,property:e.property.name,origin:'user',signature:r,type:'Number'};default:throw this.astErrorOutput('Unexpected expression',e);}case'this.constants.value':if('string'!=typeof e.property.name)throw this.astErrorOutput('Unexpected expression',e);if(t=e.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput('Constant has no type',e);return{name:t,type:n,origin:'constants',signature:r};case'this.constants.value[]':if('string'!=typeof e.object.property.name)throw this.astErrorOutput('Unexpected expression',e);if(t=e.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput('Constant has no type',e);return{name:t,type:n,origin:'constants',signature:r,xProperty:e.property};case'this.constants.value[][]':{if('string'!=typeof e.object.object.property.name)throw this.astErrorOutput('Unexpected expression',e);if(t=e.object.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput('Constant has no type',e);return{name:t,type:n,origin:'constants',signature:r,yProperty:e.object.property,xProperty:e.property}}case'this.constants.value[][][]':{if('string'!=typeof e.object.object.object.property.name)throw this.astErrorOutput('Unexpected expression',e);if(t=e.object.object.object.property.name,n=this.getConstantType(t),!n)throw this.astErrorOutput('Constant has no type',e);return{name:t,type:n,origin:'constants',signature:r,zProperty:e.object.object.property,yProperty:e.object.property,xProperty:e.property}}case'fn()[]':case'[][]':return{signature:r,property:e.property};default:throw this.astErrorOutput('Unexpected expression',e);}}findIdentifierOrigin(e){for(const t=[this.ast];0<t.length;){const n=t[0];if('VariableDeclarator'===n.type&&n.id&&n.id.name&&n.id.name===e.name)return n;if(t.shift(),n.argument)t.push(n.argument);else if(n.body)t.push(n.body);else if(n.declarations)t.push(n.declarations);else if(Array.isArray(n))for(let e=0;e<n.length;e++)t.push(n[e])}return null}findLastReturn(e){for(const t=[e||this.ast];0<t.length;){const e=t.pop();if('ReturnStatement'===e.type)return e;if('FunctionDeclaration'!==e.type)if(e.argument)t.push(e.argument);else if(e.body)t.push(e.body);else if(e.declarations)t.push(e.declarations);else if(Array.isArray(e))for(let n=0;n<e.length;n++)t.push(e[n]);else e.consequent?t.push(e.consequent):e.cases&&t.push(e.cases)}return null}getInternalVariableName(e){return this._internalVariableNames.hasOwnProperty(e)||(this._internalVariableNames[e]=0),this._internalVariableNames[e]++,1===this._internalVariableNames[e]?e:e+this._internalVariableNames[e]}varWarn(){console.warn('var declarations are deprecated, weird things happen when falling back to CPU because var scope differs in javascript than in most languages.  Use const or let')}}const i={Number:'Number',Float:'Float',Integer:'Integer',Array:'Number',"Array(2)":'Number',"Array(3)":'Number',"Array(4)":'Number',Array2D:'Number',Array3D:'Number',Input:'Number',HTMLImage:'Array(4)',HTMLImageArray:'Array(4)',NumberTexture:'Number',MemoryOptimizedNumberTexture:'Number',"ArrayTexture(1)":'Number',"ArrayTexture(2)":'Array(2)',"ArrayTexture(3)":'Array(3)',"ArrayTexture(4)":'Array(4)'};e.exports={FunctionNode}},"./node_modules/gpu.js/src/backend/function-tracer.js":/*!************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/function-tracer.js ***!
  \************************************************************//*! no static exports found */function(e){class FunctionTracer{constructor(e){this.runningContexts=[],this.contexts=[],this.functionCalls=[],this.declarations=[],this.identifiers=[],this.functions=[],this.returnStatements=[],this.inLoopInit=!1,this.scan(e)}get currentContext(){return 0<this.runningContexts.length?this.runningContexts[this.runningContexts.length-1]:null}newContext(e){const t=Object.assign({},this.currentContext);this.contexts.push(t),this.runningContexts.push(t),e(),this.runningContexts.pop()}scan(e){if(Array.isArray(e)){for(let t=0;t<e.length;t++)this.scan(e[t]);return}switch(e.type){case'Program':this.scan(e.body);break;case'BlockStatement':this.newContext(()=>{this.scan(e.body)});break;case'AssignmentExpression':this.scan(e.left),this.scan(e.right);break;case'BinaryExpression':this.scan(e.left),e.right&&this.scan(e.right);break;case'UpdateExpression':this.scan(e.argument);break;case'UnaryExpression':this.scan(e.argument);break;case'VariableDeclaration':this.scan(e.declarations);break;case'VariableDeclarator':const{currentContext:t}=this,n={ast:e,context:t,name:e.id.name,origin:'declaration',forceInteger:this.inLoopInit,assignable:!this.inLoopInit&&!t.hasOwnProperty(e.id.name)};t[e.id.name]=n,this.declarations.push(n),this.scan(e.id),this.scan(e.init);break;case'FunctionExpression':case'FunctionDeclaration':0===this.runningContexts.length?this.scan(e.body):this.functions.push(e);break;case'IfStatement':this.scan(e.test),this.scan(e.consequent),e.alternate&&this.scan(e.alternate);break;case'ForStatement':this.newContext(()=>{e.init&&(this.inLoopInit=!0,this.scan(e.init),this.inLoopInit=!1),e.test&&this.scan(e.test),this.scan(e.update),this.newContext(()=>{this.scan(e.body)})});break;case'DoWhileStatement':case'WhileStatement':this.newContext(()=>{this.scan(e.body),this.scan(e.test)});break;case'Identifier':this.identifiers.push({context:this.currentContext,ast:e});break;case'ReturnStatement':this.returnStatements.push(e),this.scan(e.argument);break;case'MemberExpression':this.scan(e.object),this.scan(e.property);break;case'ExpressionStatement':this.scan(e.expression);break;case'ThisExpression':break;case'CallExpression':this.functionCalls.push({context:this.currentContext,ast:e}),this.scan(e.arguments);break;case'ArrayExpression':this.scan(e.elements);break;case'ConditionalExpression':this.scan(e.test),this.scan(e.alternate),this.scan(e.consequent);break;case'SwitchStatement':this.scan(e.discriminant),this.scan(e.cases);break;case'SwitchCase':e.test&&this.scan(e.test),this.scan(e.consequent);break;case'LogicalExpression':this.scan(e.left),this.scan(e.right);break;case'Literal':break;case'DebuggerStatement':break;case'EmptyStatement':break;case'BreakStatement':break;default:throw new Error(`unhandled type "${e.type}"`);}}}e.exports={FunctionTracer}},"./node_modules/gpu.js/src/backend/gl/kernel-string.js":/*!*************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/kernel-string.js ***!
  \*************************************************************//*! no static exports found */function(e,t,n){function toStringWithoutUtils(e){return e.toString().replace('=>','').replace(/^function /,'').replace(/utils[.]/g,'/*utils.*/')}function getRenderString(e,t){const n='single'===t.precision?e:`new Float32Array(${e}.buffer)`;return t.output[2]?`renderOutput(${n}, ${t.output[0]}, ${t.output[1]}, ${t.output[2]})`:t.output[1]?`renderOutput(${n}, ${t.output[0]}, ${t.output[1]})`:`renderOutput(${n}, ${t.output[0]})`}function getGetPixelsString(e){const t=e.getPixels.toString(),n=!/^function/.test(t);return a.flattenFunctionToString(`${n?'function ':''}${t}`,{findDependency:(e,t)=>'utils'===e?`const ${t} = ${a[t].toString()};`:null,thisLookup:(t)=>{if('context'===t)return null;if(e.hasOwnProperty(t))return JSON.stringify(e[t]);throw new Error(`unhandled thisLookup ${t}`)}})}function getToArrayString(e,t){const n=e.toArray.toString(),r=!/^function/.test(n),o=a.flattenFunctionToString(`${r?'function ':''}${n}`,{findDependency:(t,n)=>{if('utils'===t)return`const ${n} = ${a[n].toString()};`;if('this'===t)return`${r?'function ':''}${e[n].toString()}`;throw new Error('unhandled fromObject')},thisLookup:(n)=>{if('texture'===n)return t;if(e.hasOwnProperty(n))return JSON.stringify(e[n]);throw new Error(`unhandled thisLookup ${n}`)}});return`() => {
  ${o}
  return toArray();
  }`}const{glWiretap:r}=n(/*! gl-wiretap */'./node_modules/gl-wiretap/index.js'),{utils:a}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js');e.exports={glKernelString:function glKernelString(e,t,n,o,i){const s=[],l=r(n.context,{useTrackablePrimitives:!0,onReadPixels:(e)=>{if(R.subKernels){if(!d)s.push(`    const result = { result: ${getRenderString(e,R)} };`),d=!0;else{const t=R.subKernels[c++].property;s.push(`    result${isNaN(t)?'.'+t:`[${t}]`} = ${getRenderString(e,R)};`)}return void(c===R.subKernels.length&&s.push('    return result;'))}e?s.push(`    return ${getRenderString(e,R)};`):s.push(`    return null;`)},onUnrecognizedArgumentLookup:(e)=>{for(let t=0;t<R.kernelConstants.length;t++){const n=R.kernelConstants[t];if('HTMLImageArray'===n.type){const e=R.constants[n.name],t=`uploadValue_${n.name}[${e.indexOf(n.uploadValue)}]`;return l.insertVariable(t,R.constants),t}if(n.uploadValue===e){const e=`uploadValue_${n.name}`;return l.insertVariable(e,n),e}}}});let d=!1,c=0;const{source:u,canvas:p,output:m,pipeline:g,graphical:h,loopMaxIterations:f,constants:_,optimizeFloatMemory:y,precision:E,fixIntegerDivisionAccuracy:x,functions:A,nativeFunctions:b,subKernels:T,immutable:C,kernelArguments:v,kernelConstants:S}=n,R=new e(u,{canvas:p,context:l,checkContext:!1,output:m,pipeline:g,graphical:h,loopMaxIterations:f,constants:_,optimizeFloatMemory:y,precision:E,fixIntegerDivisionAccuracy:x,functions:A,nativeFunctions:b,subKernels:T,immutable:C});let F=[];l.setIndent(2),R.build.apply(R,t),F.push(l.toString()),l.reset();const w=Array.from(t).map((e)=>{switch(typeof e){case'number':case'boolean':return new e.constructor(e);}return e});if(R.kernelArguments.forEach((e,n)=>{switch(e.type){case'Integer':case'Boolean':case'Number':case'Float':l.insertVariable(`uploadValue_${e.name}`,w[n]);break;case'Array':l.insertVariable(`uploadValue_${e.name}`,w[n]);break;case'HTMLImage':l.insertVariable(`uploadValue_${e.name}`,w[n]);break;case'HTMLImageArray':for(let r=0;r<t[n].length;r++){const a=t[n];l.insertVariable(`uploadValue_${e.name}[${r}]`,a[r])}break;case'Input':l.insertVariable(`uploadValue_${e.name}`,e.uploadValue);break;case'MemoryOptimizedNumberTexture':case'NumberTexture':case'ArrayTexture(1)':case'ArrayTexture(2)':case'ArrayTexture(3)':case'ArrayTexture(4)':l.insertVariable(`uploadValue_${e.name}`,w[n].texture);break;default:throw new Error(`unhandled kernelArgumentType insertion for glWiretap of type ${e.type}`);}}),F.push('/** start of injected functions **/'),F.push(`function ${toStringWithoutUtils(a.flattenTo)}`),F.push(`function ${toStringWithoutUtils(a.flatten2dArrayTo)}`),F.push(`function ${toStringWithoutUtils(a.flatten3dArrayTo)}`),F.push(`function ${toStringWithoutUtils(a.isArray)}`),R.renderOutput!==R.renderTexture&&R.formatValues&&F.push(`  const renderOutput = function ${toStringWithoutUtils(R.formatValues)};`),F.push('/** end of injected functions **/'),F.push(`  const innerKernel = function (${R.kernelArguments.map((e)=>e.varName).join(', ')}) {`),l.setIndent(4),R.run.apply(R,w),R.renderKernels?R.renderKernels():R.renderOutput&&R.renderOutput(),F.push('/** start setup uploads for kernel values **/'),R.kernelArguments.forEach((e)=>{F.push(e.getStringValueHandler())}),F.push('/** end setup uploads for kernel values **/'),F.push(l.toString()),R.renderOutput===R.renderTexture){l.reset();const e=R.renderKernels(),t=l.getContextVariableName(R.outputTexture);F.push(`    return {
      result: {
        texture: ${t},
        type: '${e.result.type}',
        toArray: ${getToArrayString(e.result,t)}
      },`);const{subKernels:n,subKernelOutputTextures:r}=R;for(let t=0;t<n.length;t++){const a=r[t],o=n[t],i=e[o.property],s=l.getContextVariableName(a);F.push(`
      ${o.property}: {
        texture: ${s},
        type: '${i.type}',
        toArray: ${getToArrayString(i,s)}
      },`)}F.push(`    };`)}F.push(`    ${i?'\n'+i+'    ':''}`),F.push(s.join('\n')),F.push('  };'),R.graphical&&(F.push(getGetPixelsString(R)),F.push(`innerKernel.getPixels = getPixels;`)),F.push('  return innerKernel;');let L=[];return S.forEach((e)=>{L.push(`${e.getStringValueHandler()}`)}),`function kernel(settings) {
  const { context, constants } = settings;
  ${L.join('')}
  ${o?o:''}
${F.join('\n')}
}`}}},"./node_modules/gpu.js/src/backend/gl/kernel.js":/*!******************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/kernel.js ***!
  \******************************************************//*! no static exports found */function(e,t,n){const{Kernel:r}=n(/*! ../kernel */'./node_modules/gpu.js/src/backend/kernel.js'),{Texture:a}=n(/*! ../../texture */'./node_modules/gpu.js/src/texture.js'),{utils:o}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureArray2Float:i}=n(/*! ./texture/array-2-float */'./node_modules/gpu.js/src/backend/gl/texture/array-2-float.js'),{GLTextureArray2Float2D:s}=n(/*! ./texture/array-2-float-2d */'./node_modules/gpu.js/src/backend/gl/texture/array-2-float-2d.js'),{GLTextureArray2Float3D:l}=n(/*! ./texture/array-2-float-3d */'./node_modules/gpu.js/src/backend/gl/texture/array-2-float-3d.js'),{GLTextureArray3Float:d}=n(/*! ./texture/array-3-float */'./node_modules/gpu.js/src/backend/gl/texture/array-3-float.js'),{GLTextureArray3Float2D:c}=n(/*! ./texture/array-3-float-2d */'./node_modules/gpu.js/src/backend/gl/texture/array-3-float-2d.js'),{GLTextureArray3Float3D:u}=n(/*! ./texture/array-3-float-3d */'./node_modules/gpu.js/src/backend/gl/texture/array-3-float-3d.js'),{GLTextureArray4Float:p}=n(/*! ./texture/array-4-float */'./node_modules/gpu.js/src/backend/gl/texture/array-4-float.js'),{GLTextureArray4Float2D:m}=n(/*! ./texture/array-4-float-2d */'./node_modules/gpu.js/src/backend/gl/texture/array-4-float-2d.js'),{GLTextureArray4Float3D:g}=n(/*! ./texture/array-4-float-3d */'./node_modules/gpu.js/src/backend/gl/texture/array-4-float-3d.js'),{GLTextureFloat:h}=n(/*! ./texture/float */'./node_modules/gpu.js/src/backend/gl/texture/float.js'),{GLTextureFloat2D:f}=n(/*! ./texture/float-2d */'./node_modules/gpu.js/src/backend/gl/texture/float-2d.js'),{GLTextureFloat3D:_}=n(/*! ./texture/float-3d */'./node_modules/gpu.js/src/backend/gl/texture/float-3d.js'),{GLTextureMemoryOptimized:y}=n(/*! ./texture/memory-optimized */'./node_modules/gpu.js/src/backend/gl/texture/memory-optimized.js'),{GLTextureMemoryOptimized2D:E}=n(/*! ./texture/memory-optimized-2d */'./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-2d.js'),{GLTextureMemoryOptimized3D:x}=n(/*! ./texture/memory-optimized-3d */'./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-3d.js'),{GLTextureUnsigned:A}=n(/*! ./texture/unsigned */'./node_modules/gpu.js/src/backend/gl/texture/unsigned.js'),{GLTextureUnsigned2D:b}=n(/*! ./texture/unsigned-2d */'./node_modules/gpu.js/src/backend/gl/texture/unsigned-2d.js'),{GLTextureUnsigned3D:T}=n(/*! ./texture/unsigned-3d */'./node_modules/gpu.js/src/backend/gl/texture/unsigned-3d.js'),{GLTextureGraphical:C}=n(/*! ./texture/graphical */'./node_modules/gpu.js/src/backend/gl/texture/graphical.js');class GLKernel extends r{static get mode(){return'gpu'}static getIsFloatRead(){const e=`function kernelFunction() {
      return 1;
    }`,t=new this(e,{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[1],precision:'single',returnType:'Number'});t.build(),t.run();const n=t.renderOutput();return t.destroy(!0),1===n[0]}static getIsIntegerDivisionAccurate(){const e=new this(function kernelFunction(e,t){return e[this.thread.x]/t[this.thread.x]}.toString(),{context:this.testContext,canvas:this.testCanvas,validate:!1,output:[2],returnType:'Number',precision:'unsigned'}),t=[[6,6030401],[3,3991]];e.build.apply(e,t),e.run.apply(e,t);const n=e.renderOutput();return e.destroy(!0),2===n[0]&&1511===n[1]}static get testCanvas(){throw new Error(`"testCanvas" not defined on ${this.name}`)}static get testContext(){throw new Error(`"testContext" not defined on ${this.name}`)}static get features(){throw new Error(`"features" not defined on ${this.name}`)}static setupFeatureChecks(){throw new Error(`"setupFeatureChecks" not defined on ${this.name}`)}setFixIntegerDivisionAccuracy(e){return this.fixIntegerDivisionAccuracy=e,this}setPrecision(e){return this.precision=e,this}setFloatTextures(e){return o.warnDeprecated('method','setFloatTextures','setOptimizeFloatMemory'),this.floatTextures=e,this}static nativeFunctionArguments(e){const t=[],n=[],r=[],a=/^[a-zA-Z_]/,o=/[a-zA-Z_0-9]/;for(let s=0,i=null,l=null;s<e.length;){const d=e[s],c=e[s+1],u=0<r.length?r[r.length-1]:null;if('FUNCTION_ARGUMENTS'===u&&'/'===d&&'*'===c){r.push('MULTI_LINE_COMMENT'),s+=2;continue}else if('MULTI_LINE_COMMENT'===u&&'*'===d&&'/'===c){r.pop(),s+=2;continue}else if('FUNCTION_ARGUMENTS'===u&&'/'===d&&'/'===c){r.push('COMMENT'),s+=2;continue}else if('COMMENT'===u&&'\n'===d){r.pop(),s++;continue}else if(null===u&&'('===d){r.push('FUNCTION_ARGUMENTS'),s++;continue}else if('FUNCTION_ARGUMENTS'===u){if(')'===d){r.pop();break}if('f'===d&&'l'===c&&'o'===e[s+2]&&'a'===e[s+3]&&'t'===e[s+4]&&' '===e[s+5]){r.push('DECLARE_VARIABLE'),l='float',i='',s+=6;continue}else if('i'===d&&'n'===c&&'t'===e[s+2]&&' '===e[s+3]){r.push('DECLARE_VARIABLE'),l='int',i='',s+=4;continue}else if('v'===d&&'e'===c&&'c'===e[s+2]&&'2'===e[s+3]&&' '===e[s+4]){r.push('DECLARE_VARIABLE'),l='vec2',i='',s+=5;continue}else if('v'===d&&'e'===c&&'c'===e[s+2]&&'3'===e[s+3]&&' '===e[s+4]){r.push('DECLARE_VARIABLE'),l='vec3',i='',s+=5;continue}else if('v'===d&&'e'===c&&'c'===e[s+2]&&'4'===e[s+3]&&' '===e[s+4]){r.push('DECLARE_VARIABLE'),l='vec4',i='',s+=5;continue}}else if('DECLARE_VARIABLE'===u){if(''===i){if(' '===d){s++;continue}if(!a.test(d))throw new Error('variable name is not expected string')}i+=d,o.test(c)||(r.pop(),n.push(i),t.push(S[l]))}s++}if(0<r.length)throw new Error('GLSL function was not parsable');return{argumentNames:n,argumentTypes:t}}static nativeFunctionReturnType(e){return S[e.match(/int|float|vec[2-4]/)[0]]}static combineKernels(e,t){e.apply(null,arguments);const{texSize:n,context:r,threadDim:a}=t.texSize;let i;if('single'===t.precision){const e=n[0],t=Math.ceil(n[1]/4);i=new Float32Array(4*(4*(e*t))),r.readPixels(0,0,e,4*t,r.RGBA,r.FLOAT,i)}else{const e=new Uint8Array(4*(n[0]*n[1]));r.readPixels(0,0,n[0],n[1],r.RGBA,r.UNSIGNED_BYTE,e),i=new Float32Array(e.buffer)}if(i=i.subarray(0,a[0]*a[1]*a[2]),1===t.output.length)return i;if(2===t.output.length)return o.splitArray(i,t.output[0]);if(3===t.output.length){const e=o.splitArray(i,t.output[0]*t.output[1]);return e.map(function(e){return o.splitArray(e,t.output[0])})}}constructor(e,t){super(e,t),this.transferValues=null,this.formatValues=null,this.TextureConstructor=null,this.renderOutput=null,this.renderRawOutput=null,this.texSize=null,this.translatedSource=null,this.renderStrategy=null,this.compiledFragmentShader=null,this.compiledVertexShader=null}translateSource(){throw new Error(`"translateSource" not defined on ${this.constructor.name}`)}pickRenderStrategy(e){if(this.graphical)return this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=(e)=>e,this.TextureConstructor=C,null;if('unsigned'===this.precision){if(this.renderRawOutput=this.readPackedPixelsToUint8Array,this.transferValues=this.readPackedPixelsToFloat32Array,this.pipeline)switch(this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case'LiteralInteger':case'Float':case'Number':case'Integer':return 0<this.output[2]?(this.TextureConstructor=T,this.renderStrategy=v.PackedPixelTo3DFloat,null):0<this.output[1]?(this.TextureConstructor=b,this.renderStrategy=v.PackedPixelTo2DFloat,null):(this.TextureConstructor=A,this.renderStrategy=v.PackedPixelToFloat,null);break;case'Array(2)':case'Array(3)':case'Array(4)':return this.requestFallback(e);}else switch(null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.returnType){case'LiteralInteger':case'Float':case'Number':case'Integer':return this.renderOutput=this.renderValues,0<this.output[2]?(this.TextureConstructor=T,this.renderStrategy=v.PackedPixelTo3DFloat,this.formatValues=o.erect3DPackedFloat,null):0<this.output[1]?(this.TextureConstructor=b,this.renderStrategy=v.PackedPixelTo2DFloat,this.formatValues=o.erect2DPackedFloat,null):(this.TextureConstructor=A,this.renderStrategy=v.PackedPixelToFloat,this.formatValues=o.erectPackedFloat,null);break;case'Array(2)':case'Array(3)':case'Array(4)':return this.requestFallback(e);}}else if('single'===this.precision){if(this.renderRawOutput=this.readFloatPixelsToFloat32Array,this.transferValues=this.readFloatPixelsToFloat32Array,this.pipeline)switch(this.renderStrategy=v.FloatTexture,this.renderOutput=this.renderTexture,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToTextures),this.returnType){case'LiteralInteger':case'Float':case'Number':case'Integer':return this.optimizeFloatMemory?0<this.output[2]?(this.TextureConstructor=x,null):0<this.output[1]?(this.TextureConstructor=E,null):(this.TextureConstructor=y,null):0<this.output[2]?(this.TextureConstructor=_,null):0<this.output[1]?(this.TextureConstructor=f,null):(this.TextureConstructor=h,null);break;case'Array(2)':return 0<this.output[2]?(this.TextureConstructor=l,null):0<this.output[1]?(this.TextureConstructor=s,null):(this.TextureConstructor=i,null);break;case'Array(3)':return 0<this.output[2]?(this.TextureConstructor=u,null):0<this.output[1]?(this.TextureConstructor=c,null):(this.TextureConstructor=d,null);break;case'Array(4)':return 0<this.output[2]?(this.TextureConstructor=g,null):0<this.output[1]?(this.TextureConstructor=m,null):(this.TextureConstructor=p,null);}if(this.renderOutput=this.renderValues,null!==this.subKernels&&(this.renderKernels=this.renderKernelsToArrays),this.optimizeFloatMemory)switch(this.returnType){case'LiteralInteger':case'Float':case'Number':case'Integer':return 0<this.output[2]?(this.TextureConstructor=x,this.renderStrategy=v.MemoryOptimizedFloatPixelToMemoryOptimized3DFloat,this.formatValues=o.erectMemoryOptimized3DFloat,null):0<this.output[1]?(this.TextureConstructor=E,this.renderStrategy=v.MemoryOptimizedFloatPixelToMemoryOptimized2DFloat,this.formatValues=o.erectMemoryOptimized2DFloat,null):(this.TextureConstructor=y,this.renderStrategy=v.MemoryOptimizedFloatPixelToMemoryOptimizedFloat,this.formatValues=o.erectMemoryOptimizedFloat,null);break;case'Array(2)':return 0<this.output[2]?(this.TextureConstructor=l,this.renderStrategy=v.FloatPixelTo3DArray2,this.formatValues=o.erect3DArray2,null):0<this.output[1]?(this.TextureConstructor=s,this.renderStrategy=v.FloatPixelTo2DArray2,this.formatValues=o.erect2DArray2,null):(this.TextureConstructor=i,this.renderStrategy=v.FloatPixelToArray2,this.formatValues=o.erectArray2,null);break;case'Array(3)':return 0<this.output[2]?(this.TextureConstructor=u,this.renderStrategy=v.FloatPixelTo3DArray3,this.formatValues=o.erect3DArray3,null):0<this.output[1]?(this.TextureConstructor=c,this.renderStrategy=v.FloatPixelTo2DArray3,this.formatValues=o.erect2DArray3,null):(this.TextureConstructor=d,this.renderStrategy=v.FloatPixelToArray3,this.formatValues=o.erectArray3,null);break;case'Array(4)':return 0<this.output[2]?(this.TextureConstructor=g,this.renderStrategy=v.FloatPixelTo3DArray4,this.formatValues=o.erect3DArray4,null):0<this.output[1]?(this.TextureConstructor=m,this.renderStrategy=v.FloatPixelTo2DArray4,this.formatValues=o.erect2DArray4,null):(this.TextureConstructor=p,this.renderStrategy=v.FloatPixelToArray4,this.formatValues=o.erectArray4,null);}else switch(this.returnType){case'LiteralInteger':case'Float':case'Number':case'Integer':return 0<this.output[2]?(this.TextureConstructor=_,this.renderStrategy=v.FloatPixelTo3DFloat,this.formatValues=o.erect3DFloat,null):0<this.output[1]?(this.TextureConstructor=f,this.renderStrategy=v.FloatPixelTo2DFloat,this.formatValues=o.erect2DFloat,null):(this.TextureConstructor=h,this.renderStrategy=v.FloatPixelToFloat,this.formatValues=o.erectFloat,null);break;case'Array(2)':return 0<this.output[2]?(this.TextureConstructor=l,this.renderStrategy=v.FloatPixelTo3DArray2,this.formatValues=o.erect3DArray2,null):0<this.output[1]?(this.TextureConstructor=s,this.renderStrategy=v.FloatPixelTo2DArray2,this.formatValues=o.erect2DArray2,null):(this.TextureConstructor=i,this.renderStrategy=v.FloatPixelToArray2,this.formatValues=o.erectArray2,null);break;case'Array(3)':return 0<this.output[2]?(this.TextureConstructor=u,this.renderStrategy=v.FloatPixelTo3DArray3,this.formatValues=o.erect3DArray3,null):0<this.output[1]?(this.TextureConstructor=c,this.renderStrategy=v.FloatPixelTo2DArray3,this.formatValues=o.erect2DArray3,null):(this.TextureConstructor=d,this.renderStrategy=v.FloatPixelToArray3,this.formatValues=o.erectArray3,null);break;case'Array(4)':return 0<this.output[2]?(this.TextureConstructor=g,this.renderStrategy=v.FloatPixelTo3DArray4,this.formatValues=o.erect3DArray4,null):0<this.output[1]?(this.TextureConstructor=m,this.renderStrategy=v.FloatPixelTo2DArray4,this.formatValues=o.erect2DArray4,null):(this.TextureConstructor=p,this.renderStrategy=v.FloatPixelToArray4,this.formatValues=o.erectArray4,null);}}else throw new Error(`unhandled precision of "${this.precision}"`);throw new Error(`unhandled return type "${this.returnType}"`)}getKernelString(){throw new Error(`abstract method call`)}getMainResultTexture(){switch(this.returnType){case'LiteralInteger':case'Float':case'Integer':case'Number':return this.getMainResultNumberTexture();case'Array(2)':return this.getMainResultArray2Texture();case'Array(3)':return this.getMainResultArray3Texture();case'Array(4)':return this.getMainResultArray4Texture();default:throw new Error(`unhandled returnType type ${this.returnType}`);}}getMainResultKernelNumberTexture(){throw new Error(`abstract method call`)}getMainResultSubKernelNumberTexture(){throw new Error(`abstract method call`)}getMainResultKernelArray2Texture(){throw new Error(`abstract method call`)}getMainResultSubKernelArray2Texture(){throw new Error(`abstract method call`)}getMainResultKernelArray3Texture(){throw new Error(`abstract method call`)}getMainResultSubKernelArray3Texture(){throw new Error(`abstract method call`)}getMainResultKernelArray4Texture(){throw new Error(`abstract method call`)}getMainResultSubKernelArray4Texture(){throw new Error(`abstract method call`)}getMainResultGraphical(){throw new Error(`abstract method call`)}getMainResultMemoryOptimizedFloats(){throw new Error(`abstract method call`)}getMainResultPackedPixels(){throw new Error(`abstract method call`)}getMainResultString(){return this.graphical?this.getMainResultGraphical():'single'===this.precision?this.optimizeFloatMemory?this.getMainResultMemoryOptimizedFloats():this.getMainResultTexture():this.getMainResultPackedPixels()}getMainResultNumberTexture(){return o.linesToString(this.getMainResultKernelNumberTexture())+o.linesToString(this.getMainResultSubKernelNumberTexture())}getMainResultArray2Texture(){return o.linesToString(this.getMainResultKernelArray2Texture())+o.linesToString(this.getMainResultSubKernelArray2Texture())}getMainResultArray3Texture(){return o.linesToString(this.getMainResultKernelArray3Texture())+o.linesToString(this.getMainResultSubKernelArray3Texture())}getMainResultArray4Texture(){return o.linesToString(this.getMainResultKernelArray4Texture())+o.linesToString(this.getMainResultSubKernelArray4Texture())}renderTexture(){return new this.TextureConstructor({texture:this.outputTexture,size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context})}readPackedPixelsToUint8Array(){if('unsigned'!==this.precision)throw new Error('Requires this.precision to be "unsigned"');const{texSize:e,context:t}=this,n=new Uint8Array(4*(e[0]*e[1]));return t.readPixels(0,0,e[0],e[1],t.RGBA,t.UNSIGNED_BYTE,n),n}readPackedPixelsToFloat32Array(){return new Float32Array(this.readPackedPixelsToUint8Array().buffer)}readFloatPixelsToFloat32Array(){if('single'!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:e,context:t}=this,n=e[0],r=e[1],a=new Float32Array(4*(n*r));return t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,a),a}readMemoryOptimizedFloatPixelsToFloat32Array(){if('single'!==this.precision)throw new Error('Requires this.precision to be "single"');const{texSize:e,context:t}=this,n=e[0],r=e[1],a=new Float32Array(4*(n*r));return t.readPixels(0,0,n,r,t.RGBA,t.FLOAT,a),a}getPixels(e){const{context:t,output:n}=this,[r,a]=n,i=new Uint8Array(4*(r*a));return t.readPixels(0,0,r,a,t.RGBA,t.UNSIGNED_BYTE,i),new Uint8ClampedArray((e?i:o.flipPixels(i,r,a)).buffer)}renderKernelsToArrays(){const e={result:this.renderOutput()};for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=new this.TextureConstructor({texture:this.subKernelOutputTextures[t],size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context}).toArray();return e}renderKernelsToTextures(){const e={result:this.renderOutput()};for(let t=0;t<this.subKernels.length;t++)e[this.subKernels[t].property]=new this.TextureConstructor({texture:this.subKernelOutputTextures[t],size:this.texSize,dimensions:this.threadDim,output:this.output,context:this.context});return e}setOutput(e){if(super.setOutput(e),this.program){this.threadDim=[this.output[0],this.output[1]||1,this.output[2]||1],this.texSize=o.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output);const{context:e}=this;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),this.updateMaxTexSize(),this.framebuffer.width=this.texSize[0],this.framebuffer.height=this.texSize[1],this.context.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),this.canvas.width=this.maxTexSize[0],this.canvas.height=this.maxTexSize[1],this._setupOutputTexture(),this.subKernels&&0<this.subKernels.length&&this._setupSubOutputTextures()}return this}renderValues(){return this.formatValues(this.transferValues(),this.output[0],this.output[1],this.output[2])}}const v=Object.freeze({PackedPixelToUint8Array:Symbol('PackedPixelToUint8Array'),PackedPixelToFloat:Symbol('PackedPixelToFloat'),PackedPixelTo2DFloat:Symbol('PackedPixelTo2DFloat'),PackedPixelTo3DFloat:Symbol('PackedPixelTo3DFloat'),PackedTexture:Symbol('PackedTexture'),FloatPixelToFloat32Array:Symbol('FloatPixelToFloat32Array'),FloatPixelToFloat:Symbol('FloatPixelToFloat'),FloatPixelTo2DFloat:Symbol('FloatPixelTo2DFloat'),FloatPixelTo3DFloat:Symbol('FloatPixelTo3DFloat'),FloatPixelToArray2:Symbol('FloatPixelToArray2'),FloatPixelTo2DArray2:Symbol('FloatPixelTo2DArray2'),FloatPixelTo3DArray2:Symbol('FloatPixelTo3DArray2'),FloatPixelToArray3:Symbol('FloatPixelToArray3'),FloatPixelTo2DArray3:Symbol('FloatPixelTo2DArray3'),FloatPixelTo3DArray3:Symbol('FloatPixelTo3DArray3'),FloatPixelToArray4:Symbol('FloatPixelToArray4'),FloatPixelTo2DArray4:Symbol('FloatPixelTo2DArray4'),FloatPixelTo3DArray4:Symbol('FloatPixelTo3DArray4'),FloatTexture:Symbol('FloatTexture'),MemoryOptimizedFloatPixelToMemoryOptimizedFloat:Symbol('MemoryOptimizedFloatPixelToFloat'),MemoryOptimizedFloatPixelToMemoryOptimized2DFloat:Symbol('MemoryOptimizedFloatPixelTo2DFloat'),MemoryOptimizedFloatPixelToMemoryOptimized3DFloat:Symbol('MemoryOptimizedFloatPixelTo3DFloat')}),S={int:'Integer',float:'Number',vec2:'Array(2)',vec3:'Array(3)',vec4:'Array(4)'};e.exports={GLKernel,renderStrategy:v}},"./node_modules/gpu.js/src/backend/gl/texture/array-2-float-2d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-2-float-2d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray2Float2D:class GLTextureArray2Float2D extends a{constructor(e){super(e),this.type='ArrayTexture(2)'}toArray(){return r.erect2DArray2(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-2-float-3d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-2-float-3d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray2Float3D:class GLTextureArray2Float3D extends a{constructor(e){super(e),this.type='ArrayTexture(2)'}toArray(){return r.erect3DArray2(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-2-float.js":/*!*********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-2-float.js ***!
  \*********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray2Float:class GLTextureArray2Float extends a{constructor(e){super(e),this.type='ArrayTexture(2)'}toArray(){return r.erectArray2(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-3-float-2d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-3-float-2d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray3Float2D:class GLTextureArray3Float2D extends a{constructor(e){super(e),this.type='ArrayTexture(3)'}toArray(){return r.erect2DArray3(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-3-float-3d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-3-float-3d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray3Float3D:class GLTextureArray3Float3D extends a{constructor(e){super(e),this.type='ArrayTexture(3)'}toArray(){return r.erect3DArray3(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-3-float.js":/*!*********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-3-float.js ***!
  \*********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray3Float:class GLTextureArray3Float extends a{constructor(e){super(e),this.type='ArrayTexture(3)'}toArray(){return r.erectArray3(this.renderValues(),this.output[0])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-4-float-2d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-4-float-2d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray4Float2D:class GLTextureArray4Float2D extends a{constructor(e){super(e),this.type='ArrayTexture(4)'}toArray(){return r.erect2DArray4(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-4-float-3d.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-4-float-3d.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray4Float3D:class GLTextureArray4Float3D extends a{constructor(e){super(e),this.type='ArrayTexture(4)'}toArray(){return r.erect3DArray4(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/array-4-float.js":/*!*********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/array-4-float.js ***!
  \*********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureArray4Float:class GLTextureArray4Float extends a{constructor(e){super(e),this.type='ArrayTexture(4)'}toArray(){return r.erectArray4(this.renderValues(),this.output[0])}}}},"./node_modules/gpu.js/src/backend/gl/texture/float-2d.js":/*!****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/float-2d.js ***!
  \****************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureFloat2D:class GLTextureFloat2D extends a{constructor(e){super(e),this.type='ArrayTexture(1)'}toArray(){return r.erect2DFloat(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/float-3d.js":/*!****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/float-3d.js ***!
  \****************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureFloat3D:class GLTextureFloat3D extends a{constructor(e){super(e),this.type='ArrayTexture(1)'}toArray(){return r.erect3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/float.js":/*!*************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/float.js ***!
  \*************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{Texture:a}=n(/*! ../../../texture */'./node_modules/gpu.js/src/texture.js');e.exports={GLTextureFloat:class GLTextureFloat extends a{constructor(e){super(e),this.type='ArrayTexture(1)'}renderRawOutput(){const{context:e}=this,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const n=new Float32Array(4*(this.size[0]*this.size[1]));return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.FLOAT,n),n}renderValues(){return this.renderRawOutput()}toArray(){return r.erectFloat(this.renderValues(),this.output[0])}}}},"./node_modules/gpu.js/src/backend/gl/texture/graphical.js":/*!*****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/graphical.js ***!
  \*****************************************************************//*! no static exports found */function(e,t,n){const{GLTextureUnsigned:r}=n(/*! ./unsigned */'./node_modules/gpu.js/src/backend/gl/texture/unsigned.js');e.exports={GLTextureGraphical:class GLTextureGraphical extends r{constructor(e){super(e),this.type='ArrayTexture(4)'}toArray(){return this.renderValues()}}}},"./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-2d.js":/*!***************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-2d.js ***!
  \***************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureMemoryOptimized2D:class GLTextureMemoryOptimized2D extends a{constructor(e){super(e),this.type='MemoryOptimizedNumberTexture'}toArray(){return r.erectMemoryOptimized2DFloat(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-3d.js":/*!***************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/memory-optimized-3d.js ***!
  \***************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureMemoryOptimized3D:class GLTextureMemoryOptimized3D extends a{constructor(e){super(e),this.type='MemoryOptimizedNumberTexture'}toArray(){return r.erectMemoryOptimized3DFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/memory-optimized.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/memory-optimized.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureFloat:a}=n(/*! ./float */'./node_modules/gpu.js/src/backend/gl/texture/float.js');e.exports={GLTextureMemoryOptimized:class GLTextureMemoryOptimized extends a{constructor(e){super(e),this.type='MemoryOptimizedNumberTexture'}toArray(){return r.erectMemoryOptimizedFloat(this.renderValues(),this.output[0])}}}},"./node_modules/gpu.js/src/backend/gl/texture/unsigned-2d.js":/*!*******************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/unsigned-2d.js ***!
  \*******************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureUnsigned:a}=n(/*! ./unsigned */'./node_modules/gpu.js/src/backend/gl/texture/unsigned.js');e.exports={GLTextureUnsigned2D:class GLTextureUnsigned2D extends a{constructor(e){super(e),this.type='NumberTexture'}toArray(){return r.erect2DPackedFloat(this.renderValues(),this.output[0],this.output[1])}}}},"./node_modules/gpu.js/src/backend/gl/texture/unsigned-3d.js":/*!*******************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/unsigned-3d.js ***!
  \*******************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{GLTextureUnsigned:a}=n(/*! ./unsigned */'./node_modules/gpu.js/src/backend/gl/texture/unsigned.js');e.exports={GLTextureUnsigned3D:class GLTextureUnsigned3D extends a{constructor(e){super(e),this.type='NumberTexture'}toArray(){return r.erect3DPackedFloat(this.renderValues(),this.output[0],this.output[1],this.output[2])}}}},"./node_modules/gpu.js/src/backend/gl/texture/unsigned.js":/*!****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/gl/texture/unsigned.js ***!
  \****************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{Texture:a}=n(/*! ../../../texture */'./node_modules/gpu.js/src/texture.js');e.exports={GLTextureUnsigned:class GLTextureUnsigned extends a{constructor(e){super(e),this.type='NumberTexture'}renderRawOutput(){const{context:e}=this,t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const n=new Uint8Array(4*(this.size[0]*this.size[1]));return e.readPixels(0,0,this.size[0],this.size[1],e.RGBA,e.UNSIGNED_BYTE,n),n}renderValues(){return new Float32Array(this.renderRawOutput().buffer)}toArray(){return r.erectPackedFloat(this.renderValues(),this.output[0])}}}},"./node_modules/gpu.js/src/backend/headless-gl/kernel.js":/*!***************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/headless-gl/kernel.js ***!
  \***************************************************************//*! no static exports found */function(e,t,n){const r=n(/*! gl */'./node_modules/gl/browser_index.js'),{WebGLKernel:a}=n(/*! ../web-gl/kernel */'./node_modules/gpu.js/src/backend/web-gl/kernel.js'),{glKernelString:o}=n(/*! ../gl/kernel-string */'./node_modules/gpu.js/src/backend/gl/kernel-string.js');let i=null,s=null,l=null,d=null,c=null;class HeadlessGLKernel extends a{static get isSupported(){return null==i?(this.setupFeatureChecks(),i=null!==l,i):i}static setupFeatureChecks(){if(s=null,d=null,'function'==typeof r)try{if(l=r(2,2,{preserveDrawingBuffer:!0}),!l||!l.getExtension)return;d={STACKGL_resize_drawingbuffer:l.getExtension('STACKGL_resize_drawingbuffer'),STACKGL_destroy_context:l.getExtension('STACKGL_destroy_context'),OES_texture_float:l.getExtension('OES_texture_float'),OES_texture_float_linear:l.getExtension('OES_texture_float_linear'),OES_element_index_uint:l.getExtension('OES_element_index_uint'),WEBGL_draw_buffers:l.getExtension('WEBGL_draw_buffers')},c=this.getFeatures()}catch(t){console.warn(t)}}static isContextMatch(e){try{return'ANGLE'===e.getParameter(e.RENDERER)}catch(t){return!1}}static getFeatures(){const e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return!!d.OES_texture_float}static getIsDrawBuffers(){return!!d.WEBGL_draw_buffers}static getChannelCount(){return d.WEBGL_draw_buffers?l.getParameter(d.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static get testCanvas(){return s}static get testContext(){return l}static get features(){return c}initCanvas(){return{}}initContext(){const e=r(2,2,{preserveDrawingBuffer:!0});return e}initExtensions(){this.extensions={STACKGL_resize_drawingbuffer:this.context.getExtension('STACKGL_resize_drawingbuffer'),STACKGL_destroy_context:this.context.getExtension('STACKGL_destroy_context'),OES_texture_float:this.context.getExtension('OES_texture_float'),OES_texture_float_linear:this.context.getExtension('OES_texture_float_linear'),OES_element_index_uint:this.context.getExtension('OES_element_index_uint'),WEBGL_draw_buffers:this.context.getExtension('WEBGL_draw_buffers')}}build(){super.build.apply(this,arguments),this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}destroyExtensions(){this.extensions.STACKGL_resize_drawingbuffer=null,this.extensions.STACKGL_destroy_context=null,this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension('STACKGL_destroy_context');t&&t.destroy&&t.destroy()}toString(){const e=`const gl = context || require('gl')(1, 1);\n`,t=`if (!context) { gl.getExtension('STACKGL_destroy_context').destroy(); }\n`;return o(this.constructor,arguments,this,e,t)}setOutput(e){super.setOutput(e),this.graphical&&this.extensions.STACKGL_resize_drawingbuffer&&this.extensions.STACKGL_resize_drawingbuffer.resize(this.maxTexSize[0],this.maxTexSize[1])}}e.exports={HeadlessGLKernel}},"./node_modules/gpu.js/src/backend/kernel-value.js":/*!*********************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/kernel-value.js ***!
  \*********************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../utils */'./node_modules/gpu.js/src/utils.js');e.exports={KernelValue:class KernelValue{constructor(e,t){const{name:n,kernel:a,context:o,checkContext:i,onRequestContextHandle:s,onUpdateValueMismatch:l,origin:d,strictIntegers:c}=t;if(!n)throw new Error('name not set');if(!d)throw new Error('origin not set');if('user'!==d&&'constants'!==d)throw new Error(`origin must be "user" or "constants" value is "${d}"`);if(!s)throw new Error('onRequestContextHandle is not set');this.name=n,this.origin=d,this.id=`${this.origin}_${n}`,this.varName='constants'===d?`constants.${n}`:n,this.kernel=a,this.strictIntegers=c,this.type=r.getVariableType(e,c),this.size=e.size||null,this.index=null,this.context=o,this.checkContext=null===i||void 0===i||i,this.contextHandle=null,this.onRequestContextHandle=s,this.onUpdateValueMismatch=l}getSource(){throw new Error(`"getSource" not defined on ${this.constructor.name}`)}updateValue(){throw new Error(`"updateValue" not defined on ${this.constructor.name}`)}}}},"./node_modules/gpu.js/src/backend/kernel.js":/*!***************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/kernel.js ***!
  \***************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../utils */'./node_modules/gpu.js/src/utils.js'),{Input:a}=n(/*! ../input */'./node_modules/gpu.js/src/input.js');class Kernel{static get isSupported(){throw new Error(`"isSupported" not implemented on ${this.name}`)}static isContextMatch(){throw new Error(`"isContextMatch" not implemented on ${this.name}`)}static getFeatures(){throw new Error(`"getFeatures" not implemented on ${this.name}`)}static destroyContext(){throw new Error(`"destroyContext" called on ${this.name}`)}static nativeFunctionArguments(){throw new Error(`"nativeFunctionArguments" called on ${this.name}`)}static nativeFunctionReturnType(){throw new Error(`"nativeFunctionReturnType" called on ${this.name}`)}static combineKernels(){throw new Error(`"combineKernels" called on ${this.name}`)}constructor(e){if('object'!=typeof e){if('string'!=typeof e)throw new Error('source not a string');if(!r.isFunctionString(e))throw new Error('source not a function string')}this.useLegacyEncoder=!1,this.fallbackRequested=!1,this.onRequestFallback=null,this.argumentNames='string'==typeof e?r.getArgumentNamesFromString(e):null,this.argumentTypes=null,this.argumentSizes=null,this.argumentBitRatios=null,this.kernelArguments=null,this.kernelConstants=null,this.source=e,this.output=null,this.debug=!1,this.graphical=!1,this.loopMaxIterations=0,this.constants=null,this.constantTypes=null,this.constantBitRatios=null,this.dynamicArguments=!1,this.dynamicOutput=!0,this.canvas=null,this.context=null,this.checkContext=null,this.gpu=null,this.functions=null,this.nativeFunctions=null,this.subKernels=null,this.validate=!0,this.immutable=!1,this.pipeline=!1,this.precision=null,this.plugins=null,this.returnType=null,this.leadingReturnStatement=null,this.followingReturnStatement=null,this.optimizeFloatMemory=null,this.strictIntegers=!1,this.fixIntegerDivisionAccuracy=null,this.warnVarUsage=!0}mergeSettings(e){for(let t in e)if(e.hasOwnProperty(t)&&this.hasOwnProperty(t)){switch(t){case'output':if(!Array.isArray(e.output)){this.setOutput(e.output);continue}break;case'functions':if('function'==typeof e.functions[0]){this.functions=e.functions.map((e)=>r.functionToIFunction(e));continue}break;case'graphical':e[t]&&!e.hasOwnProperty('precision')&&(this.precision='unsigned'),this[t]=e[t];continue;}this[t]=e[t]}this.canvas||(this.canvas=this.initCanvas()),this.context||(this.context=this.initContext()),this.plugins||(this.plugins=this.initPlugins(e))}build(){throw new Error(`"build" not defined on ${this.constructor.name}`)}run(){throw new Error(`"run" not defined on ${this.constructor.name}`)}initCanvas(){throw new Error(`"initCanvas" not defined on ${this.constructor.name}`)}initContext(){throw new Error(`"initContext" not defined on ${this.constructor.name}`)}initPlugins(){throw new Error(`"initPlugins" not defined on ${this.constructor.name}`)}setupArguments(e){if(!this.argumentTypes&&(this.kernelArguments=[],!this.argumentTypes)){this.argumentTypes=[];for(let t=0;t<e.length;t++){const n=r.getVariableType(e[t],this.strictIntegers);this.argumentTypes.push('Integer'===n?'Number':n)}}this.argumentSizes=Array(e.length),this.argumentBitRatios=new Int32Array(e.length);for(let t=0;t<e.length;t++){const n=e[t];this.argumentSizes[t]=n.constructor===a?n.size:null,this.argumentBitRatios[t]=this.getBitRatio(n)}if(this.argumentNames.length!==e.length)throw new Error(`arguments are miss-aligned`)}setupConstants(){if(this.kernelConstants=[],this.constantTypes={},this.constantBitRatios={},this.constants)for(let e in this.constants)this.constantTypes[e]=r.getVariableType(this.constants[e],this.strictIntegers),this.constantBitRatios[e]=this.getBitRatio(this.constants[e])}setOptimizeFloatMemory(e){return this.optimizeFloatMemory=e,this}setOutput(e){return this.output=e.hasOwnProperty('x')?e.hasOwnProperty('y')?e.hasOwnProperty('z')?[e.x,e.y,e.z]:[e.x,e.y]:[e.x]:e,this}setDebug(e){return this.debug=e,this}setGraphical(e){return this.graphical=e,this.precision='unsigned',this}setLoopMaxIterations(e){return this.loopMaxIterations=e,this}setConstants(e){return this.constants=e,this}setFunctions(e){return this.functions='function'==typeof e[0]?e.map((e)=>r.functionToIFunction(e)):e,this}setPipeline(e){return this.pipeline=e,this}setPrecision(e){return this.precision=e,this}setOutputToTexture(e){return r.warnDeprecated('method','setOutputToTexture','setPipeline'),this.pipeline=e,this}setImmutable(e){return this.immutable=e,this}setCanvas(e){return this.canvas=e,this}setStrictIntegers(e){return this.strictIntegers=e,this}setDynamicOutput(e){return this.dynamicOutput=e,this}setHardcodeConstants(e){return r.warnDeprecated('method','setHardcodeConstants'),this.setDynamicOutput(e),this.setDynamicArguments(e),this}setDynamicArguments(e){return this.dynamicArguments=e,this}setUseLegacyEncoder(e){return this.useLegacyEncoder=e,this}setWarnVarUsage(e){return this.warnVarUsage=e,this}getCanvas(){return r.warnDeprecated('method','getCanvas'),this.canvas}getWebGl(){return r.warnDeprecated('method','getWebGl'),this.context}setContext(e){return this.context=e,this}setArgumentTypes(e){return this.argumentTypes=e,this}requestFallback(e){if(!this.onRequestFallback)throw new Error(`"onRequestFallback" not defined on ${this.constructor.name}`);return this.fallbackRequested=!0,this.onRequestFallback(e)}validateSettings(){throw new Error(`"validateSettings" not defined on ${this.constructor.name}`)}addSubKernel(e){if(null===this.subKernels&&(this.subKernels=[]),!e.source)throw new Error('subKernel missing "source" property');if(!e.property&&isNaN(e.property))throw new Error('subKernel missing "property" property');if(!e.name)throw new Error('subKernel missing "name" property');return this.subKernels.push(e),this}destroy(){throw new Error(`"destroy" called on ${this.constructor.name}`)}getBitRatio(e){if('single'===this.precision)return 4;if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===a)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4;}}getPixels(){throw new Error(`"getPixels" called on ${this.constructor.name}`)}checkOutput(){if(!this.output||!r.isArray(this.output))throw new Error('kernel.output not an array');if(1>this.output.length)throw new Error('kernel.output is empty, needs at least 1 value');for(let e=0;e<this.output.length;e++)if(isNaN(this.output[e])||1>this.output[e])throw new Error(`${this.constructor.name}.output[${e}] incorrectly defined as \`${this.output[e]}\`, needs to be numeric, and greater than 0`)}toJSON(){const e={output:this.output,threadDim:this.threadDim,pipeline:this.pipeline,argumentNames:this.argumentNames,argumentsTypes:this.argumentTypes,constants:this.constants,pluginNames:this.plugins?this.plugins.map((e)=>e.name):null,returnType:this.returnType};return{settings:e}}}e.exports={Kernel}},"./node_modules/gpu.js/src/backend/web-gl/fragment-shader.js":/*!*******************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/fragment-shader.js ***!
  \*******************************************************************//*! no static exports found */function(e){const t=`__HEADER__;
precision highp float;
precision highp int;
precision highp sampler2D;

const int LOOP_MAX = __LOOP_MAX__;

__PLUGINS__;
__CONSTANTS__;

varying vec2 vTexCoord;

vec4 round(vec4 x) {
  return floor(x + 0.5);
}

float round(float x) {
  return floor(x + 0.5);
}

const int BIT_COUNT = 32;
int modi(int x, int y) {
  return x - y * (x / y);
}

int bitwiseOr(int a, int b) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 || b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseXOR(int a, int b) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 || b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseAnd(int a, int b) {
  int result = 0;
  int n = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 && b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseNot(int a) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if (modi(a, 2) == 0) {
      result += n;    
    }
    a = a / 2;
    n = n * 2;
  }
  return result;
}
int bitwiseZeroFillLeftShift(int n, int shift) {
  int maxBytes = BIT_COUNT;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (maxBytes >= n) {
      break;
    }
    maxBytes *= 2;
  }
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= shift) {
      break;
    }
    n *= 2;
  }

  int result = 0;
  int byteVal = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= maxBytes) break;
    if (modi(n, 2) > 0) { result += byteVal; }
    n = int(n / 2);
    byteVal *= 2;
  }
  return result;
}

int bitwiseSignedRightShift(int num, int shifts) {
  return int(floor(float(num) / pow(2.0, float(shifts))));
}

int bitwiseZeroFillRightShift(int n, int shift) {
  int maxBytes = BIT_COUNT;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (maxBytes >= n) {
      break;
    }
    maxBytes *= 2;
  }
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= shift) {
      break;
    }
    n /= 2;
  }
  int result = 0;
  int byteVal = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= maxBytes) break;
    if (modi(n, 2) > 0) { result += byteVal; }
    n = int(n / 2);
    byteVal *= 2;
  }
  return result;
}

vec2 integerMod(vec2 x, float y) {
  vec2 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

vec3 integerMod(vec3 x, float y) {
  vec3 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

vec4 integerMod(vec4 x, vec4 y) {
  vec4 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

float integerMod(float x, float y) {
  float res = floor(mod(x, y));
  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);
}

int integerMod(int x, int y) {
  return x - (y * int(x / y));
}

__DIVIDE_WITH_INTEGER_CHECK__;

// Here be dragons!
// DO NOT OPTIMIZE THIS CODE
// YOU WILL BREAK SOMETHING ON SOMEBODY\'S MACHINE
// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME
const vec2 MAGIC_VEC = vec2(1.0, -256.0);
const vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);
const vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536
float decode32(vec4 texel) {
  __DECODE32_ENDIANNESS__;
  texel *= 255.0;
  vec2 gte128;
  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;
  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;
  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);
  float res = exp2(round(exponent));
  texel.b = texel.b - 128.0 * gte128.x;
  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;
  res *= gte128.y * -2.0 + 1.0;
  return res;
}

float decode16(vec4 texel, int index) {
  int channel = integerMod(index, 2);
  if (channel == 0) return texel.r * 255.0 + texel.g * 65280.0;
  if (channel == 1) return texel.b * 255.0 + texel.a * 65280.0;
  return 0.0;
}

float decode8(vec4 texel, int index) {
  int channel = integerMod(index, 4);
  if (channel == 0) return texel.r * 255.0;
  if (channel == 1) return texel.g * 255.0;
  if (channel == 2) return texel.b * 255.0;
  if (channel == 3) return texel.a * 255.0;
  return 0.0;
}

vec4 legacyEncode32(float f) {
  float F = abs(f);
  float sign = f < 0.0 ? 1.0 : 0.0;
  float exponent = floor(log2(F));
  float mantissa = (exp2(-exponent) * F);
  // exponent += floor(log2(mantissa));
  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;
  texel.rg = integerMod(texel.rg, 256.0);
  texel.b = integerMod(texel.b, 128.0);
  texel.a = exponent*0.5 + 63.5;
  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;
  texel = floor(texel);
  texel *= 0.003921569; // 1/255
  __ENCODE32_ENDIANNESS__;
  return texel;
}

// https://github.com/gpujs/gpu.js/wiki/Encoder-details
vec4 encode32(float value) {
  if (value == 0.0) return vec4(0, 0, 0, 0);

  float exponent;
  float mantissa;
  vec4  result;
  float sgn;

  sgn = step(0.0, -value);
  value = abs(value);

  exponent = floor(log2(value));

  mantissa = value*pow(2.0, -exponent)-1.0;
  exponent = exponent+127.0;
  result   = vec4(0,0,0,0);

  result.a = floor(exponent/2.0);
  exponent = exponent - result.a*2.0;
  result.a = result.a + 128.0*sgn;

  result.b = floor(mantissa * 128.0);
  mantissa = mantissa - result.b / 128.0;
  result.b = result.b + exponent*128.0;

  result.g = floor(mantissa*32768.0);
  mantissa = mantissa - result.g/32768.0;

  result.r = floor(mantissa*8388608.0);
  return result/255.0;
}
// Dragons end here

int index;
ivec3 threadId;

ivec3 indexTo3D(int idx, ivec3 texDim) {
  int z = int(idx / (texDim.x * texDim.y));
  idx -= z * int(texDim.x * texDim.y);
  int y = int(idx / texDim.x);
  int x = int(integerMod(idx, texDim.x));
  return ivec3(x, y, z);
}

float get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture2D(tex, st / vec2(texSize));
  return decode32(texel);
}

float get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x * 2;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture2D(tex, st / vec2(texSize.x * 2, texSize.y));
  return decode16(texel, index);
}

float get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x * 4;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture2D(tex, st / vec2(texSize.x * 4, texSize.y));
  return decode8(texel, index);
}

float getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int channel = integerMod(index, 4);
  index = index / 4;
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture2D(tex, st / vec2(texSize));
  if (channel == 0) return texel.r;
  if (channel == 1) return texel.g;
  if (channel == 2) return texel.b;
  if (channel == 3) return texel.a;
  return 0.0;
}

vec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  return texture2D(tex, st / vec2(texSize));
}

float getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return result[0];
}

vec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return vec2(result[0], result[1]);
}

vec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return vec3(result[0], result[1], result[2]);
}

vec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  return getImage2D(tex, texSize, texDim, z, y, x);
}

vec4 actualColor;
void color(float r, float g, float b, float a) {
  actualColor = vec4(r,g,b,a);
}

void color(float r, float g, float b) {
  color(r,g,b,1.0);
}

void color(sampler2D image) {
  actualColor = texture2D(image, vTexCoord);
}

__MAIN_CONSTANTS__;
__MAIN_ARGUMENTS__;
__KERNEL__;

void main(void) {
  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;
  __MAIN_RESULT__;
}`;e.exports={fragmentShader:t}},"./node_modules/gpu.js/src/backend/web-gl/function-node.js":/*!*****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/function-node.js ***!
  \*****************************************************************//*! no static exports found */function(e,t,n){var r=Number.isInteger;const{utils:a}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),{FunctionNode:o}=n(/*! ../function-node */'./node_modules/gpu.js/src/backend/function-node.js');const s={Array:'sampler2D',"Array(2)":'vec2',"Array(3)":'vec3',"Array(4)":'vec4',Array2D:'sampler2D',Array3D:'sampler2D',Boolean:'bool',Float:'float',Input:'sampler2D',Integer:'int',Number:'float',LiteralInteger:'float',NumberTexture:'sampler2D',MemoryOptimizedNumberTexture:'sampler2D',"ArrayTexture(1)":'sampler2D',"ArrayTexture(2)":'sampler2D',"ArrayTexture(3)":'sampler2D',"ArrayTexture(4)":'sampler2D'},i={"===":'==',"!==":'!='};e.exports={WebGLFunctionNode:class WebGLFunctionNode extends o{constructor(e,t){super(e,t),t&&t.hasOwnProperty('fixIntegerDivisionAccuracy')&&(this.fixIntegerDivisionAccuracy=t.fixIntegerDivisionAccuracy)}astFunction(e,t){if(this.isRootKernel)t.push('void');else{if(!this.returnType){const t=this.findLastReturn();t&&(this.returnType=this.getType(e.body),'LiteralInteger'===this.returnType&&(this.returnType='Number'))}const{returnType:n}=this;if(!n)t.push('void');else{const e=s[n];if(!e)throw new Error(`unknown type ${n}`);t.push(e)}}if(t.push(' '),t.push(this.name),t.push('('),!this.isRootKernel)for(let n=0;n<this.argumentNames.length;++n){const r=this.argumentNames[n];0<n&&t.push(', ');let a=this.argumentTypes[this.argumentNames.indexOf(r)];if(!a)throw this.astErrorOutput(`Unknown argument ${r} type`,e);'LiteralInteger'===a&&(this.argumentTypes[n]=a='Number');const o=s[a];if(!o)throw this.astErrorOutput('Unexpected expression',e);t.push(o),t.push(' '),t.push('user_'),t.push(r)}t.push(') {\n');for(let n=0;n<e.body.body.length;++n)this.astGeneric(e.body.body[n],t),t.push('\n');return t.push('}\n'),t}astReturnStatement(e,t){if(!e.argument)throw this.astErrorOutput('Unexpected return statement',e);const n=this.getType(e.argument),r=[];switch(this.returnType||('LiteralInteger'===n||'Integer'===n?this.returnType='Number':this.returnType=n),this.returnType){case'LiteralInteger':case'Number':case'Float':'Integer'===n?(r.push('float('),this.astGeneric(e.argument,r),r.push(')')):'LiteralInteger'===n?(this.castLiteralToFloat(e.argument,r),'Integer'===this.getType(e)&&(r.unshift('float('),r.push(')'))):this.astGeneric(e.argument,r);break;case'Integer':'Float'===n||'Number'===n?this.castValueToInteger(e.argument,r):'LiteralInteger'===n?this.castLiteralToInteger(e.argument,r):this.astGeneric(e.argument,r);break;case'Array(4)':case'Array(3)':case'Array(2)':case'Input':this.astGeneric(e.argument,r);break;default:throw this.astErrorOutput(`unhandled return type ${this.returnType}`,e);}return this.isRootKernel?(t.push(`kernelResult = ${r.join('')};`),t.push('return;')):this.isSubKernel?(t.push(`subKernelResult_${this.name} = ${r.join('')};`),t.push(`return subKernelResult_${this.name};`)):t.push(`return ${r.join('')};`),t}astLiteral(e,t){if(isNaN(e.value))throw this.astErrorOutput('Non-numeric literal not supported : '+e.value,e);return r(e.value)?this.isState('in-for-loop-init')||this.isState('casting-to-integer')?(this.literalTypes[`${e.start},${e.end}`]='Integer',t.push(`${e.value}`)):this.isState('casting-to-float')?(this.literalTypes[`${e.start},${e.end}`]='Number',t.push(`${e.value}.0`)):(this.literalTypes[`${e.start},${e.end}`]='Number',t.push(`${e.value}.0`)):this.isState('casting-to-integer')?(this.literalTypes[`${e.start},${e.end}`]='Integer',t.push(parseInt(e.raw))):(this.literalTypes[`${e.start},${e.end}`]='Number',t.push(`${e.value}`)),t}astBinaryExpression(e,t){if(this.checkAndUpconvertOperator(e,t))return t;if(this.fixIntegerDivisionAccuracy&&'/'===e.operator){switch(t.push('div_with_int_check('),this.getType(e.left)){case'Integer':this.castValueToFloat(e.left,t);break;case'LiteralInteger':this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t);}switch(t.push(', '),this.getType(e.right)){case'Integer':this.castValueToFloat(e.right,t);break;case'LiteralInteger':this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t);}return t.push(')'),t}t.push('(');const n=this.getType(e.left)||'Number',a=this.getType(e.right)||'Number';if(!n||!a)throw this.astErrorOutput(`Unhandled binary expression`,e);const o=n+' & '+a;switch(o){case'Integer & Integer':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t);break;case'Number & Float':case'Float & Number':case'Float & Float':case'Number & Number':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t);break;case'LiteralInteger & LiteralInteger':this.isState('casting-to-integer')?(this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t)):(this.castLiteralToFloat(e.left,t),t.push(i[e.operator]||e.operator),this.castLiteralToFloat(e.right,t));break;case'Integer & Float':case'Integer & Number':if(('>'===e.operator||'<'===e.operator&&'Literal'===e.right.type)&&!r(e.right.value)){this.castValueToFloat(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t);break}if(this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.pushState('casting-to-integer'),'Literal'===e.right.type){const n=[];this.astGeneric(e.right,n);const r=this.getType(e.right);if('Integer'===r)t.push(n.join(''));else throw this.astErrorOutput(`Unhandled binary expression with literal`,e)}else t.push('int('),this.astGeneric(e.right,t),t.push(')');this.popState('casting-to-integer');break;case'Integer & LiteralInteger':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.castLiteralToInteger(e.right,t);break;case'Number & Integer':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.castValueToFloat(e.right,t);break;case'Float & LiteralInteger':case'Number & LiteralInteger':this.isState('in-for-loop-test')?(t.push('int('),this.astGeneric(e.left,t),t.push(')'),t.push(i[e.operator]||e.operator),this.castLiteralToInteger(e.right,t)):(this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.castLiteralToFloat(e.right,t));break;case'LiteralInteger & Float':case'LiteralInteger & Number':this.isState('in-for-loop-test')||this.isState('in-for-loop-init')||this.isState('casting-to-integer')?(this.castLiteralToInteger(e.left,t),t.push(i[e.operator]||e.operator),this.castValueToInteger(e.right,t)):(this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.pushState('casting-to-float'),this.astGeneric(e.right,t),this.popState('casting-to-float'));break;case'LiteralInteger & Integer':this.castLiteralToInteger(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t);break;case'Boolean & Boolean':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.astGeneric(e.right,t);break;case'Float & Integer':this.astGeneric(e.left,t),t.push(i[e.operator]||e.operator),this.castValueToFloat(e.right,t);break;default:throw this.astErrorOutput(`Unhandled binary expression between ${o}`,e);}return t.push(')'),t}checkAndUpconvertOperator(e,t){const n=this.checkAndUpconvertBitwiseOperators(e,t);if(n)return n;const r={"%":'mod',"**":'pow'}[e.operator];if(!r)return null;switch(t.push(r),t.push('('),this.getType(e.left)){case'Integer':this.castValueToFloat(e.left,t);break;case'LiteralInteger':this.castLiteralToFloat(e.left,t);break;default:this.astGeneric(e.left,t);}switch(t.push(','),this.getType(e.right)){case'Integer':this.castValueToFloat(e.right,t);break;case'LiteralInteger':this.castLiteralToFloat(e.right,t);break;default:this.astGeneric(e.right,t);}return t.push(')'),t}checkAndUpconvertBitwiseOperators(e,t){const n={"&":'bitwiseAnd',"|":'bitwiseOr',"^":'bitwiseXOR',"<<":'bitwiseZeroFillLeftShift',">>":'bitwiseSignedRightShift',">>>":'bitwiseZeroFillRightShift'}[e.operator];if(!n)return null;t.push(n),t.push('(');const r=this.getType(e.left);'Number'===r||'Float'===r?this.castValueToInteger(e.left,t):'LiteralInteger'===r?this.castLiteralToInteger(e.left,t):this.astGeneric(e.left,t),t.push(',');const a=this.getType(e.right);return'Number'===a||'Float'===a?this.castValueToInteger(e.right,t):'LiteralInteger'===a?this.castLiteralToInteger(e.right,t):this.astGeneric(e.right,t),t.push(')'),t}checkAndUpconvertBitwiseUnary(e,t){const n={"~":'bitwiseNot'}[e.operator];if(!n)return null;switch(t.push(n),t.push('('),this.getType(e.argument)){case'Number':case'Float':this.castValueToInteger(e.argument,t);break;case'LiteralInteger':this.castLiteralToInteger(e.argument,t);break;default:this.astGeneric(e.argument,t);}return t.push(')'),t}castLiteralToInteger(e,t){return this.pushState('casting-to-integer'),this.astGeneric(e,t),this.popState('casting-to-integer'),t}castLiteralToFloat(e,t){return this.pushState('casting-to-float'),this.astGeneric(e,t),this.popState('casting-to-float'),t}castValueToInteger(e,t){return this.pushState('casting-to-integer'),t.push('int('),this.astGeneric(e,t),t.push(')'),this.popState('casting-to-integer'),t}castValueToFloat(e,t){return this.pushState('casting-to-float'),t.push('float('),this.astGeneric(e,t),t.push(')'),this.popState('casting-to-float'),t}astIdentifierExpression(e,t){if('Identifier'!==e.type)throw this.astErrorOutput('IdentifierExpression - not an Identifier',e);const n=this.getType(e);if('Infinity'===e.name)t.push('3.402823466e+38');else if('Boolean'===n)-1<this.argumentNames.indexOf(e.name)?t.push(`bool(user_${e.name})`):t.push(`user_${e.name}`);else{const n=this.getKernelArgumentName(e.name);n?t.push(`user_${n}`):t.push(`user_${e.name}`)}return t}astForStatement(e,t){if('ForStatement'!==e.type)throw this.astErrorOutput('Invalid for statement',e);const n=[],r=[],a=[],o=[];let s=null;if(e.init){this.pushState('in-for-loop-init'),this.astGeneric(e.init,n);const{declarations:t}=e.init;for(let e=0;e<t.length;e++)t[e].init&&'Literal'!==t[e].init.type&&(s=!1);if(s)for(let e=0;e<n.length;e++)n[e].includes&&n[e].includes(',')&&(s=!1);this.popState('in-for-loop-init')}else s=!1;if(e.test?(this.pushState('in-for-loop-test'),this.astGeneric(e.test,r),this.popState('in-for-loop-test')):s=!1,e.update?this.astGeneric(e.update,a):s=!1,e.body&&(this.pushState('loop-body'),this.astGeneric(e.body,o),this.popState('loop-body')),null===s&&(s=this.isSafe(e.init)&&this.isSafe(e.test)),s)t.push(`for (${n.join('')};${r.join('')};${a.join('')}){\n`),t.push(o.join('')),t.push('}\n');else{const e=this.getInternalVariableName('safeI');0<n.length&&t.push(n.join(''),';\n'),t.push(`for (int ${e}=0;${e}<LOOP_MAX;${e}++){\n`),0<r.length&&t.push(`if (!${r.join('')}) break;\n`),t.push(o.join('')),t.push(`\n${a.join('')};`),t.push('}\n')}return t}astWhileStatement(e,t){if('WhileStatement'!==e.type)throw this.astErrorOutput('Invalid while statement',e);const n=this.getInternalVariableName('safeI');return t.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),t.push('if (!'),this.astGeneric(e.test,t),t.push(') break;\n'),this.astGeneric(e.body,t),t.push('}\n'),t}astDoWhileStatement(e,t){if('DoWhileStatement'!==e.type)throw this.astErrorOutput('Invalid while statement',e);const n=this.getInternalVariableName('safeI');return t.push(`for (int ${n}=0;${n}<LOOP_MAX;${n}++){\n`),this.astGeneric(e.body,t),t.push('if (!'),this.astGeneric(e.test,t),t.push(') break;\n'),t.push('}\n'),t}astAssignmentExpression(e,t){const n=this.getDeclaration(e.left);if(n&&!n.assignable)throw new this.astErrorOutput(`Variable ${e.left.name} is not assignable here`,e);if('%='===e.operator)this.astGeneric(e.left,t),t.push('='),t.push('mod('),this.astGeneric(e.left,t),t.push(','),this.astGeneric(e.right,t),t.push(')');else if('**='===e.operator)this.astGeneric(e.left,t),t.push('='),t.push('pow('),this.astGeneric(e.left,t),t.push(','),this.astGeneric(e.right,t),t.push(')');else{const n=this.getType(e.left),r=this.getType(e.right);return this.astGeneric(e.left,t),t.push(e.operator),'Integer'!==n&&'Integer'===r?(t.push('float('),this.astGeneric(e.right,t),t.push(')')):this.astGeneric(e.right,t),t}}astBlockStatement(e,t){if(this.isState('loop-body')){this.pushState('block-body');for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);this.popState('block-body')}else{t.push('{\n');for(let n=0;n<e.body.length;n++)this.astGeneric(e.body[n],t);t.push('}\n')}return t}astVariableDeclaration(e,t){'var'===e.kind&&this.warnVarUsage&&this.varWarn();const n=e.declarations;if(!n||!n[0]||!n[0].init)throw this.astErrorOutput('Unexpected expression',e);const r=[];let a=null;const o=this.isState('in-for-loop-init');for(let l=0;l<n.length;l++){const t=n[l],i=t.init,d=this.getDeclaration(t.id),c=d.valueType,u=this.getType(t.init);let p=d.dependencies,m=o?'Integer':u;'LiteralInteger'===m&&(m='Number');const g=s[m];if(!g)throw this.astErrorOutput(`Markup type ${g} not handled`,e);const h=[];if('Integer'===u&&'Integer'===m&&!o){if(d.valueType='Number',0===l||null==a)h.push('float ');else if(m!==a)throw new Error('Unhandled declaration');else h.push(',');a=m,h.push(`user_${t.id.name}=`),h.push('float('),this.astGeneric(i,h),h.push(')')}else d.valueType=m,0===l||null==a?h.push(`${g} `):m===a?h.push(','):(r.push(';'),h.push(`${g} `)),a=m,h.push(`user_${t.id.name}=`),'Number'===u&&'Integer'===m?(h.push('int('),this.astGeneric(i,h),h.push(')')):this.astGeneric(i,h);r.push(h.join(''))}return t.push(r.join('')),o||t.push(';'),t}astIfStatement(e,t){return t.push('if ('),this.astGeneric(e.test,t),t.push(')'),'BlockStatement'===e.consequent.type?this.astGeneric(e.consequent,t):(t.push(' {\n'),this.astGeneric(e.consequent,t),t.push('\n}\n')),e.alternate&&(t.push('else '),'BlockStatement'===e.alternate.type?this.astGeneric(e.alternate,t):(t.push(' {\n'),this.astGeneric(e.alternate,t),t.push('\n}\n'))),t}astSwitchStatement(e,t){if('SwitchStatement'!==e.type)throw this.astErrorOutput('Invalid switch statement',e);const{discriminant:n,cases:r}=e,a=this.getType(n),o=`switchDiscriminant${e.start}_${e.end}`;if('Float'===a||'Number'===a?(t.push(`float ${o} = `),this.astGeneric(n,t),t.push(';\n')):'Integer'===a?(t.push(`int ${o} = `),this.astGeneric(n,t),t.push(';\n')):void 0,1===r.length&&!r[0].test)return this.astGeneric(r[0].consequent,t),t;let s=!1,l=[],d=!1,c=!1;for(let n=0;n<r.length;n++){if(!!r[n].test){if(0!==n&&c?s?(t.push(`${o} == `),s=!1):t.push(` else if (${o} == `):(c=!0,t.push(`if (${o} == `)),'Integer'===a){const e=this.getType(r[n].test);'Number'===e||'Float'===e?this.castValueToInteger(r[n].test,t):'LiteralInteger'===e?this.castLiteralToInteger(r[n].test,t):void 0}else if('Float'===a){const e=this.getType(r[n].test);'LiteralInteger'===e?this.castLiteralToFloat(r[n].test,t):'Integer'===e?this.castValueToFloat(r[n].test,t):void 0}else throw new Error('unhanlded');if(!r[n].consequent||0===r[n].consequent.length){s=!0,t.push(' || ');continue}t.push(`) {\n`)}else if(r.length>n+1){d=!0,this.astGeneric(r[n].consequent,l);continue}else t.push(' else {\n');this.astGeneric(r[n].consequent,t),t.push('\n}')}return d&&(t.push(' else {'),t.push(l.join('')),t.push('}')),t}astThisExpression(e,t){return t.push('this'),t}astMemberExpression(e,t){const{property:n,name:r,signature:a,origin:o,type:i,xProperty:s,yProperty:l,zProperty:d}=this.getMemberExpressionDetails(e);switch(a){case'value.thread.value':case'this.thread.value':if('x'!==r&&'y'!==r&&'z'!==r)throw this.astErrorOutput('Unexpected expression, expected `this.thread.x`, `this.thread.y`, or `this.thread.z`',e);return t.push(`threadId.${r}`),t;case'this.output.value':if(this.dynamicOutput)switch(r){case'x':this.isState('casting-to-float')?t.push('float(uOutputDim.x)'):t.push('uOutputDim.x');break;case'y':this.isState('casting-to-float')?t.push('float(uOutputDim.y)'):t.push('uOutputDim.y');break;case'z':this.isState('casting-to-float')?t.push('float(uOutputDim.z)'):t.push('uOutputDim.z');break;default:throw this.astErrorOutput('Unexpected expression',e);}else switch(r){case'x':this.isState('casting-to-integer')?t.push(this.output[0]):t.push(this.output[0],'.0');break;case'y':this.isState('casting-to-integer')?t.push(this.output[1]):t.push(this.output[1],'.0');break;case'z':this.isState('casting-to-integer')?t.push(this.output[2]):t.push(this.output[2],'.0');break;default:throw this.astErrorOutput('Unexpected expression',e);}return t;case'value':throw this.astErrorOutput('Unexpected expression',e);case'value[]':case'value[][]':case'value[][][]':case'value[][][][]':case'value.value':if('Math'===o)return t.push(Math[r]),t;switch(n){case'r':return t.push(`user_${r}.r`),t;case'g':return t.push(`user_${r}.g`),t;case'b':return t.push(`user_${r}.b`),t;case'a':return t.push(`user_${r}.a`),t;}break;case'this.constants.value':case'this.constants.value[]':case'this.constants.value[][]':case'this.constants.value[][][]':case'this.constants.value[][][][]':break;case'fn()[]':return this.astCallExpression(e.object,t),t.push('['),t.push(this.memberExpressionPropertyMarkup(n)),t.push(']'),t;case'[][]':return this.astArrayExpression(e.object,t),t.push('['),t.push(this.memberExpressionPropertyMarkup(n)),t.push(']'),t;default:throw this.astErrorOutput('Unexpected expression',e);}if(!1===e.computed)switch(i){case'Number':case'Integer':case'Float':case'Boolean':return t.push(`${o}_${r}`),t;}let c=this.getKernelArgumentName(r);const u=`${o}_${c||r}`;switch(i){case'Array(2)':case'Array(3)':case'Array(4)':this.astGeneric(e.object,t),t.push('['),t.push(this.memberExpressionPropertyMarkup(s)),t.push(']');break;case'HTMLImageArray':t.push(`getImage3D(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;case'ArrayTexture(1)':t.push(`getFloatFromSampler2D(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;case'ArrayTexture(2)':t.push(`getVec2FromSampler2D(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;case'ArrayTexture(3)':t.push(`getVec3FromSampler2D(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;case'ArrayTexture(4)':case'HTMLImage':t.push(`getVec4FromSampler2D(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;case'NumberTexture':case'Array':case'Array2D':case'Array3D':case'Array4D':case'Input':case'Number':case'Float':case'Integer':if('single'===this.precision)t.push(`getMemoryOptimized32(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');else{const e='user'===o?this.lookupFunctionArgumentBitRatio(this.name,r):this.constantBitRatios[r];switch(e){case 1:t.push(`get8(${u}, ${u}Size, ${u}Dim, `);break;case 2:t.push(`get16(${u}, ${u}Size, ${u}Dim, `);break;case 4:case 0:t.push(`get32(${u}, ${u}Size, ${u}Dim, `);break;default:throw new Error(`unhandled bit ratio of ${e}`);}this.memberExpressionXYZ(s,l,d,t),t.push(')')}break;case'MemoryOptimizedNumberTexture':t.push(`getMemoryOptimized32(${u}, ${u}Size, ${u}Dim, `),this.memberExpressionXYZ(s,l,d,t),t.push(')');break;default:throw new Error(`unhandled member expression "${i}"`);}return t}astCallExpression(e,t){if(!e.callee)throw this.astErrorOutput('Unknown CallExpression',e);let n=null;const r=this.isAstMathFunction(e);if(n=r||e.callee.object&&'ThisExpression'===e.callee.object.type?e.callee.property.name:'SequenceExpression'!==e.callee.type||'Literal'!==e.callee.expressions[0].type||isNaN(e.callee.expressions[0].raw)?e.callee.name:e.callee.expressions[1].property.name,!n)throw this.astErrorOutput(`Unhandled function, couldn't find name`,e);if('atan2'===n&&(n='atan'),0>this.calledFunctions.indexOf(n)&&this.calledFunctions.push(n),'random'===n&&this.plugins&&0<this.plugins.length)for(let e=0;e<this.plugins.length;e++){const n=this.plugins[e];if('Math.random()'===n.functionMatch&&n.functionReplace)return t.push(n.functionReplace),t}if(this.onFunctionCall&&this.onFunctionCall(this.name,n,e.arguments),t.push(n),t.push('('),r)for(let n=0;n<e.arguments.length;++n){const r=e.arguments[n],a=this.getType(r);switch(0<n&&t.push(', '),a){case'Integer':this.castValueToFloat(r,t);break;default:this.astGeneric(r,t);}}else{const r=this.lookupFunctionArgumentTypes(n)||[];for(let a=0;a<e.arguments.length;++a){const o=e.arguments[a];let i=r[a];0<a&&t.push(', ');const s=this.getType(o);switch(i||(this.triggerImplyArgumentType(n,a,s,this),i=s),s){case'Number':case'Float':if('Integer'===i){t.push('int('),this.astGeneric(o,t),t.push(')');continue}else if('Number'===i||'Float'===i){this.astGeneric(o,t);continue}else if('LiteralInteger'===i){this.castLiteralToFloat(o,t);continue}break;case'Integer':if('Number'===i||'Float'===i){t.push('float('),this.astGeneric(o,t),t.push(')');continue}else if('Integer'===i){this.astGeneric(o,t);continue}break;case'LiteralInteger':if('Integer'===i){this.castLiteralToInteger(o,t);continue}else if('Number'===i||'Float'===i){this.castLiteralToFloat(o,t);continue}else if('LiteralInteger'===i){this.astGeneric(o,t);continue}break;case'Array(2)':case'Array(3)':case'Array(4)':if(i===s){this.astGeneric(o,t);continue}break;case'ArrayTexture(1)':case'ArrayTexture(2)':case'ArrayTexture(3)':case'ArrayTexture(4)':case'Array':case'Input':if(i===s){this.triggerTrackArgumentSynonym(this.name,o.name,n,a),this.astGeneric(o,t);continue}}throw this.astErrorOutput(`Unhandled argument combination of ${s} and ${i} for argument named "${o.name}"`,e)}}return t.push(')'),t}astArrayExpression(e,t){const n=e.elements.length;t.push('vec'+n+'(');for(let r=0;r<n;++r){0<r&&t.push(', ');const n=e.elements[r];this.astGeneric(n,t)}return t.push(')'),t}memberExpressionXYZ(e,t,n,r){return n?r.push(this.memberExpressionPropertyMarkup(n),', '):r.push('0, '),t?r.push(this.memberExpressionPropertyMarkup(t),', '):r.push('0, '),r.push(this.memberExpressionPropertyMarkup(e)),r}memberExpressionPropertyMarkup(e){if(!e)throw new Error('Property not set');const t=this.getType(e),n=[];return'Number'===t||'Float'===t?this.castValueToInteger(e,n):'LiteralInteger'===t?this.castLiteralToInteger(e,n):this.astGeneric(e,n),n.join('')}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value-maps.js":/*!*********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value-maps.js ***!
  \*********************************************************************//*! no static exports found */function(e,t,n){const{WebGLKernelValueBoolean:r}=n(/*! ./kernel-value/boolean */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/boolean.js'),{WebGLKernelValueFloat:a}=n(/*! ./kernel-value/float */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/float.js'),{WebGLKernelValueInteger:o}=n(/*! ./kernel-value/integer */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/integer.js'),{WebGLKernelValueHTMLImage:i}=n(/*! ./kernel-value/html-image */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/html-image.js'),{WebGLKernelValueDynamicHTMLImage:s}=n(/*! ./kernel-value/dynamic-html-image */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-html-image.js'),{WebGLKernelValueSingleInput:l}=n(/*! ./kernel-value/single-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-input.js'),{WebGLKernelValueDynamicSingleInput:d}=n(/*! ./kernel-value/dynamic-single-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-input.js'),{WebGLKernelValueUnsignedInput:c}=n(/*! ./kernel-value/unsigned-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-input.js'),{WebGLKernelValueDynamicUnsignedInput:u}=n(/*! ./kernel-value/dynamic-unsigned-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-input.js'),{WebGLKernelValueMemoryOptimizedNumberTexture:p}=n(/*! ./kernel-value/memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/memory-optimized-number-texture.js'),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:m}=n(/*! ./kernel-value/dynamic-memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-memory-optimized-number-texture.js'),{WebGLKernelValueNumberTexture:g}=n(/*! ./kernel-value/number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/number-texture.js'),{WebGLKernelValueDynamicNumberTexture:h}=n(/*! ./kernel-value/dynamic-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-number-texture.js'),{WebGLKernelValueSingleArray:f}=n(/*! ./kernel-value/single-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-array.js'),{WebGLKernelValueDynamicSingleArray:_}=n(/*! ./kernel-value/dynamic-single-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-array.js'),{WebGLKernelValueUnsignedArray:y}=n(/*! ./kernel-value/unsigned-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-array.js'),{WebGLKernelValueDynamicUnsignedArray:E}=n(/*! ./kernel-value/dynamic-unsigned-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-array.js'),x={unsigned:{dynamic:{Boolean:r,Integer:o,Float:a,Array:E,Input:u,NumberTexture:h,"ArrayTexture(1)":h,"ArrayTexture(2)":h,"ArrayTexture(3)":h,"ArrayTexture(4)":h,MemoryOptimizedNumberTexture:m,HTMLImage:s,HTMLImageArray:!1},static:{Boolean:r,Float:a,Integer:o,Array:y,Input:c,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:m,HTMLImage:i,HTMLImageArray:!1}},single:{dynamic:{Boolean:r,Integer:o,Float:a,Array:_,Input:d,NumberTexture:h,"ArrayTexture(1)":h,"ArrayTexture(2)":h,"ArrayTexture(3)":h,"ArrayTexture(4)":h,MemoryOptimizedNumberTexture:m,HTMLImage:s,HTMLImageArray:!1},static:{Boolean:r,Float:a,Integer:o,Array:f,Input:l,NumberTexture:g,"ArrayTexture(1)":g,"ArrayTexture(2)":g,"ArrayTexture(3)":g,"ArrayTexture(4)":g,MemoryOptimizedNumberTexture:p,HTMLImage:i,HTMLImageArray:!1}}};e.exports={lookupKernelValueType:function lookupKernelValueType(e,t,n){if(!e)throw new Error('type missing');if(!t)throw new Error('dynamic missing');if(!n)throw new Error('precision missing');const r=x[n][t];if(!1===r[e])return null;if(void 0===r[e])throw new Error(`Could not find a KernelValue for ${e}`);return r[e]}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/boolean.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/boolean.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueBoolean:class WebGLKernelValueBoolean extends a{constructor(e,t){super(e,t),this.uploadValue=e}getSource(e){return'constants'===this.origin?`const bool ${this.id} = ${e};\n`:`uniform bool ${this.id};\n`}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}updateValue(e){'constants'===this.origin||this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-html-image.js":/*!***********************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-html-image.js ***!
  \***********************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueHTMLImage:a}=n(/*! ./html-image */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/html-image.js');e.exports={WebGLKernelValueDynamicHTMLImage:class WebGLKernelValueDynamicHTMLImage extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){const{width:t,height:n}=e;this.dimensions=[t,n,1],this.textureSize=[t,n],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-memory-optimized-number-texture.js":/*!********************************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-memory-optimized-number-texture.js ***!
  \********************************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueMemoryOptimizedNumberTexture:a}=n(/*! ./memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/memory-optimized-number-texture.js');e.exports={WebGLKernelValueDynamicMemoryOptimizedNumberTexture:class WebGLKernelValueDynamicMemoryOptimizedNumberTexture extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.dimensions,this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-number-texture.js":/*!***************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-number-texture.js ***!
  \***************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueNumberTexture:a}=n(/*! ./number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/number-texture.js');e.exports={WebGLKernelValueDynamicNumberTexture:class WebGLKernelValueDynamicNumberTexture extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=e.dimensions,this.textureSize=e.size,this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-array.js":/*!*************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-array.js ***!
  \*************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueSingleArray:a}=n(/*! ./single-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-array.js');e.exports={WebGLKernelValueDynamicSingleArray:class WebGLKernelValueDynamicSingleArray extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-input.js":/*!*************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-single-input.js ***!
  \*************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueSingleInput:a}=n(/*! ./single-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-input.js');e.exports={WebGLKernelValueDynamicSingleInput:class WebGLKernelValueDynamicSingleInput extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,a]=e.size;this.dimensions=new Int32Array([t||1,n||1,a||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-array.js":/*!***************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-array.js ***!
  \***************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueUnsignedArray:a}=n(/*! ./unsigned-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-array.js');e.exports={WebGLKernelValueDynamicUnsignedArray:class WebGLKernelValueDynamicUnsignedArray extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio);const t=this.getTransferArrayType(e);this.preUploadValue=new t(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-input.js":/*!***************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-input.js ***!
  \***************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueUnsignedInput:a}=n(/*! ./unsigned-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-input.js');e.exports={WebGLKernelValueDynamicUnsignedInput:class WebGLKernelValueDynamicUnsignedInput extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,a]=e.size;this.dimensions=new Int32Array([t||1,n||1,a||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio);const o=this.getTransferArrayType(e.value);this.preUploadValue=new o(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/float.js":/*!**********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/float.js ***!
  \**********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueFloat:class WebGLKernelValueFloat extends a{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return'constants'===this.origin?Number.isInteger(e)?`const float ${this.id} = ${e}.0;\n`:`const float ${this.id} = ${e};\n`:`uniform float ${this.id};\n`}updateValue(e){'constants'===this.origin||this.kernel.setUniform1f(this.id,this.uploadValue=e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/html-image.js":/*!***************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/html-image.js ***!
  \***************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueHTMLImage:class WebGLKernelValueHTMLImage extends a{constructor(e,t){super(e,t);const{width:n,height:r}=e;this.dimensions=[n,r,1],this.requestTexture(),this.textureSize=[n,r],this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js":/*!**********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js ***!
  \**********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{Input:a}=n(/*! ../../../input */'./node_modules/gpu.js/src/input.js'),{KernelValue:o}=n(/*! ../../kernel-value */'./node_modules/gpu.js/src/backend/kernel-value.js');e.exports={WebGLKernelValue:class WebGLKernelValue extends o{constructor(e,t){super(e,t),this.dimensionsId=null,this.sizeId=null,this.initialValueConstructor=e.constructor,this.onRequestTexture=t.onRequestTexture,this.onRequestIndex=t.onRequestIndex,this.uploadValue=null,this.textureSize=null,this.bitRatio=null}requestTexture(){this.texture=this.onRequestTexture(),this.setupTexture()}setupTexture(){this.contextHandle=this.onRequestContextHandle(),this.index=this.onRequestIndex(),this.dimensionsId=this.id+'Dim',this.sizeId=this.id+'Size'}getTransferArrayType(e){if(Array.isArray(e[0]))return this.getTransferArrayType(e[0]);switch(e.constructor){case Array:case Int32Array:case Int16Array:case Int8Array:return Float32Array;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:case Float32Array:case Float64Array:return e.constructor;}return console.warn('Unfamiliar constructor type.  Will go ahead and use, but likley this may result in a transfer of zeros'),e.constructor}formatArrayTransfer(e,t,n){if(r.isArray(e[0])||this.optimizeFloatMemory){const n=new Float32Array(t);return r.flattenTo(e,n),n}switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:case Uint16Array:case Int16Array:case Float32Array:case Int32Array:{const a=new(n||e.constructor)(t);return r.flattenTo(e,a),a}default:{const n=new Float32Array(t);return r.flattenTo(e,n),n}}}getBitRatio(e){if(Array.isArray(e[0]))return this.getBitRatio(e[0]);if(e.constructor===a)return this.getBitRatio(e.value);switch(e.constructor){case Uint8ClampedArray:case Uint8Array:case Int8Array:return 1;case Uint16Array:case Int16Array:return 2;case Float32Array:case Int32Array:default:return 4;}}getStringValueHandler(){throw new Error(`"getStringValueHandler" not implemented on ${this.constructor.name}`)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/integer.js":/*!************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/integer.js ***!
  \************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueInteger:class WebGLKernelValueInteger extends a{constructor(e,t){super(e,t),this.uploadValue=e}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(e){return'constants'===this.origin?`const int ${this.id} = ${parseInt(e)};\n`:`uniform int ${this.id};\n`}updateValue(e){'constants'===this.origin||this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/memory-optimized-number-texture.js":/*!************************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/memory-optimized-number-texture.js ***!
  \************************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueMemoryOptimizedNumberTexture:class WebGLKernelValueMemoryOptimizedNumberTexture extends a{constructor(e,t){super(e,t),this.setupTexture(),this.dimensions=e.dimensions,this.textureSize=e.size,this.uploadValue=e.texture}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/number-texture.js":/*!*******************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/number-texture.js ***!
  \*******************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueNumberTexture:class WebGLKernelValueNumberTexture extends a{constructor(e,t){super(e,t),this.setupTexture();const{size:n,dimensions:r}=e;this.bitRatio=this.getBitRatio(e),this.dimensions=r,this.textureSize=n,this.uploadValue=e.texture}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName}.texture;\n`}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();if(this.checkContext&&e.context!==this.context)throw new Error(`Value ${this.name} (${this.type}) must be from same context`);const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.uploadValue=e.texture),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-array.js":/*!*****************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-array.js ***!
  \*****************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueSingleArray:class WebGLKernelValueSingleArray extends a{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=4,this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-input.js":/*!*****************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-input.js ***!
  \*****************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueSingleInput:class WebGLKernelValueSingleInput extends a{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=4;let[n,a,o]=e.size;this.dimensions=new Int32Array([n||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength)}getStringValueHandler(){return r.linesToString([`const uploadValue_${this.name} = new Float32Array(${this.uploadArrayLength})`,`flattenTo(${this.varName}.value, uploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-array.js":/*!*******************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-array.js ***!
  \*******************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueUnsignedArray:class WebGLKernelValueUnsignedArray extends a{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=this.getBitRatio(e),this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.TranserArrayType=this.getTransferArrayType(e),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;r.flattenTo(e,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-input.js":/*!*******************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-input.js ***!
  \*******************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ./index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGLKernelValueUnsignedInput:class WebGLKernelValueUnsignedInput extends a{constructor(e,t){super(e,t),this.requestTexture(),this.bitRatio=this.getBitRatio(e);const[n,a,o]=e.size;this.dimensions=new Int32Array([n||1,a||1,o||1]),this.textureSize=r.getMemoryOptimizedPackedTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*(4/this.bitRatio),this.TranserArrayType=this.getTransferArrayType(e.value),this.preUploadValue=new this.TranserArrayType(this.uploadArrayLength),this.uploadValue=new Uint8Array(this.preUploadValue.buffer)}getStringValueHandler(){return r.linesToString([`const preUploadValue_${this.name} = new ${this.TranserArrayType.name}(${this.uploadArrayLength})`,`const uploadValue_${this.name} = new Uint8Array(preUploadValue_${this.name}.buffer)`,`flattenTo(${this.varName}.value, preUploadValue_${this.name})`])}getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;r.flattenTo(e.value,this.preUploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl/kernel.js":/*!**********************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/kernel.js ***!
  \**********************************************************//*! no static exports found */function(e,t,n){const{GLKernel:r}=n(/*! ../gl/kernel */'./node_modules/gpu.js/src/backend/gl/kernel.js'),{FunctionBuilder:a}=n(/*! ../function-builder */'./node_modules/gpu.js/src/backend/function-builder.js'),{WebGLFunctionNode:o}=n(/*! ./function-node */'./node_modules/gpu.js/src/backend/web-gl/function-node.js'),{utils:i}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),s=n(/*! ../../plugins/triangle-noise */'./node_modules/gpu.js/src/plugins/triangle-noise.js'),{fragmentShader:l}=n(/*! ./fragment-shader */'./node_modules/gpu.js/src/backend/web-gl/fragment-shader.js'),{vertexShader:d}=n(/*! ./vertex-shader */'./node_modules/gpu.js/src/backend/web-gl/vertex-shader.js'),{glKernelString:c}=n(/*! ../gl/kernel-string */'./node_modules/gpu.js/src/backend/gl/kernel-string.js'),{lookupKernelValueType:u}=n(/*! ./kernel-value-maps */'./node_modules/gpu.js/src/backend/web-gl/kernel-value-maps.js');let p=null,m=null,g=null,h=null,f=null;const _=[s],y=[],E={};class WebGLKernel extends r{static get isSupported(){return null===p?(this.setupFeatureChecks(),p=this.isContextMatch(g),p):p}static setupFeatureChecks(){('undefined'==typeof document?'undefined'!=typeof OffscreenCanvas&&(m=new OffscreenCanvas(0,0)):m=document.createElement('canvas'),!!m)&&(g=m.getContext('webgl')||m.getContext('experimental-webgl'),g&&g.getExtension&&(h={OES_texture_float:g.getExtension('OES_texture_float'),OES_texture_float_linear:g.getExtension('OES_texture_float_linear'),OES_element_index_uint:g.getExtension('OES_element_index_uint'),WEBGL_draw_buffers:g.getExtension('WEBGL_draw_buffers')},f=this.getFeatures()))}static isContextMatch(e){return'undefined'!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext}static getFeatures(){const e=this.getIsDrawBuffers();return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),isTextureFloat:this.getIsTextureFloat(),isDrawBuffers:e,kernelMap:e,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return!!h.OES_texture_float}static getIsDrawBuffers(){return!!h.WEBGL_draw_buffers}static getChannelCount(){return h.WEBGL_draw_buffers?g.getParameter(h.WEBGL_draw_buffers.MAX_DRAW_BUFFERS_WEBGL):1}static lookupKernelValueType(e,t,n){return u(e,t,n)}static get testCanvas(){return m}static get testContext(){return g}static get features(){return f}static get fragmentShader(){return l}static get vertexShader(){return d}constructor(e,t){super(e,t),this.program=null,this.pipeline=t.pipeline,this.endianness=i.systemEndianness(),this.extensions={},this.subKernelOutputTextures=null,this.kernelArguments=null,this.argumentTextureCount=0,this.constantTextureCount=0,this.compiledFragmentShader=null,this.compiledVertexShader=null,this.fragShader=null,this.vertShader=null,this.drawBuffersMap=null,this.outputTexture=null,this.maxTexSize=null,this.switchingKernels=!1,this.onRequestSwitchKernel=null,this.mergeSettings(e.settings||t),this.threadDim=null,this.framebuffer=null,this.buffer=null,this.textureCache={},this.programUniformLocationCache={},this.uniform1fCache={},this.uniform1iCache={},this.uniform2fCache={},this.uniform2fvCache={},this.uniform2ivCache={},this.uniform3fvCache={},this.uniform3ivCache={}}initCanvas(){if('undefined'!=typeof document){const e=document.createElement('canvas');return e.width=2,e.height=2,e}return'undefined'==typeof OffscreenCanvas?void 0:new OffscreenCanvas(0,0)}initContext(){const e={alpha:!1,depth:!1,antialias:!1};return this.canvas.getContext('webgl',e)||this.canvas.getContext('experimental-webgl',e)}initPlugins(e){const t=[],{source:n}=this;if('string'==typeof n)for(let e=0;e<_.length;e++){const r=_[e];n.match(r.functionMatch)&&t.push(r)}else if('object'==typeof n&&e.pluginNames)for(let n=0;n<_.length;n++){const r=_[n],a=e.pluginNames.some((e)=>e===r.name);a&&t.push(r)}return t}initExtensions(){this.extensions={OES_texture_float:this.context.getExtension('OES_texture_float'),OES_texture_float_linear:this.context.getExtension('OES_texture_float_linear'),OES_element_index_uint:this.context.getExtension('OES_element_index_uint'),WEBGL_draw_buffers:this.context.getExtension('WEBGL_draw_buffers'),WEBGL_color_buffer_float:this.context.getExtension('WEBGL_color_buffer_float')}}validateSettings(e){if(!this.validate)return void(this.texSize=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const{features:t}=this.constructor;if(!0===this.optimizeFloatMemory&&!t.isTextureFloat)throw new Error('Float textures are not supported');else if('single'===this.precision&&!t.isFloatRead)throw new Error('Single precision not supported');else!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision=t.isFloatRead?'single':'unsigned');if(this.subKernels&&0<this.subKernels.length&&!this.extensions.WEBGL_draw_buffers)throw new Error('could not instantiate draw buffers extension');if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error('Auto output only supported for kernels with only one input');const t=i.getVariableType(e[0],this.strictIntegers);if('Array'===t)this.output=i.getDimensions(t);else if('NumberTexture'===t||'ArrayTexture(4)'===t)this.output=e[0].output;else throw new Error('Auto output not supported for input type: '+t)}if(this.graphical){if(2!==this.output.length)throw new Error('Output must have 2 dimensions on graphical mode');return'precision'===this.precision&&(this.precision='unsigned',console.warn('Cannot use graphical mode and single precision at the same time')),void(this.texSize=i.clone(this.output))}null===this.precision&&t.isTextureFloat&&(this.precision='single'),this.texSize=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}updateMaxTexSize(){const{texSize:e,canvas:t}=this;if(null===this.maxTexSize){let n=y.indexOf(t);-1===n&&(n=y.length,y.push(t),E[n]=[e[0],e[1]]),this.maxTexSize=E[n]}this.maxTexSize[0]<e[0]&&(this.maxTexSize[0]=e[0]),this.maxTexSize[1]<e[1]&&(this.maxTexSize[1]=e[1])}_oldtranslateSource(){const e=a.fromKernel(this,o,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy}),t=e.getPrototypeString('kernel');this.returnType||(this.returnType=e.getKernelResultType());let n=0;const r=e.getReturnTypes();for(let e=0;e<r.length;e++)switch(r[e]){case'Float':case'Number':case'Integer':n++;break;case'Array(2)':n+=2;break;case'Array(3)':n+=3;break;case'Array(4)':n+=4;}if(f&&n>f.channelCount)throw new Error('Too many channels!');return this.translatedSource=t}setupArguments(e){this.kernelArguments=[],this.argumentTextureCount=0;const t=null===this.argumentTypes;if(t&&(this.argumentTypes=[]),this.argumentSizes=[],this.argumentBitRatios=[],e.length<this.argumentNames.length)throw new Error('not enough arguments for kernel');else if(e.length>this.argumentNames.length)throw new Error('too many arguments for kernel');const{context:n}=this;let r=0;for(let a=0;a<e.length;a++){const o=e[a],s=this.argumentNames[a];let l;t?(l=i.getVariableType(o,this.strictIntegers),this.argumentTypes.push(l)):l=this.argumentTypes[a];const d=this.constructor.lookupKernelValueType(l,this.dynamicArguments?'dynamic':'static',this.precision);if(null===d)return this.requestFallback(e);const c=new d(o,{name:s,origin:'user',context:n,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.context.createTexture(),onRequestIndex:()=>r++,onUpdateValueMismatch:()=>{this.switchingKernels=!0},onRequestContextHandle:()=>n.TEXTURE0+this.constantTextureCount+this.argumentTextureCount++});this.kernelArguments.push(c),this.argumentSizes.push(c.textureSize),this.argumentBitRatios[a]=c.bitRatio}}setupConstants(e){const{context:t}=this;this.kernelConstants=[],this.constantTypes={},this.constantBitRatios={};let n=0;for(const r in this.constants){const a=this.constants[r],o=i.getVariableType(a,this.strictIntegers);this.constantTypes[r]=o;const s=this.constructor.lookupKernelValueType(o,'static',this.precision);if(null===s)return this.requestFallback(e);const l=new s(a,{name:r,origin:'constants',context:this.context,checkContext:this.checkContext,kernel:this,strictIntegers:this.strictIntegers,onRequestTexture:()=>this.context.createTexture(),onRequestIndex:()=>n++,onRequestContextHandle:()=>t.TEXTURE0+this.constantTextureCount++});this.constantBitRatios[r]=l.bitRatio,this.kernelConstants.push(l)}}build(){if(this.initExtensions(),this.validateSettings(arguments),this.setupConstants(arguments),this.fallbackRequested)return;if(this.setupArguments(arguments),this.fallbackRequested)return;this.updateMaxTexSize(),this.translateSource();const e=this.pickRenderStrategy(arguments);if(e)return e;const{texSize:t,context:n,canvas:r}=this;n.enable(n.SCISSOR_TEST),this.pipeline&&'single'===this.precision?(n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1]):(n.viewport(0,0,this.maxTexSize[0],this.maxTexSize[1]),r.width=this.maxTexSize[0],r.height=this.maxTexSize[1]);for(const e=this.threadDim=Array.from(this.output);3>e.length;)e.push(1);const a=this.getVertexShader(arguments),o=n.createShader(n.VERTEX_SHADER);n.shaderSource(o,a),n.compileShader(o),this.vertShader=o;const s=this.getFragmentShader(arguments),l=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(l,s),n.compileShader(l),this.fragShader=l,this.debug&&(console.log('GLSL Shader Output:'),console.log(s)),!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error('Error compiling vertex shader: '+n.getShaderInfoLog(o));if(!n.getShaderParameter(l,n.COMPILE_STATUS))throw new Error('Error compiling fragment shader: '+n.getShaderInfoLog(l));const d=this.program=n.createProgram();n.attachShader(d,o),n.attachShader(d,l),n.linkProgram(d),this.framebuffer=n.createFramebuffer(),this.framebuffer.width=t[0],this.framebuffer.height=t[1];const c=new Float32Array([-1,-1,1,-1,-1,1,1,1]),u=new Float32Array([0,0,1,0,0,1,1,1]),p=c.byteLength;let m=this.buffer;m?n.bindBuffer(n.ARRAY_BUFFER,m):(m=this.buffer=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,m),n.bufferData(n.ARRAY_BUFFER,c.byteLength+u.byteLength,n.STATIC_DRAW)),n.bufferSubData(n.ARRAY_BUFFER,0,c),n.bufferSubData(n.ARRAY_BUFFER,p,u);const g=n.getAttribLocation(this.program,'aPos');n.enableVertexAttribArray(g),n.vertexAttribPointer(g,2,n.FLOAT,!1,0,0);const h=n.getAttribLocation(this.program,'aTexCoord');n.enableVertexAttribArray(h),n.vertexAttribPointer(h,2,n.FLOAT,!1,0,p),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer);let f=0;for(let e in n.useProgram(this.program),this.constants)this.kernelConstants[f++].updateValue(this.constants[e]);this.immutable||(this._setupOutputTexture(),null!==this.subKernels&&0<this.subKernels.length&&this._setupSubOutputTextures())}translateSource(){const e=a.fromKernel(this,o,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});if(this.translatedSource=e.getPrototypeString('kernel'),this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&0<this.subKernels.length)for(let t=0;t<this.subKernels.length;t++){const n=this.subKernels[t];n.returnType||(n.returnType=e.getSubKernelResultType(t))}}run(){const{kernelArguments:e}=this,t=this.texSize,n=this.context;n.useProgram(this.program),n.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv('uOutputDim',this.threadDim),this.setUniform2iv('uTexSize',t)),this.setUniform2f('ratio',t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]),this.switchingKernels=!1;for(let t=0;t<e.length;t++){if(this.switchingKernels)return;e[t].updateValue(arguments[t])}if(this.plugins)for(let e=0;e<this.plugins.length;e++){const t=this.plugins[e];t.onBeforeRun&&t.onBeforeRun(this)}return this.graphical?this.pipeline?(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),(!this.outputTexture||this.immutable)&&this._setupOutputTexture(),n.drawArrays(n.TRIANGLE_STRIP,0,4),new this.TextureConstructor({texture:this.outputTexture,size:t,dimensions:this.threadDim,output:this.output,context:this.context})):(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),void n.drawArrays(n.TRIANGLE_STRIP,0,4)):void(n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),this.immutable&&this._setupOutputTexture(),null!==this.subKernels&&(this.immutable&&this._setupSubOutputTextures(),this.extensions.WEBGL_draw_buffers.drawBuffersWEBGL(this.drawBuffersMap)),n.drawArrays(n.TRIANGLE_STRIP,0,4))}getOutputTexture(){return this.outputTexture}_setupOutputTexture(){const e=this.context,t=this.texSize,n=this.outputTexture=this.context.createTexture();if(e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),'single'!==this.precision)e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null);else if(this.pipeline)switch(this.returnType){case'Number':case'Float':case'Integer':this.optimizeFloatMemory?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;case'Array(2)':e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;case'Array(3)':e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;case'Array(4)':e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);break;default:if(!this.graphical)throw new Error('Unhandled return type');}else e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}_setupSubOutputTextures(){const e=this.context,t=this.texSize;this.drawBuffersMap=[e.COLOR_ATTACHMENT0],this.subKernelOutputTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.context.createTexture();this.subKernelOutputTextures.push(r),this.drawBuffersMap.push(e.COLOR_ATTACHMENT0+n+1),e.activeTexture(e.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),'single'===this.precision?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.FLOAT,null):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t[0],t[1],0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n+1,e.TEXTURE_2D,r,0)}}getArgumentTexture(e){return this.getTextureCache(`ARGUMENT_${e}`)}getTextureCache(e){return this.textureCache.hasOwnProperty(e)?this.textureCache[e]:this.textureCache[e]=this.context.createTexture()}detachTextureCache(e){delete this.textureCache[e]}setUniform1f(e,t){if(this.uniform1fCache.hasOwnProperty(e)){const n=this.uniform1fCache[e];if(t===n)return}this.uniform1fCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform1f(n,t)}setUniform1i(e,t){if(this.uniform1iCache.hasOwnProperty(e)){const n=this.uniform1iCache[e];if(t===n)return}this.uniform1iCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform1i(n,t)}setUniform2f(e,t,n){if(this.uniform2fCache.hasOwnProperty(e)){const r=this.uniform2fCache[e];if(t===r[0]&&n===r[1])return}this.uniform2fCache[e]=[t,n];const r=this.getUniformLocation(e);this.context.uniform2f(r,t,n)}setUniform2fv(e,t){if(this.uniform2fvCache.hasOwnProperty(e)){const n=this.uniform2fvCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2fvCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform2fv(n,t)}setUniform2iv(e,t){if(this.uniform2ivCache.hasOwnProperty(e)){const n=this.uniform2ivCache[e];if(t[0]===n[0]&&t[1]===n[1])return}this.uniform2ivCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform2iv(n,t)}setUniform3fv(e,t){if(this.uniform3fvCache.hasOwnProperty(e)){const n=this.uniform3fvCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3fvCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform3fv(n,t)}setUniform3iv(e,t){if(this.uniform3ivCache.hasOwnProperty(e)){const n=this.uniform3ivCache[e];if(t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2])return}this.uniform3ivCache[e]=t;const n=this.getUniformLocation(e);this.context.uniform3iv(n,t)}getUniformLocation(e){return this.programUniformLocationCache.hasOwnProperty(e)?this.programUniformLocationCache[e]:this.programUniformLocationCache[e]=this.context.getUniformLocation(this.program,e)}_getFragShaderArtifactMap(e){return{HEADER:this._getHeaderString(),LOOP_MAX:this._getLoopMaxString(),PLUGINS:this._getPluginsString(),CONSTANTS:this._getConstantsString(),DECODE32_ENDIANNESS:this._getDecode32EndiannessString(),ENCODE32_ENDIANNESS:this._getEncode32EndiannessString(),DIVIDE_WITH_INTEGER_CHECK:this._getDivideWithIntegerCheckString(),MAIN_CONSTANTS:this._getMainConstantsString(),MAIN_ARGUMENTS:this._getMainArgumentsString(e),KERNEL:this.getKernelString(),MAIN_RESULT:this.getMainResultString()}}_getHeaderString(){return null===this.subKernels?'':'#extension GL_EXT_draw_buffers : require\n'}_getLoopMaxString(){return this.loopMaxIterations?` ${parseInt(this.loopMaxIterations)};\n`:' 1000;\n'}_getPluginsString(){return this.plugins?this.plugins.map((e)=>e.source&&this.source.match(e.functionMatch)?e.source:'').join('\n'):'\n'}_getConstantsString(){const e=[],{threadDim:t,texSize:n}=this;return this.dynamicOutput?e.push('uniform ivec3 uOutputDim','uniform ivec2 uTexSize'):e.push(`ivec3 uOutputDim = ivec3(${t[0]}, ${t[1]}, ${t[2]})`,`ivec2 uTexSize = ivec2(${n[0]}, ${n[1]})`),i.linesToString(e)}_getTextureCoordinate(){const e=this.subKernels;return null===e||1>e.length?'varying vec2 vTexCoord;\n':'out vec2 vTexCoord;\n'}_getDecode32EndiannessString(){return'LE'===this.endianness?'':'  texel.rgba = texel.abgr;\n'}_getEncode32EndiannessString(){return'LE'===this.endianness?'':'  texel.rgba = texel.abgr;\n'}_getDivideWithIntegerCheckString(){return this.fixIntegerDivisionAccuracy?`float div_with_int_check(float x, float y) {
  if (floor(x) == x && floor(y) == y && integerMod(x, y) == 0.0) {
    return float(int(x)/int(y));
  }
  return x / y;
}`:''}_getMainArgumentsString(e){const t=[],{argumentNames:n}=this;for(let r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join('')}_getMainConstantsString(){const e=[],{constants:t}=this;if(t){let n=0;for(const r in t)e.push(this.kernelConstants[n++].getSource(this.constants[r]))}return e.join('')}getKernelString(){let e;switch(this.returnType){case'Array(2)':e='vec2 kernelResult';break;case'Array(3)':e='vec3 kernelResult';break;case'Array(4)':e='vec4 kernelResult';break;case'LiteralInteger':case'Float':case'Number':case'Integer':e='float kernelResult';break;default:if(this.graphical)e='float kernelResult';else throw new Error(`unrecognized output type "${this.returnType}"`);}const t=[],n=this.subKernels;if(null!==n)switch(t.push(e),this.returnType){case'Number':case'Float':case'Integer':for(let e=0;e<n.length;e++){const r=n[e];t.push('Integer'===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`)}break;case'Array(2)':for(let e=0;e<n.length;e++)t.push(`vec2 subKernelResult_${n[e].name}`);break;case'Array(3)':for(let e=0;e<n.length;e++)t.push(`vec3 subKernelResult_${n[e].name}`);break;case'Array(4)':for(let e=0;e<n.length;e++)t.push(`vec4 subKernelResult_${n[e].name}`);}else t.push(e);return i.linesToString(t)+this.translatedSource}getMainResultGraphical(){return i.linesToString(['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  gl_FragColor = actualColor'])}getMainResultPackedPixels(){switch(this.returnType){case'LiteralInteger':case'Number':case'Integer':case'Float':return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`);}}getMainResultKernelPackedPixels(){return i.linesToString(['  threadId = indexTo3D(index, uOutputDim)','  kernel()',`  gl_FragData[0] = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return'';for(let t=0;t<this.subKernels.length;t++){const n=this.subKernels[t];'Integer'===n.returnType?e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  gl_FragData[${t+1}] = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(subKernelResult_${this.subKernels[t].name})`)}return i.linesToString(e)}getMainResultMemoryOptimizedFloats(){const e=['  index *= 4'];switch(this.returnType){case'Number':case'Integer':case'Float':const t=['r','g','b','a'];for(let n=0;n<t.length;n++){const r=t[n];this.getMainResultKernelMemoryOptimizedFloats(e,r),this.getMainResultSubKernelMemoryOptimizedFloats(e,r),n+1<t.length&&e.push('  index += 1')}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`);}return i.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push('  threadId = indexTo3D(index, uOutputDim)','  kernel()',`  gl_FragData[0].${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let n=0;n<this.subKernels.length;n++){const r=this.subKernels[n];'Integer'===r.returnType?e.push(`  gl_FragData[${n+1}].${t} = float(subKernelResult_${this.subKernels[n].name})`):e.push(`  gl_FragData[${n+1}].${t} = subKernelResult_${this.subKernels[n].name}`)}}getMainResultKernelNumberTexture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  gl_FragData[0][0] = kernelResult']}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];'Integer'===n.returnType?e.push(`  gl_FragData[${t+1}][0] = float(subKernelResult_${n.name})`):e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${n.name}`)}return e}getMainResultKernelArray2Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  gl_FragData[0][0] = kernelResult[0]','  gl_FragData[0][1] = kernelResult[1]']}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);return e}getMainResultKernelArray3Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  gl_FragData[0][0] = kernelResult[0]','  gl_FragData[0][1] = kernelResult[1]','  gl_FragData[0][2] = kernelResult[2]']}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);return e}getMainResultKernelArray4Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  gl_FragData[0] = kernelResult']}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;switch(this.returnType){case'Number':case'Float':case'Integer':for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];'Integer'===n.returnType?e.push(`  gl_FragData[${t+1}] = float(subKernelResult_${this.subKernels[t].name})`):e.push(`  gl_FragData[${t+1}] = subKernelResult_${this.subKernels[t].name}`)}break;case'Array(2)':for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`);break;case'Array(3)':for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`);break;case'Array(4)':for(let t=0;t<this.subKernels.length;++t)e.push(`  gl_FragData[${t+1}][0] = subKernelResult_${this.subKernels[t].name}[0]`,`  gl_FragData[${t+1}][1] = subKernelResult_${this.subKernels[t].name}[1]`,`  gl_FragData[${t+1}][2] = subKernelResult_${this.subKernels[t].name}[2]`,`  gl_FragData[${t+1}][3] = subKernelResult_${this.subKernels[t].name}[3]`);}return e}replaceArtifacts(e,t){return e.replace(/[ ]*__([A-Z]+[0-9]*([_]?[A-Z])*)__;\n/g,(e,n)=>{if(t.hasOwnProperty(n))return t[n];throw`unhandled artifact ${n}`})}getFragmentShader(e){return null===this.compiledFragmentShader?this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e)):this.compiledFragmentShader}getVertexShader(){return null===this.compiledVertexShader?this.compiledVertexShader=this.constructor.vertexShader:this.compiledVertexShader}toString(){const e=i.linesToString([`const gl = context`]);return c(this.constructor,arguments,this,e)}destroy(e){this.outputTexture&&this.context.deleteTexture(this.outputTexture),this.buffer&&this.context.deleteBuffer(this.buffer),this.framebuffer&&this.context.deleteFramebuffer(this.framebuffer),this.vertShader&&this.context.deleteShader(this.vertShader),this.fragShader&&this.context.deleteShader(this.fragShader),this.program&&this.context.deleteProgram(this.program);const t=Object.keys(this.textureCache);for(let n=0;n<t.length;n++){const e=t[n];this.context.deleteTexture(this.textureCache[e])}if(this.subKernelOutputTextures)for(let e=0;e<this.subKernelOutputTextures.length;e++)this.context.deleteTexture(this.subKernelOutputTextures[e]);if(e){const e=y.indexOf(this.canvas);0<=e&&(y[e]=null,E[e]=null)}this.destroyExtensions(),delete this.context,delete this.canvas}destroyExtensions(){this.extensions.OES_texture_float=null,this.extensions.OES_texture_float_linear=null,this.extensions.OES_element_index_uint=null,this.extensions.WEBGL_draw_buffers=null}static destroyContext(e){const t=e.getExtension('WEBGL_lose_context');t&&t.loseContext()}toJSON(){const e=super.toJSON();return e.functionNodes=a.fromKernel(this,o).toJSON(),e}}e.exports={WebGLKernel}},"./node_modules/gpu.js/src/backend/web-gl/vertex-shader.js":/*!*****************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl/vertex-shader.js ***!
  \*****************************************************************//*! no static exports found */function(e){const t=`precision highp float;
precision highp int;
precision highp sampler2D;

attribute vec2 aPos;
attribute vec2 aTexCoord;

varying vec2 vTexCoord;
uniform vec2 ratio;

void main(void) {
  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);
  vTexCoord = aTexCoord;
}`;e.exports={vertexShader:t}},"./node_modules/gpu.js/src/backend/web-gl2/fragment-shader.js":/*!********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/fragment-shader.js ***!
  \********************************************************************//*! no static exports found */function(e){const t=`#version 300 es
__HEADER__;
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler2DArray;

const int LOOP_MAX = __LOOP_MAX__;

__PLUGINS__;
__CONSTANTS__;

in vec2 vTexCoord;

const int BIT_COUNT = 32;
int modi(int x, int y) {
  return x - y * (x / y);
}

int bitwiseOr(int a, int b) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) || (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 || b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseXOR(int a, int b) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) != (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 || b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseAnd(int a, int b) {
  int result = 0;
  int n = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if ((modi(a, 2) == 1) && (modi(b, 2) == 1)) {
      result += n;
    }
    a = a / 2;
    b = b / 2;
    n = n * 2;
    if(!(a > 0 && b > 0)) {
      break;
    }
  }
  return result;
}
int bitwiseNot(int a) {
  int result = 0;
  int n = 1;
  
  for (int i = 0; i < BIT_COUNT; i++) {
    if (modi(a, 2) == 0) {
      result += n;    
    }
    a = a / 2;
    n = n * 2;
  }
  return result;
}
int bitwiseZeroFillLeftShift(int n, int shift) {
  int maxBytes = BIT_COUNT;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (maxBytes >= n) {
      break;
    }
    maxBytes *= 2;
  }
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= shift) {
      break;
    }
    n *= 2;
  }

  int result = 0;
  int byteVal = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= maxBytes) break;
    if (modi(n, 2) > 0) { result += byteVal; }
    n = int(n / 2);
    byteVal *= 2;
  }
  return result;
}

int bitwiseSignedRightShift(int num, int shifts) {
  return int(floor(float(num) / pow(2.0, float(shifts))));
}

int bitwiseZeroFillRightShift(int n, int shift) {
  int maxBytes = BIT_COUNT;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (maxBytes >= n) {
      break;
    }
    maxBytes *= 2;
  }
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= shift) {
      break;
    }
    n /= 2;
  }
  int result = 0;
  int byteVal = 1;
  for (int i = 0; i < BIT_COUNT; i++) {
    if (i >= maxBytes) break;
    if (modi(n, 2) > 0) { result += byteVal; }
    n = int(n / 2);
    byteVal *= 2;
  }
  return result;
}

vec2 integerMod(vec2 x, float y) {
  vec2 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

vec3 integerMod(vec3 x, float y) {
  vec3 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

vec4 integerMod(vec4 x, vec4 y) {
  vec4 res = floor(mod(x, y));
  return res * step(1.0 - floor(y), -res);
}

float integerMod(float x, float y) {
  float res = floor(mod(x, y));
  return res * (res > floor(y) - 1.0 ? 0.0 : 1.0);
}

int integerMod(int x, int y) {
  return x - (y * int(x/y));
}

__DIVIDE_WITH_INTEGER_CHECK__;

// Here be dragons!
// DO NOT OPTIMIZE THIS CODE
// YOU WILL BREAK SOMETHING ON SOMEBODY\'S MACHINE
// LEAVE IT AS IT IS, LEST YOU WASTE YOUR OWN TIME
const vec2 MAGIC_VEC = vec2(1.0, -256.0);
const vec4 SCALE_FACTOR = vec4(1.0, 256.0, 65536.0, 0.0);
const vec4 SCALE_FACTOR_INV = vec4(1.0, 0.00390625, 0.0000152587890625, 0.0); // 1, 1/256, 1/65536
float decode32(vec4 texel) {
  __DECODE32_ENDIANNESS__;
  texel *= 255.0;
  vec2 gte128;
  gte128.x = texel.b >= 128.0 ? 1.0 : 0.0;
  gte128.y = texel.a >= 128.0 ? 1.0 : 0.0;
  float exponent = 2.0 * texel.a - 127.0 + dot(gte128, MAGIC_VEC);
  float res = exp2(round(exponent));
  texel.b = texel.b - 128.0 * gte128.x;
  res = dot(texel, SCALE_FACTOR) * exp2(round(exponent-23.0)) + res;
  res *= gte128.y * -2.0 + 1.0;
  return res;
}

float decode16(vec4 texel, int index) {
  int channel = integerMod(index, 2);
  return texel[channel*2] * 255.0 + texel[channel*2 + 1] * 65280.0;
}

float decode8(vec4 texel, int index) {
  int channel = integerMod(index, 4);
  return texel[channel] * 255.0;
}

vec4 legacyEncode32(float f) {
  float F = abs(f);
  float sign = f < 0.0 ? 1.0 : 0.0;
  float exponent = floor(log2(F));
  float mantissa = (exp2(-exponent) * F);
  // exponent += floor(log2(mantissa));
  vec4 texel = vec4(F * exp2(23.0-exponent)) * SCALE_FACTOR_INV;
  texel.rg = integerMod(texel.rg, 256.0);
  texel.b = integerMod(texel.b, 128.0);
  texel.a = exponent*0.5 + 63.5;
  texel.ba += vec2(integerMod(exponent+127.0, 2.0), sign) * 128.0;
  texel = floor(texel);
  texel *= 0.003921569; // 1/255
  __ENCODE32_ENDIANNESS__;
  return texel;
}

// https://github.com/gpujs/gpu.js/wiki/Encoder-details
vec4 encode32(float value) {
  if (value == 0.0) return vec4(0, 0, 0, 0);

  float exponent;
  float mantissa;
  vec4  result;
  float sgn;

  sgn = step(0.0, -value);
  value = abs(value);

  exponent = floor(log2(value));

  mantissa = value*pow(2.0, -exponent)-1.0;
  exponent = exponent+127.0;
  result   = vec4(0,0,0,0);

  result.a = floor(exponent/2.0);
  exponent = exponent - result.a*2.0;
  result.a = result.a + 128.0*sgn;

  result.b = floor(mantissa * 128.0);
  mantissa = mantissa - result.b / 128.0;
  result.b = result.b + exponent*128.0;

  result.g = floor(mantissa*32768.0);
  mantissa = mantissa - result.g/32768.0;

  result.r = floor(mantissa*8388608.0);
  return result/255.0;
}
// Dragons end here

int index;
ivec3 threadId;

ivec3 indexTo3D(int idx, ivec3 texDim) {
  int z = int(idx / (texDim.x * texDim.y));
  idx -= z * int(texDim.x * texDim.y);
  int y = int(idx / texDim.x);
  int x = int(integerMod(idx, texDim.x));
  return ivec3(x, y, z);
}

float get32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture(tex, st / vec2(texSize));
  return decode32(texel);
}

float get16(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));
  int w = texSize.x * 2;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture(tex, st / vec2(texSize.x * 2, texSize.y));
  return decode16(texel, index);
}

float get8(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));
  int w = texSize.x * 4;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  vec4 texel = texture(tex, st / vec2(texSize.x * 4, texSize.y));
  return decode8(texel, index);
}

float getMemoryOptimized32(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + (texDim.x * (xyz.y + (texDim.y * xyz.z)));
  int channel = integerMod(index, 4);
  index = index / 4;
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  index = index / 4;
  vec4 texel = texture(tex, st / vec2(texSize));
  return texel[channel];
}

vec4 getImage2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  return texture(tex, st / vec2(texSize));
}

vec4 getImage3D(sampler2DArray tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  ivec3 xyz = ivec3(x, y, z);
  int index = xyz.x + texDim.x * (xyz.y + texDim.y * xyz.z);
  int w = texSize.x;
  vec2 st = vec2(float(integerMod(index, w)), float(index / w)) + 0.5;
  return texture(tex, vec3(st / vec2(texSize), z));
}

float getFloatFromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return result[0];
}

vec2 getVec2FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return vec2(result[0], result[1]);
}

vec3 getVec3FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  vec4 result = getImage2D(tex, texSize, texDim, z, y, x);
  return vec3(result[0], result[1], result[2]);
}

vec4 getVec4FromSampler2D(sampler2D tex, ivec2 texSize, ivec3 texDim, int z, int y, int x) {
  return getImage2D(tex, texSize, texDim, z, y, x);
}

vec4 actualColor;
void color(float r, float g, float b, float a) {
  actualColor = vec4(r,g,b,a);
}

void color(float r, float g, float b) {
  color(r,g,b,1.0);
}

__MAIN_CONSTANTS__;
__MAIN_ARGUMENTS__;
__KERNEL__;

void main(void) {
  index = int(vTexCoord.s * float(uTexSize.x)) + int(vTexCoord.t * float(uTexSize.y)) * uTexSize.x;
  __MAIN_RESULT__;
}`;e.exports={fragmentShader:t}},"./node_modules/gpu.js/src/backend/web-gl2/function-node.js":/*!******************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/function-node.js ***!
  \******************************************************************//*! no static exports found */function(e,t,n){const{WebGLFunctionNode:r}=n(/*! ../web-gl/function-node */'./node_modules/gpu.js/src/backend/web-gl/function-node.js');e.exports={WebGL2FunctionNode:class WebGL2FunctionNode extends r{astIdentifierExpression(e,t){if('Identifier'!==e.type)throw this.astErrorOutput('IdentifierExpression - not an Identifier',e);const n=this.getType(e);if('Infinity'===e.name)t.push('intBitsToFloat(2139095039)');else if('Boolean'===n)-1<this.argumentNames.indexOf(e.name)?t.push(`bool(user_${e.name})`):t.push(`user_${e.name}`);else{const n=this.getKernelArgumentName(e.name);n?t.push(`user_${n}`):t.push(`user_${e.name}`)}return t}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value-maps.js":/*!**********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value-maps.js ***!
  \**********************************************************************//*! no static exports found */function(e,t,n){const{WebGL2KernelValueBoolean:r}=n(/*! ./kernel-value/boolean */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/boolean.js'),{WebGL2KernelValueFloat:a}=n(/*! ./kernel-value/float */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/float.js'),{WebGL2KernelValueInteger:o}=n(/*! ./kernel-value/integer */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/integer.js'),{WebGL2KernelValueHTMLImage:i}=n(/*! ./kernel-value/html-image */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image.js'),{WebGL2KernelValueDynamicHTMLImage:s}=n(/*! ./kernel-value/dynamic-html-image */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image.js'),{WebGL2KernelValueHtmlImageArray:l}=n(/*! ./kernel-value/html-image-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image-array.js'),{WebGL2KernelValueDynamicHtmlImageArray:d}=n(/*! ./kernel-value/dynamic-html-image-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image-array.js'),{WebGL2KernelValueSingleInput:c}=n(/*! ./kernel-value/single-input */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-input.js'),{WebGL2KernelValueDynamicSingleInput:u}=n(/*! ./kernel-value/dynamic-single-input */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-input.js'),{WebGL2KernelValueUnsignedInput:p}=n(/*! ./kernel-value/unsigned-input */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-input.js'),{WebGL2KernelValueDynamicUnsignedInput:m}=n(/*! ./kernel-value/dynamic-unsigned-input */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-input.js'),{WebGL2KernelValueMemoryOptimizedNumberTexture:g}=n(/*! ./kernel-value/memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/memory-optimized-number-texture.js'),{WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:h}=n(/*! ./kernel-value/dynamic-memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-memory-optimized-number-texture.js'),{WebGL2KernelValueNumberTexture:f}=n(/*! ./kernel-value/number-texture */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/number-texture.js'),{WebGL2KernelValueDynamicNumberTexture:_}=n(/*! ./kernel-value/dynamic-number-texture */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-number-texture.js'),{WebGL2KernelValueSingleArray:y}=n(/*! ./kernel-value/single-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-array.js'),{WebGL2KernelValueDynamicSingleArray:E}=n(/*! ./kernel-value/dynamic-single-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-array.js'),{WebGL2KernelValueUnsignedArray:x}=n(/*! ./kernel-value/unsigned-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-array.js'),{WebGL2KernelValueDynamicUnsignedArray:A}=n(/*! ./kernel-value/dynamic-unsigned-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-array.js'),b={unsigned:{dynamic:{Boolean:r,Integer:o,Float:a,Array:A,Input:m,NumberTexture:_,"ArrayTexture(1)":_,"ArrayTexture(2)":_,"ArrayTexture(3)":_,"ArrayTexture(4)":_,MemoryOptimizedNumberTexture:h,HTMLImage:s,HTMLImageArray:d},static:{Boolean:r,Float:a,Integer:o,Array:x,Input:p,NumberTexture:f,"ArrayTexture(1)":f,"ArrayTexture(2)":f,"ArrayTexture(3)":f,"ArrayTexture(4)":f,MemoryOptimizedNumberTexture:h,HTMLImage:i,HTMLImageArray:l}},single:{dynamic:{Boolean:r,Integer:o,Float:a,Array:E,Input:u,NumberTexture:_,"ArrayTexture(1)":_,"ArrayTexture(2)":_,"ArrayTexture(3)":_,"ArrayTexture(4)":_,MemoryOptimizedNumberTexture:h,HTMLImage:s,HTMLImageArray:d},static:{Boolean:r,Float:a,Integer:o,Array:y,Input:c,NumberTexture:f,"ArrayTexture(1)":f,"ArrayTexture(2)":f,"ArrayTexture(3)":f,"ArrayTexture(4)":f,MemoryOptimizedNumberTexture:g,HTMLImage:i,HTMLImageArray:l}}};e.exports={lookupKernelValueType:function lookupKernelValueType(e,t,n){if(!e)throw new Error('type missing');if(!t)throw new Error('dynamic missing');if(!n)throw new Error('precision missing');const r=b[n][t];if(!1===r[e])return null;if(void 0===r[e])throw new Error(`Could not find a KernelValue for ${e}`);return r[e]}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/boolean.js":/*!*************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/boolean.js ***!
  \*************************************************************************//*! no static exports found */function(e,t,n){const{WebGLKernelValueBoolean:r}=n(/*! ../../web-gl/kernel-value/boolean */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/boolean.js');e.exports={WebGL2KernelValueBoolean:class WebGL2KernelValueBoolean extends r{}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image-array.js":/*!******************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image-array.js ***!
  \******************************************************************************************//*! no static exports found */function(e,t,n){const{WebGL2KernelValueHtmlImageArray:r}=n(/*! ./html-image-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image-array.js');e.exports={WebGL2KernelValueDynamicHtmlImageArray:class WebGL2KernelValueDynamicHtmlImageArray extends r{getSource(){return utils.linesToString([`uniform highp sampler2DArray ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=[e[0].width,e[0].height,e.length],this.textureSize=[e[0].width,e[0].height],this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image.js":/*!************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-html-image.js ***!
  \************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueDynamicHTMLImage:a}=n(/*! ../../web-gl/kernel-value/dynamic-html-image */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-html-image.js');e.exports={WebGL2KernelValueDynamicHTMLImage:class WebGL2KernelValueDynamicHTMLImage extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-memory-optimized-number-texture.js":/*!*********************************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-memory-optimized-number-texture.js ***!
  \*********************************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueDynamicMemoryOptimizedNumberTexture:a}=n(/*! ../../web-gl/kernel-value/dynamic-memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-memory-optimized-number-texture.js');e.exports={WebGL2KernelValueDynamicMemoryOptimizedNumberTexture:class WebGL2KernelValueDynamicMemoryOptimizedNumberTexture extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`uniform ivec2 ${this.sizeId}`,`uniform ivec3 ${this.dimensionsId}`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-number-texture.js":/*!****************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-number-texture.js ***!
  \****************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueDynamicNumberTexture:a}=n(/*! ../../web-gl/kernel-value/dynamic-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-number-texture.js');e.exports={WebGL2KernelValueDynamicNumberTexture:class WebGL2KernelValueDynamicNumberTexture extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-array.js":/*!**************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-array.js ***!
  \**************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGL2KernelValueSingleArray:a}=n(/*! ../../web-gl2/kernel-value/single-array */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-array.js');e.exports={WebGL2KernelValueDynamicSingleArray:class WebGL2KernelValueDynamicSingleArray extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}updateValue(e){this.dimensions=r.getDimensions(e,!0),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-input.js":/*!**************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-single-input.js ***!
  \**************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGL2KernelValueSingleInput:a}=n(/*! ../../web-gl2/kernel-value/single-input */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-input.js');e.exports={WebGL2KernelValueDynamicSingleInput:class WebGL2KernelValueDynamicSingleInput extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}updateValue(e){let[t,n,a]=e.size;this.dimensions=new Int32Array([t||1,n||1,a||1]),this.textureSize=r.getMemoryOptimizedFloatTextureSize(this.dimensions,this.bitRatio),this.uploadArrayLength=this.textureSize[0]*this.textureSize[1]*this.bitRatio,this.uploadValue=new Float32Array(this.uploadArrayLength),this.kernel.setUniform3iv(this.dimensionsId,this.dimensions),this.kernel.setUniform2iv(this.sizeId,this.textureSize),super.updateValue(e)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-array.js":/*!****************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-array.js ***!
  \****************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueDynamicUnsignedArray:a}=n(/*! ../../web-gl/kernel-value/dynamic-unsigned-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-array.js');e.exports={WebGL2KernelValueDynamicUnsignedArray:class WebGL2KernelValueDynamicUnsignedArray extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-input.js":/*!****************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/dynamic-unsigned-input.js ***!
  \****************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueDynamicUnsignedInput:a}=n(/*! ../../web-gl/kernel-value/dynamic-unsigned-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/dynamic-unsigned-input.js');e.exports={WebGL2KernelValueDynamicUnsignedInput:class WebGL2KernelValueDynamicUnsignedInput extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`uniform highp ivec2 ${this.sizeId}`,`uniform highp ivec3 ${this.dimensionsId}`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/float.js":/*!***********************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/float.js ***!
  \***********************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueFloat:a}=n(/*! ../../web-gl/kernel-value/float */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/float.js');e.exports={WebGL2KernelValueFloat:class WebGL2KernelValueFloat extends a{}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image-array.js":/*!**********************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image-array.js ***!
  \**********************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValue:a}=n(/*! ../../web-gl/kernel-value/index */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/index.js');e.exports={WebGL2KernelValueHtmlImageArray:class WebGL2KernelValueHtmlImageArray extends a{constructor(e,t){super(e,t),this.requestTexture(),this.dimensions=[e[0].width,e[0].height,e.length],this.textureSize=[e[0].width,e[0].height]}getStringValueHandler(){return`const uploadValue_${this.name} = ${this.varName};\n`}getSource(){return r.linesToString([`uniform highp sampler2DArray ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D_ARRAY,this.texture),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D_ARRAY,t.TEXTURE_MIN_FILTER,t.NEAREST),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,!0),t.texImage3D(t.TEXTURE_2D_ARRAY,0,t.RGBA,e[0].width,e[0].height,e.length,0,t.RGBA,t.UNSIGNED_BYTE,null);for(let n=0;n<e.length;n++){t.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,n,e[n].width,e[n].height,1,t.RGBA,t.UNSIGNED_BYTE,this.uploadValue=e[n])}this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image.js":/*!****************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/html-image.js ***!
  \****************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueHTMLImage:a}=n(/*! ../../web-gl/kernel-value/html-image */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/html-image.js');e.exports={WebGL2KernelValueHTMLImage:class WebGL2KernelValueHTMLImage extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/integer.js":/*!*************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/integer.js ***!
  \*************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueInteger:a}=n(/*! ../../web-gl/kernel-value/integer */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/integer.js');e.exports={WebGL2KernelValueInteger:class WebGL2KernelValueInteger extends a{getSource(e){return'constants'===this.origin?`const highp int ${this.id} = ${parseInt(e)};\n`:`uniform highp int ${this.id};\n`}updateValue(e){'constants'===this.origin||this.kernel.setUniform1i(this.id,this.uploadValue=e)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/memory-optimized-number-texture.js":/*!*************************************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/memory-optimized-number-texture.js ***!
  \*************************************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueMemoryOptimizedNumberTexture:a}=n(/*! ../../web-gl/kernel-value/memory-optimized-number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/memory-optimized-number-texture.js');e.exports={WebGL2KernelValueMemoryOptimizedNumberTexture:class WebGL2KernelValueMemoryOptimizedNumberTexture extends a{getSource(){return r.linesToString([`uniform sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/number-texture.js":/*!********************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/number-texture.js ***!
  \********************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueNumberTexture:a}=n(/*! ../../web-gl/kernel-value/number-texture */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/number-texture.js');e.exports={WebGL2KernelValueNumberTexture:class WebGL2KernelValueNumberTexture extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-array.js":/*!******************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-array.js ***!
  \******************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueSingleArray:a}=n(/*! ../../web-gl/kernel-value/single-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-array.js');e.exports={WebGL2KernelValueSingleArray:class WebGL2KernelValueSingleArray extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){if(e.constructor!==this.initialValueConstructor)return void this.onUpdateValueMismatch();const{context:t}=this;r.flattenTo(e,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-input.js":/*!******************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/single-input.js ***!
  \******************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueSingleInput:a}=n(/*! ../../web-gl/kernel-value/single-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/single-input.js');e.exports={WebGL2KernelValueSingleInput:class WebGL2KernelValueSingleInput extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}updateValue(e){const{context:t}=this;r.flattenTo(e.value,this.uploadValue),t.activeTexture(this.contextHandle),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,this.textureSize[0],this.textureSize[1],0,t.RGBA,t.FLOAT,this.uploadValue),this.kernel.setUniform1i(this.id,this.index)}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-array.js":/*!********************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-array.js ***!
  \********************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueUnsignedArray:a}=n(/*! ../../web-gl/kernel-value/unsigned-array */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-array.js');e.exports={WebGL2KernelValueUnsignedArray:class WebGL2KernelValueUnsignedArray extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-input.js":/*!********************************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel-value/unsigned-input.js ***!
  \********************************************************************************//*! no static exports found */function(e,t,n){const{utils:r}=n(/*! ../../../utils */'./node_modules/gpu.js/src/utils.js'),{WebGLKernelValueUnsignedInput:a}=n(/*! ../../web-gl/kernel-value/unsigned-input */'./node_modules/gpu.js/src/backend/web-gl/kernel-value/unsigned-input.js');e.exports={WebGL2KernelValueUnsignedInput:class WebGL2KernelValueUnsignedInput extends a{getSource(){return r.linesToString([`uniform highp sampler2D ${this.id}`,`highp ivec2 ${this.sizeId} = ivec2(${this.textureSize[0]}, ${this.textureSize[1]})`,`highp ivec3 ${this.dimensionsId} = ivec3(${this.dimensions[0]}, ${this.dimensions[1]}, ${this.dimensions[2]})`])}}}},"./node_modules/gpu.js/src/backend/web-gl2/kernel.js":/*!***********************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/kernel.js ***!
  \***********************************************************//*! no static exports found */function(e,t,n){const{WebGLKernel:r}=n(/*! ../web-gl/kernel */'./node_modules/gpu.js/src/backend/web-gl/kernel.js'),{WebGL2FunctionNode:a}=n(/*! ./function-node */'./node_modules/gpu.js/src/backend/web-gl2/function-node.js'),{FunctionBuilder:o}=n(/*! ../function-builder */'./node_modules/gpu.js/src/backend/function-builder.js'),{utils:i}=n(/*! ../../utils */'./node_modules/gpu.js/src/utils.js'),{fragmentShader:s}=n(/*! ./fragment-shader */'./node_modules/gpu.js/src/backend/web-gl2/fragment-shader.js'),{vertexShader:l}=n(/*! ./vertex-shader */'./node_modules/gpu.js/src/backend/web-gl2/vertex-shader.js'),{lookupKernelValueType:d}=n(/*! ./kernel-value-maps */'./node_modules/gpu.js/src/backend/web-gl2/kernel-value-maps.js');let c=null,u=null,p=null,m=null,g=null;class WebGL2Kernel extends r{static get isSupported(){return null===c?(this.setupFeatureChecks(),c=this.isContextMatch(p),c):c}static setupFeatureChecks(){('undefined'==typeof document?'undefined'!=typeof OffscreenCanvas&&(u=new OffscreenCanvas(0,0)):u=document.createElement('canvas'),!!u)&&(p=u.getContext('webgl2'),p&&p.getExtension&&(m={EXT_color_buffer_float:p.getExtension('EXT_color_buffer_float'),OES_texture_float_linear:p.getExtension('OES_texture_float_linear')},g=this.getFeatures()))}static isContextMatch(e){return'undefined'!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext}static getFeatures(){return Object.freeze({isFloatRead:this.getIsFloatRead(),isIntegerDivisionAccurate:this.getIsIntegerDivisionAccurate(),kernelMap:!0,isTextureFloat:!0,channelCount:this.getChannelCount()})}static getIsTextureFloat(){return!0}static getIsIntegerDivisionAccurate(){return super.getIsIntegerDivisionAccurate()}static getChannelCount(){return p.getParameter(p.MAX_DRAW_BUFFERS)}static lookupKernelValueType(e,t,n){return d(e,t,n)}static get testCanvas(){return u}static get testContext(){return p}static get features(){return g}static get fragmentShader(){return s}static get vertexShader(){return l}initContext(){const e=this.canvas.getContext('webgl2',{alpha:!1,depth:!1,antialias:!1});return e}initExtensions(){this.extensions={EXT_color_buffer_float:this.context.getExtension('EXT_color_buffer_float'),OES_texture_float_linear:this.context.getExtension('OES_texture_float_linear')}}validateSettings(e){if(!this.validate)return void(this.texSize=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output));const t=this.constructor.features;if('single'===this.precision&&!t.isFloatRead)throw new Error('Float texture outputs are not supported');else this.graphical||null!==this.precision||(this.precision=t.isFloatRead?'single':'unsigned');if(null===this.fixIntegerDivisionAccuracy?this.fixIntegerDivisionAccuracy=!t.isIntegerDivisionAccurate:this.fixIntegerDivisionAccuracy&&t.isIntegerDivisionAccurate&&(this.fixIntegerDivisionAccuracy=!1),this.checkOutput(),!this.output||0===this.output.length){if(1!==e.length)throw new Error('Auto output only supported for kernels with only one input');const t=i.getVariableType(e[0],this.strictIntegers);switch(t){case'Array':this.output=i.getDimensions(t);break;case'NumberTexture':case'MemoryOptimizedNumberTexture':case'ArrayTexture(1)':case'ArrayTexture(2)':case'ArrayTexture(3)':case'ArrayTexture(4)':this.output=e[0].output;break;default:throw new Error('Auto output not supported for input type: '+t);}}if(this.graphical){if(2!==this.output.length)throw new Error('Output must have 2 dimensions on graphical mode');return'single'===this.precision&&(console.warn('Cannot use graphical mode and single precision at the same time'),this.precision='unsigned'),void(this.texSize=i.clone(this.output))}!this.graphical&&null===this.precision&&t.isTextureFloat&&(this.precision='single'),this.texSize=i.getKernelTextureSize({optimizeFloatMemory:this.optimizeFloatMemory,precision:this.precision},this.output)}translateSource(){const e=o.fromKernel(this,a,{fixIntegerDivisionAccuracy:this.fixIntegerDivisionAccuracy});if(this.translatedSource=e.getPrototypeString('kernel'),this.graphical||this.returnType||(this.returnType=e.getKernelResultType()),this.subKernels&&0<this.subKernels.length)for(let t=0;t<this.subKernels.length;t++){const n=this.subKernels[t];n.returnType||(n.returnType=e.getSubKernelResultType(t))}}run(){const{kernelArguments:e,texSize:t}=this,n=this.context;n.useProgram(this.program),n.scissor(0,0,t[0],t[1]),this.dynamicOutput&&(this.setUniform3iv('uOutputDim',new Int32Array(this.threadDim)),this.setUniform2iv('uTexSize',t)),this.setUniform2f('ratio',t[0]/this.maxTexSize[0],t[1]/this.maxTexSize[1]);for(let t=0;t<e.length;t++){if(this.switchingKernels)return;e[t].updateValue(arguments[t])}if(this.plugins)for(let e=0;e<this.plugins.length;e++){const t=this.plugins[e];t.onBeforeRun&&t.onBeforeRun(this)}return this.graphical?this.pipeline?(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),(!this.outputTexture||this.immutable)&&this._setupOutputTexture(),n.drawArrays(n.TRIANGLE_STRIP,0,4),new this.TextureConstructor({texture:this.outputTexture,size:t,dimensions:this.threadDim,output:this.output,context:this.context})):(n.bindRenderbuffer(n.RENDERBUFFER,null),n.bindFramebuffer(n.FRAMEBUFFER,null),void n.drawArrays(n.TRIANGLE_STRIP,0,4)):void(n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),this.immutable&&this._setupOutputTexture(),null!==this.subKernels&&(this.immutable&&this._setupSubOutputTextures(),n.drawBuffers(this.drawBuffersMap)),n.drawArrays(n.TRIANGLE_STRIP,0,4))}drawBuffers(){this.context.drawBuffers(this.drawBuffersMap)}getOutputTexture(){return this.outputTexture}_setupOutputTexture(){const{texSize:e}=this,t=this.context,n=this.outputTexture=t.createTexture();if(t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),'single'!==this.precision)t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null);else if(this.pipeline)switch(this.returnType){case'Number':case'Float':case'Integer':this.optimizeFloatMemory?t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]):t.texStorage2D(t.TEXTURE_2D,1,t.R32F,e[0],e[1]);break;case'Array(2)':t.texStorage2D(t.TEXTURE_2D,1,t.RG32F,e[0],e[1]);break;case'Array(3)':case'Array(4)':t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]);break;default:throw new Error('Unhandled return type');}else t.texStorage2D(t.TEXTURE_2D,1,t.RGBA32F,e[0],e[1]);t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}_setupSubOutputTextures(){const{texSize:e}=this,t=this.context;this.drawBuffersMap=[t.COLOR_ATTACHMENT0],this.subKernelOutputTextures=[];for(let n=0;n<this.subKernels.length;n++){const r=this.context.createTexture();this.subKernelOutputTextures.push(r),this.drawBuffersMap.push(t.COLOR_ATTACHMENT0+n+1),t.activeTexture(t.TEXTURE0+this.constantTextureCount+this.argumentTextureCount+n),t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),'single'===this.precision?t.texImage2D(t.TEXTURE_2D,0,t.RGBA32F,e[0],e[1],0,t.RGBA,t.FLOAT,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e[0],e[1],0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+n+1,t.TEXTURE_2D,r,0)}}_getHeaderString(){return''}_getTextureCoordinate(){const e=this.subKernels;return null===e||1>e.length?'in highp vec2 vTexCoord;\n':'out highp vec2 vTexCoord;\n'}_getMainArgumentsString(e){const t=[],n=this.argumentNames;for(let r=0;r<n.length;r++)t.push(this.kernelArguments[r].getSource(e[r]));return t.join('')}getKernelString(){let e;switch(this.returnType){case'Array(2)':e='vec2 kernelResult';break;case'Array(3)':e='vec3 kernelResult';break;case'Array(4)':e='vec4 kernelResult';break;case'LiteralInteger':case'Float':case'Number':case'Integer':e='float kernelResult';break;default:if(this.graphical)e='float kernelResult';else throw new Error(`unrecognized output type "${this.returnType}"`);}const t=[],n=this.subKernels;if(null!==n){t.push(e,'layout(location = 0) out vec4 data0');for(let e=0;e<n.length;e++){const r=n[e];t.push('Integer'===r.returnType?`int subKernelResult_${r.name} = 0`:`float subKernelResult_${r.name} = 0.0`,`layout(location = ${e+1}) out vec4 data${e+1}`)}}else t.push('out vec4 data0',e);return i.linesToString(t)+this.translatedSource}getMainResultGraphical(){return i.linesToString(['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  data0 = actualColor'])}getMainResultPackedPixels(){switch(this.returnType){case'LiteralInteger':case'Number':case'Integer':case'Float':return this.getMainResultKernelPackedPixels()+this.getMainResultSubKernelPackedPixels();default:throw new Error(`packed output only usable with Numbers, "${this.returnType}" specified`);}}getMainResultKernelPackedPixels(){return i.linesToString(['  threadId = indexTo3D(index, uOutputDim)','  kernel()',`  data0 = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(kernelResult)`])}getMainResultSubKernelPackedPixels(){const e=[];if(!this.subKernels)return'';for(let t=0;t<this.subKernels.length;t++){const n=this.subKernels[t];'Integer'===n.returnType?e.push(`  data${t+1} = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(float(subKernelResult_${this.subKernels[t].name}))`):e.push(`  data${t+1} = ${this.useLegacyEncoder?'legacyEncode32':'encode32'}(subKernelResult_${this.subKernels[t].name})`)}return i.linesToString(e)}getMainResultMemoryOptimizedFloats(){const e=['  index *= 4'];switch(this.returnType){case'Number':case'Integer':case'Float':const t=['r','g','b','a'];for(let n=0;n<t.length;n++){const r=t[n];this.getMainResultKernelMemoryOptimizedFloats(e,r),this.getMainResultSubKernelMemoryOptimizedFloats(e,r),n+1<t.length&&e.push('  index += 1')}break;default:throw new Error(`optimized output only usable with Numbers, ${this.returnType} specified`);}return i.linesToString(e)}getMainResultKernelMemoryOptimizedFloats(e,t){e.push('  threadId = indexTo3D(index, uOutputDim)','  kernel()',`  data0.${t} = kernelResult`)}getMainResultSubKernelMemoryOptimizedFloats(e,t){if(!this.subKernels)return e;for(let n=0;n<this.subKernels.length;n++){const r=this.subKernels[n];'Integer'===r.returnType?e.push(`  data${n+1}.${t} = float(subKernelResult_${r.name})`):e.push(`  data${n+1}.${t} = subKernelResult_${r.name}`)}}getMainResultKernelNumberTexture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  data0[0] = kernelResult']}getMainResultSubKernelNumberTexture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];'Integer'===n.returnType?e.push(`  data${t+1}[0] = float(subKernelResult_${n.name})`):e.push(`  data${t+1}[0] = subKernelResult_${n.name}`)}return e}getMainResultKernelArray2Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  data0[0] = kernelResult[0]','  data0[1] = kernelResult[1]']}getMainResultSubKernelArray2Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${n.name}[0]`,`  data${t+1}[1] = subKernelResult_${n.name}[1]`)}return e}getMainResultKernelArray3Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  data0[0] = kernelResult[0]','  data0[1] = kernelResult[1]','  data0[2] = kernelResult[2]']}getMainResultSubKernelArray3Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t){const n=this.subKernels[t];e.push(`  data${t+1}[0] = subKernelResult_${n.name}[0]`,`  data${t+1}[1] = subKernelResult_${n.name}[1]`,`  data${t+1}[2] = subKernelResult_${n.name}[2]`)}return e}getMainResultKernelArray4Texture(){return['  threadId = indexTo3D(index, uOutputDim)','  kernel()','  data0 = kernelResult']}getMainResultSubKernelArray4Texture(){const e=[];if(!this.subKernels)return e;for(let t=0;t<this.subKernels.length;++t)e.push(`  data${t+1} = subKernelResult_${this.subKernels[t].name}`);return e}getFragmentShader(e){return null===this.compiledFragmentShader?this.compiledFragmentShader=this.replaceArtifacts(this.constructor.fragmentShader,this._getFragShaderArtifactMap(e)):this.compiledFragmentShader}getVertexShader(){return null===this.compiledVertexShader?this.compiledVertexShader=this.constructor.vertexShader:this.compiledVertexShader}destroyExtensions(){this.extensions.EXT_color_buffer_float=null,this.extensions.OES_texture_float_linear=null}toJSON(){const e=super.toJSON();return e.functionNodes=o.fromKernel(this,a).toJSON(),e}}e.exports={WebGL2Kernel}},"./node_modules/gpu.js/src/backend/web-gl2/vertex-shader.js":/*!******************************************************************!*\
  !*** ./node_modules/gpu.js/src/backend/web-gl2/vertex-shader.js ***!
  \******************************************************************//*! no static exports found */function(e){const t=`#version 300 es
precision highp float;
precision highp int;
precision highp sampler2D;

in vec2 aPos;
in vec2 aTexCoord;

out vec2 vTexCoord;
uniform vec2 ratio;

void main(void) {
  gl_Position = vec4((aPos + vec2(1)) * ratio + vec2(-1), 0, 1);
  vTexCoord = aTexCoord;
}`;e.exports={vertexShader:t}},"./node_modules/gpu.js/src/gpu.js":/*!****************************************!*\
  !*** ./node_modules/gpu.js/src/gpu.js ***!
  \****************************************//*! no static exports found */function(e,t,n){function upgradeDeprecatedCreateKernelSettings(e){if(!e)return{};const t=Object.assign({},e);return e.hasOwnProperty('floatOutput')&&(a.warnDeprecated('setting','floatOutput','precision'),t.precision=e.floatOutput?'single':'unsigned'),e.hasOwnProperty('outputToTexture')&&(a.warnDeprecated('setting','outputToTexture','pipeline'),t.pipeline=!!e.outputToTexture),e.hasOwnProperty('outputImmutable')&&(a.warnDeprecated('setting','outputImmutable','immutable'),t.immutable=!!e.outputImmutable),e.hasOwnProperty('floatTextures')&&(a.warnDeprecated('setting','floatTextures','optimizeFloatMemory'),t.optimizeFloatMemory=!!e.floatTextures),t}const{gpuMock:r}=n(/*! gpu-mock.js */'./node_modules/gpu-mock.js/index.js'),{utils:a}=n(/*! ./utils */'./node_modules/gpu.js/src/utils.js'),{CPUKernel:o}=n(/*! ./backend/cpu/kernel */'./node_modules/gpu.js/src/backend/cpu/kernel.js'),{HeadlessGLKernel:i}=n(/*! ./backend/headless-gl/kernel */'./node_modules/gpu.js/src/backend/headless-gl/kernel.js'),{WebGL2Kernel:s}=n(/*! ./backend/web-gl2/kernel */'./node_modules/gpu.js/src/backend/web-gl2/kernel.js'),{WebGLKernel:l}=n(/*! ./backend/web-gl/kernel */'./node_modules/gpu.js/src/backend/web-gl/kernel.js'),{kernelRunShortcut:d}=n(/*! ./kernel-run-shortcut */'./node_modules/gpu.js/src/kernel-run-shortcut.js'),c=[i,s,l],u=['gpu','cpu'],p={headlessgl:i,webgl2:s,webgl:l};let m=!0;class GPU{static disableValidation(){m=!1}static enableValidation(){m=!0}static get isGPUSupported(){return c.some((e)=>e.isSupported)}static get isKernelMapSupported(){return c.some((e)=>e.isSupported&&e.features.kernelMap)}static get isOffscreenCanvasSupported(){return'undefined'!=typeof Worker&&'undefined'!=typeof OffscreenCanvas||'undefined'!=typeof importScripts}static get isWebGLSupported(){return l.isSupported}static get isWebGL2Supported(){return s.isSupported}static get isHeadlessGLSupported(){return i.isSupported}static get isCanvasSupported(){return'undefined'!=typeof HTMLCanvasElement}static get isGPUHTMLImageArraySupported(){return s.isSupported}static get isSinglePrecisionSupported(){return c.some((e)=>e.isSupported&&e.features.isFloatRead&&e.features.isTextureFloat)}constructor(e){if(e=e||{},this.canvas=e.canvas||null,this.context=e.context||null,this.mode=e.mode,'dev'!==this.mode){if(this.Kernel=null,this.kernels=[],this.functions=[],this.nativeFunctions=[],this.chooseKernel(),e.functions)for(let t=0;t<e.functions.length;t++)this.addFunction(e.functions[t]);if(e.nativeFunctions)for(const t in e.nativeFunctions)this.addNativeFunction(t,e.nativeFunctions[t])}}chooseKernel(){if(this.Kernel)return;let e=null;if(this.context){for(let t=0;t<c.length;t++){const n=c[t];if(n.isContextMatch(this.context)){if(!n.isSupported)throw new Error(`Kernel type ${n.name} not supported`);e=n;break}}if(null===e)throw new Error('unknown Context')}else if(this.mode){if(this.mode in p)(!m||p[this.mode].isSupported)&&(e=p[this.mode]);else if('gpu'===this.mode){for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}}else'cpu'===this.mode&&(e=o);if(!e)throw new Error(`A requested mode of "${this.mode}" and is not supported`)}else{for(let t=0;t<c.length;t++)if(c[t].isSupported){e=c[t];break}e||(e=o)}this.mode||(this.mode=e.mode),this.Kernel=e}createKernel(e,t){if('undefined'==typeof e)throw new Error('Missing source parameter');if('object'!=typeof e&&!a.isFunction(e)&&'string'!=typeof e)throw new Error('source parameter not a function');if('dev'===this.mode)return r(e,upgradeDeprecatedCreateKernelSettings(t));e='function'==typeof e?e.toString():e;const n={},i=upgradeDeprecatedCreateKernelSettings(t)||{};t&&'object'==typeof t.argumentTypes&&(i.argumentTypes=Object.keys(t.argumentTypes).map((e)=>t.argumentTypes[e]));const s=Object.assign({context:this.context,canvas:this.canvas,functions:this.functions,nativeFunctions:this.nativeFunctions,gpu:this,validate:m,onRequestFallback:(t)=>{const n=new o(e,{graphical:l.graphical,loopMaxIterations:l.loopMaxIterations,constants:l.constants,dynamicOutput:l.dynamicOutput,dynamicArgument:l.dynamicArguments,output:l.output,precision:l.precision,pipeline:l.pipeline,immutable:l.immutable,optimizeFloatMemory:l.optimizeFloatMemory,fixIntegerDivisionAccuracy:l.fixIntegerDivisionAccuracy,functions:l.functions,nativeFunctions:l.nativeFunctions,subKernels:l.subKernels,strictIntegers:l.strictIntegers,debug:l.debug,warnVarUsage:l.warnVarUsage});n.build.apply(n,t);const r=n.run.apply(n,t);return l.replaceKernel(n),r},onRequestSwitchKernel:(t,r)=>{const o=[];for(let e=0;e<t.length;e++)o.push(a.getVariableType(t[e]));const i=o.join(','),s=n[i];if(s)return s.run.apply(s,t),s.renderKernels?s.renderKernels():s.renderOutput();const l=n[i]=new this.Kernel(e,{graphical:r.graphical,loopMaxIterations:r.loopMaxIterations,constants:r.constants,dynamicOutput:r.dynamicOutput,dynamicArgument:r.dynamicArguments,context:r.context,canvas:r.canvas,output:r.output,precision:r.precision,pipeline:r.pipeline,immutable:r.immutable,optimizeFloatMemory:r.optimizeFloatMemory,fixIntegerDivisionAccuracy:r.fixIntegerDivisionAccuracy,functions:r.functions,nativeFunctions:r.nativeFunctions,subKernels:r.subKernels,strictIntegers:r.strictIntegers,debug:r.debug,gpu:this,validate:m,warnVarUsage:r.warnVarUsage});return l.build.apply(l,t),l.run.apply(l,t),l.renderKernels?l.renderKernels():l.renderOutput()}},i),l=d(new this.Kernel(e,s));return this.canvas||(this.canvas=l.canvas),this.context||(this.context=l.context),this.kernels.push(l),l}createKernelMap(){let e,t;if('function'==typeof arguments[arguments.length-2]?(e=arguments[arguments.length-2],t=arguments[arguments.length-1]):e=arguments[arguments.length-1],(!this.Kernel.isSupported||!this.Kernel.features.kernelMap)&&this.mode&&0>u.indexOf(this.mode))throw new Error(`kernelMap not supported on ${this.Kernel.name}`);const n=upgradeDeprecatedCreateKernelSettings(t);if(t&&'object'==typeof t.argumentTypes&&(n.argumentTypes=Object.keys(t.argumentTypes).map((e)=>t.argumentTypes[e])),Array.isArray(arguments[0])){n.subKernels=[];const e=arguments[0];for(let t=0;t<e.length;t++){const r=e[t].toString(),o=a.getFunctionNameFromString(r);n.subKernels.push({name:o,source:r,property:t})}}else{n.subKernels=[];const e=arguments[0];for(let t in e){if(!e.hasOwnProperty(t))continue;const r=e[t].toString(),o=a.getFunctionNameFromString(r);n.subKernels.push({name:o||t,source:r,property:t})}}const r=this.createKernel(e,n);return r}combineKernels(){const e=arguments[0],t=arguments[arguments.length-1];if('cpu'===e.kernel.constructor.mode)return t;const n=arguments[0].canvas,r=arguments[0].context,a=arguments.length-1;for(let e=0;e<a;e++)arguments[e].setCanvas(n).setContext(r).setPipeline(!0);return function(){const e=t.apply(this,arguments);return e.toArray?e.toArray():e}}addFunction(e,t){return this.functions.push(a.functionToIFunction(e,t)),this}addNativeFunction(e,t,n){if(0<this.kernels.length)throw new Error('Cannot call "addNativeFunction" after "createKernels" has been called.');n=n||{};const{argumentTypes:r,argumentNames:a}=this.Kernel.nativeFunctionArguments(t)||{};return this.nativeFunctions.push({name:e,source:t,settings:n,argumentTypes:r,argumentNames:a,returnType:n.returnType||this.Kernel.nativeFunctionReturnType(t)}),this}destroy(){this.kernels&&setTimeout(()=>{for(let e=0;e<this.kernels.length;e++)this.kernels[e].destroy(!0);this.kernels[0].kernel.constructor.destroyContext(this.context)},0)}}e.exports={GPU,kernelOrder:c,kernelTypes:u}},"./node_modules/gpu.js/src/index.js":/*!******************************************!*\
  !*** ./node_modules/gpu.js/src/index.js ***!
  \******************************************//*! no static exports found */function(e,t,n){const{GPU:r}=n(/*! ./gpu */'./node_modules/gpu.js/src/gpu.js'),{alias:a}=n(/*! ./alias */'./node_modules/gpu.js/src/alias.js'),{utils:o}=n(/*! ./utils */'./node_modules/gpu.js/src/utils.js'),{Input:i,input:s}=n(/*! ./input */'./node_modules/gpu.js/src/input.js'),{Texture:l}=n(/*! ./texture */'./node_modules/gpu.js/src/texture.js'),{FunctionBuilder:d}=n(/*! ./backend/function-builder */'./node_modules/gpu.js/src/backend/function-builder.js'),{FunctionNode:c}=n(/*! ./backend/function-node */'./node_modules/gpu.js/src/backend/function-node.js'),{CPUFunctionNode:u}=n(/*! ./backend/cpu/function-node */'./node_modules/gpu.js/src/backend/cpu/function-node.js'),{CPUKernel:p}=n(/*! ./backend/cpu/kernel */'./node_modules/gpu.js/src/backend/cpu/kernel.js'),{HeadlessGLKernel:m}=n(/*! ./backend/headless-gl/kernel */'./node_modules/gpu.js/src/backend/headless-gl/kernel.js'),{WebGLFunctionNode:g}=n(/*! ./backend/web-gl/function-node */'./node_modules/gpu.js/src/backend/web-gl/function-node.js'),{WebGLKernel:h}=n(/*! ./backend/web-gl/kernel */'./node_modules/gpu.js/src/backend/web-gl/kernel.js'),{WebGL2FunctionNode:f}=n(/*! ./backend/web-gl2/function-node */'./node_modules/gpu.js/src/backend/web-gl2/function-node.js'),{WebGL2Kernel:_}=n(/*! ./backend/web-gl2/kernel */'./node_modules/gpu.js/src/backend/web-gl2/kernel.js'),{GLKernel:y}=n(/*! ./backend/gl/kernel */'./node_modules/gpu.js/src/backend/gl/kernel.js'),{Kernel:E}=n(/*! ./backend/kernel */'./node_modules/gpu.js/src/backend/kernel.js');e.exports={alias:a,CPUFunctionNode:u,CPUKernel:p,GPU:r,FunctionBuilder:d,FunctionNode:c,HeadlessGLKernel:m,Input:i,input:s,Texture:l,utils:o,WebGL2FunctionNode:f,WebGL2Kernel:_,WebGLFunctionNode:g,WebGLKernel:h,GLKernel:y,Kernel:E}},"./node_modules/gpu.js/src/input.js":/*!******************************************!*\
  !*** ./node_modules/gpu.js/src/input.js ***!
  \******************************************//*! no static exports found */function(e,t,n){class Input{constructor(e,t){this.value=e,Array.isArray(t)?this.size=t:(this.size=new Int32Array(3),this.size=t.z?new Int32Array([t.x,t.y,t.z]):t.y?new Int32Array([t.x,t.y]):new Int32Array([t.x]));const[n,r,a]=this.size;if(a){if(this.value.length!==n*r*a)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} * ${a} = ${r*n*a}`);}else if(r){if(this.value.length!==n*r)throw new Error(`Input size ${this.value.length} does not match ${n} * ${r} = ${r*n}`);}else if(this.value.length!==n)throw new Error(`Input size ${this.value.length} does not match ${n}`)}toArray(){const{utils:e}=n(/*! ./utils */'./node_modules/gpu.js/src/utils.js'),[t,r,a]=this.size;return a?e.erectMemoryOptimized3DFloat(this.value.subarray?this.value:new Float32Array(this.value),t,r,a):r?e.erectMemoryOptimized2DFloat(this.value.subarray?this.value:new Float32Array(this.value),t,r):this.value}}e.exports={Input,input:function input(e,t){return new Input(e,t)}}},"./node_modules/gpu.js/src/kernel-run-shortcut.js":/*!********************************************************!*\
  !*** ./node_modules/gpu.js/src/kernel-run-shortcut.js ***!
  \********************************************************//*! no static exports found */function(e,t,n){function bindKernelToShortcut(e,t){const n=r.allPropertiesOf(e);for(let r=0;r<n.length;r++){const a=n[r];'_'===a[0]&&'_'===a[1]||('function'==typeof e[a]?'add'===a.substring(0,3)||'set'===a.substring(0,3)?t[a]=function(){return e[a].apply(e,arguments),t}:'toString'===a?t.toString=function(){return e.toString.apply(e,arguments)}:t[a]=e[a].bind(e):(t.__defineGetter__(a,()=>e[a]),t.__defineSetter__(a,(t)=>{e[a]=t})))}}const{utils:r}=n(/*! ./utils */'./node_modules/gpu.js/src/utils.js');e.exports={kernelRunShortcut:function kernelRunShortcut(e){let t=function(){return e.build.apply(e,arguments),e.renderKernels?(t=function(){return e.run.apply(e,arguments),e.switchingKernels?(e.switchingKernels=!1,e.onRequestSwitchKernel(arguments,e)):e.renderKernels()},e.run.apply(e,arguments),e.renderKernels()):e.renderOutput?(t=function(){return e.run.apply(e,arguments),e.switchingKernels?(e.switchingKernels=!1,e.onRequestSwitchKernel(arguments,e)):e.renderOutput()},e.run.apply(e,arguments),e.renderOutput()):(t=function(){return e.run.apply(e,arguments)},e.run.apply(e,arguments))};const n=function(){return t.apply(e,arguments)};return n.exec=function(){return new Promise((e,n)=>{try{e(t.apply(this,arguments))}catch(t){n(t)}})},n.replaceKernel=function(t){e=t,bindKernelToShortcut(e,n),n.kernel=e},bindKernelToShortcut(e,n),n.kernel=e,n}}},"./node_modules/gpu.js/src/plugins/triangle-noise.js":/*!***********************************************************!*\
  !*** ./node_modules/gpu.js/src/plugins/triangle-noise.js ***!
  \***********************************************************//*! no static exports found */function(e){const t=`

uniform highp float triangle_noise_seed;
highp float triangle_noise_shift = 0.000001;

//https://www.shadertoy.com/view/4t2SDh
//note: uniformly distributed, normalized rand, [0;1[
float nrand( vec2 n )
{
  return fract(sin(dot(n.xy, vec2(12.9898, 78.233)))* 43758.5453);
}
//note: remaps v to [0;1] in interval [a;b]
float remap( float a, float b, float v )
{
  return clamp( (v-a) / (b-a), 0.0, 1.0 );
}

float n4rand( vec2 n )
{
  float t = fract( triangle_noise_seed + triangle_noise_shift );
  float nrnd0 = nrand( n + 0.07*t );
  float nrnd1 = nrand( n + 0.11*t );  
  float nrnd2 = nrand( n + 0.13*t );
  float nrnd3 = nrand( n + 0.17*t );
  float result = (nrnd0+nrnd1+nrnd2+nrnd3) / 4.0;
  triangle_noise_shift = result + 0.000001;
  return result;
}`;e.exports={name:'triangle-noise-noise',onBeforeRun:(e)=>{e.setUniform1f('triangle_noise_seed',Math.random())},functionMatch:'Math.random()',functionReplace:'n4rand(vTexCoord)',functionReturnType:'Number',source:t}},"./node_modules/gpu.js/src/texture.js":/*!********************************************!*\
  !*** ./node_modules/gpu.js/src/texture.js ***!
  \********************************************//*! no static exports found */function(e){e.exports={Texture:class Texture{constructor(e){const{texture:t,size:n,dimensions:r,output:a,context:o,type:i='NumberTexture'}=e;if(!a)throw new Error('settings property "output" required.');if(!o)throw new Error('settings property "context" required.');this.texture=t,this.size=n,this.dimensions=r,this.output=a,this.context=o,this.kernel=null,this.type=i}toArray(){throw new Error(`Not implemented on ${this.constructor.name}`)}delete(){return this.context.deleteTexture(this.texture)}}}},"./node_modules/gpu.js/src/utils.js":/*!******************************************!*\
  !*** ./node_modules/gpu.js/src/utils.js ***!
  \******************************************//*! no static exports found */function(e,t,n){var r=Math.ceil,a=Math.floor;const o=n(/*! acorn */'./node_modules/acorn/dist/acorn.es.js'),{Input:i}=n(/*! ./input */'./node_modules/gpu.js/src/input.js'),{Texture:s}=n(/*! ./texture */'./node_modules/gpu.js/src/texture.js'),l=/function ([^(]*)/,d=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,c=/([^\s,]+)/g,u={systemEndianness(){return p},getSystemEndianness(){const e=new ArrayBuffer(4),t=new Uint32Array(e),n=new Uint8Array(e);if(t[0]=3735928559,239===n[0])return'LE';if(222===n[0])return'BE';throw new Error('unknown endianness')},isFunction(e){return'function'==typeof e},isFunctionString(e){return'string'==typeof e&&'function'===e.slice(0,8).toLowerCase()},getFunctionNameFromString(e){return l.exec(e)[1].trim()},getFunctionBodyFromString(e){return e.substring(e.indexOf('{')+1,e.lastIndexOf('}'))},getArgumentNamesFromString(e){const t=e.replace(d,'');let n=t.slice(t.indexOf('(')+1,t.indexOf(')')).match(c);return null===n&&(n=[]),n},clone(e){if(null===e||'object'!=typeof e||e.hasOwnProperty('isActiveClone'))return e;const t=e.constructor();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e.isActiveClone=null,t[n]=u.clone(e[n]),delete e.isActiveClone);return t},isArray(e){return!isNaN(e.length)},getVariableType(e,t){if(u.isArray(e))return'IMG'===e[0].nodeName?'HTMLImageArray':'Array';switch(e.constructor){case Boolean:return'Boolean';case Number:return t&&Number.isInteger(e)?'Integer':'Float';case s:return e.type;case i:return'Input';}return'IMG'===e.nodeName?'HTMLImage':e.hasOwnProperty('type')?e.type:'Unknown'},getKernelTextureSize(e,t){let[n,a,o]=t,i=(n||1)*(a||1)*(o||1);return e.optimizeFloatMemory&&'single'===e.precision&&(n=i=r(i/4)),1<a&&n*a===i?new Int32Array([n,a]):u.closestSquareDimensions(i)},closestSquareDimensions(e){const t=Math.sqrt(e);let n=r(t),o=a(t);for(;n*o<e;)n--,o=r(e/n);return new Int32Array([o,r(e/o)])},getMemoryOptimizedFloatTextureSize(e,t){const[n,r,a]=e,o=u.roundTo((n||1)*(r||1)*(a||1),4);return u.closestSquareDimensions(o/t)},getMemoryOptimizedPackedTextureSize(e,t){const[n,r,a]=e,o=u.roundTo((n||1)*(r||1)*(a||1),4);return u.closestSquareDimensions(o/(4/t))},roundTo(e,t){return a((e+t-1)/t)*t},getDimensions(e,t){let n;if(u.isArray(e)){const t=[];for(let n=e;u.isArray(n);)t.push(n.length),n=n[0];n=t.reverse()}else if(e instanceof s)n=e.output;else if(e instanceof i)n=e.size;else throw new Error(`Unknown dimensions of ${e}`);if(t)for(n=Array.from(n);3>n.length;)n.push(1);return new Int32Array(n)},flatten2dArrayTo(e,t){let n=0;for(let r=0;r<e.length;r++)t.set(e[r],n),n+=e[r].length},flatten3dArrayTo(e,t){let n=0;for(let r=0;r<e.length;r++)for(let a=0;a<e[r].length;a++)t.set(e[r][a],n),n+=e[r][a].length},flattenTo(e,t){u.isArray(e[0])?u.isArray(e[0][0])?u.flatten3dArrayTo(e,t):u.flatten2dArrayTo(e,t):t.set(e)},splitArray(e,t){const n=[];for(let r=0;r<e.length;r+=t)n.push(new e.constructor(e.buffer,4*r+e.byteOffset,t));return n},getAstString(e,t){const n=Array.isArray(e)?e:e.split(/\r?\n/g),r=t.loc.start,a=t.loc.end,o=[];if(r.line===a.line)o.push(n[r.line-1].substring(r.column,a.column));else{o.push(n[r.line-1].slice(r.column));for(let e=r.line;e<a.line;e++)o.push(n[e]);o.push(n[a.line-1].slice(0,a.column))}return o.join('\n')},allPropertiesOf(e){const t=[];do t.push.apply(t,Object.getOwnPropertyNames(e));while(e=Object.getPrototypeOf(e));return t},linesToString(e){return 0<e.length?e.join(';\n')+';\n':'\n'},warnDeprecated(e,t,n){n?console.warn(`You are using a deprecated ${e} "${t}". It has been replaced with "${n}". Fixing, but please upgrade as it will soon be removed.`):console.warn(`You are using a deprecated ${e} "${t}". It has been removed. Fixing, but please upgrade as it will soon be removed.`)},functionToIFunction(e,t){if(t=t||{},'string'!=typeof e&&'function'!=typeof e)throw new Error('source not a string or function');const n='string'==typeof e?e:e.toString();let r=[];return r=Array.isArray(t.argumentTypes)?t.argumentTypes:'object'==typeof t.argumentTypes?u.getArgumentNamesFromString(n).map((e)=>t.argumentTypes[e])||[]:t.argumentTypes||[],{source:n,argumentTypes:r,returnType:t.returnType||null}},flipPixels:(e,t,n)=>{const r=4*t,a=new Uint8ClampedArray(4*t),o=e.slice(0);for(let i=0;i<(0|n/2);++i){const e=i*r,t=(n-i-1)*r;a.set(o.subarray(e,e+r)),o.copyWithin(e,t,t+r),o.set(a,t)}return o},erectPackedFloat:(e,t)=>e.subarray(0,t),erect2DPackedFloat:(e,t,n)=>{const r=Array(n);for(let a=0;a<n;a++){const n=a*t;r[a]=e.subarray(n,n+t)}return r},erect3DPackedFloat:(e,t,n,r)=>{const a=Array(r);for(let o=0;o<r;o++){const r=Array(n);for(let a=0;a<n;a++){const i=o*n*t+a*t;r[a]=e.subarray(i,i+t)}a[o]=r}return a},erectMemoryOptimizedFloat:(e,t)=>e.subarray(0,t),erectMemoryOptimized2DFloat:(e,t,n)=>{const r=Array(n);for(let a=0;a<n;a++){const n=a*t;r[a]=e.subarray(n,n+t)}return r},erectMemoryOptimized3DFloat:(e,t,n,r)=>{const a=Array(r);for(let o=0;o<r;o++){const r=Array(n);for(let a=0;a<n;a++){const i=o*n*t+a*t;r[a]=e.subarray(i,i+t)}a[o]=r}return a},erectFloat:(e,t)=>{const n=new Float32Array(t);let r=0;for(let a=0;a<t;a++)n[a]=e[r],r+=4;return n},erect2DFloat:(e,t,n)=>{const r=Array(n);let a=0;for(let o=0;o<n;o++){const n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e[a],a+=4;r[o]=n}return r},erect3DFloat:(e,t,n,r)=>{const a=Array(r);let o=0;for(let i=0;i<r;i++){const r=Array(n);for(let a=0;a<n;a++){const n=new Float32Array(t);for(let r=0;r<t;r++)n[r]=e[o],o+=4;r[a]=n}a[i]=r}return a},erectArray2:(e,t)=>{const n=Array(t);let r=0;for(let a=0;a<4*t;a+=4)n[r++]=e.subarray(a,a+2);return n},erect2DArray2:(e,t,n)=>{const r=Array(n),a=4*t;for(let o=0;o<n;o++){const n=Array(t),s=o*a;let l=0;for(let t=0;t<a;t+=4)n[l++]=e.subarray(t+s,t+s+2);r[o]=n}return r},erect3DArray2:(e,t,n,r)=>{const a=4*t,o=Array(r);for(let s=0;s<r;s++){const r=Array(n);for(let o=0;o<n;o++){const l=Array(t),d=s*a*n+o*a;let c=0;for(let t=0;t<a;t+=4)l[c++]=e.subarray(t+d,t+d+2);r[o]=l}o[s]=r}return o},erectArray3:(e,t)=>{const n=Array(t);let r=0;for(let a=0;a<4*t;a+=4)n[r++]=e.subarray(a,a+3);return n},erect2DArray3:(e,t,n)=>{const r=4*t,a=Array(n);for(let o=0;o<n;o++){const n=Array(t),s=o*r;let l=0;for(let t=0;t<r;t+=4)n[l++]=e.subarray(t+s,t+s+3);a[o]=n}return a},erect3DArray3:(e,t,n,r)=>{const a=4*t,o=Array(r);for(let s=0;s<r;s++){const r=Array(n);for(let o=0;o<n;o++){const l=Array(t),d=s*a*n+o*a;let c=0;for(let t=0;t<a;t+=4)l[c++]=e.subarray(t+d,t+d+3);r[o]=l}o[s]=r}return o},erectArray4:(e,t)=>{const n=Array(e);let r=0;for(let a=0;a<4*t;a+=4)n[r++]=e.subarray(a,a+4);return n},erect2DArray4:(e,t,n)=>{const r=4*t,a=Array(n);for(let o=0;o<n;o++){const n=Array(t),s=o*r;let l=0;for(let t=0;t<r;t+=4)n[l++]=e.subarray(t+s,t+s+4);a[o]=n}return a},erect3DArray4:(e,t,n,r)=>{const a=4*t,o=Array(r);for(let s=0;s<r;s++){const r=Array(n);for(let o=0;o<n;o++){const l=Array(t),d=s*a*n+o*a;let c=0;for(let t=0;t<a;t+=4)l[c++]=e.subarray(t+d,t+d+4);r[o]=l}o[s]=r}return o},flattenFunctionToString:(e,t)=>{function flatten(e){if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(flatten(e[n]));return t.join('')}switch(e.type){case'Program':return flatten(e.body);case'FunctionDeclaration':return`function ${e.id.name}(${e.params.map(flatten).join(', ')}) ${flatten(e.body)}`;case'BlockStatement':{const t=[];for(let n=0;n<e.body.length;n++)t.push(flatten(e.body[n]),';\n');return`{\n${t.join('')}}`}case'VariableDeclaration':switch(e.declarations[0].id.type){case'ObjectPattern':{const t=flatten(e.declarations[0].init),n=e.declarations.map((e)=>e.id.properties.map(flatten))[0];if(/this/.test(t)){const t=[],a=n.map(r);for(let r=0;r<a.length;r++){const o=a[r];if(null===o)continue;const i=n[r];t.push(`${e.kind} ${i} = ${o};\n`)}return t.join('')}return`${e.kind} { ${n} } = ${t}`}case'ArrayPattern':return`${e.kind} [ ${e.declarations.map((e)=>flatten(e.id)).join(', ')} ] = ${flatten(e.declarations[0].init)}`;}return a&&-1!==a.indexOf(e.declarations[0].id.name)?'':`${e.kind} ${e.declarations[0].id.name} = ${flatten(e.declarations[0].init)}`;case'CallExpression':{if('subarray'===e.callee.property.name)return`${flatten(e.callee.object)}.${flatten(e.callee.property)}(${e.arguments.map((e)=>flatten(e)).join(', ')})`;if('gl'===e.callee.object.name||'context'===e.callee.object.name)return`${flatten(e.callee.object)}.${flatten(e.callee.property)}(${e.arguments.map((e)=>flatten(e)).join(', ')})`;if('ThisExpression'===e.callee.object.type)return l.push(n('this',e.callee.property.name)),`${e.callee.property.name}(${e.arguments.map((e)=>flatten(e)).join(', ')})`;if(e.callee.object.name){const t=n(e.callee.object.name,e.callee.property.name);return null===t?`${e.callee.object.name}.${e.callee.property.name}(${e.arguments.map((e)=>flatten(e)).join(', ')})`:(l.push(t),`${e.callee.property.name}(${e.arguments.map((e)=>flatten(e)).join(', ')})`)}if('MemberExpression'===e.callee.object.type)return`${flatten(e.callee.object)}.${e.callee.property.name}(${e.arguments.map((e)=>flatten(e)).join(', ')})`;throw new Error('unknown ast.callee')}case'ReturnStatement':return`return ${flatten(e.argument)}`;case'BinaryExpression':return`(${flatten(e.left)}${e.operator}${flatten(e.right)})`;case'UnaryExpression':return e.prefix?`${e.operator} ${flatten(e.argument)}`:`${flatten(e.argument)} ${e.operator}`;case'ExpressionStatement':return`(${flatten(e.expression)})`;case'ArrowFunctionExpression':return`(${e.params.map(flatten).join(', ')}) => ${flatten(e.body)}`;case'Literal':return e.raw;case'Identifier':return e.name;case'MemberExpression':return'ThisExpression'===e.object.type?r(e.property.name):e.computed?`${flatten(e.object)}[${flatten(e.property)}]`:flatten(e.object)+'.'+flatten(e.property);case'ThisExpression':return'this';case'NewExpression':return`new ${flatten(e.callee)}(${e.arguments.map((e)=>flatten(e)).join(', ')})`;case'ForStatement':return`for (${flatten(e.init)};${flatten(e.test)};${flatten(e.update)}) ${flatten(e.body)}`;case'AssignmentExpression':return`${flatten(e.left)}${e.operator}${flatten(e.right)}`;case'UpdateExpression':return`${flatten(e.argument)}${e.operator}`;case'IfStatement':return`if (${flatten(e.test)}) ${flatten(e.consequent)}`;case'ThrowStatement':return`throw ${flatten(e.argument)}`;case'ObjectPattern':return e.properties.map(flatten).join(', ');case'ArrayPattern':return e.elements.map(flatten).join(', ');case'DebuggerStatement':return'debugger;';case'ConditionalExpression':return`${flatten(e.test)}?${flatten(e.consequent)}:${flatten(e.alternate)}`;case'Property':if('init'===e.kind)return flatten(e.key);}throw new Error(`unhandled ast.type of ${e.type}`)}const{findDependency:n,thisLookup:r,doNotDefine:a}=t;let s=t.flattened;s||(s=t.flattened={});const i=o.parse(e),l=[],d=flatten(i);if(0<l.length){const e=[];for(let n=0;n<l.length;n++){const r=l[n];s[r]||(s[r]=!0),e.push(u.flattenFunctionToString(r,t)+';\n')}return e.join('')+d}return d}},p=u.getSystemEndianness();e.exports={utils:u}},"./node_modules/spectorjs/dist/spector.bundle.js":/*!*******************************************************!*\
  !*** ./node_modules/spectorjs/dist/spector.bundle.js ***!
  \*******************************************************//*! no static exports found */function(n){var d=Number.MAX_VALUE,y=Math.ceil,a=Math.sqrt,m=Math.pow,g=Math.abs,x=Math.max,b=Math.min,T=Math.floor,S=Math.round;!function(r,e){n.exports=e()}(window,function(){return function(a){function n(t){if(e[t])return e[t].exports;var o=e[t]={i:t,l:!1,exports:{}};return a[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=a,n.c=e,n.d=function(r,e,t){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},n.r=function(t){'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})},n.t=function(a,o){if(1&o&&(a=n(a)),8&o)return a;if(4&o&&'object'==typeof a&&a&&a.__esModule)return a;var t=Object.create(null);if(n.r(t),Object.defineProperty(t,'default',{enumerable:!0,value:a}),2&o&&'string'!=typeof a)for(var i in a)n.d(t,i,function(e){return a[e]}.bind(null,i));return t},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,'a',e),e},n.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},n.p='/',n(n.s=3)}([function(t){'use strict';t.exports=function(r){var a=[];return a.toString=function(){return this.map(function(e){var t=function(a,e){var t=a[1]||'',n=a[3];if(!n)return t;if(e&&'function'==typeof btoa){var l=(o=n,'/*# sourceMappingURL=data:application/json;charset=utf-8;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+' */'),r=n.sources.map(function(t){return'/*# sourceURL='+n.sourceRoot+t+' */'});return[t].concat(r).concat([l]).join('\n')}var o;return[t].join('\n')}(e,r);return e[2]?'@media '+e[2]+'{'+t+'}':t}).join('')},a.i=function(t,l){'string'==typeof t&&(t=[[null,t,'']]);for(var n={},i=0,r;i<this.length;i++)r=this[i][0],null!=r&&(n[r]=!0);for(i=0;i<t.length;i++){var o=t[i];null!=o[0]&&n[o[0]]||(l&&!o[2]?o[2]=l:l&&(o[2]='('+o[2]+') and ('+l+')'),a.push(o))}},a}},function(y,e,t){function d(o,e){for(var t=0;t<o.length;t++){var n=o[t],i=x[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(A(n.parts[r],e))}else{var s=[];for(r=0;r<n.parts.length;r++)s.push(A(n.parts[r],e));x[n.id]={id:n.id,refs:1,parts:s}}}}function p(l,e){for(var t=[],n={},i=0;i<l.length;i++){var r=l[i],o=e.base?r[0]+e.base:r[0],d={css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(d):t.push(n[o]={id:o,parts:[d]})}return t}function m(a,e){var t=s(a.insertInto);if(!t)throw new Error('Couldn\'t find a style target. This probably means that the value for the \'insertInto\' parameter is invalid.');var o=l[l.length-1];if('top'===a.insertAt)o?o.nextSibling?t.insertBefore(e,o.nextSibling):t.appendChild(e):t.insertBefore(e,t.firstChild),l.push(e);else if('bottom'===a.insertAt)t.appendChild(e);else{if('object'!=typeof a.insertAt||!a.insertAt.before)throw new Error('[Style Loader]\n\n Invalid value for parameter \'insertAt\' (\'options.insertAt\') found.\n Must be \'top\', \'bottom\', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n');var i=s(a.insertAt.before,t);t.insertBefore(e,i)}}function f(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n);var e=l.indexOf(n);0<=e&&l.splice(e,1)}function g(n){var e=document.createElement('style');if(void 0===n.attrs.type&&(n.attrs.type='text/css'),void 0===n.attrs.nonce){var r=function(){return 0,t.nc}();r&&(n.attrs.nonce=r)}return E(e,n.attrs),m(n,e),e}function E(r,e){Object.keys(e).forEach(function(t){r.setAttribute(t,e[t])})}function A(l,e){var t,n,i,r;if(e.transform&&l.css){if(!(r='function'==typeof e.transform?e.transform(l.css):e.transform.default(l.css)))return function(){};l.css=r}if(e.singleton){var o=c++;t=a||(a=g(e)),n=_.bind(null,t,o,!1),i=_.bind(null,t,o,!0)}else l.sourceMap&&'function'==typeof URL&&'function'==typeof URL.createObjectURL&&'function'==typeof URL.revokeObjectURL&&'function'==typeof Blob&&'function'==typeof btoa?(t=function(n){var e=document.createElement('link');return void 0===n.attrs.type&&(n.attrs.type='text/css'),n.attrs.rel='stylesheet',E(e,n.attrs),m(n,e),e}(e),n=function(l,e,t){var n=t.css,i=t.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(n=u(n)),i&&(n+='\n/*# sourceMappingURL=data:application/json;base64,'+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+' */');var o=new Blob([n],{type:'text/css'}),s=l.href;l.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}.bind(null,t,e),i=function(){f(t),t.href&&URL.revokeObjectURL(t.href)}):(t=g(e),n=function(r,e){var t=e.css,n=e.media;if(n&&r.setAttribute('media',n),r.styleSheet)r.styleSheet.cssText=t;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(t))}}.bind(null,t),i=function(){f(t)});return n(l),function(e){if(e){if(e.css===l.css&&e.media===l.media&&e.sourceMap===l.sourceMap)return;n(l=e)}else i()}}function _(a,e,t,n){var i=t?'':n.css;if(a.styleSheet)a.styleSheet.cssText=h(e,i);else{var r=document.createTextNode(i),o=a.childNodes;o[e]&&a.removeChild(o[e]),o.length?a.insertBefore(r,o[e]):a.appendChild(r)}}var x={},o=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(){var r={};return function(t,a){if('function'==typeof t)return t();if(void 0===r[t]){var n=function(n,e){return e?e.querySelector(n):document.querySelector(n)}.call(this,t,a);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}r[t]=n}return r[t]}}(),a=null,c=0,l=[],u=t(6),n,i;y.exports=function(r,s){if('undefined'!=typeof DEBUG&&DEBUG&&'object'!=typeof document)throw new Error('The style-loader cannot be used in a non-browser environment');(s=s||{}).attrs='object'==typeof s.attrs?s.attrs:{},s.singleton||'boolean'==typeof s.singleton||(s.singleton=o()),s.insertInto||(s.insertInto='head'),s.insertAt||(s.insertAt='bottom');var e=p(r,s);return d(e,s),function(t){for(var n=[],o=0,r;o<e.length;o++)r=e[o],(i=x[r.id]).refs--,n.push(i);for(t&&d(p(t,s),s),o=0;o<n.length;o++){var i;if(0===(i=n[o]).refs){for(var a=0;a<i.parts.length;a++)i.parts[a]();delete x[i.id]}}}};var h=(r=[],function(n,e){return r[n]=e,r.filter(Boolean).join('\n')}),r},function(t){t.exports=function(){throw new Error('define cannot be used indirect')}},function(r,e,t){t(4),t(7),t(9),r.exports=t(14)},function(a,e,t){var n=t(5);'string'==typeof n&&(n=[[a.i,n,'']]);var o={insertInto:('html','html'),hmr:!0,transform:void 0};t(1)(n,o),n.locals&&(a.exports=n.locals)},function(r,e,t){(r.exports=t(0)(!1)).push([r.i,'/* http://prismjs.com/download.html?themes=prism-okaidia&languages=markup+css+clike+javascript+glsl */\r\n/**\r\n * okaidia theme for JavaScript, CSS and HTML\r\n * Loosely based on Monokai textmate theme by http://www.monokai.nl/\r\n * @author ocodia\r\n */\r\n\r\ncode[class*="language-"],\r\npre[class*="language-"] {\r\n\tcolor: #f8f8f2;\r\n\tbackground: none;\r\n\ttext-shadow: 0 1px rgba(0, 0, 0, 0.3);\r\n\tfont-family: Consolas, Monaco, \'Andale Mono\', \'Ubuntu Mono\', monospace;\r\n\ttext-align: left;\r\n\twhite-space: pre;\r\n\tword-spacing: normal;\r\n\tword-break: normal;\r\n\tword-wrap: normal;\r\n\tline-height: 1.5;\r\n\r\n\t-moz-tab-size: 4;\r\n\t-o-tab-size: 4;\r\n\ttab-size: 4;\r\n\r\n\t-webkit-hyphens: none;\r\n\t-moz-hyphens: none;\r\n\t-ms-hyphens: none;\r\n\thyphens: none;\r\n}\r\n\r\n/* Code blocks */\r\npre[class*="language-"] {\r\n\tpadding: 1em;\r\n\tmargin: .5em 0;\r\n\toverflow: auto;\r\n\tborder-radius: 0.3em;\r\n}\r\n\r\n/*:not(pre) > code[class*="language-"],\r\npre[class*="language-"] {\r\n\tbackground: #272822;\r\n}*/\r\n\r\n/* Inline code */\r\n:not(pre) > code[class*="language-"] {\r\n\tpadding: .1em;\r\n\tborder-radius: .3em;\r\n\twhite-space: normal;\r\n}\r\n\r\n.token.comment,\r\n.token.prolog,\r\n.token.doctype,\r\n.token.cdata {\r\n\tcolor: slategray;\r\n}\r\n\r\n.token.punctuation {\r\n\tcolor: #f8f8f2;\r\n}\r\n\r\n.namespace {\r\n\topacity: .7;\r\n}\r\n\r\n.token.property,\r\n.token.tag,\r\n.token.constant,\r\n.token.symbol,\r\n.token.deleted {\r\n\tcolor: #f92672;\r\n}\r\n\r\n.token.boolean,\r\n.token.number {\r\n\tcolor: #ae81ff;\r\n}\r\n\r\n.token.selector,\r\n.token.attr-name,\r\n.token.string,\r\n.token.char,\r\n.token.builtin,\r\n.token.inserted {\r\n\tcolor: #a6e22e;\r\n}\r\n\r\n.token.operator,\r\n.token.entity,\r\n.token.url,\r\n.language-css .token.string,\r\n.style .token.string,\r\n.token.variable {\r\n\tcolor: #f8f8f2;\r\n}\r\n\r\n.token.atrule,\r\n.token.attr-value,\r\n.token.function {\r\n\tcolor: #e6db74;\r\n}\r\n\r\n.token.keyword {\r\n\tcolor: #66d9ef;\r\n}\r\n\r\n.token.regex,\r\n.token.important {\r\n\tcolor: #fd971f;\r\n}\r\n\r\n.token.important,\r\n.token.bold {\r\n\tfont-weight: bold;\r\n}\r\n.token.italic {\r\n\tfont-style: italic;\r\n}\r\n\r\n.token.entity {\r\n\tcursor: help;\r\n}\r\n\r\n',''])},function(t){t.exports=function(r){var a='undefined'!=typeof window&&window.location;if(!a)throw new Error('fixUrls requires window.location');if(!r||'string'!=typeof r)return r;var s=a.protocol+'//'+a.host,n=s+a.pathname.replace(/\/[^\/]*$/,'/');return r.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(a,e){var t=e.trim().replace(/^"(.*)"$/,function(n,e){return e}).replace(/^'(.*)'$/,function(n,e){return e}),o;return /^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(t)?a:(o=0===t.indexOf('//')?t:0===t.indexOf('/')?s+t:n+t.replace(/^\.\//,''),'url('+JSON.stringify(o)+')')})}},function(r,e,t){(function(e){var d='undefined'==typeof window?'undefined'!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{}:window,t=function(){var n=/\blang(?:uage)?-(\w+)\b/i,a=0,L=d.Prism={manual:d.Prism&&d.Prism.manual,util:{encode:function(t){return t instanceof i?new i(t.type,L.util.encode(t.content),t.alias):'Array'===L.util.type(t)?t.map(L.util.encode):t.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/\u00a0/g,' ')},type:function(t){return Object.prototype.toString.call(t).match(/\[object (\w+)\]/)[1]},objId:function(t){return t.__id||Object.defineProperty(t,'__id',{value:++a}),t.__id},clone:function(r){switch(L.util.type(r)){case'Object':var e={};for(var t in r)r.hasOwnProperty(t)&&(e[t]=L.util.clone(r[t]));return e;case'Array':return r.map&&r.map(function(t){return L.util.clone(t)});}return r}},languages:{extend:function(a,e){var t=L.util.clone(L.languages[a]);for(var n in e)t[n]=e[n];return t},insertBefore:function(i,e,t,l){var n=(l=l||L.languages)[i];if(2==arguments.length){for(var r in t=arguments[1])t.hasOwnProperty(r)&&(n[r]=t[r]);return n}var o={};for(var a in n)if(n.hasOwnProperty(a)){if(a==e)for(var r in t)t.hasOwnProperty(r)&&(o[r]=t[r]);o[a]=n[a]}return L.languages.DFS(L.languages,function(e,t){t===l[i]&&e!=i&&(this[e]=o)}),l[i]=o},DFS:function(a,e,t,n){for(var r in n=n||{},a)a.hasOwnProperty(r)&&(e.call(a,r,a[r],t||r),'Object'!==L.util.type(a[r])||n[L.util.objId(a[r])]?'Array'!==L.util.type(a[r])||n[L.util.objId(a[r])]||(n[L.util.objId(a[r])]=!0,L.languages.DFS(a[r],e,r,n)):(n[L.util.objId(a[r])]=!0,L.languages.DFS(a[r],e,null,n)))}},plugins:{},highlightAll:function(a,e){var i={callback:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};L.hooks.run('before-highlightall',i);for(var n=i.elements||document.querySelectorAll(i.selector),o=0,s;s=n[o++];)L.highlightElement(s,!0===a,i.callback)},highlightElement:function(e,i,r){for(var o=e,c,p;o&&!n.test(o.className);)o=o.parentNode;o&&(c=(o.className.match(n)||[,''])[1].toLowerCase(),p=L.languages[c]),e.className=e.className.replace(n,'').replace(/\s+/g,' ')+' language-'+c,o=e.parentNode,/pre/i.test(o.nodeName)&&(o.className=o.className.replace(n,'').replace(/\s+/g,' ')+' language-'+c);var m={element:e,language:c,grammar:p,code:e.textContent};if(L.hooks.run('before-sanity-check',m),!m.code||!m.grammar)return m.code&&(m.element.textContent=m.code),void L.hooks.run('complete',m);if(L.hooks.run('before-highlight',m),i&&d.Worker){var l=new Worker(L.filename);l.onmessage=function(t){m.highlightedCode=t.data,L.hooks.run('before-insert',m),m.element.innerHTML=m.highlightedCode,r&&r.call(m.element),L.hooks.run('after-highlight',m),L.hooks.run('complete',m)},l.postMessage(JSON.stringify({language:m.language,code:m.code,immediateClose:!0}))}else m.highlightedCode=L.highlight(m.code,m.grammar,m.language),L.hooks.run('before-insert',m),m.element.innerHTML=m.highlightedCode,r&&r.call(e),L.hooks.run('after-highlight',m),L.hooks.run('complete',m)},highlight:function(r,e,t){var n=L.tokenize(r,e);return i.stringify(L.util.encode(n),t)},tokenize:function(i,e){var t=L.Token,n=[i],r=e.rest;if(r){for(var o in r)e[o]=r[o];delete e.rest}e:for(var o in e)if(e.hasOwnProperty(o)&&e[o]){var s=e[o];s='Array'===L.util.type(s)?s:[s];for(var a=0;a<s.length;++a){var c=s[a],l=c.inside,u=!!c.lookbehind,h=!!c.greedy,d=0,p=c.alias;if(h&&!c.pattern.global){var m=c.pattern.toString().match(/[imuy]*$/)[0];c.pattern=RegExp(c.pattern.source,m+'g')}c=c.pattern||c;for(var f=0,g=0,E;f<n.length;g+=n[f].length,++f){if(E=n[f],n.length>i.length)break e;if(!(E instanceof t)){c.lastIndex=0;var A=1;if(!(w=c.exec(E))&&h&&f!=n.length-1){if(c.lastIndex=g,!(w=c.exec(i)))break;for(var C=w.index+(u?w[1].length:0),v=w.index+w[0].length,_=f,F=g,S=n.length;S>_&&v>F;++_)C>=(F+=n[_].length)&&(++f,g=F);if(n[f]instanceof t||n[_-1].greedy)continue;A=_-f,E=i.slice(g,F),w.index-=g}if(w){u&&(d=w[1].length),v=(C=w.index+d)+(w=w[0].slice(d)).length;var y=E.slice(0,C),b=E.slice(v),T=[f,A],w;y&&T.push(y);var R=new t(o,l?L.tokenize(w,l):w,p,w,h);T.push(R),b&&T.push(b),Array.prototype.splice.apply(n,T)}}}}}return n},hooks:{all:{},add:function(r,e){var t=L.hooks.all;t[r]=t[r]||[],t[r].push(e)},run:function(a,e){var t=L.hooks.all[a];if(t&&t.length)for(var n=0,o;o=t[n++];)o(e)}}},i=L.Token=function(a,e,t,n,o){this.type=a,this.content=e,this.alias=t,this.length=0|(n||'').length,this.greedy=!!o};if(i.stringify=function(r,l,d){if('string'==typeof r)return r;if('Array'===L.util.type(r))return r.map(function(e){return i.stringify(e,l,r)}).join('');var c={type:r.type,content:i.stringify(r.content,l,d),tag:'span',classes:['token',r.type],attributes:{},language:l,parent:d};if('comment'==c.type&&(c.attributes.spellcheck='true'),r.alias){var o='Array'===L.util.type(r.alias)?r.alias:[r.alias];Array.prototype.push.apply(c.classes,o)}L.hooks.run('wrap',c);var s=Object.keys(c.attributes).map(function(t){return t+'="'+(c.attributes[t]||'').replace(/"/g,'&quot;')+'"'}).join(' ');return'<'+c.tag+' class="'+c.classes.join(' ')+'"'+(s?' '+s:'')+'>'+c.content+'</'+c.tag+'>'},!d.document)return d.addEventListener?(d.addEventListener('message',function(n){var e=JSON.parse(n.data),t=e.language,r=e.code,a=e.immediateClose;d.postMessage(L.highlight(r,L.languages[t],t)),a&&d.close()},!1),d.Prism):d.Prism;var e=document.currentScript||[].slice.call(document.getElementsByTagName('script')).pop();return e&&(L.filename=e.src,!document.addEventListener||L.manual||e.hasAttribute('data-manual')||('loading'===document.readyState?document.addEventListener('DOMContentLoaded',L.highlightAll):window.requestAnimationFrame?window.requestAnimationFrame(L.highlightAll):window.setTimeout(L.highlightAll,16))),d.Prism}();r.exports&&(r.exports=t),void 0!==e&&(e.Prism=t),t.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/i,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},t.hooks.add('wrap',function(t){'entity'===t.type&&(t.attributes.title=t.content.replace(/&amp;/,'&'))}),t.languages.xml=t.languages.markup,t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:{pattern:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,greedy:!0},property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,function:/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},t.languages.css.atrule.inside.rest=t.util.clone(t.languages.css),t.languages.markup&&(t.languages.insertBefore('markup','tag',{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:t.languages.css,alias:'language-css'}}),t.languages.insertBefore('inside','attr-value',{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:t.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:t.languages.css}},alias:'language-css'}},t.languages.markup.tag)),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(true|false)\b/,function:/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend('clike',{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,function:/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*\*?|\/|~|\^|%|\.{3}/}),t.languages.insertBefore('javascript','keyword',{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),t.languages.insertBefore('javascript','string',{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:'punctuation'},rest:t.languages.javascript}},string:/[\s\S]+/}}}),t.languages.markup&&t.languages.insertBefore('markup','tag',{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:t.languages.javascript,alias:'language-javascript'}}),t.languages.js=t.languages.javascript,t.languages.glsl=t.languages.extend('clike',{comment:[/\/\*[\w\W]*?\*\//,/\/\/(?:\\(?:\r\n|[\s\S])|.)*/],number:/\b(?:0x[\da-f]+|(?:\.\d+|\d+\.?\d*)(?:e[+-]?\d+)?)[ulf]*\b/i,keyword:/\b(?:attribute|const|uniform|varying|buffer|shared|coherent|volatile|restrict|readonly|writeonly|atomic_uint|layout|centroid|flat|smooth|noperspective|patch|sample|break|continue|do|for|while|switch|case|default|if|else|subroutine|in|out|inout|float|double|int|void|bool|true|false|invariant|precise|discard|return|d?mat[234](?:x[234])?|[ibdu]?vec[234]|uint|lowp|mediump|highp|precision|[iu]?sampler[123]D|[iu]?samplerCube|sampler[12]DShadow|samplerCubeShadow|[iu]?sampler[12]DArray|sampler[12]DArrayShadow|[iu]?sampler2DRect|sampler2DRectShadow|[iu]?samplerBuffer|[iu]?sampler2DMS(?:Array)?|[iu]?samplerCubeArray|samplerCubeArrayShadow|[iu]?image[123]D|[iu]?image2DRect|[iu]?imageCube|[iu]?imageBuffer|[iu]?image[12]DArray|[iu]?imageCubeArray|[iu]?image2DMS(?:Array)?|struct|common|partition|active|asm|class|union|enum|typedef|template|this|resource|goto|inline|noinline|public|static|extern|external|interface|long|short|half|fixed|unsigned|superp|input|output|hvec[234]|fvec[234]|sampler3DRect|filter|sizeof|cast|namespace|using)\b/}),t.languages.insertBefore('glsl','comment',{preprocessor:{pattern:/(^[ \t]*)#(?:(?:define|undef|if|ifdef|ifndef|else|elif|endif|error|pragma|extension|version|line)\b)?/m,lookbehind:!0,alias:'builtin'}}),r.exports=t}).call(this,t(8))},function(t){var e=function(){return this}();try{e=e||new Function('return this')()}catch(t){'object'==typeof window&&(e=window)}t.exports=e},function(r,e,_){var t=String.prototype;!function(){var l=function(){return this}();l||'undefined'==typeof window||(l=window);var d=function(t,r,n){'string'==typeof t?(2==arguments.length&&(n=r),d.modules[t]||(d.payloads[t]=n,d.modules[t]=null)):d.original?d.original.apply(this,arguments):(console.error('dropping module because define wasn\'t a string.'),console.trace())};d.modules={},d.payloads={};var c=function(a,e,d){if('string'==typeof e){var n=o(a,e);if(null!=n)return d&&d(),n}else if('[object Array]'===Object.prototype.toString.call(e)){for(var i=[],r=0,s=e.length,c;r<s;++r){if(c=o(a,e[r]),null==c&&u.original)return;i.push(c)}return d&&d.apply(null,i)||!0}},u=function(r,e){var t=c('',r,e);return null==t&&u.original?u.original.apply(this,arguments):t},r=function(a,e){if(-1!==e.indexOf('!')){var t=e.split('!');return r(a,t[0])+'!'+r(a,t[1])}if('.'==e.charAt(0))for(e=a.split('/').slice(0,-1).join('/')+'/'+e;-1!==e.indexOf('.')&&n!=e;){var n=e;e=e.replace(/\/\.\//,'/').replace(/[^\/]+\/\.\.\//,'')}return e},o=function(t,s){s=r(t,s);var e=d.modules[s];if(!e){if('function'==typeof(e=d.payloads[s])){var l={},u={id:s,uri:'',exports:l,packaged:!0};l=e(function(n,e){return c(s,n,e)},l,u)||u.exports,d.modules[s]=l,delete d.payloads[s]}e=d.modules[s]=l||e}return e},e,t;t=l,(e='ace')&&(l[e]||(l[e]={}),t=l[e]),t.define&&t.define.packaged||(d.original=t.define,t.define=d,t.define.packaged=!0),t.require&&t.require.packaged||(u.original=t.require,t.require=u,t.require.packaged=!0)}(),ace.define('ace/lib/regexp',['require','exports','module'],function(){'use strict';var l={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:t.match,replace:t.replace,split:t.split},r=void 0===l.exec.call(/()??/,'')[1],d=(e=/^/g,l.test.call(e,''),!e.lastIndex),e;d&&r||(RegExp.prototype.exec=function(u){var p=l.exec.apply(this,arguments),a,t,n;if('string'==typeof u&&p){if(!r&&1<p.length&&-1<function(r,e,t){if(Array.prototype.indexOf)return r.indexOf(e,t);for(var n=t||0;n<r.length;n++)if(r[n]===e)return n;return-1}(p,'')&&(t=RegExp(this.source,l.replace.call(((n=this).global?'g':'')+(n.ignoreCase?'i':'')+(n.multiline?'m':'')+(n.extended?'x':'')+(n.sticky?'y':''),'g','')),l.replace.call(u.slice(p.index),t,function(){for(var t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(p[t]=void 0)})),this._xregexp&&this._xregexp.captureNames)for(var i=1;i<p.length;i++)(a=this._xregexp.captureNames[i-1])&&(p[a]=p[i]);!d&&this.global&&!p[0].length&&this.lastIndex>p.index&&this.lastIndex--}return p},d||(RegExp.prototype.test=function(n){var e=l.exec.call(this,n);return e&&this.global&&!e[0].length&&this.lastIndex>e.index&&this.lastIndex--,!!e}))}),ace.define('ace/lib/es5-shim',['require','exports','module'],function(){function i(){}function v(t){try{return Object.defineProperty(t,'sentinel',{}),'sentinel'in t}catch(t){}}function D(t){return(t=+t)==t?0!==t&&t!==1/0&&t!==-1/0&&(t=(0<t||-1)*T(g(t))):t=0,t}Function.prototype.bind||(Function.prototype.bind=function(a){var e=this;if('function'!=typeof e)throw new TypeError('Function.prototype.bind called on incompatible '+e);var o=u.call(arguments,1),n=function(){if(this instanceof n){var t=e.apply(this,o.concat(u.call(arguments)));return Object(t)===t?t:this}return e.apply(a,o.concat(u.call(arguments)))};return e.prototype&&(i.prototype=e.prototype,n.prototype=new i,i.prototype=null),n});var e=Function.prototype.call,n=Array.prototype,l=Object.prototype,u=n.slice,d=e.bind(l.toString),p=e.bind(l.hasOwnProperty),m,r,h,s,a;(a=p(l,'__defineGetter__'))&&(m=e.bind(l.__defineGetter__),r=e.bind(l.__defineSetter__),h=e.bind(l.__lookupGetter__),s=e.bind(l.__lookupSetter__));Array.isArray||(Array.isArray=function(t){return'[object Array]'==d(t)});var o=Object('a'),f='a'!=o[0]||!(0 in o),A,C;if((Array.prototype.forEach||(Array.prototype.forEach=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=arguments[1],i=-1,r=t.length>>>0;if('[object Function]'!=d(a))throw new TypeError;for(;++i<r;)i in t&&a.call(n,t[i],i,e)}),Array.prototype.map||(Array.prototype.map=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=t.length>>>0,i=Array(n),r=arguments[1];if('[object Function]'!=d(a))throw new TypeError(a+' is not a function');for(var o=0;o<n;o++)o in t&&(i[o]=a.call(r,t[o],o,e));return i}),Array.prototype.filter||(Array.prototype.filter=function(l){var e=B(this),n=f&&'[object String]'==d(this)?this.split(''):e,i=n.length>>>0,r=[],o=arguments[1],s;if('[object Function]'!=d(l))throw new TypeError(l+' is not a function');for(var t=0;t<i;t++)t in n&&(s=n[t],l.call(o,s,t,e)&&r.push(s));return r}),Array.prototype.every||(Array.prototype.every=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=t.length>>>0,i=arguments[1];if('[object Function]'!=d(a))throw new TypeError(a+' is not a function');for(var r=0;r<n;r++)if(r in t&&!a.call(i,t[r],r,e))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=t.length>>>0,i=arguments[1];if('[object Function]'!=d(a))throw new TypeError(a+' is not a function');for(var r=0;r<n;r++)if(r in t&&a.call(i,t[r],r,e))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=t.length>>>0;if('[object Function]'!=d(a))throw new TypeError(a+' is not a function');if(!n&&1==arguments.length)throw new TypeError('reduce of empty array with no initial value');var s=0,o;if(2<=arguments.length)o=arguments[1];else for(;;){if(s in t){o=t[s++];break}if(++s>=n)throw new TypeError('reduce of empty array with no initial value')}for(;s<n;s++)s in t&&(o=a.call(void 0,o,t[s],s,e));return o}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var e=B(this),t=f&&'[object String]'==d(this)?this.split(''):e,n=t.length>>>0;if('[object Function]'!=d(a))throw new TypeError(a+' is not a function');if(!n&&1==arguments.length)throw new TypeError('reduceRight of empty array with no initial value');var s=n-1,o;if(2<=arguments.length)o=arguments[1];else for(;;){if(s in t){o=t[s--];break}if(0>--s)throw new TypeError('reduceRight of empty array with no initial value')}do s in this&&(o=a.call(void 0,o,t[s],s,e));while(s--);return o}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(r){var e=f&&'[object String]'==d(this)?this.split(''):B(this),t=e.length>>>0;if(!t)return-1;var a=0;for(1<arguments.length&&(a=D(arguments[1])),a=0<=a?a:x(0,t+a);a<t;a++)if(a in e&&e[a]===r)return a;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(r){var e=f&&'[object String]'==d(this)?this.split(''):B(this),t=e.length>>>0;if(!t)return-1;var a=t-1;for(1<arguments.length&&(a=b(a,D(arguments[1]))),a=0<=a?a:t-g(a);0<=a;a--)if(a in e&&r===e[a])return a;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__||(t.constructor?t.constructor.prototype:l)}),!Object.getOwnPropertyDescriptor)&&(Object.getOwnPropertyDescriptor=function(d,c){if('object'!=typeof d&&'function'!=typeof d||null===d)throw new TypeError('Object.getOwnPropertyDescriptor called on a non-object: '+d);if(p(d,c)){var t;if(t={enumerable:!0,configurable:!0},a){var n=d.__proto__;d.__proto__=l;var i=h(d,c),r=s(d,c);if(d.__proto__=n,i||r)return i&&(t.get=i),r&&(t.set=r),t}return t.value=d[c],t}}),(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(t){return Object.keys(t)}),Object.create)||(A=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var n={};for(var e in n)n[e]=null;return n.constructor=n.hasOwnProperty=n.propertyIsEnumerable=n.isPrototypeOf=n.toLocaleString=n.toString=n.valueOf=n.__proto__=null,n},Object.create=function(r,a){var t;if(null===r)t=A();else{if('object'!=typeof r)throw new TypeError('typeof prototype['+typeof r+'] != \'object\'');var n=function(){};n.prototype=r,(t=new n).__proto__=r}return void 0!==a&&Object.defineProperties(t,a),t}),Object.defineProperty){var E=v({}),M='undefined'==typeof document||v(document.createElement('div'));if(!E||!M)var I=Object.defineProperty}(!Object.defineProperty||I)&&(Object.defineProperty=function(o,d,t){if('object'!=typeof o&&'function'!=typeof o||null===o)throw new TypeError('Object.defineProperty called on non-object: '+o);if('object'!=typeof t&&'function'!=typeof t||null===t)throw new TypeError('Property description must be an object: '+t);if(I)try{return I.call(Object,o,d,t)}catch(t){}if(!p(t,'value')){if(!a)throw new TypeError('getters & setters can not be defined on this javascript engine');p(t,'get')&&m(o,d,t.get),p(t,'set')&&r(o,d,t.set)}else if(a&&(h(o,d)||s(o,d))){var u=o.__proto__;o.__proto__=l,delete o[d],o[d]=t.value,o.__proto__=u}else o[d]=t.value;return o}),Object.defineProperties||(Object.defineProperties=function(r,e){for(var t in e)p(e,t)&&Object.defineProperty(r,t,e[t]);return r}),Object.seal||(Object.seal=function(t){return t}),Object.freeze||(Object.freeze=function(t){return t});try{Object.freeze(function(){})}catch(t){Object.freeze=(C=Object.freeze,function(t){return'function'==typeof t?t:C(t)})}if(Object.preventExtensions||(Object.preventExtensions=function(t){return t}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(r){if(Object(r)===r)throw new TypeError;for(var e='';p(r,e);)e+='?';r[e]=!0;var t=p(r,e);return delete r[e],t}),!Object.keys){var S=!0,y=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],R=y.length;for(var N in{toString:null})S=!1;Object.keys=function(r){if('object'!=typeof r&&'function'!=typeof r||null===r)throw new TypeError('Object.keys called on a non-object');var a=[];for(var t in r)p(r,t)&&a.push(t);if(S)for(var n=0,i;n<R;n++)i=y[n],p(r,i)&&a.push(i);return a}}Date.now||(Date.now=function(){return new Date().getTime()});var P='\t\n\x0B\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';if(!t.trim||P.trim()){P='['+P+']';var w=new RegExp('^'+P+P+'*'),O=new RegExp(P+P+'*$');t.trim=function(){return(this+'').replace(w,'').replace(O,'')}}var B=function(t){if(null==t)throw new TypeError('can\'t convert '+t+' to object');return Object(t)}}),ace.define('ace/lib/fixoldbrowsers',['require','exports','module','ace/lib/regexp','ace/lib/es5-shim'],function(t){'use strict';t('./regexp'),t('./es5-shim')}),ace.define('ace/lib/dom',['require','exports','module'],function(n,l){'use strict';l.getDocumentHead=function(t){return t||(t=document),t.head||t.getElementsByTagName('head')[0]||t.documentElement},l.createElement=function(n,e){return document.createElementNS?document.createElementNS(e||'http://www.w3.org/1999/xhtml',n):document.createElement(n)},l.hasCssClass=function(n,e){return-1!==(n.className+'').split(/\s+/g).indexOf(e)},l.addCssClass=function(t,e){l.hasCssClass(t,e)||(t.className+=' '+e)},l.removeCssClass=function(r,e){for(var t=r.className.split(/\s+/g),n;;){if(n=t.indexOf(e),-1==n)break;t.splice(n,1)}r.className=t.join(' ')},l.toggleCssClass=function(a,e){for(var t=a.className.split(/\s+/g),n=!0,o;;){if(o=t.indexOf(e),-1==o)break;n=!1,t.splice(o,1)}return n&&t.push(e),a.className=t.join(' '),n},l.setCssClass=function(t,e,n){n?l.addCssClass(t,e):l.removeCssClass(t,e)},l.hasCssString=function(r,e){var t=0,a;if((e=e||document).createStyleSheet&&(a=e.styleSheets)){for(;t<a.length;)if(a[t++].owningElement.id===r)return!0;}else if(a=e.getElementsByTagName('style'))for(;t<a.length;)if(a[t++].id===r)return!0;return!1},l.importCssString=function(t,e,n){if(n=n||document,e&&l.hasCssString(e,n))return null;var a;e&&(t+='\n/*# sourceURL=ace/css/'+e+' */'),n.createStyleSheet?((a=n.createStyleSheet()).cssText=t,e&&(a.owningElement.id=e)):((a=l.createElement('style')).appendChild(n.createTextNode(t)),e&&(a.id=e),l.getDocumentHead(n).appendChild(a))},l.importCssStylsheet=function(t,e){if(e.createStyleSheet)e.createStyleSheet(t);else{var n=l.createElement('link');n.rel='stylesheet',n.href=t,l.getDocumentHead(e).appendChild(n)}},l.getInnerWidth=function(t){return parseInt(l.computedStyle(t,'paddingLeft'),10)+parseInt(l.computedStyle(t,'paddingRight'),10)+t.clientWidth},l.getInnerHeight=function(t){return parseInt(l.computedStyle(t,'paddingTop'),10)+parseInt(l.computedStyle(t,'paddingBottom'),10)+t.clientHeight},l.scrollbarWidth=function(t){var e=l.createElement('ace_inner');e.style.width='100%',e.style.minWidth='0px',e.style.height='200px',e.style.display='block';var n=l.createElement('ace_outer'),i=n.style;i.position='absolute',i.left='-10000px',i.overflow='hidden',i.width='200px',i.minWidth='0px',i.height='150px',i.display='block',n.appendChild(e);var r=t.documentElement;r.appendChild(n);var o=e.offsetWidth;i.overflow='scroll';var s=e.offsetWidth;return o==s&&(s=n.clientWidth),r.removeChild(n),o-s},'undefined'==typeof document?l.importCssString=function(){}:(void 0===window.pageYOffset?(l.getPageScrollTop=function(){return document.body.scrollTop},l.getPageScrollLeft=function(){return document.body.scrollLeft}):(l.getPageScrollTop=function(){return window.pageYOffset},l.getPageScrollLeft=function(){return window.pageXOffset}),l.computedStyle=window.getComputedStyle?function(n,e){return e?(window.getComputedStyle(n,'')||{})[e]||'':window.getComputedStyle(n,'')||{}}:function(n,e){return e?n.currentStyle[e]:n.currentStyle},l.setInnerHtml=function(r,e){var t=r.cloneNode(!1);return t.innerHTML=e,r.parentNode.replaceChild(t,r),t},'textContent'in document.documentElement?(l.setInnerText=function(n,e){n.textContent=e},l.getInnerText=function(t){return t.textContent}):(l.setInnerText=function(n,e){n.innerText=e},l.getInnerText=function(t){return t.innerText}),l.getParentWindow=function(t){return t.defaultView||t.parentWindow})}),ace.define('ace/lib/oop',['require','exports','module'],function(n,r){'use strict';r.inherits=function(n,r){n.super_=r,n.prototype=Object.create(r.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}})},r.mixin=function(r,e){for(var t in e)r[t]=e[t];return r},r.implement=function(t,e){r.mixin(t,e)}}),ace.define('ace/lib/keys',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/oop'],function(n,e){'use strict';n('./fixoldbrowsers');var a=n('./oop'),o=function(){var r={MODIFIER_KEYS:{16:'Shift',17:'Ctrl',18:'Alt',224:'Meta'},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:'Backspace',9:'Tab',13:'Return',19:'Pause',27:'Esc',32:'Space',33:'PageUp',34:'PageDown',35:'End',36:'Home',37:'Left',38:'Up',39:'Right',40:'Down',44:'Print',45:'Insert',46:'Delete',96:'Numpad0',97:'Numpad1',98:'Numpad2',99:'Numpad3',100:'Numpad4',101:'Numpad5',102:'Numpad6',103:'Numpad7',104:'Numpad8',105:'Numpad9',"-13":'NumpadEnter',112:'F1',113:'F2',114:'F3',115:'F4',116:'F5',117:'F6',118:'F7',119:'F8',120:'F9',121:'F10',122:'F11',123:'F12',144:'Numlock',145:'Scrolllock'},PRINTABLE_KEYS:{32:' ',48:'0',49:'1',50:'2',51:'3',52:'4',53:'5',54:'6',55:'7',56:'8',57:'9',59:';',61:'=',65:'a',66:'b',67:'c',68:'d',69:'e',70:'f',71:'g',72:'h',73:'i',74:'j',75:'k',76:'l',77:'m',78:'n',79:'o',80:'p',81:'q',82:'r',83:'s',84:'t',85:'u',86:'v',87:'w',88:'x',89:'y',90:'z',107:'+',109:'-',110:'.',186:';',187:'=',188:',',189:'-',190:'.',191:'/',192:'`',219:'[',220:'\\',221:']',222:'\'',111:'/',106:'*'}},n,e;for(e in r.FUNCTION_KEYS)n=r.FUNCTION_KEYS[e].toLowerCase(),r[n]=parseInt(e,10);for(e in r.PRINTABLE_KEYS)n=r.PRINTABLE_KEYS[e].toLowerCase(),r[n]=parseInt(e,10);return a.mixin(r,r.MODIFIER_KEYS),a.mixin(r,r.PRINTABLE_KEYS),a.mixin(r,r.FUNCTION_KEYS),r.enter=r.return,r.escape=r.esc,r.del=r.delete,r[173]='-',function(){for(var n=['cmd','ctrl','alt','shift'],a=m(2,n.length);a--;)r.KEY_MODS[a]=n.filter(function(t){return a&r.KEY_MODS[t]}).join('-')+'-'}(),r.KEY_MODS[0]='',r.KEY_MODS[-1]='input-',r}();a.mixin(e,o),e.keyCodeToString=function(n){var e=o[n];return'string'!=typeof e&&(e=String.fromCharCode(n)),e.toLowerCase()}}),ace.define('ace/lib/useragent',['require','exports','module'],function(n,e){'use strict';if(e.OS={LINUX:'LINUX',MAC:'MAC',WINDOWS:'WINDOWS'},e.getOS=function(){return e.isMac?e.OS.MAC:e.isLinux?e.OS.LINUX:e.OS.WINDOWS},'object'==typeof navigator){var t=(navigator.platform.match(/mac|win|linux/i)||['other'])[0].toLowerCase(),a=navigator.userAgent;e.isWin='win'==t,e.isMac='mac'==t,e.isLinux='linux'==t,e.isIE='Microsoft Internet Explorer'==navigator.appName||0<=navigator.appName.indexOf('MSAppHost')?parseFloat((a.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((a.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),e.isOldIE=e.isIE&&9>e.isIE,e.isGecko=e.isMozilla=(window.Controllers||window.controllers)&&'Gecko'===window.navigator.product,e.isOldGecko=e.isGecko&&4>parseInt((a.match(/rv:(\d+)/)||[])[1],10),e.isOpera=window.opera&&'[object Opera]'==Object.prototype.toString.call(window.opera),e.isWebKit=parseFloat(a.split('WebKit/')[1])||void 0,e.isChrome=parseFloat(a.split(' Chrome/')[1])||void 0,e.isAIR=0<=a.indexOf('AdobeAIR'),e.isIPad=0<=a.indexOf('iPad'),e.isChromeOS=0<=a.indexOf(' CrOS '),e.isIOS=/iPad|iPhone|iPod/.test(a)&&!window.MSStream,e.isIOS&&(e.isMac=!0)}}),ace.define('ace/lib/event',['require','exports','module','ace/lib/keys','ace/lib/useragent'],function(n,p){'use strict';function c(a,i,t){var s=o(i);if(!m.isMac&&r){if(i.getModifierState&&(i.getModifierState('OS')||i.getModifierState('Win'))&&(s|=8),r.altGr){if(3==(3&s))return;r.altGr=0}if(18===t||17===t){var u='location'in i?i.location:i.keyLocation;17===t&&1===u?1==r[t]&&(e=i.timeStamp):18==t&&3===s&&2===u&&50>i.timeStamp-e&&(r.altGr=!0)}}if(!((t in d.MODIFIER_KEYS&&(t=-1),8&s&&91<=t&&93>=t&&(t=-1),!s&&13===t)&&3===(u='location'in i?i.location:i.keyLocation)&&(a(i,s,-t),i.defaultPrevented))){if(m.isChromeOS&&8&s){if(a(i,s,t),i.defaultPrevented)return;s&=-9}return!!(s||t in d.FUNCTION_KEYS||t in d.PRINTABLE_KEYS)&&a(i,s,t)}}function l(){r=Object.create(null)}var d=n('./keys'),m=n('./useragent'),r=null,e=0;p.addListener=function(r,e,t){if(r.addEventListener)return r.addEventListener(e,t,!1);if(r.attachEvent){var n=function(){t.call(r,window.event)};t._wrapper=n,r.attachEvent('on'+e,n)}},p.removeListener=function(r,e,t){return r.removeEventListener?r.removeEventListener(e,t,!1):void(r.detachEvent&&r.detachEvent('on'+e,t._wrapper||t))},p.stopEvent=function(t){return p.stopPropagation(t),p.preventDefault(t),!1},p.stopPropagation=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},p.preventDefault=function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},p.getButton=function(t){return'dblclick'==t.type?0:'contextmenu'==t.type||m.isMac&&t.ctrlKey&&!t.altKey&&!t.shiftKey?2:t.preventDefault?t.button:{1:0,2:2,4:1}[t.button]},p.capture=function(t,a,n){function r(t){a&&a(t),n&&n(t),p.removeListener(document,'mousemove',a,!0),p.removeListener(document,'mouseup',r,!0),p.removeListener(document,'dragstart',r,!0)}return p.addListener(document,'mousemove',a,!0),p.addListener(document,'mouseup',r,!0),p.addListener(document,'dragstart',r,!0),r},p.addTouchMoveListener=function(t,a){var n,o;'ontouchmove'in t&&(p.addListener(t,'touchstart',function(r){var e=r.changedTouches[0];n=e.clientX,o=e.clientY}),p.addListener(t,'touchmove',function(r){var e=r.changedTouches[0];r.wheelX=-(e.clientX-n)/1,r.wheelY=-(e.clientY-o)/1,n=e.clientX,o=e.clientY,a(r)}))},p.addMouseWheelListener=function(t,r){'onmousewheel'in t?p.addListener(t,'mousewheel',function(t){void 0===t.wheelDeltaX?(t.wheelX=0,t.wheelY=-t.wheelDelta/8):(t.wheelX=-t.wheelDeltaX/8,t.wheelY=-t.wheelDeltaY/8),r(t)}):'onwheel'in t?p.addListener(t,'wheel',function(t){switch(t.deltaMode){case t.DOM_DELTA_PIXEL:t.wheelX=.35*t.deltaX||0,t.wheelY=.35*t.deltaY||0;break;case t.DOM_DELTA_LINE:case t.DOM_DELTA_PAGE:t.wheelX=5*(t.deltaX||0),t.wheelY=5*(t.deltaY||0);}r(t)}):p.addListener(t,'DOMMouseScroll',function(t){t.axis&&t.axis==t.HORIZONTAL_AXIS?(t.wheelX=5*(t.detail||0),t.wheelY=0):(t.wheelX=0,t.wheelY=5*(t.detail||0)),r(t)})},p.addMultiMouseDownListener=function(t,r,n,i){function h(t){if(0===p.getButton(t)?1<t.detail?4<++o&&(o=1):o=1:o=0,m.isIE){var e=5<g(t.clientX-u)||5<g(t.clientY-s);a&&!e||(o=1),a&&clearTimeout(a),a=setTimeout(function(){a=null},r[o-1]||600),1==o&&(u=t.clientX,s=t.clientY)}if(t._clicks=o,n[i]('mousedown',t),4<o)o=0;else if(1<o)return n[i](l[o],t)}function d(t){o=2,a&&clearTimeout(a),a=setTimeout(function(){a=null},r[o-1]||600),n[i]('mousedown',t),n[i](l[o],t)}var o=0,l={2:'dblclick',3:'tripleclick',4:'quadclick'},u,s,a;Array.isArray(t)||(t=[t]),t.forEach(function(t){p.addListener(t,'mousedown',h),m.isOldIE&&p.addListener(t,'dblclick',d)})};var o=m.isMac&&m.isOpera&&!('KeyboardEvent'in window)?function(t){return 0|(t.metaKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.ctrlKey?8:0)}:function(t){return 0|(t.ctrlKey?1:0)|(t.altKey?2:0)|(t.shiftKey?4:0)|(t.metaKey?8:0)};(p.getModifierString=function(t){return d.KEY_MODS[o(t)]},p.addCommandKeyListener=function(t,o){var e=p.addListener;if(m.isOldGecko||m.isOpera&&!('KeyboardEvent'in window)){var n=null;e(t,'keydown',function(t){n=t.keyCode}),e(t,'keypress',function(t){return c(o,t,n)})}else{var i=null;e(t,'keydown',function(n){r[n.keyCode]=(r[n.keyCode]||0)+1;var e=c(o,n,n.keyCode);return i=n.defaultPrevented,e}),e(t,'keypress',function(t){i&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)&&(p.stopEvent(t),i=null)}),e(t,'keyup',function(t){r[t.keyCode]=null}),r||(l(),e(window,'focus',l))}},'object'==typeof window&&window.postMessage&&!m.isOldIE)&&(p.nextTick=function(t,e){e=e||window,p.addListener(e,'message',function i(n){'zero-timeout-message-1'==n.data&&(p.stopPropagation(n),p.removeListener(e,'message',i),t())}),e.postMessage('zero-timeout-message-1','*')}),p.nextFrame='object'==typeof window&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),p.nextFrame=p.nextFrame?p.nextFrame.bind(window):function(t){setTimeout(t,17)}}),ace.define('ace/lib/lang',['require','exports','module'],function(n,e){'use strict';e.last=function(t){return t[t.length-1]},e.stringReverse=function(t){return t.split('').reverse().join('')},e.stringRepeat=function(r,e){for(var t='';0<e;)1&e&&(t+=r),(e>>=1)&&(r+=r);return t};var t=/^\s\s*/,a=/\s\s*$/;e.stringTrimLeft=function(n){return n.replace(t,'')},e.stringTrimRight=function(t){return t.replace(a,'')},e.copyObject=function(r){var e={};for(var t in r)e[t]=r[t];return e},e.copyArray=function(r){for(var e=[],t=0,n=r.length;t<n;t++)e[t]=r[t]&&'object'==typeof r[t]?this.copyObject(r[t]):r[t];return e},e.deepCopy=function e(r){if('object'!=typeof r||!r)return r;var a;if(Array.isArray(r)){a=[];for(var n=0;n<r.length;n++)a[n]=e(r[n]);return a}if('[object Object]'!==Object.prototype.toString.call(r))return r;for(var n in a={},r)a[n]=e(r[n]);return a},e.arrayToMap=function(r){for(var e={},t=0;t<r.length;t++)e[r[t]]=1;return e},e.createMap=function(r){var e=Object.create(null);for(var t in r)e[t]=r[t];return e},e.arrayRemove=function(r,e){for(var t=0;t<=r.length;t++)e===r[t]&&r.splice(t,1)},e.escapeRegExp=function(t){return t.replace(/([.*+?^${}()|[\]\/\\])/g,'\\$1')},e.escapeHTML=function(t){return t.replace(/&/g,'&#38;').replace(/"/g,'&#34;').replace(/'/g,'&#39;').replace(/</g,'&#60;')},e.getMatchOffsets=function(r,e){var t=[];return r.replace(e,function(n){t.push({offset:arguments[arguments.length-2],length:n.length})}),t},e.deferredCall=function(r){var a=null,t=function(){a=null,r()},n=function(r){return n.cancel(),a=setTimeout(t,r||0),n};return n.schedule=n,n.call=function(){return this.cancel(),r(),n},n.cancel=function(){return clearTimeout(a),a=null,n},n.isPending=function(){return a},n},e.delayedCall=function(a,o){var t=null,n=function(){t=null,a()},e=function(r){null==t&&(t=setTimeout(n,r||o))};return e.delay=function(r){t&&clearTimeout(t),t=setTimeout(n,r||o)},e.schedule=e,e.call=function(){this.cancel(),a()},e.cancel=function(){t&&clearTimeout(t),t=null},e.isPending=function(){return t},e}}),ace.define('ace/keyboard/textinput_ios',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/lib/dom','ace/lib/lang','ace/lib/keys'],function(n,e){'use strict';var P=n('../lib/event'),U=n('../lib/useragent'),r=n('../lib/dom'),o=n('../lib/lang'),s=n('../lib/keys'),a=s.KEY_MODS,d=18>U.isChrome,c=U.isIE;e.TextInput=function(i,G){function _(n){if(!m){if(m=!0,v)e=0,t=n?0:V.value.length-1;else var e=4,t=5;try{V.setSelectionRange(e,t)}catch(t){}m=!1}}function F(){m||(V.value=n,U.isWebKit&&C.schedule())}function I(){clearTimeout(L),L=setTimeout(function(){H&&(V.style.cssText=H,H=''),null==G.renderer.$keepTextAreaAtCursor&&(G.renderer.$keepTextAreaAtCursor=!0,G.renderer.$moveTextAreaToCursor())},0)}var V=r.createElement('textarea');V.className=U.isIOS?'ace_text-input ace_text-input-ios':'ace_text-input',U.isTouchPad&&V.setAttribute('x-palm-disable-auto-cap',!0),V.setAttribute('wrap','off'),V.setAttribute('autocorrect','off'),V.setAttribute('autocapitalize','off'),V.setAttribute('spellcheck',!1),V.style.opacity='0',i.insertBefore(V,i.firstChild);var n='\n aaaa a\n',u=!1,h=!1,p=!1,m=!1,H='',e=!0;try{var g=document.activeElement===V}catch(t){}P.addListener(V,'blur',function(t){G.onBlur(t),g=!1}),P.addListener(V,'focus',function(t){g=!0,G.onFocus(t),_()}),this.focus=function(){return H?V.focus():void(V.style.position='fixed',V.focus())},this.blur=function(){V.blur()},this.isFocused=function(){return g};var A=o.delayedCall(function(){g&&_(e)}),C=o.delayedCall(function(){m||(V.value=n,g&&_())});U.isWebKit||G.addEventListener('changeSelection',function(){G.selection.isEmpty()!=e&&(e=!e,A.schedule())}),F(),g&&G.onFocus();var v=null;this.setInputHandler=function(t){v=t},this.getInputHandler=function(){return v};var S=!1,y=function(t){4===V.selectionStart&&5===V.selectionEnd||(v&&(t=v(t),v=null),p?(_(),t&&G.onPaste(t),p=!1):t==n.substr(0)&&4===V.selectionStart?S?G.execCommand('del',{source:'ace'}):G.execCommand('backspace',{source:'ace'}):u||(t.substring(0,9)==n&&t.length>n.length?t=t.substr(9):t.substr(0,4)==n.substr(0,4)?t=t.substr(4,t.length-n.length+1):t.charAt(t.length-1)==n.charAt(0)&&(t=t.slice(0,-1)),t==n.charAt(0)||t.charAt(t.length-1)==n.charAt(0)&&(t=t.slice(0,-1)),t&&G.onTextInput(t)),u&&(u=!1),S&&(S=!1))},R=function(){if(!m){var e=V.value;y(e),F()}},z=function(a,o,t){var e=a.clipboardData||window.clipboardData;if(e&&!d){var i=c||t?'Text':'text/plain';try{return o?!1!==e.setData(i,o):e.getData(i)}catch(r){if(!t)return z(r,o,!0)}}},T=function(t,e){var n=G.getCopyText();return n?void(z(t,n)?(U.isIOS&&(h=e,V.value='\n aa'+n+'a a\n',V.setSelectionRange(4,4+n.length),u={value:n}),e?G.onCut():G.onCopy(),U.isIOS||P.preventDefault(t)):(u=!0,V.value=n,V.select(),setTimeout(function(){u=!1,F(),_(),e?G.onCut():G.onCopy()}))):P.preventDefault(t)};P.addCommandKeyListener(V,G.onCommandKey.bind(G)),P.addListener(V,'select',function(){(function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length})(V)?(G.selectAll(),_()):v&&_(G.selection.isEmpty())}),P.addListener(V,'input',R),P.addListener(V,'cut',function(t){T(t,!0)}),P.addListener(V,'copy',function(t){T(t,!1)}),P.addListener(V,'paste',function(t){var e=z(t);'string'==typeof e?(e&&G.onPaste(e,t),U.isIE&&setTimeout(_),P.preventDefault(t)):(V.value='',p=!0)});var w=function(){if(m&&G.onCompositionUpdate&&!G.$readOnly){var t=V.value.replace(/\x01/g,'');if(m.lastValue!==t&&(G.onCompositionUpdate(t),m.lastValue&&G.undo(),m.canUndo&&(m.lastValue=t),m.lastValue)){var e=G.selection.getRange();G.insert(m.lastValue),G.session.markUndoGroup(),m.range=G.selection.getRange(),G.selection.setRange(e),G.selection.clearSelection()}}},B=function(t){if(G.onCompositionEnd&&!G.$readOnly){var n=m;m=!1;var r=setTimeout(function(){r=null;var t=V.value.replace(/\x01/g,'');m||(t==n.lastValue?F():!n.lastValue&&t&&(F(),y(t)))});v=function(t){return r&&clearTimeout(r),(t=t.replace(/\x01/g,''))==n.lastValue?'':(n.lastValue&&r&&G.undo(),t)},G.onCompositionEnd(),G.removeListener('mousedown',B),'compositionend'==t.type&&n.range&&G.selection.setRange(n.range),(U.isChrome&&53<=U.isChrome||U.isWebKit&&603<=U.isWebKit)&&R()}},D=o.delayedCall(w,50),L;P.addListener(V,'compositionstart',function(){m||!G.onCompositionStart||G.$readOnly||((m={}).canUndo=G.session.$undoManager,G.onCompositionStart(),setTimeout(w,0),G.on('mousedown',B),m.canUndo&&!G.selection.isEmpty()&&(G.insert(''),G.session.markUndoGroup(),G.selection.clearSelection()),G.session.markUndoGroup())}),U.isGecko?P.addListener(V,'text',function(){D.schedule()}):(P.addListener(V,'keyup',function(){D.schedule()}),P.addListener(V,'keydown',function(){D.schedule()})),P.addListener(V,'compositionend',B),this.getElement=function(){return V},this.setReadOnly=function(t){V.readOnly=t},this.onContextMenu=function(n){S=!0,_(G.selection.isEmpty()),G._emit('nativecontextmenu',{target:G,domEvent:n}),this.moveToMouse(n,!0)},this.moveToMouse=function(t,e){H||(H=V.style.cssText),V.style.cssText=(e?'z-index:100000;':'')+'height:'+V.style.height+';'+(U.isIE?'opacity:0.1;':'');var n=G.container.getBoundingClientRect(),a=r.computedStyle(G.container),o=n.top+(parseInt(a.borderTopWidth)||0),i=n.left+(parseInt(n.borderLeftWidth)||0),s=n.bottom-o-V.clientHeight-2,l=function(t){V.style.left=t.clientX-i-2+'px',V.style.top=b(t.clientY-o-2,s)+'px'};l(t),'mousedown'==t.type&&(G.renderer.$keepTextAreaAtCursor&&(G.renderer.$keepTextAreaAtCursor=null),clearTimeout(L),U.isWin&&P.capture(G.container,l,I))},this.onContextMenuClose=I;var x=function(t){G.textInput.onContextMenu(t),I()};if(P.addListener(V,'mouseup',x),P.addListener(V,'mousedown',function(t){t.preventDefault(),I()}),P.addListener(G.renderer.scroller,'contextmenu',x),P.addListener(V,'contextmenu',x),U.isIOS){var O=null,N=!1;i.addEventListener('keydown',function(){O&&clearTimeout(O),N=!0}),i.addEventListener('keyup',function(){O=setTimeout(function(){N=!1},100)});var W=function(){if(document.activeElement===V&&!N){if(h)return setTimeout(function(){h=!1},100);var e=V.selectionStart,t=V.selectionEnd;(V.setSelectionRange(4,5),e==t)?0===e?G.onCommandKey(null,0,s.up):1===e?G.onCommandKey(null,0,s.home):2===e?G.onCommandKey(null,a.option,s.left):4===e?G.onCommandKey(null,0,s.left):5===e?G.onCommandKey(null,0,s.right):7===e?G.onCommandKey(null,a.option,s.right):8===e?G.onCommandKey(null,0,s.end):9===e?G.onCommandKey(null,0,s.down):void 0:(6===t?G.onCommandKey(null,a.shift,s.right):7===t?G.onCommandKey(null,a.shift|a.option,s.right):8===t?G.onCommandKey(null,a.shift,s.end):9===t?G.onCommandKey(null,a.shift,s.down):void 0,0===e?G.onCommandKey(null,a.shift,s.up):1===e?G.onCommandKey(null,a.shift,s.home):2===e?G.onCommandKey(null,a.shift|a.option,s.left):3===e?G.onCommandKey(null,a.shift,s.left):void 0)}};document.addEventListener('selectionchange',W),G.on('destroy',function(){document.removeEventListener('selectionchange',W)})}}}),ace.define('ace/keyboard/textinput',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/lib/dom','ace/lib/lang','ace/keyboard/textinput_ios'],function(n,e){'use strict';var M=n('../lib/event'),P=n('../lib/useragent'),r=n('../lib/dom'),o=n('../lib/lang'),s=18>P.isChrome,d=P.isIE,i=n('./textinput_ios').TextInput;e.TextInput=function(l,k){function C(n){if(!h){if(h=!0,A)e=0,t=n?0:U.value.length-1;else var e=n?2:1,t=2;try{U.setSelectionRange(e,t)}catch(t){}h=!1}}function v(){h||(U.value=n,P.isWebKit&&E.schedule())}function O(){clearTimeout(I),I=setTimeout(function(){G&&(U.style.cssText=G,G=''),null==k.renderer.$keepTextAreaAtCursor&&(k.renderer.$keepTextAreaAtCursor=!0,k.renderer.$moveTextAreaToCursor())},0)}if(P.isIOS)return i.call(this,l,k);var U=r.createElement('textarea');U.className='ace_text-input',U.setAttribute('wrap','off'),U.setAttribute('autocorrect','off'),U.setAttribute('autocapitalize','off'),U.setAttribute('spellcheck',!1),U.style.opacity='0',l.insertBefore(U,l.firstChild);var n='\u2028\u2028',c=!1,u=!1,h=!1,G='',e=!0;try{var m=document.activeElement===U}catch(t){}M.addListener(U,'blur',function(t){k.onBlur(t),m=!1}),M.addListener(U,'focus',function(t){m=!0,k.onFocus(t),C()}),this.focus=function(){if(G)return U.focus();var t=U.style.top;U.style.position='fixed',U.style.top='0px',U.focus(),setTimeout(function(){U.style.position='','0px'==U.style.top&&(U.style.top=t)},0)},this.blur=function(){U.blur()},this.isFocused=function(){return m};var g=o.delayedCall(function(){m&&C(e)}),E=o.delayedCall(function(){h||(U.value=n,m&&C())});P.isWebKit||k.addEventListener('changeSelection',function(){k.selection.isEmpty()!=e&&(e=!e,g.schedule())}),v(),m&&k.onFocus();var A=null;this.setInputHandler=function(t){A=t},this.getInputHandler=function(){return A};var _=!1,F=function(t){A&&(t=A(t),A=null),u?(C(),t&&k.onPaste(t),u=!1):t==n.charAt(0)?_?k.execCommand('del',{source:'ace'}):k.execCommand('backspace',{source:'ace'}):(t.substring(0,2)==n?t=t.substr(2):t.charAt(0)==n.charAt(0)?t=t.substr(1):t.charAt(t.length-1)==n.charAt(0)&&(t=t.slice(0,-1)),t.charAt(t.length-1)==n.charAt(0)&&(t=t.slice(0,-1)),t&&k.onTextInput(t)),_&&(_=!1)},S=function(){if(!h){var e=U.value;F(e),v()}},y=function(o,l,t){var e=o.clipboardData||window.clipboardData;if(e&&!s){var i=d||t?'Text':'text/plain';try{return l?!1!==e.setData(i,l):e.getData(i)}catch(r){if(!t)return y(r,l,!0)}}},R=function(t,e){var n=k.getCopyText();return n?void(y(t,n)?(e?k.onCut():k.onCopy(),M.preventDefault(t)):(c=!0,U.value=n,U.select(),setTimeout(function(){c=!1,v(),C(),e?k.onCut():k.onCopy()}))):M.preventDefault(t)},V=function(t){R(t,!0)},T=function(t){R(t,!1)},w=function(t){var e=y(t);'string'==typeof e?(e&&k.onPaste(e,t),P.isIE&&setTimeout(C),M.preventDefault(t)):(U.value='',u=!0)};M.addCommandKeyListener(U,k.onCommandKey.bind(k)),M.addListener(U,'select',function(){c?c=!1:function(t){return 0===t.selectionStart&&t.selectionEnd===t.value.length}(U)?(k.selectAll(),C()):A&&C(k.selection.isEmpty())}),M.addListener(U,'input',S),M.addListener(U,'cut',V),M.addListener(U,'copy',T),M.addListener(U,'paste',w),'oncut'in U&&'oncopy'in U&&'onpaste'in U||M.addListener(l,'keydown',function(t){if((!P.isMac||t.metaKey)&&t.ctrlKey)switch(t.keyCode){case 67:T(t);break;case 86:w(t);break;case 88:V(t);}});var x=function(){if(h&&k.onCompositionUpdate&&!k.$readOnly){var t=U.value.replace(/\u2028/g,'');if(h.lastValue!==t&&(k.onCompositionUpdate(t),h.lastValue&&k.undo(),h.canUndo&&(h.lastValue=t),h.lastValue)){var e=k.selection.getRange();k.insert(h.lastValue),k.session.markUndoGroup(),h.range=k.selection.getRange(),k.selection.setRange(e),k.selection.clearSelection()}}},D=function(t){if(k.onCompositionEnd&&!k.$readOnly){var n=h;h=!1;var r=setTimeout(function(){r=null;var t=U.value.replace(/\u2028/g,'');h||(t==n.lastValue?v():!n.lastValue&&t&&(v(),F(t)))});A=function(t){return r&&clearTimeout(r),(t=t.replace(/\u2028/g,''))==n.lastValue?'':(n.lastValue&&r&&k.undo(),t)},k.onCompositionEnd(),k.removeListener('mousedown',D),'compositionend'==t.type&&n.range&&k.selection.setRange(n.range),(P.isChrome&&53<=P.isChrome||P.isWebKit&&603<=P.isWebKit)&&S()}},L=o.delayedCall(x,50),I;M.addListener(U,'compositionstart',function(){h||!k.onCompositionStart||k.$readOnly||((h={}).canUndo=k.session.$undoManager,k.onCompositionStart(),setTimeout(x,0),k.on('mousedown',D),h.canUndo&&!k.selection.isEmpty()&&(k.insert(''),k.session.markUndoGroup(),k.selection.clearSelection()),k.session.markUndoGroup())}),P.isGecko?M.addListener(U,'text',function(){L.schedule()}):(M.addListener(U,'keyup',function(){L.schedule()}),M.addListener(U,'keydown',function(){L.schedule()})),M.addListener(U,'compositionend',D),this.getElement=function(){return U},this.setReadOnly=function(t){U.readOnly=t},this.onContextMenu=function(n){_=!0,C(k.selection.isEmpty()),k._emit('nativecontextmenu',{target:k,domEvent:n}),this.moveToMouse(n,!0)},this.moveToMouse=function(t,e){G||(G=U.style.cssText),U.style.cssText=(e?'z-index:100000;':'')+'height:'+U.style.height+';'+(P.isIE?'opacity:0.1;':'');var n=k.container.getBoundingClientRect(),a=r.computedStyle(k.container),o=n.top+(parseInt(a.borderTopWidth)||0),i=n.left+(parseInt(n.borderLeftWidth)||0),s=n.bottom-o-U.clientHeight-2,l=function(t){U.style.left=t.clientX-i-2+'px',U.style.top=b(t.clientY-o-2,s)+'px'};l(t),'mousedown'==t.type&&(k.renderer.$keepTextAreaAtCursor&&(k.renderer.$keepTextAreaAtCursor=null),clearTimeout(I),P.isWin&&M.capture(k.container,l,O))},this.onContextMenuClose=O;var B=function(t){k.textInput.onContextMenu(t),O()};M.addListener(U,'mouseup',B),M.addListener(U,'mousedown',function(t){t.preventDefault(),O()}),M.addListener(k.renderer.scroller,'contextmenu',B),M.addListener(U,'contextmenu',B)}}),ace.define('ace/mouse/default_handlers',['require','exports','module','ace/lib/dom','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';function r(n){n.$clickSelection=null;var e=n.editor;e.setDefaultHandler('mousedown',this.onMouseDown.bind(n)),e.setDefaultHandler('dblclick',this.onDoubleClick.bind(n)),e.setDefaultHandler('tripleclick',this.onTripleClick.bind(n)),e.setDefaultHandler('quadclick',this.onQuadClick.bind(n)),e.setDefaultHandler('mousewheel',this.onMouseWheel.bind(n)),e.setDefaultHandler('touchmove',this.onTouchMove.bind(n)),['select','startSelect','selectEnd','selectAllEnd','selectByWordsEnd','selectByLinesEnd','dragWait','dragWaitEnd','focusWait'].forEach(function(e){n[e]=this[e]},this),n.selectByLines=this.extendSelectionBy.bind(n,'getLineRange'),n.selectByWords=this.extendSelectionBy.bind(n,'getWordRange')}function o(r,e){if(r.start.row==r.end.row)var t=2*e.column-r.start.column-r.end.column;else if(r.start.row!=r.end.row-1||r.start.column||r.end.column)t=2*e.row-r.start.row-r.end.row;else var t=e.column-4;return 0>t?{cursor:r.start,anchor:r.end}:{cursor:r.end,anchor:r.start}}n('../lib/dom'),n('../lib/event');var t=n('../lib/useragent');(function(){this.onMouseDown=function(a){var e=a.inSelection(),i=a.getDocumentPosition();this.mousedownEvent=a;var n=this.editor,r=a.getButton();if(0!==r){var o=n.getSelectionRange().isEmpty();return n.$blockScrolling++,(o||1==r)&&n.selection.moveToPosition(i),n.$blockScrolling--,void(2==r&&(n.textInput.onContextMenu(a.domEvent),t.isMozilla||a.preventDefault()))}return this.mousedownEvent.time=Date.now(),!e||n.isFocused()||(n.focus(),!this.$focusTimout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(a),this.startSelect(i,1<a.domEvent._clicks),a.preventDefault()):(this.setState('focusWait'),void this.captureMouse(a))},this.startSelect=function(r,e){r=r||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var t=this.editor;t.$blockScrolling++,this.mousedownEvent.getShiftKey()?t.selection.selectToPosition(r):e||t.selection.moveToPosition(r),e||this.select(),t.renderer.scroller.setCapture&&t.renderer.scroller.setCapture(),t.setStyle('ace_selecting'),this.setState('select'),t.$blockScrolling--},this.select=function(){var a=this.editor,t=a.renderer.screenToTextCoordinates(this.x,this.y),n;if(a.$blockScrolling++,this.$clickSelection){var e=this.$clickSelection.comparePoint(t);if(-1==e)n=this.$clickSelection.end;else if(1==e)n=this.$clickSelection.start;else{var i=o(this.$clickSelection,t);t=i.cursor,n=i.anchor}a.selection.setSelectionAnchor(n.row,n.column)}a.selection.selectToPosition(t),a.$blockScrolling--,a.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(l){var e=this.editor,n=e.renderer.screenToTextCoordinates(this.x,this.y),i=e.selection[l](n.row,n.column),r;if(e.$blockScrolling++,this.$clickSelection){var t=this.$clickSelection.comparePoint(i.start),s=this.$clickSelection.comparePoint(i.end);if(-1==t&&0>=s)r=this.$clickSelection.end,i.end.row==n.row&&i.end.column==n.column||(n=i.start);else if(1==s&&0<=t)r=this.$clickSelection.start,i.start.row==n.row&&i.start.column==n.column||(n=i.end);else if(-1==t&&1==s)n=i.end,r=i.start;else{var a=o(this.$clickSelection,n);n=a.cursor,r=a.anchor}e.selection.setSelectionAnchor(r.row,r.column)}e.selection.selectToPosition(n),e.$blockScrolling--,e.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle('ace_selecting'),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var s=(o=this.mousedownEvent.x,e=this.mousedownEvent.y,t=this.x,n=this.y,a(m(t-o,2)+m(n-e,2))),r=Date.now(),o,e,t,n;(0<s||r-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(r){var e=r.getDocumentPosition(),t=this.editor,n=t.session.getBracketRange(e);n?(n.isEmpty()&&(n.start.column--,n.end.column++),this.setState('select')):(n=t.selection.getWordRange(e.row,e.column),this.setState('selectByWords')),this.$clickSelection=n,this.select()},this.onTripleClick=function(r){var e=r.getDocumentPosition(),t=this.editor;this.setState('selectByLines');var n=t.getSelectionRange();n.isMultiLine()&&n.contains(e.row,e.column)?(this.$clickSelection=t.selection.getLineRange(n.start.row),this.$clickSelection.end=t.selection.getLineRange(n.end.row).end):this.$clickSelection=t.selection.getLineRange(e.row),this.select()},this.onQuadClick=function(){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState('selectAll')},this.onMouseWheel=function(r){if(!r.getAccelKey()){r.getShiftKey()&&r.wheelY&&!r.wheelX&&(r.wheelX=r.wheelY,r.wheelY=0);var e=r.domEvent.timeStamp,t=e-(this.$lastScrollTime||0),n=this.editor;return n.renderer.isScrollableBy(r.wheelX*r.speed,r.wheelY*r.speed)||200>t?(this.$lastScrollTime=e,n.renderer.scrollBy(r.wheelX*r.speed,r.wheelY*r.speed),r.stop()):void 0}},this.onTouchMove=function(r){var e=r.domEvent.timeStamp,t=e-(this.$lastScrollTime||0),n=this.editor;if(n.renderer.isScrollableBy(r.wheelX*r.speed,r.wheelY*r.speed)||200>t)return this.$lastScrollTime=e,n.renderer.scrollBy(r.wheelX*r.speed,r.wheelY*r.speed),r.stop()}}).call(r.prototype),e.DefaultHandlers=r}),ace.define('ace/tooltip',['require','exports','module','ace/lib/oop','ace/lib/dom'],function(n,e){'use strict';function r(t){this.isOpen=!1,this.$element=null,this.$parentNode=t}n('./lib/oop');var t=n('./lib/dom');(function(){this.$init=function(){return this.$element=t.createElement('div'),this.$element.className='ace_tooltip',this.$element.style.display='none',this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(n){t.setInnerText(this.getElement(),n)},this.setHtml=function(t){this.getElement().innerHTML=t},this.setPosition=function(n,e){this.getElement().style.left=n+'px',this.getElement().style.top=e+'px'},this.setClassName=function(n){t.addCssClass(this.getElement(),n)},this.show=function(r,e,t){null!=r&&this.setText(r),null!=e&&null!=t&&this.setPosition(e,t),this.isOpen||(this.getElement().style.display='block',this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display='none',this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(r.prototype),e.Tooltip=r}),ace.define('ace/mouse/default_gutter_handler',['require','exports','module','ace/lib/dom','ace/lib/oop','ace/lib/event','ace/tooltip'],function(n,e){'use strict';function a(t){l.call(this,t)}var d=n('../lib/dom'),t=n('../lib/oop'),i=n('../lib/event'),l=n('../tooltip').Tooltip;t.inherits(a,l),function(){this.setPosition=function(a,e){var t=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,i=this.getWidth(),r=this.getHeight();(a+=15)+i>t&&(a-=a+i-t),(e+=15)+r>n&&(e-=20+r),l.prototype.setPosition.call(this,a,e)}}.call(a.prototype),e.GutterHandler=function(m){function u(){l&&(l=clearTimeout(l)),n&&(c.hide(),n=null,e._signal('hideGutterTooltip',c),e.removeEventListener('mousewheel',u))}function h(t){c.setPosition(t.x,t.y)}var e=m.editor,s=e.renderer.$gutterLayer,c=new a(e.container),l,g,n;m.editor.setDefaultHandler('guttermousedown',function(r){if(e.isFocused()&&0==r.getButton()&&'foldWidgets'!=s.getRegion(r)){var t=r.getDocumentPosition().row,n=e.session.selection;if(r.getShiftKey())n.selectTo(t,0);else{if(2==r.domEvent.detail)return e.selectAll(),r.preventDefault();m.$clickSelection=e.selection.getLineRange(t)}return m.setState('selectByLines'),m.captureMouse(r),r.preventDefault()}}),m.editor.setDefaultHandler('guttermousemove',function(t){var r=t.domEvent.target||t.domEvent.srcElement;return d.hasCssClass(r,'ace_fold-widget')?u():void(n&&m.$tooltipFollowsMouse&&h(t),g=t,l||(l=setTimeout(function(){l=null,g&&!m.isMousePressed?function(){var r=g.getDocumentPosition().row,t=s.$annotations[r];if(!t)return u();if(r==e.session.getLength()){var l=e.renderer.pixelToScreenCoordinates(0,g.y).row,o=g.$pos;if(l>e.session.documentToScreenRow(o.row,o.column))return u()}if(n!=t)if(n=t.text.join('<br/>'),c.setHtml(n),c.show(),e._signal('showGutterTooltip',c),e.on('mousewheel',u),m.$tooltipFollowsMouse)h(g);else{var a=g.domEvent.target.getBoundingClientRect(),d=c.getElement().style;d.left=a.right+'px',d.top=a.bottom+'px'}}():u()},50)))}),i.addListener(e.renderer.$gutter,'mouseout',function(){g=null,n&&!l&&(l=setTimeout(function(){l=null,u()},50))}),e.on('changeSession',u)}}),ace.define('ace/mouse/mouse_event',['require','exports','module','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';var t=n('../lib/event'),a=n('../lib/useragent'),r=e.MouseEvent=function(n,e){this.domEvent=n,this.editor=e,this.x=this.clientX=n.clientX,this.y=this.clientY=n.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){t.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){t.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var n=this.editor.getSelectionRange();if(n.isEmpty())this.$inSelection=!1;else{var e=this.getDocumentPosition();this.$inSelection=n.contains(e.row,e.column)}return this.$inSelection},this.getButton=function(){return t.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=a.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(r.prototype)}),ace.define('ace/mouse/dragdrop_handler',['require','exports','module','ace/lib/dom','ace/lib/event','ace/lib/useragent'],function(n,e){'use strict';function l(r){function S(){var t=m;(function(t,e){var a=Date.now(),i=!e||t.row!=e.row,r=!e||t.column!=e.column;!A||i||r?(D.$blockScrolling+=1,D.moveCursorToPosition(t),D.$blockScrolling-=1,A=a,O={x:F,y:B}):u(O.x,O.y,F,B)>p?A=null:a-A>=s&&(D.renderer.scrollCursorIntoView(),A=null)})(m=D.renderer.screenToTextCoordinates(F,B),t),function(t,e){var s=Date.now(),i=D.renderer.layerConfig.lineHeight,r=D.renderer.layerConfig.characterWidth,o=D.renderer.scroller.getBoundingClientRect(),a={x:{left:F-o.left,right:o.right-F},y:{top:B-o.top,bottom:o.bottom-B}},d=b(a.x.left,a.x.right),l=b(a.y.top,a.y.bottom),c={row:t.row,column:t.column};2>=d/r&&(c.column+=a.x.left<a.x.right?-3:2),1>=l/i&&(c.row+=a.y.top<a.y.bottom?-1:1);var u=t.row!=c.row,p=t.column!=c.column,m=!e||t.row!=e.row;u||p&&!m?P?s-P>=_&&D.renderer.scrollCursorIntoView(c):P=s:P=null}(m,t)}function y(){c=D.selection.toOrientedRange(),o=D.session.addMarker(c,'ace_selection',D.getSelectionStyle()),D.clearSelection(),D.isFocused()&&D.renderer.$cursorLayer.setBlinking(!1),clearInterval(e),S(),e=setInterval(S,20),n=0,M.addListener(document,'mousemove',T)}function R(){clearInterval(e),D.session.removeMarker(o),o=null,D.$blockScrolling+=1,D.selection.fromOrientedRange(c),D.$blockScrolling-=1,D.isFocused()&&!g&&D.renderer.$cursorLayer.setBlinking(!D.getReadOnly()),c=null,m=null,n=0,P=null,A=null,M.removeListener(document,'mousemove',T)}function T(){null==i&&(i=setTimeout(function(){null!=i&&o&&R()},20))}function w(n){var e=n.types;return!e||Array.prototype.some.call(e,function(t){return'text/plain'==t||'Text'==t})}function x(a){var e=['copy','copymove','all','uninitialized'],t=I.isMac?a.altKey:a.ctrlKey,n='uninitialized';try{n=a.dataTransfer.effectAllowed.toLowerCase()}catch(t){}var o='none';return t&&0<=e.indexOf(n)?o='copy':0<=['move','copymove','linkmove','all','uninitialized'].indexOf(n)?o='move':0<=e.indexOf(n)&&(o='copy'),o}var D=r.editor,t=L.createElement('img');t.src='data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==',I.isOpera&&(t.style.cssText='width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;'),['dragWait','dragWaitEnd','startDrag','dragReadyEnd','onMouseDrag'].forEach(function(e){r[e]=this[e]},this),D.addEventListener('mousedown',this.onMouseDown.bind(r));var a=D.container,n=0,o,F,B,e,c,m,N,g,P,A,O;this.onDragStart=function(n){if(this.cancelDrag||!a.draggable){var e=this;return setTimeout(function(){e.startSelect(),e.captureMouse(n)},0),n.preventDefault()}c=D.getSelectionRange();var o=n.dataTransfer;o.effectAllowed=D.getReadOnly()?'copy':'copyMove',I.isOpera&&(D.container.appendChild(t),t.scrollTop=0),o.setDragImage&&o.setDragImage(t,0,0),I.isOpera&&D.container.removeChild(t),o.clearData(),o.setData('Text',D.session.getTextRange()),g=!0,this.setState('drag')},this.onDragEnd=function(t){if(a.draggable=!1,g=!1,this.setState(null),!D.getReadOnly()){var e=t.dataTransfer.dropEffect;N||'move'!=e||D.session.remove(D.getSelectionRange()),D.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle('ace_dragging'),this.editor.renderer.setCursorStyle('')},this.onDragEnter=function(t){if(!D.getReadOnly()&&w(t.dataTransfer))return F=t.clientX,B=t.clientY,o||y(),n++,t.dataTransfer.dropEffect=N=x(t),M.preventDefault(t)},this.onDragOver=function(t){if(!D.getReadOnly()&&w(t.dataTransfer))return F=t.clientX,B=t.clientY,o||(y(),n++),null!==i&&(i=null),t.dataTransfer.dropEffect=N=x(t),M.preventDefault(t)},this.onDragLeave=function(t){if(0>=--n&&o)return R(),N=null,M.preventDefault(t)},this.onDrop=function(t){if(m){var e=t.dataTransfer;if(g)'move'===N?c=c.contains(m.row,m.column)?{start:m,end:m}:D.moveText(c,m):'copy'===N?c=D.moveText(c,m,!0):void 0;else{var n=e.getData('Text');c={start:m,end:D.session.insert(m,n)},D.focus(),N=null}return R(),M.preventDefault(t)}},M.addListener(a,'dragstart',this.onDragStart.bind(r)),M.addListener(a,'dragend',this.onDragEnd.bind(r)),M.addListener(a,'dragenter',this.onDragEnter.bind(r)),M.addListener(a,'dragover',this.onDragOver.bind(r)),M.addListener(a,'dragleave',this.onDragLeave.bind(r)),M.addListener(a,'drop',this.onDrop.bind(r));var i=null}function u(r,e,t,n){return a(m(t-r,2)+m(n-e,2))}var L=n('../lib/dom'),M=n('../lib/event'),I=n('../lib/useragent'),_=200,s=200,p=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle('ace_dragging'),this.editor.renderer.setCursorStyle(''),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var n=this.editor;n.container.draggable=!0,n.renderer.$cursorLayer.setBlinking(!1),n.setStyle('ace_dragging');var e=I.isWin?'default':'move';n.renderer.setCursorStyle(e),this.setState('dragReady')},this.onMouseDrag=function(){var e=this.editor.container;I.isIE&&'dragReady'==this.state&&3<u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&e.dragDrop(),'dragWait'===this.state&&0<u(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y)&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))},this.onMouseDown=function(a){if(this.$dragEnabled){this.mousedownEvent=a;var e=this.editor,t=a.inSelection(),n=a.getButton();if(1===(a.domEvent.detail||1)&&0===n&&t){if(a.editor.inMultiSelectMode&&(a.getAccelKey()||a.getShiftKey()))return;this.mousedownEvent.time=Date.now();var o=a.domEvent.target||a.domEvent.srcElement;('unselectable'in o&&(o.unselectable='on'),e.getDragDelay())?(I.isWebKit&&(this.cancelDrag=!0,e.container.draggable=!0),this.setState('dragWait')):this.startDrag(),this.captureMouse(a,this.onMouseDrag.bind(this)),a.defaultPrevented=!0}}}}).call(l.prototype),e.DragdropHandler=l}),ace.define('ace/lib/net',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';var a=n('./dom');e.get=function(r,e){var t=new XMLHttpRequest;t.open('GET',r,!0),t.onreadystatechange=function(){4===t.readyState&&e(t.responseText)},t.send(null)},e.loadScript=function(o,i){var e=a.getDocumentHead(),t=document.createElement('script');t.src=o,e.appendChild(t),t.onload=t.onreadystatechange=function(r,e){!e&&t.readyState&&'loaded'!=t.readyState&&'complete'!=t.readyState||(t=t.onload=t.onreadystatechange=null,e||i())}},e.qualifyURL=function(n){var e=document.createElement('a');return e.href=n,e.href}}),ace.define('ace/lib/event_emitter',['require','exports','module'],function(n,e){'use strict';var t={},a=function(){this.propagationStopped=!0},r=function(){this.defaultPrevented=!0};t._emit=t._dispatchEvent=function(o,e){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var l=this._eventRegistry[o]||[],n=this._defaultHandlers[o];if(l.length||n){'object'==typeof e&&e||(e={}),e.type||(e.type=o),e.stopPropagation||(e.stopPropagation=a),e.preventDefault||(e.preventDefault=r),l=l.slice();for(var i=0;i<l.length&&(l[i](e,this),!e.propagationStopped);i++);return n&&!e.defaultPrevented?n(e,this):void 0}},t._signal=function(r,e){var t=(this._eventRegistry||{})[r];if(t){t=t.slice();for(var n=0;n<t.length;n++)t[n](e,this)}},t.once=function(r,e){var t=this;e&&this.addEventListener(r,function i(){t.removeEventListener(r,i),e.apply(null,arguments)})},t.setDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t||(t=this._defaultHandlers={_disabled_:{}}),t[a]){var n=t[a],i=t._disabled_[a];i||(t._disabled_[a]=i=[]),i.push(n);var r=i.indexOf(e);-1!=r&&i.splice(r,1)}t[a]=e},t.removeDefaultHandler=function(a,e){var t=this._defaultHandlers;if(t){var n=t._disabled_[a];if(t[a]==e)t[a],n&&this.setDefaultHandler(a,n.pop());else if(n){var o=n.indexOf(e);-1!=o&&n.splice(o,1)}}},t.on=t.addEventListener=function(r,e,t){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[r];return n||(n=this._eventRegistry[r]=[]),-1==n.indexOf(e)&&n[t?'unshift':'push'](e),e},t.off=t.removeListener=t.removeEventListener=function(r,e){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[r];if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},t.removeAllListeners=function(t){this._eventRegistry&&(this._eventRegistry[t]=[])},e.EventEmitter=t}),ace.define('ace/lib/app_config',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){function s(){'undefined'!=typeof console&&console.warn&&console.warn.apply(console,arguments)}function a(r,e){var t=new Error(r);t.data=e,'object'==typeof console&&console.error&&console.error(t),setTimeout(function(){throw t})}var l=n('./oop'),t=n('./event_emitter').EventEmitter,r={setOptions:function(n){Object.keys(n).forEach(function(e){this.setOption(e,n[e])},this)},getOptions:function(n){var r={};return n?Array.isArray(n)||(r=n,n=Object.keys(r)):n=Object.keys(this.$options),n.forEach(function(t){r[t]=this.getOption(t)},this),r},setOption:function(r,e){if(this['$'+r]!==e){var t=this.$options[r];if(!t)return s('misspelled option "'+r+'"');if(t.forwardTo)return this[t.forwardTo]&&this[t.forwardTo].setOption(r,e);t.handlesSet||(this['$'+r]=e),t&&t.set&&t.set.call(this,e)}},getOption:function(n){var e=this.$options[n];return e?e.forwardTo?this[e.forwardTo]&&this[e.forwardTo].getOption(n):e&&e.get?e.get.call(this):this['$'+n]:s('misspelled option "'+n+'"')}},o=function(){this.$defaultOptions={}};(function(){l.implement(this,t),this.defineOptions=function(a,e,o){return a.$options||(this.$defaultOptions[e]=a.$options={}),Object.keys(o).forEach(function(e){var t=o[e];'string'==typeof t&&(t={forwardTo:t}),t.name||(t.name=e),a.$options[t.name]=t,'initialValue'in t&&(a['$'+t.name]=t.initialValue)}),l.implement(a,r),this},this.resetOptions=function(r){Object.keys(r.$options).forEach(function(e){var t=r.$options[e];'value'in t&&r.setOption(e,t.value)})},this.setDefaultValue=function(r,e,t){var n=this.$defaultOptions[r]||(this.$defaultOptions[r]={});n[e]&&(n.forwardTo?this.setDefaultValue(n.forwardTo,e,t):n[e].value=t)},this.setDefaultValues=function(r,e){Object.keys(e).forEach(function(t){this.setDefaultValue(r,t,e[t])},this)},this.warn=s,this.reportError=a}).call(o.prototype),e.AppConfig=o}),ace.define('ace/config',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/lib/net','ace/lib/app_config'],function(y,d,e){function l(t){if(i&&i.document){a.packaged=t||y.packaged||e.packaged||i.define&&_(2).packaged;for(var n={},r='',s=document.currentScript||document._currentScript,c=(s&&s.ownerDocument||document).getElementsByTagName('script'),u=0,h;u<c.length;u++){var o=c[u],p=o.src||o.getAttribute('src');if(p){for(var m=o.attributes,f=0,g=m.length,E;f<g;f++)E=m[f],0===E.name.indexOf('data-ace-')&&(n[(h=E.name.replace(/^data-ace-/,''),h.replace(/-(.)/g,function(n,e){return e.toUpperCase()}))]=E.value);var x=p.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);x&&(r=x[1])}}for(var A in r&&(n.base=n.base||r,n.packaged=!0),n.basePath=n.base,n.workerPath=n.workerPath||n.base,n.modePath=n.modePath||n.base,n.themePath=n.themePath||n.base,delete n.base,n)void 0!==n[A]&&d.set(A,n[A])}}var t=y('./lib/lang'),r=(y('./lib/oop'),y('./lib/net')),n=y('./lib/app_config').AppConfig;e.exports=d=new n;var i=function(){return this||'undefined'!=typeof window&&window}(),a={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:'',suffix:'.js',$moduleUrls:{}};d.get=function(t){if(!a.hasOwnProperty(t))throw new Error('Unknown config key: '+t);return a[t]},d.set=function(n,e){if(!a.hasOwnProperty(n))throw new Error('Unknown config key: '+n);a[n]=e},d.all=function(){return t.copyObject(a)},d.moduleUrl=function(l,e){if(a.$moduleUrls[l])return a.$moduleUrls[l];var t=l.split('/'),n='snippets'==(e=e||t[t.length-2]||'')?'/':'-',i=t[t.length-1];if('worker'==e&&'-'==n){var d=new RegExp('^'+e+'[\\-_]|[\\-_]'+e+'$','g');i=i.replace(d,'')}(!i||i==e)&&1<t.length&&(i=t[t.length-2]);var o=a[e+'Path'];return null==o?o=a.basePath:'/'==n&&(e=n=''),o&&'/'!=o.slice(-1)&&(o+='/'),o+e+n+i+this.get('suffix')},d.setModuleUrl=function(n,e){return a.$moduleUrls[n]=e},d.$loading={},d.loadModule=function(t,e){var o,i;Array.isArray(t)&&(i=t[0],t=t[1]);try{o=y(t)}catch(t){}if(o&&!d.$loading[t])return e&&e(o);if(d.$loading[t]||(d.$loading[t]=[]),d.$loading[t].push(e),!(1<d.$loading[t].length)){var s=function(){y([t],function(r){d._emit('load.module',{name:t,module:r});var a=d.$loading[t];d.$loading[t]=null,a.forEach(function(e){e&&e(r)})})};if(!d.get('packaged'))return s();r.loadScript(d.moduleUrl(t,i),s)}},l(!0),d.init=l}),ace.define('ace/mouse/mouse_handler',['require','exports','module','ace/lib/event','ace/lib/useragent','ace/mouse/default_handlers','ace/mouse/default_gutter_handler','ace/mouse/mouse_event','ace/mouse/dragdrop_handler','ace/config'],function(n,e){'use strict';var d=n('../lib/event'),i=n('../lib/useragent'),r=n('./default_handlers').DefaultHandlers,o=n('./default_gutter_handler').GutterHandler,s=n('./mouse_event').MouseEvent,p=n('./dragdrop_handler').DragdropHandler,t=n('../config'),a=function(s){var e=this;this.editor=s,new r(this),new o(this),new p(this);var t=function(){document.hasFocus&&document.hasFocus()&&(s.isFocused()||document.activeElement!=(s.textInput&&s.textInput.getElement()))||window.focus(),s.focus()},n=s.renderer.getMouseEventTarget();d.addListener(n,'click',this.onMouseEvent.bind(this,'click')),d.addListener(n,'mousemove',this.onMouseMove.bind(this,'mousemove')),d.addMultiMouseDownListener([n,s.renderer.scrollBarV&&s.renderer.scrollBarV.inner,s.renderer.scrollBarH&&s.renderer.scrollBarH.inner,s.textInput&&s.textInput.getElement()].filter(Boolean),[400,300,250],this,'onMouseEvent'),d.addMouseWheelListener(s.container,this.onMouseWheel.bind(this,'mousewheel')),d.addTouchMoveListener(s.container,this.onTouchMove.bind(this,'touchmove'));var a=s.renderer.$gutter;d.addListener(a,'mousedown',this.onMouseEvent.bind(this,'guttermousedown')),d.addListener(a,'click',this.onMouseEvent.bind(this,'gutterclick')),d.addListener(a,'dblclick',this.onMouseEvent.bind(this,'gutterdblclick')),d.addListener(a,'mousemove',this.onMouseEvent.bind(this,'guttermousemove')),d.addListener(n,'mousedown',t),d.addListener(a,'mousedown',t),i.isIE&&s.renderer.scrollBarV&&(d.addListener(s.renderer.scrollBarV.element,'mousedown',t),d.addListener(s.renderer.scrollBarH.element,'mousedown',t)),s.on('mousemove',function(t){if(!e.state&&!e.$dragDelay&&e.$dragEnabled){var n=s.renderer.screenToTextCoordinates(t.x,t.y),a=s.session.selection.getRange(),r=s.renderer;!a.isEmpty()&&a.insideStart(n.row,n.column)?r.setCursorStyle('default'):r.setCursorStyle('')}})};(function(){this.onMouseEvent=function(n,e){this.editor._emit(n,new s(e,this.editor))},this.onMouseMove=function(r,e){var t=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;t&&t.length&&this.editor._emit(r,new s(e,this.editor))},this.onMouseWheel=function(r,e){var t=new s(e,this.editor);t.speed=2*this.$scrollSpeed,t.wheelX=e.wheelX,t.wheelY=e.wheelY,this.editor._emit(r,t)},this.onTouchMove=function(r,e){var t=new s(e,this.editor);t.speed=1,t.wheelX=e.wheelX,t.wheelY=e.wheelY,this.editor._emit(r,t)},this.setState=function(t){this.state=t},this.captureMouse=function(r,a){this.x=r.x,this.y=r.y,this.isMousePressed=!0;var t=this.editor.renderer;t.$keepTextAreaAtCursor&&(t.$keepTextAreaAtCursor=null);var n=this,e=function(t){if(t){if(i.isWebKit&&!t.which&&n.releaseMouse)return n.releaseMouse();n.x=t.clientX,n.y=t.clientY,a&&a(t),n.mouseEvent=new s(t,n.editor),n.$mouseMoved=!0}},o=function(r){clearInterval(l),c(),n[n.state+'End']&&n[n.state+'End'](r),n.state='',null==t.$keepTextAreaAtCursor&&(t.$keepTextAreaAtCursor=!0,t.$moveTextAreaToCursor()),n.isMousePressed=!1,n.$onCaptureMouseMove=n.releaseMouse=null,r&&n.onMouseEvent('mouseup',r)},c=function(){n[n.state]&&n[n.state](),n.$mouseMoved=!1};if(i.isOldIE&&'dblclick'==r.domEvent.type)return setTimeout(function(){o(r)});n.$onCaptureMouseMove=e,n.releaseMouse=d.capture(this.editor.container,e,o);var l=setInterval(c,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var n=function(e){e&&e.domEvent&&'contextmenu'!=e.domEvent.type||(this.editor.off('nativecontextmenu',n),e&&e.domEvent&&d.stopEvent(e.domEvent))}.bind(this);setTimeout(n,10),this.editor.on('nativecontextmenu',n)}}).call(a.prototype),t.defineOptions(a.prototype,'mouseHandler',{scrollSpeed:{initialValue:2},dragDelay:{initialValue:i.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),e.MouseHandler=a}),ace.define('ace/mouse/fold_handler',['require','exports','module'],function(n,e){'use strict';e.FoldHandler=function(a){a.on('click',function(e){var t=e.getDocumentPosition(),n=a.session,o=n.getFoldAt(t.row,t.column,1);o&&(e.getAccelKey()?n.removeFold(o):n.expandFold(o),e.stop())}),a.on('gutterclick',function(e){if('foldWidgets'==a.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=a.session;n.foldWidgets&&n.foldWidgets[t]&&a.session.onFoldWidgetClick(t,e),a.isFocused()||a.focus(),e.stop()}}),a.on('gutterdblclick',function(e){if('foldWidgets'==a.renderer.$gutterLayer.getRegion(e)){var t=e.getDocumentPosition().row,n=a.session,i=n.getParentFoldRangeData(t,!0),r=i.range||i.firstRange;if(r){t=r.start.row;var o=n.getFoldAt(t,n.getLine(t).length,1);o?n.removeFold(o):(n.addFold('...',r),a.renderer.scrollCursorIntoView({row:r.start.row,column:0}))}e.stop()}})}}),ace.define('ace/keyboard/keybinding',['require','exports','module','ace/lib/keys','ace/lib/event'],function(n,e){'use strict';var a=n('../lib/keys'),l=n('../lib/event'),t=function(t){this.$editor=t,this.$data={editor:t},this.$handlers=[],this.setDefaultHandler(t.commands)};(function(){this.setDefaultHandler=function(t){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=t,this.addKeyboardHandler(t,0)},this.setKeyboardHandler=function(n){var e=this.$handlers;if(e[e.length-1]!=n){for(;e[e.length-1]&&e[e.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(e[e.length-1]);this.addKeyboardHandler(n,1)}},this.addKeyboardHandler=function(r,a){if(r){'function'!=typeof r||r.handleKeyboard||(r.handleKeyboard=r);var t=this.$handlers.indexOf(r);-1!=t&&this.$handlers.splice(t,1),null==a?this.$handlers.push(r):this.$handlers.splice(a,0,r),-1==t&&r.attach&&r.attach(this.$editor)}},this.removeKeyboardHandler=function(n){var e=this.$handlers.indexOf(n);return-1!=e&&(this.$handlers.splice(e,1),n.detach&&n.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var r=this.$data,e=r.editor;return this.$handlers.map(function(t){return t.getStatusText&&t.getStatusText(e,r)||''}).filter(Boolean).join(' ')},this.$callKeyboardHandlers=function(r,e,t,n){for(var i=!1,s=this.$editor.commands,a=this.$handlers.length,d;a--&&!((d=this.$handlers[a].handleKeyboard(this.$data,r,e,t,n))&&d.command&&((i='null'==d.command||s.exec(d.command,this.$editor,d.args,n))&&n&&-1!=r&&1!=d.passEvent&&1!=d.command.passEvent&&l.stopEvent(n),i)););return i||-1!=r||(d={command:'insertstring'},i=s.exec('insertstring',this.$editor,e)),i&&this.$editor._signal&&this.$editor._signal('keyboardActivity',d),i},this.onCommandKey=function(o,e,t){var n=a.keyCodeToString(t);this.$callKeyboardHandlers(e,n,t,o)},this.onTextInput=function(t){this.$callKeyboardHandlers(-1,t)}}).call(t.prototype),e.KeyBinding=t}),ace.define('ace/range',['require','exports','module'],function(n,e){'use strict';var a=function(r,a,o,s){this.start={row:r,column:a},this.end={row:o,column:s}};(function(){this.isEqual=function(t){return this.start.row===t.start.row&&this.end.row===t.end.row&&this.start.column===t.start.column&&this.end.column===t.end.column},this.toString=function(){return'Range: ['+this.start.row+'/'+this.start.column+'] -> ['+this.end.row+'/'+this.end.column+']'},this.contains=function(n,e){return 0==this.compare(n,e)},this.compareRange=function(r){var e=r.end,n=r.start,a;return 1==(a=this.compare(e.row,e.column))?1==(a=this.compare(n.row,n.column))?2:0==a?1:0:-1==a?-2:-1==(a=this.compare(n.row,n.column))?-1:1==a?42:0},this.comparePoint=function(t){return this.compare(t.row,t.column)},this.containsRange=function(t){return 0==this.comparePoint(t.start)&&0==this.comparePoint(t.end)},this.intersects=function(n){var e=this.compareRange(n);return-1==e||0==e||1==e},this.isEnd=function(n,e){return this.end.row==n&&this.end.column==e},this.isStart=function(n,e){return this.start.row==n&&this.start.column==e},this.setStart=function(n,r){'object'==typeof n?(this.start.column=n.column,this.start.row=n.row):(this.start.row=n,this.start.column=r)},this.setEnd=function(n,r){'object'==typeof n?(this.end.column=n.column,this.end.row=n.row):(this.end.row=n,this.end.column=r)},this.inside=function(n,e){return 0==this.compare(n,e)&&!this.isEnd(n,e)&&!this.isStart(n,e)},this.insideStart=function(n,e){return 0==this.compare(n,e)&&!this.isEnd(n,e)},this.insideEnd=function(n,e){return 0==this.compare(n,e)&&!this.isStart(n,e)},this.compare=function(n,e){return this.isMultiLine()||n!==this.start.row?n<this.start.row?-1:n>this.end.row?1:this.start.row===n?e>=this.start.column?0:-1:this.end.row===n?e<=this.end.column?0:1:0:e<this.start.column?-1:e>this.end.column?1:0},this.compareStart=function(n,e){return this.start.row==n&&this.start.column==e?-1:this.compare(n,e)},this.compareEnd=function(n,e){return this.end.row==n&&this.end.column==e?1:this.compare(n,e)},this.compareInside=function(n,e){return this.end.row==n&&this.end.column==e?1:this.start.row==n&&this.start.column==e?-1:this.compare(n,e)},this.clipRows=function(o,i){if(this.end.row>i)var t={row:i+1,column:0};else this.end.row<o&&(t={row:o,column:0});if(this.start.row>i)var n={row:i+1,column:0};else this.start.row<o&&(n={row:o,column:0});return a.fromPoints(n||this.start,t||this.end)},this.extend=function(i,s){var l=this.compare(i,s);if(0==l)return this;if(-1==l)var n={row:i,column:s};else var r={row:i,column:s};return a.fromPoints(n||this.start,r||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return a.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new a(this.start.row,0,x(this.start.row,this.end.row-1),0):new a(this.start.row,0,this.end.row,0)},this.toScreenRange=function(r){var e=r.documentToScreenPosition(this.start),t=r.documentToScreenPosition(this.end);return new a(e.row,e.column,t.row,t.column)},this.moveBy=function(n,e){this.start.row+=n,this.start.column+=e,this.end.row+=n,this.end.column+=e}}).call(a.prototype),a.fromPoints=function(n,e){return new a(n.row,n.column,e.row,e.column)},a.comparePoints=function(n,e){return n.row-e.row||n.column-e.column},a.comparePoints=function(n,e){return n.row-e.row||n.column-e.column},e.Range=a}),ace.define('ace/selection',['require','exports','module','ace/lib/oop','ace/lib/lang','ace/lib/event_emitter','ace/range'],function(n,e){'use strict';var t=n('./lib/oop'),l=n('./lib/lang'),r=n('./lib/event_emitter').EventEmitter,o=n('./range').Range,i=function(n){this.session=n,this.doc=n.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var r=this;this.lead.on('change',function(t){r._emit('changeCursor'),r.$isEmpty||r._emit('changeSelection'),r.$keepDesiredColumnOnChange||t.old.column==t.value.column||(r.$desiredColumn=null)}),this.selectionAnchor.on('change',function(){r.$isEmpty||r._emit('changeSelection')})};(function(){t.implement(this,r),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(n,e){this.anchor.setPosition(n,e),this.$isEmpty&&(this.$isEmpty=!1,this._emit('changeSelection'))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(r){if(this.$isEmpty)this.moveCursorTo(this.lead.row,this.lead.column+r);else{var e=this.getSelectionAnchor(),t=this.getSelectionLead(),n=this.isBackwards();n&&0===e.column||this.setSelectionAnchor(e.row,e.column+r),(n||0!==t.column)&&this.$moveSelection(function(){this.moveCursorTo(t.row,t.column+r)})}},this.isBackwards=function(){var n=this.anchor,e=this.lead;return n.row>e.row||n.row==e.row&&n.column>e.column},this.getRange=function(){var n=this.anchor,e=this.lead;return this.isEmpty()?o.fromPoints(e,e):this.isBackwards()?o.fromPoints(e,n):o.fromPoints(n,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit('changeSelection'))},this.selectAll=function(){var t=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(t,this.doc.getLine(t).length)},this.setRange=this.setSelectionRange=function(n,e){e?(this.setSelectionAnchor(n.end.row,n.end.column),this.selectTo(n.start.row,n.start.column)):(this.setSelectionAnchor(n.start.row,n.start.column),this.selectTo(n.end.row,n.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(n){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),n.call(this)},this.selectTo=function(n,e){this.$moveSelection(function(){this.moveCursorTo(n,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(n,e){this.clearSelection(),this.moveCursorTo(n,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(r,e){if(void 0===e){var t=r||this.lead;r=t.row,e=t.column}return this.session.getWordRange(r,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var n=this.getCursor(),e=this.session.getAWordRange(n.row,n.column);this.setSelectionRange(e)},this.getLineRange=function(a,s){var t='number'==typeof a?a:this.lead.row,i=this.session.getFoldLine(t),r;return i?(t=i.start.row,r=i.end.row):r=t,!0===s?new o(t,0,r,this.session.getLine(r).length):new o(t,0,r+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(a,e,t){var n=a.column,o=a.column+e;return 0>t&&(n=a.column-e,o=a.column),this.session.isTabStop(a)&&this.doc.getLine(a.row).slice(n,o).split(' ').length-1==e},this.moveCursorLeft=function(){var r=this.lead.getPosition(),t;if(t=this.session.getFoldAt(r.row,r.column,-1))this.moveCursorTo(t.start.row,t.start.column);else if(0===r.column)0<r.row&&this.moveCursorTo(r.row-1,this.doc.getLine(r.row-1).length);else{var e=this.session.getTabSize();this.wouldMoveIntoSoftTab(r,e,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-e):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var r=this.lead.getPosition(),t;if(t=this.session.getFoldAt(r.row,r.column,1))this.moveCursorTo(t.end.row,t.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var e=this.session.getTabSize();r=this.lead,this.wouldMoveIntoSoftTab(r,e,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,e):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var a=this.lead.row,e=this.lead.column,t=this.session.documentToScreenRow(a,e),n=this.session.screenToDocumentPosition(t,0),o=this.session.getDisplayLine(a,null,n.row,n.column).match(/^\s*/);o[0].length==e||this.session.$useEmacsStyleLineStart||(n.column+=o[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var r=this.lead,e=this.session.getDocumentLastRowColumnPosition(r.row,r.column);if(this.lead.column==e.column){var t=this.session.getLine(e.row);if(e.column==t.length){var n=t.search(/\s+$/);0<n&&(e.column=n)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var n=this.doc.getLength()-1,e=this.doc.getLine(n).length;this.moveCursorTo(n,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var a=this.lead.row,e=this.lead.column,t=this.doc.getLine(a),n=t.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var o=this.session.getFoldAt(a,e,1);if(o)this.moveCursorTo(o.end.row,o.end.column);else{if(this.session.nonTokenRe.exec(n)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=t.substring(e)),e>=t.length)return this.moveCursorTo(a,t.length),this.moveCursorRight(),void(a<this.doc.getLength()-1&&this.moveCursorWordRight());this.session.tokenRe.exec(n)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(a,e)}},this.moveCursorLongWordLeft=function(){var r=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(r,t,-1))this.moveCursorTo(n.start.row,n.start.column);else{var e=this.session.getFoldStringAt(r,t,-1);null==e&&(e=this.doc.getLine(r).substring(0,t));var a=l.stringReverse(e);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(a)&&(t-=this.session.nonTokenRe.lastIndex,a=a.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),0>=t)return this.moveCursorTo(r,0),this.moveCursorLeft(),void(0<r&&this.moveCursorWordLeft());this.session.tokenRe.exec(a)&&(t-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(r,t)}},this.$shortWordEndIndex=function(a){var e=0,n=/\s/,o=this.session.tokenRe,r;if(o.lastIndex=0,this.session.tokenRe.exec(a))e=this.session.tokenRe.lastIndex;else{for(;(r=a[e])&&n.test(r);)e++;if(1>e)for(o.lastIndex=0;(r=a[e])&&!o.test(r);)if(o.lastIndex=0,e++,n.test(r)){if(2<e){e--;break}for(;(r=a[e])&&n.test(r);)e++;if(2<e)break}}return o.lastIndex=0,e},this.moveCursorShortWordRight=function(){var a=this.lead.row,e=this.lead.column,t=this.doc.getLine(a),n=t.substring(e),i=this.session.getFoldAt(a,e,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(e==t.length){var r=this.doc.getLength();do a++,n=this.doc.getLine(a);while(a<r&&/^\s*$/.test(n));/^\s+/.test(n)||(n=''),e=0}var o=this.$shortWordEndIndex(n);this.moveCursorTo(a,e+o)},this.moveCursorShortWordLeft=function(){var r=this.lead.row,t=this.lead.column,n;if(n=this.session.getFoldAt(r,t,-1))return this.moveCursorTo(n.start.row,n.start.column);var e=this.session.getLine(r).substring(0,t);if(0===t){do r--,e=this.doc.getLine(r);while(0<r&&/^\s*$/.test(e));t=e.length,/\s+$/.test(e)||(e='')}var a=l.stringReverse(e),o=this.$shortWordEndIndex(a);return this.moveCursorTo(r,t-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(r,e){var t=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===e&&(this.$desiredColumn?t.column=this.$desiredColumn:this.$desiredColumn=t.column);var n=this.session.screenToDocumentPosition(t.row+r,t.column);0!==r&&0===e&&n.row===this.lead.row&&n.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[n.row]&&(0<n.row||0<r)&&n.row++,this.moveCursorTo(n.row,n.column+e,0===e)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(r,e,t){var n=this.session.getFoldAt(r,e,1);n&&(r=n.start.row,e=n.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(r,e),this.$keepDesiredColumnOnChange=!1,t||(this.$desiredColumn=null)},this.moveCursorToScreen=function(r,e,t){var n=this.session.screenToDocumentPosition(r,e);this.moveCursorTo(n.row,n.column,t)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(n){var e=this.getRange();return n?(n.start.column=e.start.column,n.start.row=e.start.row,n.end.column=e.end.column,n.end.row=e.end.row):n=e,n.cursor=this.isBackwards()?n.start:n.end,n.desiredColumn=this.$desiredColumn,n},this.getRangeOfMovements=function(r){var e=this.getCursor();try{r(this);var t=this.getCursor();return o.fromPoints(e,t)}catch(t){return o.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(n){var e=n.clone();return e.isBackwards=n.cursor==n.start,e});else(t=this.getRange()).isBackwards=this.isBackwards();return t},this.fromJSON=function(r){if(null==r.start){if(this.rangeList){this.toSingleRange(r[0]);for(var e=r.length,t;e--;)t=o.fromPoints(r[e].start,r[e].end),r[e].isBackwards&&(t.cursor=t.start),this.addRange(t,!0);return}r=r[0]}this.rangeList&&this.toSingleRange(r),this.setSelectionRange(r,r.isBackwards)},this.isEqual=function(n){if((n.length||this.rangeCount)&&n.length!=this.rangeCount)return!1;if(!n.length||!this.ranges)return this.getRange().isEqual(n);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(n[e]))return!1;return!0}}).call(i.prototype),e.Selection=i}),ace.define('ace/tokenizer',['require','exports','module','ace/config'],function(n,e){'use strict';var t=n('./config'),_=2e3,r=function(d){for(var e in this.states=d,this.regExps={},this.matchMappings={},this.states){for(var t=this.states[e],n=[],i=0,r=this.matchMappings[e]={defaultToken:'text'},o='g',s=[],a=0,c;a<t.length;a++)if(c=t[a],c.defaultToken&&(r.defaultToken=c.defaultToken),c.caseInsensitive&&(o='gi'),null!=c.regex){c.regex instanceof RegExp&&(c.regex=c.regex.toString().slice(1,-1));var p=c.regex,u=new RegExp('(?:('+p+')|(.))').exec('a').length-2;Array.isArray(c.token)?1==c.token.length||1==u?c.token=c.token[0]:u-1==c.token.length?(c.tokenArray=c.token,c.token=null,c.onMatch=this.$arrayTokens):(this.reportError('number of classes and regexp groups doesn\'t match',{rule:c,groupCount:u-1}),c.token=c.token[0]):'function'!=typeof c.token||c.onMatch||(c.onMatch=1<u?this.$applyToken:c.token),1<u&&(/\\\d/.test(c.regex)?p=c.regex.replace(/\\([0-9]+)/g,function(n,e){return'\\'+(parseInt(e,10)+i+1)}):(u=1,p=this.removeCapturingGroups(c.regex)),c.splitRegex||'string'==typeof c.token||s.push(c)),r[i]=a,i+=u,n.push(p),c.onMatch||(c.onMatch=null)}n.length||(r[0]=0,n.push('$')),s.forEach(function(t){t.splitRegex=this.createSplitterRegexp(t.regex,o)},this),this.regExps[e]=new RegExp('('+n.join(')|(')+')|($)',o)}};(function(){this.$setMaxTokenCount=function(t){_=0|t},this.$applyToken=function(a){var s=this.splitRegex.exec(a).slice(1),t=this.token.apply(this,s);if('string'==typeof t)return[{type:t,value:a}];for(var l=[],i=0,r=t.length;i<r;i++)s[i]&&(l[l.length]={type:t[i],value:s[i]});return l},this.$arrayTokens=function(a){if(!a)return[];var s=this.splitRegex.exec(a);if(!s)return'text';for(var l=[],n=this.tokenArray,i=0,r=n.length;i<r;i++)s[i+1]&&(l[l.length]={type:n[i],value:s[i+1]});return l},this.removeCapturingGroups=function(t){return t.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(n,e){return e?'(?:':n})},this.createSplitterRegexp=function(a,e){if(-1!=a.indexOf('(?=')){var l=0,n=!1,i={};a.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(r,e,t,o,s,a){return n?n=']'!=s:s?n=!0:o?(l==i.stack&&(i.end=a+1,i.stack=-1),l--):t&&(l++,1!=t.length&&(i.stack=l,i.start=a)),r}),null!=i.end&&/^\)*$/.test(a.substr(i.end))&&(a=a.substring(0,i.start)+a.substr(i.end))}return'^'!=a.charAt(0)&&(a='^'+a),'$'!=a.charAt(a.length-1)&&(a+='$'),new RegExp(a,(e||'').replace('g',''))},this.getLineTokens=function(r,y){if(y&&'string'!=typeof y){var x=y.slice(0);'#tmp'===(y=x[0])&&(x.shift(),y=x.shift())}else x=[];var n=y||'start',i=this.states[n];i||(n='start',i=this.states[n]);var o=this.matchMappings[n],s=this.regExps[n];s.lastIndex=0;for(var a=[],b=0,u=0,h={type:null,value:''},d;d=s.exec(r);){var c=o.defaultToken,T=null,m=d[0],C=s.lastIndex;if(C-m.length>b){var g=r.substring(b,C-m.length);h.type==c?h.value+=g:(h.type&&a.push(h),h={type:c,value:g})}for(var v=0;v<d.length-2;v++)if(void 0!==d[v+1]){c=(T=i[o[v]]).onMatch?T.onMatch(m,n,x,r):T.token,T.next&&(n='string'==typeof T.next?T.next:T.next(n,x),(i=this.states[n])||(this.reportError('state doesn\'t exist',n),n='start',i=this.states[n]),o=this.matchMappings[n],b=C,(s=this.regExps[n]).lastIndex=C),T.consumeLineEnd&&(b=C);break}if(m)if('string'==typeof c)T&&!1===T.merge||h.type!==c?(h.type&&a.push(h),h={type:c,value:m}):h.value+=m;else if(c)for(h.type&&a.push(h),h={type:null,value:''},v=0;v<c.length;v++)a.push(c[v]);if(b==r.length)break;if(b=C,u++>_){for(u>2*r.length&&this.reportError('infinite loop with in ace tokenizer',{startState:y,line:r});b<r.length;)h.type&&a.push(h),h={value:r.substring(b,b+=2e3),type:'overflow'};n='start',x=[];break}}return h.type&&a.push(h),1<x.length&&x[0]!==n&&x.unshift('#tmp',n),{tokens:a,state:x.length?x:n}},this.reportError=t.reportError}).call(r.prototype),e.Tokenizer=r}),ace.define('ace/mode/text_highlight_rules',['require','exports','module','ace/lib/lang'],function(n,e){'use strict';var t=n('../lib/lang'),a=function(){this.$rules={start:[{token:'empty_line',regex:'^$'},{defaultToken:'text'}]}};(function(){this.addRules=function(a,e){if(e)for(var t in a){for(var n=a[t],i=0,r;i<n.length;i++)r=n[i],(r.next||r.onMatch)&&('string'==typeof r.next&&0!==r.next.indexOf(e)&&(r.next=e+r.next),r.nextState&&0!==r.nextState.indexOf(e)&&(r.nextState=e+r.nextState));this.$rules[e+t]=n}else for(var t in a)this.$rules[t]=a[t]},this.getRules=function(){return this.$rules},this.embedRules=function(i,d,u,n,r){var o='function'==typeof i?new i().getRules():i;if(n)for(var s=0;s<n.length;s++)n[s]=d+n[s];else for(var a in n=[],o)n.push(d+a);if(this.addRules(o,d),u){var c=Array.prototype[r?'push':'unshift'];for(s=0;s<n.length;s++)c.apply(this.$rules[n[s]],t.deepCopy(u))}this.$embeds||(this.$embeds=[]),this.$embeds.push(d)},this.getEmbeds=function(){return this.$embeds};var o=function(n,e){return('start'!=n||e.length)&&e.unshift(this.nextState,n),this.nextState},e=function(n,e){return e.shift(),e.shift()||'start'};this.normalizeRules=function(){var t=0,n=this.$rules;Object.keys(n).forEach(function r(i){var g=n[i];g.processed=!0;for(var s=0;s<g.length;s++){var a=g[s],f=null;Array.isArray(a)&&(f=a,a={}),!a.regex&&a.start&&(a.regex=a.start,a.next||(a.next=[]),a.next.push({defaultToken:a.token},{token:a.token+'.end',regex:a.end||a.start,next:'pop'}),a.token+='.start',a.push=!0);var l=a.next||a.push;if(l&&Array.isArray(l)){var u=a.stateName;u||('string'!=typeof(u=a.token)&&(u=u[0]||''),n[u]&&(u+=t++)),n[u]=l,a.next=u,r(u)}else'pop'==l&&(a.next=e);if(a.push&&(a.nextState=a.next||a.push,a.next=o,delete a.push),a.rules)for(var h in a.rules)n[h]?n[h].push&&n[h].push.apply(n[h],a.rules[h]):n[h]=a.rules[h];var d='string'==typeof a?a:a.include;if(d&&(f=Array.isArray(d)?d.map(function(t){return n[t]}):n[d]),f){var p=[s,1].concat(f);a.noEscape&&(p=p.filter(function(t){return!t.next})),g.splice.apply(g,p),s--}a.keywordMap&&(a.token=this.createKeywordMapper(a.keywordMap,a.defaultToken||'text',a.caseInsensitive),delete a.defaultToken)}},this)},this.createKeywordMapper=function(l,a,e,n){var i=Object.create(null);return Object.keys(l).forEach(function(r){var t=l[r];e&&(t=t.toLowerCase());for(var o=t.split(n||'|'),s=o.length;s--;)i[o[s]]=r}),Object.getPrototypeOf(i)&&(i.__proto__=null),this.$keywordList=Object.keys(i),l=null,e?function(t){return i[t.toLowerCase()]||a}:function(t){return i[t]||a}},this.getKeywords=function(){return this.$keywords}}).call(a.prototype),e.TextHighlightRules=a}),ace.define('ace/mode/behaviour',['require','exports','module'],function(n,e){'use strict';var t=function(){this.$behaviours={}};(function(){this.add=function(r,e,t){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[r]:this.$behaviours[r]={};}this.$behaviours[r][e]=t},this.addBehaviours=function(r){for(var e in r)for(var t in r[e])this.add(e,t,r[e][t])},this.remove=function(t){this.$behaviours&&this.$behaviours[t]&&delete this.$behaviours[t]},this.inherit=function(r,a){if('function'==typeof r)var t=new r().getBehaviours(a);else t=r.getBehaviours(a);this.addBehaviours(t)},this.getBehaviours=function(r){if(r){for(var e={},t=0;t<r.length;t++)this.$behaviours[r[t]]&&(e[r[t]]=this.$behaviours[r[t]]);return e}return this.$behaviours}}).call(t.prototype),e.Behaviour=t}),ace.define('ace/token_iterator',['require','exports','module'],function(n,e){'use strict';var t=function(r,e,t){this.$session=r,this.$row=e,this.$rowTokens=r.getTokens(e);var n=r.getTokenAt(e,t);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;0>this.$tokenIndex;){if(this.$row-=1,0>this.$row)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){var t;for(this.$tokenIndex+=1;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,t||(t=this.$session.getLength()),this.$row>=t)return this.$row=t-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var r=this.$rowTokens,e=this.$tokenIndex,t=r[e].start;if(void 0!==t)return t;for(t=0;0<e;)t+=r[e-=1].value.length;return t},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}}}).call(t.prototype),e.TokenIterator=t}),ace.define('ace/mode/behaviour/cstyle',['require','exports','module','ace/lib/oop','ace/mode/behaviour','ace/token_iterator','ace/lib/lang'],function(n,e){'use strict';var t=n('../../lib/oop'),r=n('../behaviour').Behaviour,o=n('../../token_iterator').TokenIterator,s=n('../../lib/lang'),a=['text','paren.rparen','punctuation.operator'],c=['text','paren.rparen','punctuation.operator','comment'],l={},y={'"':'"',"'":'\''},x=function(n){var e=-1;return(n.multiSelect&&(e=n.selection.index,l.rangeCount!=n.multiSelect.rangeCount&&(l={rangeCount:n.multiSelect.rangeCount})),l[e])?u=l[e]:void(u=l[e]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:'',maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:'',maybeInsertedLineEnd:''})},d=function(a,e,t,n){var o=a.end.row-a.start.row;return{text:t+e+n,selection:[0,a.start.column+1,o,a.end.column+(o?0:1)]}},p=function(t){this.add('braces','insertion',function(e,a,n,r,o){var i=n.getCursorPosition(),c=r.doc.getLine(i.row);if('{'==o){x(n);var l=n.getSelectionRange(),m=r.doc.getTextRange(l);if(''!==m&&'{'!==m&&n.getWrapBehavioursEnabled())return d(l,m,'{','}');if(p.isSaneInsertion(n,r))return /[\]\}\)]/.test(c[i.column])||n.inMultiSelectMode||t&&t.braces?(p.recordAutoInsert(n,r,'}'),{text:'{}',selection:[1,1]}):(p.recordMaybeInsert(n,r,'{'),{text:'{',selection:[1,1]})}else if('}'!=o){if('\n'==o||'\r\n'==o){x(n);var h='';if(p.isMaybeInsertedClosing(i,c)&&(h=s.stringRepeat('}',u.maybeInsertedBrackets),p.clearMaybeInsertedClosing()),'}'===c.substring(i.column,i.column+1)){var _=r.findMatchingBracket({row:i.row,column:i.column+1},'}');if(!_)return null;var y=this.$getIndent(r.getLine(_.row))}else{if(!h)return void p.clearMaybeInsertedClosing();y=this.$getIndent(c)}var E=y+r.getTabString();return{text:'\n'+E+'\n'+y+h,selection:[1,E.length,1,E.length]}}p.clearMaybeInsertedClosing()}else if((x(n),'}'==c.substring(i.column,i.column+1))&&null!==r.$findOpeningBracket('}',{column:i.column+1,row:i.row})&&p.isAutoInsertedClosing(i,c,o))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}),this.add('braces','deletion',function(a,e,t,n,r){var o=n.doc.getTextRange(r);if(!r.isMultiLine()&&'{'==o){if(x(t),'}'==n.doc.getLine(r.start.row).substring(r.end.column,r.end.column+1))return r.end.column++,r;u.maybeInsertedBrackets--}}),this.add('parens','insertion',function(l,e,t,n,i){if('('==i){x(t);var r=t.getSelectionRange(),o=n.doc.getTextRange(r);if(''!==o&&t.getWrapBehavioursEnabled())return d(r,o,'(',')');if(p.isSaneInsertion(t,n))return p.recordAutoInsert(t,n,')'),{text:'()',selection:[1,1]}}else if(')'==i){x(t);var s=t.getCursorPosition(),a=n.doc.getLine(s.row);if(')'==a.substring(s.column,s.column+1)&&null!==n.$findOpeningBracket(')',{column:s.column+1,row:s.row})&&p.isAutoInsertedClosing(s,a,i))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}),this.add('parens','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&'('==r&&(x(t),')'==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add('brackets','insertion',function(l,e,t,n,i){if('['==i){x(t);var r=t.getSelectionRange(),o=n.doc.getTextRange(r);if(''!==o&&t.getWrapBehavioursEnabled())return d(r,o,'[',']');if(p.isSaneInsertion(t,n))return p.recordAutoInsert(t,n,']'),{text:'[]',selection:[1,1]}}else if(']'==i){x(t);var s=t.getCursorPosition(),a=n.doc.getLine(s.row);if(']'==a.substring(s.column,s.column+1)&&null!==n.$findOpeningBracket(']',{column:s.column+1,row:s.row})&&p.isAutoInsertedClosing(s,a,i))return p.popAutoInsertedClosing(),{text:'',selection:[1,1]}}}),this.add('brackets','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&'['==r&&(x(t),']'==n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)))return i.end.column++,i}),this.add('string_dquotes','insertion',function(p,e,t,n,i){var r=n.$mode.$quotes||y;if(1==i.length&&r[i]){if(this.lineCommentStart&&-1!=this.lineCommentStart.indexOf(i))return;x(t);var o=i,s=t.getSelectionRange(),a=n.doc.getTextRange(s);if(!(''===a||1==a.length&&r[a])&&t.getWrapBehavioursEnabled())return d(s,a,o,o);if(!a){var h=t.getCursorPosition(),l=n.doc.getLine(h.row),u=l.substring(h.column-1,h.column),m=l.substring(h.column,h.column+1),f=n.getTokenAt(h.row,h.column),g=n.getTokenAt(h.row,h.column+1);if('\\'==u&&f&&/escape/.test(f.type))return null;var b=f&&/string|escape/.test(f.type),T=!g||/string|escape/.test(g.type),C;if(m==o)(C=b!==T)&&/string\.end/.test(g.type)&&(C=!1);else{if(b&&!T)return null;if(b&&T)return null;var A=n.$mode.tokenRe;A.lastIndex=0;var _=A.test(u);A.lastIndex=0;var R=A.test(u);if(_||R)return null;if(m&&!/[\s;,.})\]\\]/.test(m))return null;C=!0}return{text:C?o+o:'',selection:[1,1]}}}}),this.add('string_dquotes','deletion',function(a,e,t,n,i){var r=n.doc.getTextRange(i);if(!i.isMultiLine()&&('"'==r||'\''==r)&&(x(t),n.doc.getLine(i.start.row).substring(i.start.column+1,i.start.column+2)==r))return i.end.column++,i})},u;p.isSaneInsertion=function(s,e){var t=s.getCursorPosition(),n=new o(e,t.row,t.column);if(!this.$matchTokenType(n.getCurrentToken()||'text',a)){var i=new o(e,t.row,t.column+1);if(!this.$matchTokenType(i.getCurrentToken()||'text',a))return!1}return n.stepForward(),n.getCurrentTokenRow()!==t.row||this.$matchTokenType(n.getCurrentToken()||'text',c)},p.$matchTokenType=function(n,e){return-1<e.indexOf(n.type||n)},p.recordAutoInsert=function(a,e,t){var n=a.getCursorPosition(),r=e.doc.getLine(n.row);this.isAutoInsertedClosing(n,r,u.autoInsertedLineEnd[0])||(u.autoInsertedBrackets=0),u.autoInsertedRow=n.row,u.autoInsertedLineEnd=t+r.substr(n.column),u.autoInsertedBrackets++},p.recordMaybeInsert=function(a,e,t){var n=a.getCursorPosition(),r=e.doc.getLine(n.row);this.isMaybeInsertedClosing(n,r)||(u.maybeInsertedBrackets=0),u.maybeInsertedRow=n.row,u.maybeInsertedLineStart=r.substr(0,n.column)+t,u.maybeInsertedLineEnd=r.substr(n.column),u.maybeInsertedBrackets++},p.isAutoInsertedClosing=function(r,e,t){return 0<u.autoInsertedBrackets&&r.row===u.autoInsertedRow&&t===u.autoInsertedLineEnd[0]&&e.substr(r.column)===u.autoInsertedLineEnd},p.isMaybeInsertedClosing=function(n,e){return 0<u.maybeInsertedBrackets&&n.row===u.maybeInsertedRow&&e.substr(n.column)===u.maybeInsertedLineEnd&&e.substr(0,n.column)==u.maybeInsertedLineStart},p.popAutoInsertedClosing=function(){u.autoInsertedLineEnd=u.autoInsertedLineEnd.substr(1),u.autoInsertedBrackets--},p.clearMaybeInsertedClosing=function(){u&&(u.maybeInsertedBrackets=0,u.maybeInsertedRow=-1)},t.inherits(p,r),e.CstyleBehaviour=p}),ace.define('ace/unicode',['require','exports','module'],function(n,r){'use strict';r.packages={},function(t){var e=/\w{4}/g;for(var n in t)r.packages[n]=t[n].replace(e,'\\u$&')}({L:'0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC',Ll:'0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A',Lu:'0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A',Lt:'01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC',Lm:'02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F',Lo:'01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC',M:'0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26',Mn:'0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26',Mc:'0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC',Me:'0488048906DE20DD-20E020E2-20E4A670-A672',N:'0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19',Nd:'0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19',Nl:'16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF',No:'00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835',P:'0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65',Pd:'002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D',Ps:'0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62',Pe:'0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63',Pi:'00AB2018201B201C201F20392E022E042E092E0C2E1C2E20',Pf:'00BB2019201D203A2E032E052E0A2E0D2E1D2E21',Pc:'005F203F20402054FE33FE34FE4D-FE4FFF3F',Po:'0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65',S:'0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD',Sm:'002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC',Sc:'002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6',Sk:'005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3',So:'00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD',Z:'002000A01680180E2000-200A20282029202F205F3000',Zs:'002000A01680180E2000-200A202F205F3000',Zl:'2028',Zp:'2029',C:'0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF',Cc:'0000-001F007F-009F',Cf:'00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB',Co:'E000-F8FF',Cs:'D800-DFFF',Cn:'03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF'})}),ace.define('ace/mode/text',['require','exports','module','ace/tokenizer','ace/mode/text_highlight_rules','ace/mode/behaviour/cstyle','ace/unicode','ace/lib/lang','ace/token_iterator','ace/range'],function(n,e){'use strict';var t=n('../tokenizer').Tokenizer,i=n('./text_highlight_rules').TextHighlightRules,r=n('./behaviour/cstyle').CstyleBehaviour,o=n('../unicode'),s=n('../lib/lang'),_=n('../token_iterator').TokenIterator,a=n('../range').Range,l=function(){this.HighlightRules=i};(function(){this.$defaultBehaviour=new r,this.tokenRe=new RegExp('^['+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+'\\$_]+','g'),this.nonTokenRe=new RegExp('^(?:[^'+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+'\\$_]|\\s])+','g'),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new t(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart='',this.blockComment='',this.toggleCommentLines=function(a,e,y,n){function v(r){for(var e=y;e<=n;e++)r(x.getLine(e),e)}var x=e.doc,r=!0,o=!0,i=1/0,b=e.getTabSize(),t=!1;if(this.lineCommentStart){Array.isArray(this.lineCommentStart)?(m=this.lineCommentStart.map(s.escapeRegExp).join('|'),d=this.lineCommentStart[0]):(m=s.escapeRegExp(this.lineCommentStart),d=this.lineCommentStart),m=new RegExp('^(\\s*)(?:'+m+') ?'),t=e.getUseSoftTabs(),f=function(r,e){var t=r.match(m);if(t){var n=t[1].length,a=t[0].length;u(r,n,a)||' '!=t[0][a-1]||a--,x.removeInLine(e,n,a)}};var l=d+' ',u=(g=function(n,e){r&&!/\S/.test(n)||(u(n,i,i)?x.insertInLine({row:e,column:i},l):x.insertInLine({row:e,column:i},d))},E=function(t){return m.test(t)},function(r,e,t){for(var n=0;e--&&' '==r.charAt(e);)n++;if(0!=n%b)return!1;for(n=0;' '==r.charAt(t++);)n++;return 2<b?n%b!=b-1:0==n%b})}else{if(!this.blockComment)return!1;var d=this.blockComment.start,p=this.blockComment.end,m=new RegExp('^(\\s*)(?:'+s.escapeRegExp(d)+')'),h=new RegExp('(?:'+s.escapeRegExp(p)+')\\s*$'),g=function(n,e){E(n,e)||r&&!/\S/.test(n)||(x.insertInLine({row:e,column:n.length},p),x.insertInLine({row:e,column:i},d))},f=function(r,e){var t;(t=r.match(h))&&x.removeInLine(e,r.length-t[0].length,r.length),(t=r.match(m))&&x.removeInLine(e,t[1].length,t[0].length)},E=function(t,a){if(m.test(t))return!0;for(var n=e.getTokens(a),o=0;o<n.length;o++)if('comment'===n[o].type)return!0}}var A=1/0;v(function(r,e){var t=r.search(/\S/);-1===t?A>r.length&&(A=r.length):(t<i&&(i=t),o&&!E(r,e)&&(o=!1))}),i==1/0&&(i=A,r=!1,o=!1),t&&0!=i%b&&(i=T(i/b)*b),v(o?f:g)},this.toggleBlockComment=function(l,e,t,n){var i=this.blockComment;if(i){!i.start&&i[0]&&(i=i[0]);var r=(m=new _(e,n.row,n.column)).getCurrentToken(),c=(e.selection,e.selection.toOrientedRange()),u,o;if(r&&/comment/.test(r.type)){for(var s,h;r&&/comment/.test(r.type);){if(-1!=(f=r.value.indexOf(i.start))){var d=m.getCurrentTokenRow(),p=m.getCurrentTokenColumn()+f;s=new a(d,p,d,p+i.start.length);break}r=m.stepBackward()}var m;for(r=(m=new _(e,n.row,n.column)).getCurrentToken();r&&/comment/.test(r.type);){var f;if(-1!=(f=r.value.indexOf(i.end))){d=m.getCurrentTokenRow(),p=m.getCurrentTokenColumn()+f,h=new a(d,p,d,p+i.end.length);break}r=m.stepForward()}h&&e.remove(h),s&&(e.remove(s),u=s.start.row,o=-i.start.length)}else o=i.start.length,u=t.start.row,e.insert(t.end,i.end),e.insert(t.start,i.start);c.start.row==u&&(c.start.column+=o),c.end.row==u&&(c.end.column+=o),e.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(n,e){return this.$getIndent(e)},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(t){return t.match(/^\s*/)[0]},this.createWorker=function(){return null},this.createModeDelegates=function(r){for(var a in this.$embeds=[],this.$modes={},r)r[a]&&(this.$embeds.push(a),this.$modes[a]=new r[a]);var t=['toggleBlockComment','toggleCommentLines','getNextLineIndent','checkOutdent','autoOutdent','transformAction','getCompletions'];for(a=0;a<t.length;a++)!function(n){var e=t[a],o=n[e];n[t[a]]=function(){return this.$delegator(e,arguments,o)}}(this)},this.$delegator=function(l,e,t){var n=e[0];'string'!=typeof n&&(n=n[0]);for(var d=0;d<this.$embeds.length;d++)if(this.$modes[this.$embeds[d]]){var r=n.split(this.$embeds[d]);if(!r[0]&&r[1]){e[0]=r[1];var o=this.$modes[this.$embeds[d]];return o[l].apply(o,e)}}var s=t.apply(this,e);return t?s:void 0},this.transformAction=function(n,e){if(this.$behaviour){var t=this.$behaviour.getBehaviours();for(var r in t)if(t[r][e]){var o=t[r][e].apply(this,arguments);if(o)return o}}},this.getKeywords=function(l){if(!this.completionKeywords){var e=this.$tokenizer.rules,t=[];for(var n in e)for(var i=e[n],r=0,o=i.length;r<o;r++)if('string'==typeof i[r].token)/keyword|support|storage/.test(i[r].token)&&t.push(i[r].regex);else if('object'==typeof i[r].token)for(var s=0,a=i[r].token.length;s<a;s++)/keyword|support|storage/.test(i[r].token[s])&&(n=i[r].regex.match(/\(.+?\)/g)[s],t.push(n.substr(1,n.length-2)));this.completionKeywords=t}return l?t.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(){return(this.$keywordList||this.$createKeywordList()).map(function(t){return{name:t,value:t,score:0,meta:'keyword'}})},this.$id='ace/mode/text'}).call(l.prototype),e.Mode=l}),ace.define('ace/apply_delta',['require','exports','module'],function(n,e){'use strict';e.applyDelta=function(n,e){var t=e.start.row,i=e.start.column,r=n[t]||'';switch(e.action){case'insert':if(1===e.lines.length)n[t]=r.substring(0,i)+e.lines[0]+r.substring(i);else{var o=[t,1].concat(e.lines);n.splice.apply(n,o),n[t]=r.substring(0,i)+n[t],n[t+e.lines.length-1]+=r.substring(i)}break;case'remove':var s=e.end.column,a=e.end.row;t===a?n[t]=r.substring(0,i)+r.substring(s):n.splice(t,a-t+1,r.substring(0,i)+n[a].substring(s));}}}),ace.define('ace/anchor',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),a=n('./lib/event_emitter').EventEmitter,r=e.Anchor=function(r,e,t){this.$onChange=this.onChange.bind(this),this.attach(r),void 0===t?this.setPosition(e.row,e.column):this.setPosition(e,t)};(function(){function e(r,a,t){var n=t?r.column<=a.column:r.column<a.column;return r.row<a.row||r.row==a.row&&n}t.implement(this,a),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(r){if(!(r.start.row==r.end.row&&r.start.row!=this.row||r.start.row>this.row)){var t=function(l,t,n){var d='insert'==l.action,r=(d?1:-1)*(l.end.row-l.start.row),o=(d?1:-1)*(l.end.column-l.start.column),s=l.start,a=d?s:l.end;return e(t,s,n)?{row:t.row,column:t.column}:e(a,t,!n)?{row:t.row+r,column:t.column+(t.row==a.row?o:0)}:{row:s.row,column:s.column}}(r,{row:this.row,column:this.column},this.$insertRight);this.setPosition(t.row,t.column,!0)}},this.setPosition=function(a,o,s){var n;if(n=s?{row:a,column:o}:this.$clipPositionToDocument(a,o),this.row!=n.row||this.column!=n.column){var l={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal('change',{old:l,value:n})}},this.detach=function(){this.document.removeEventListener('change',this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on('change',this.$onChange)},this.$clipPositionToDocument=function(r,e){var t={};return r>=this.document.getLength()?(t.row=x(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):0>r?(t.row=0,t.column=0):(t.row=r,t.column=b(this.document.getLine(t.row).length,x(0,e))),0>e&&(t.column=0),t}}).call(r.prototype)}),ace.define('ace/document',['require','exports','module','ace/lib/oop','ace/apply_delta','ace/lib/event_emitter','ace/range','ace/anchor'],function(n,e){'use strict';var t=n('./lib/oop'),i=n('./apply_delta').applyDelta,r=n('./lib/event_emitter').EventEmitter,d=n('./range').Range,o=n('./anchor').Anchor,a=function(t){this.$lines=[''],0===t.length?this.$lines=['']:Array.isArray(t)?this.insertMergedLines({row:0,column:0},t):this.insert({row:0,column:0},t)};(function(){t.implement(this,r),this.setValue=function(n){var e=this.getLength()-1;this.remove(new d(0,0,e,this.getLine(e).length)),this.insert({row:0,column:0},n)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(n,e){return new o(this,n,e)},this.$split=0==='aaa'.split(/a/).length?function(t){return t.replace(/\r\n|\r/g,'\n').split('\n')}:function(t){return t.split(/\r\n|\r|\n/)},this.$detectNewLine=function(n){var e=n.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=e?e[1]:'\n',this._signal('changeNewLineMode')},this.getNewLineCharacter=function(){switch(this.$newLineMode){case'windows':return'\r\n';case'unix':return'\n';default:return this.$autoNewLine||'\n';}},this.$autoNewLine='',this.$newLineMode='auto',this.setNewLineMode=function(t){this.$newLineMode!==t&&(this.$newLineMode=t,this._signal('changeNewLineMode'))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(t){return'\r\n'==t||'\r'==t||'\n'==t},this.getLine=function(t){return this.$lines[t]||''},this.getLines=function(n,e){return this.$lines.slice(n,e+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(t){return this.getLinesForRange(t).join(this.getNewLineCharacter())},this.getLinesForRange=function(r){var e;if(r.start.row===r.end.row)e=[this.getLine(r.start.row).substring(r.start.column,r.end.column)];else{(e=this.getLines(r.start.row,r.end.row))[0]=(e[0]||'').substring(r.start.column);var t=e.length-1;r.end.row-r.start.row==t&&(e[t]=e[t].substring(0,r.end.column))}return e},this.insertLines=function(n,e){return console.warn('Use of document.insertLines is deprecated. Use the insertFullLines method instead.'),this.insertFullLines(n,e)},this.removeLines=function(n,e){return console.warn('Use of document.removeLines is deprecated. Use the removeFullLines method instead.'),this.removeFullLines(n,e)},this.insertNewLine=function(t){return console.warn('Use of document.insertNewLine is deprecated. Use insertMergedLines(position, [\'\', \'\']) instead.'),this.insertMergedLines(t,['',''])},this.insert=function(n,e){return 1>=this.getLength()&&this.$detectNewLine(e),this.insertMergedLines(n,this.$split(e))},this.insertInLine=function(r,e){var t=this.clippedPos(r.row,r.column),a=this.pos(r.row,r.column+e.length);return this.applyDelta({start:t,end:a,action:'insert',lines:[e]},!0),this.clonePos(a)},this.clippedPos=function(r,a){var t=this.getLength();void 0===r?r=t:0>r?r=0:r>=t&&(r=t-1,a=void 0);var n=this.getLine(r);return null==a&&(a=n.length),{row:r,column:a=b(x(a,0),n.length)}},this.clonePos=function(t){return{row:t.row,column:t.column}},this.pos=function(n,r){return{row:n,column:r}},this.$clipPosition=function(n){var e=this.getLength();return n.row>=e?(n.row=x(0,e-1),n.column=this.getLine(e-1).length):(n.row=x(0,n.row),n.column=b(x(n.column,0),this.getLine(n.row).length)),n},this.insertFullLines=function(r,a){var t=0;(r=b(x(r,0),this.getLength()))<this.getLength()?(a=a.concat(['']),t=0):(a=[''].concat(a),r--,t=this.$lines[r].length),this.insertMergedLines({row:r,column:t},a)},this.insertMergedLines=function(r,e){var a=this.clippedPos(r.row,r.column),o={row:a.row+e.length-1,column:(1==e.length?a.column:0)+e[e.length-1].length};return this.applyDelta({start:a,end:o,action:'insert',lines:e}),this.clonePos(o)},this.remove=function(r){var e=this.clippedPos(r.start.row,r.start.column),a=this.clippedPos(r.end.row,r.end.column);return this.applyDelta({start:e,end:a,action:'remove',lines:this.getLinesForRange({start:e,end:a})}),this.clonePos(e)},this.removeInLine=function(a,e,t){var n=this.clippedPos(a,e),o=this.clippedPos(a,t);return this.applyDelta({start:n,end:o,action:'remove',lines:this.getLinesForRange({start:n,end:o})},!0),this.clonePos(n)},this.removeFullLines=function(s,e){s=b(x(0,s),this.getLength()-1);var t=(e=b(x(0,e),this.getLength()-1))==this.getLength()-1&&0<s,n=e<this.getLength()-1,i=t?s-1:s,r=t?this.getLine(i).length:0,o=n?e+1:e,a=n?0:this.getLine(o).length,c=new d(i,r,o,a),l=this.$lines.slice(s,e+1);return this.applyDelta({start:c.start,end:c.end,action:'remove',lines:this.getLinesForRange(c)}),l},this.removeNewLine=function(t){t<this.getLength()-1&&0<=t&&this.applyDelta({start:this.pos(t,this.getLine(t).length),end:this.pos(t+1,0),action:'remove',lines:['','']})},this.replace=function(n,e){return n instanceof d||(n=d.fromPoints(n.start,n.end)),0===e.length&&n.isEmpty()?n.start:e==this.getTextRange(n)?n.end:(this.remove(n),e?this.insert(n.start,e):n.start)},this.applyDeltas=function(n){for(var e=0;e<n.length;e++)this.applyDelta(n[e])},this.revertDeltas=function(n){for(var e=n.length-1;0<=e;e--)this.revertDelta(n[e])},this.applyDelta=function(r,e){var t='insert'==r.action;(t?1>=r.lines.length&&!r.lines[0]:!d.comparePoints(r.start,r.end))||(t&&2e4<r.lines.length&&this.$splitAndapplyLargeDelta(r,2e4),i(this.$lines,r,e),this._signal('change',r))},this.$splitAndapplyLargeDelta=function(l,e){for(var t=l.lines,n=t.length,i=l.start.row,r=l.start.column,o=0,s=0;;){o=s,s+=e-1;var a=t.slice(o,s);if(s>n){l.lines=a,l.start.row=i+o,l.start.column=r;break}a.push(''),this.applyDelta({start:this.pos(i+o,r),end:this.pos(i+s,r=0),action:l.action,lines:a},!0)}},this.revertDelta=function(t){this.applyDelta({start:this.clonePos(t.start),end:this.clonePos(t.end),action:'insert'==t.action?'remove':'insert',lines:t.lines.slice()})},this.indexToPosition=function(a,e){for(var t=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=e||0,s=t.length;i<s;i++)if(0>(a-=t[i].length+n))return{row:i,column:a+t[i].length+n};return{row:s-1,column:t[s-1].length}},this.positionToIndex=function(a,e){for(var t=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,i=0,r=b(a.row,t.length),o=e||0;o<r;++o)i+=t[o].length+n;return i+a.column}}).call(a.prototype),e.Document=a}),ace.define('ace/background_tokenizer',['require','exports','module','ace/lib/oop','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),a=n('./lib/event_emitter').EventEmitter,r=function(t){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=t;var l=this;this.$worker=function(){if(l.running){for(var n=new Date,e=l.currentLine,t=-1,i=l.doc,r=e;l.lines[e];)e++;var o=i.getLength(),s=0;for(l.running=!1;e<o;){l.$tokenizeRow(e),t=e;do e++;while(l.lines[e]);if(0==++s%5&&20<new Date-n){l.running=setTimeout(l.$worker,20);break}}l.currentLine=e,-1==t&&(t=e),r<=t&&l.fireUpdateEvent(r,t)}}};(function(){t.implement(this,a),this.setTokenizer=function(t){this.tokenizer=t,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(t){this.doc=t,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(n,r){this._signal('update',{data:{first:n,last:r}})},this.start=function(t){this.currentLine=b(t||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(r){var e=r.start.row,t=r.end.row-e;if(0==t)this.lines[e]=null;else if('remove'==r.action)this.lines.splice(e,t+1,null),this.states.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.lines.splice.apply(this.lines,n),this.states.splice.apply(this.states,n)}this.currentLine=b(e,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(t){return this.lines[t]||this.$tokenizeRow(t)},this.getState=function(t){return this.currentLine==t&&this.$tokenizeRow(t),this.states[t]||'start'},this.$tokenizeRow=function(r){var e=this.doc.getLine(r),t=this.states[r-1],n=this.tokenizer.getLineTokens(e,t,r);return this.states[r]+''==n.state+''?this.currentLine==r&&(this.currentLine=r+1):(this.states[r]=n.state,this.lines[r+1]=null,this.currentLine>r+1&&(this.currentLine=r+1)),this.lines[r]=n.tokens}}).call(r.prototype),e.BackgroundTokenizer=r}),ace.define('ace/search_highlight',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/range'],function(n,e){'use strict';var a=n('./lib/lang'),t=(n('./lib/oop'),n('./range').Range),r=function(r,e,t){this.setRegexp(r),this.clazz=e,this.type=t||'text'};(function(){this.MAX_RANGES=500,this.setRegexp=function(t){this.regExp+''!=t+''&&(this.regExp=t,this.cache=[])},this.update=function(r,e,i,n){if(this.regExp)for(var o=n.firstRow,s=n.lastRow,d=o,c;d<=s;d++){c=this.cache[d],null==c&&((c=a.getMatchOffsets(i.getLine(d),this.regExp)).length>this.MAX_RANGES&&(c=c.slice(0,this.MAX_RANGES)),c=c.map(function(n){return new t(d,n.offset,d,n.offset+n.length)}),this.cache[d]=c.length?c:'');for(var l=c.length;l--;)e.drawSingleLineMarker(r,c[l].toScreenRange(i),this.clazz,n)}}}).call(r.prototype),e.SearchHighlight=r}),ace.define('ace/edit_session/fold_line',['require','exports','module','ace/range'],function(n,e){'use strict';function r(r,e){this.foldData=r,Array.isArray(e)?this.folds=e:e=this.folds=[e];var t=e[e.length-1];this.range=new a(e[0].start.row,e[0].start.column,t.end.row,t.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}var a=n('../range').Range;(function(){this.shiftRow=function(n){this.start.row+=n,this.end.row+=n,this.folds.forEach(function(e){e.start.row+=n,e.end.row+=n})},this.addFold=function(t){if(t.sameRow){if(t.start.row<this.startRow||t.endRow>this.endRow)throw new Error('Can\'t add a fold to this FoldLine as it has no connection');this.folds.push(t),this.folds.sort(function(n,e){return-n.range.compareEnd(e.start.row,e.start.column)}),0<this.range.compareEnd(t.start.row,t.start.column)?(this.end.row=t.end.row,this.end.column=t.end.column):0>this.range.compareStart(t.end.row,t.end.column)&&(this.start.row=t.start.row,this.start.column=t.start.column)}else if(t.start.row==this.end.row)this.folds.push(t),this.end.row=t.end.row,this.end.column=t.end.column;else{if(t.end.row!=this.start.row)throw new Error('Trying to add fold to FoldRow that doesn\'t have a matching row');this.folds.unshift(t),this.start.row=t.start.row,this.start.column=t.start.column}t.foldLine=this},this.containsRow=function(t){return t>=this.start.row&&t<=this.end.row},this.walk=function(l,e,t){var n=0,o=this.folds,s=!0,a,i;null==e&&(e=this.end.row,t=this.end.column);for(var r=0;r<o.length;r++){if(-1==(i=(a=o[r]).range.compareStart(e,t)))return void l(null,e,t,n,s);if(!l(null,a.start.row,a.start.column,n,s)&&l(a.placeholder,a.start.row,a.start.column,n)||0===i)return;s=!a.sameRow,n=a.end.column}l(null,e,t,n,s)},this.getNextFoldTo=function(a,e){for(var t=0,r,o;t<this.folds.length;t++){if(-1==(o=(r=this.folds[t]).range.compareEnd(a,e)))return{fold:r,kind:'after'};if(0===o)return{fold:r,kind:'inside'}}return null},this.addRemoveChars=function(a,e,t){var n=this.getNextFoldTo(a,e),o,i;if(n)if(o=n.fold,'inside'==n.kind&&o.start.column!=e&&o.start.row!=a)window.console&&window.console.log(a,e,o);else if(o.start.row==a){var r=(i=this.folds).indexOf(o);for(0===r&&(this.start.column+=t);r<i.length;r++){if((o=i[r]).start.column+=t,!o.sameRow)return;o.end.column+=t}this.end.column+=t}},this.split=function(d,e){var t=this.getNextFoldTo(d,e);if(!t||'inside'==t.kind)return null;var u=t.fold,i=this.folds,o=this.foldData,s=i.indexOf(u),a=i[s-1];this.end.row=a.end.row,this.end.column=a.end.column;var c=new r(o,i=i.splice(s,i.length-s));return o.splice(o.indexOf(this)+1,0,c),c},this.merge=function(r){for(var e=r.folds,t=0;t<e.length;t++)this.addFold(e[t]);var n=this.foldData;n.splice(n.indexOf(r),1)},this.toString=function(){var n=[this.range.toString()+': ['];return this.folds.forEach(function(e){n.push('  '+e.toString())}),n.push(']'),n.join('\n')},this.idxToPosition=function(r){for(var e=0,t=0,n;t<this.folds.length;t++){if(n=this.folds[t],0>(r-=n.start.column-e))return{row:n.start.row,column:n.start.column+r};if(0>(r-=n.placeholder.length))return n.start;e=n.end.column}return{row:this.end.row,column:this.end.column+r}}}).call(r.prototype),e.FoldLine=r}),ace.define('ace/range_list',['require','exports','module','ace/range'],function(n,e){'use strict';var l=n('./range').Range.comparePoints,t=function(){this.ranges=[]};(function(){this.comparePoints=l,this.pointIndex=function(i,e,d){for(var n=this.ranges,r=d||0;r<n.length;r++){var u=n[r],s=l(i,u.end);if(!(0<s)){var a=l(i,u.start);return 0===s?e&&0!==a?-r-2:r:0<a||0===a&&!e?r:-r-1}}return-r-1},this.add=function(r){var e=!r.isEmpty(),t=this.pointIndex(r.start,e);0>t&&(t=-t-1);var a=this.pointIndex(r.end,e,t);return 0>a?a=-a-1:a++,this.ranges.splice(t,a-t,r)},this.addList=function(r){for(var e=[],t=r.length;t--;)e.push.apply(e,this.add(r[t]));return e},this.substractPoint=function(n){var e=this.pointIndex(n);if(0<=e)return this.ranges.splice(e,1)},this.merge=function(){for(var a=[],t=this.ranges,n=(t=t.sort(function(n,e){return l(n.start,e.start)}))[0],r=1,o;r<t.length;r++){o=n,n=t[r];var e=l(o.end,n.start);0>e||(0!=e||o.isEmpty()||n.isEmpty())&&(0>l(o.end,n.end)&&(o.end.row=n.end.row,o.end.column=n.end.column),t.splice(r,1),a.push(n),n=o,r--)}return this.ranges=t,a},this.contains=function(n,r){return 0<=this.pointIndex({row:n,column:r})},this.containsPoint=function(t){return 0<=this.pointIndex(t)},this.rangeAtPoint=function(n){var e=this.pointIndex(n);if(0<=e)return this.ranges[e]},this.clipRows=function(a,l){var d=this.ranges;if(d[0].start.row>l||d[d.length-1].start.row<a)return[];var n=this.pointIndex({row:a,column:0});0>n&&(n=-n-1);var c=this.pointIndex({row:l,column:0},n);0>c&&(c=-c-1);for(var u=[],o=n;o<c;o++)u.push(d[o]);return u},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(t){this.session&&this.detach(),this.session=t,this.onChange=this.$onChange.bind(this),this.session.on('change',this.onChange)},this.detach=function(){this.session&&(this.session.removeListener('change',this.onChange),this.session=null)},this.$onChange=function(d){if('insert'==d.action)var e=d.start,t=d.end;else t=d.start,e=d.end;for(var n=e.row,i=t.row-n,r=-e.column+t.column,o=this.ranges,s=0,a=o.length;s<a;s++)if(!((c=o[s]).end.row<n)){if(c.start.row>n)break;if(c.start.row==n&&c.start.column>=e.column&&(c.start.column==e.column&&this.$insertRight||(c.start.column+=r,c.start.row+=i)),c.end.row==n&&c.end.column>=e.column){if(c.end.column==e.column&&this.$insertRight)continue;c.end.column==e.column&&0<r&&s<a-1&&c.end.column>c.start.column&&c.end.column==o[s+1].start.column&&(c.end.column-=r),c.end.column+=r,c.end.row+=i}}if(0!=i&&s<a)for(;s<a;s++){var c;(c=o[s]).start.row+=i,c.end.row+=i}}}).call(t.prototype),e.RangeList=t}),ace.define('ace/edit_session/fold',['require','exports','module','ace/range','ace/range_list','ace/lib/oop'],function(n,e){'use strict';function s(n,e){n.row-=e.row,0==n.row&&(n.column-=e.column)}function a(n,e){0==n.row&&(n.column+=e.column),n.row+=e.row}n('../range').Range;var t=n('../range_list').RangeList,i=n('../lib/oop'),r=e.Fold=function(n,e){this.foldLine=null,this.placeholder=e,this.range=n,this.start=n.start,this.end=n.end,this.sameRow=n.start.row==n.end.row,this.subFolds=this.ranges=[]};i.inherits(r,t),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(n){this.foldLine=n,this.subFolds.forEach(function(e){e.setFoldLine(n)})},this.clone=function(){var n=this.range.clone(),a=new r(n,this.placeholder);return this.subFolds.forEach(function(t){a.subFolds.push(t.clone())}),a.collapseChildren=this.collapseChildren,a},this.addSubFold=function(d){if(!this.range.isEqual(d)){if(!this.range.containsRange(d))throw new Error('A fold can\'t intersect already existing fold'+d.range+this.range);var e,t;e=d,t=this.start,s(e.start,t),s(e.end,t);for(var n=d.start.row,i=d.start.column,r=0,o=-1;r<this.subFolds.length&&1==(o=this.subFolds[r].range.compare(n,i));r++);var a=this.subFolds[r];if(0==o)return a.addSubFold(d);n=d.range.end.row,i=d.range.end.column;var c=r;for(o=-1;c<this.subFolds.length&&1==(o=this.subFolds[c].range.compare(n,i));c++);if(this.subFolds[c],0==o)throw new Error('A fold can\'t intersect already existing fold'+d.range+this.range);return this.subFolds.splice(r,c-r,d),d.setFoldLine(this.foldLine),d}},this.restoreRange=function(t){return function(n,e){a(n.start,e),a(n.end,e)}(t,this.start)}}.call(r.prototype)}),ace.define('ace/edit_session/folding',['require','exports','module','ace/range','ace/edit_session/fold_line','ace/edit_session/fold','ace/token_iterator'],function(n,e){'use strict';var d=n('../range').Range,_=n('./fold_line').FoldLine,r=n('./fold').Fold,i=n('../token_iterator').TokenIterator;e.Folding=function(){this.getFoldAt=function(a,e,t){var n=this.getFoldLine(a);if(!n)return null;for(var l=n.folds,r=0,o;r<l.length;r++)if(o=l[r],o.range.contains(a,e)){if(1==t&&o.range.isEnd(a,e))continue;if(-1==t&&o.range.isStart(a,e))continue;return o}},this.getFoldsInRange=function(d){var e=d.start,t=d.end,n=this.$foldData,i=[];e.column+=1,t.column-=1;for(var r=0,o;r<n.length;r++)if(o=n[r].range.compareRange(d),2!=o){if(-2==o)break;for(var s=n[r].folds,a=0,c;a<s.length&&(c=s[a],-2!=(o=c.range.compareRange(d)));a++)if(2!=o){if(42==o)break;i.push(c)}}return e.column-=1,t.column+=1,i},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var r=[];n.forEach(function(t){r=r.concat(this.getFoldsInRange(t))},this)}else r=this.getFoldsInRange(n);return r},this.getAllFolds=function(){for(var r=[],e=this.$foldData,t=0;t<e.length;t++)for(var n=0;n<e[t].folds.length;n++)r.push(e[t].folds[n]);return r},this.getFoldStringAt=function(l,e,t,n){if(!(n=n||this.getFoldLine(l)))return null;for(var i={end:{column:0}},s=0,a,r,o;s<n.folds.length;s++){if(o=(r=n.folds[s]).range.compareEnd(l,e),-1==o){a=this.getLine(r.start.row).substring(i.end.column,r.start.column);break}if(0===o)return null;i=r}return a||(a=this.getLine(r.start.row).substring(i.end.column)),-1==t?a.substring(0,e-i.end.column):1==t?a.substring(e-i.end.column):a},this.getFoldLine=function(a,e){var t=this.$foldData,n=0;for(e&&(n=t.indexOf(e)),-1==n&&(n=0);n<t.length;n++){var o=t[n];if(o.start.row<=a&&o.end.row>=a)return o;if(o.end.row>a)return null}return null},this.getNextFoldLine=function(a,e){var t=this.$foldData,n=0;for(e&&(n=t.indexOf(e)),-1==n&&(n=0);n<t.length;n++){var o=t[n];if(o.end.row>=a)return o}return null},this.getFoldedRowCount=function(l,e){for(var t=this.$foldData,n=e-l+1,i=0;i<t.length;i++){var r=t[i],o=r.end.row,s=r.start.row;if(o>=e){s<e&&(s>=l?n-=e-s:n=0);break}o>=l&&(n-=s>=l?o-s:o-l+1)}return n},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(n,e){return n.start.row-e.start.row}),t},this.addFold=function(o,e){var t=this.$foldData,i=!1,s;o instanceof r?s=o:(s=new r(e,o)).collapseChildren=e.collapseChildren,this.$clipRangeToDocument(s.range);var y=s.start.row,a=s.start.column,c=s.end.row,l=s.end.column;if(!(y<c||y==c&&a<=l-2))throw new Error('The range has to be at least 2 characters width');var u=this.getFoldAt(y,a,1),h=this.getFoldAt(c,l,-1);if(u&&h==u)return u.addSubFold(s);u&&!u.range.isStart(y,a)&&this.removeFold(u),h&&!h.range.isEnd(c,l)&&this.removeFold(h);var d=this.getFoldsInRange(s.range);0<d.length&&(this.removeFolds(d),d.forEach(function(t){s.addSubFold(t)}));for(var p=0,m;p<t.length;p++){if(m=t[p],c==m.start.row){m.addFold(s),i=!0;break}if(y==m.end.row){if(m.addFold(s),i=!0,!s.sameRow){var f=t[p+1];if(f&&f.start.row==c){m.merge(f);break}}break}if(c<=m.start.row)break}return i||(m=this.$addFoldLine(new _(this.$foldData,s))),this.$useWrapMode?this.$updateWrapData(m.start.row,m.start.row):this.$updateRowLengthCache(m.start.row,m.start.row),this.$modified=!0,this._signal('changeFold',{data:s,action:'add'}),s},this.addFolds=function(t){t.forEach(function(t){this.addFold(t)},this)},this.removeFold=function(a){var l=a.foldLine,t=l.start.row,n=l.end.row,i=this.$foldData,r=l.folds;if(1==r.length)i.splice(i.indexOf(l),1);else if(l.range.isEnd(a.end.row,a.end.column))r.pop(),l.end.row=r[r.length-1].end.row,l.end.column=r[r.length-1].end.column;else if(l.range.isStart(a.start.row,a.start.column))r.shift(),l.start.row=r[0].start.row,l.start.column=r[0].start.column;else if(a.sameRow)r.splice(r.indexOf(a),1);else{var o=l.split(a.start.row,a.start.column);(r=o.folds).shift(),o.start.row=r[0].start.row,o.start.column=r[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(t,n):this.$updateRowLengthCache(t,n)),this.$modified=!0,this._signal('changeFold',{data:a,action:'remove'})},this.removeFolds=function(r){for(var e=[],t=0;t<r.length;t++)e.push(r[t]);e.forEach(function(t){this.removeFold(t)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(e){n.restoreRange(e),this.addFold(e)},this),0<n.collapseChildren&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(t){t.forEach(function(t){this.expandFold(t)},this)},this.unfold=function(a,i){var t,n;if(null==a?(t=new d(0,0,this.getLength(),0),i=!0):t='number'==typeof a?new d(a,0,a,this.getLine(a).length):'row'in a?d.fromPoints(a,a):a,n=this.getFoldsInRangeList(t),i)this.removeFolds(n);else for(var r=n;r.length;)this.expandFolds(r),r=this.getFoldsInRangeList(t);return n.length?n:void 0},this.isRowFolded=function(n,e){return!!this.getFoldLine(n,e)},this.getRowFoldEnd=function(r,e){var t=this.getFoldLine(r,e);return t?t.end.row:r},this.getRowFoldStart=function(r,e){var t=this.getFoldLine(r,e);return t?t.start.row:r},this.getFoldDisplayLine=function(a,e,t,l,i){null==l&&(l=a.start.row),null==i&&(i=0),null==e&&(e=a.end.row),null==t&&(t=this.getLine(e).length);var r=this.doc,o='';return a.walk(function(s,e,t,n){if(!(e<l)){if(e==l){if(t<i)return;n=x(i,n)}o+=null==s?r.getLine(e).substring(n,t):s}},e,t),o},this.getDisplayLine=function(a,e,t,n){var i=this.getFoldLine(a),o;return i?this.getFoldDisplayLine(i,a,e,t,n):(o=this.doc.getLine(a)).substring(n||0,e||o.length)},this.$cloneFoldData=function(){var r=[];return r=this.$foldData.map(function(e){var t=e.folds.map(function(t){return t.clone()});return new _(r,t)})},this.toggleFold=function(a){var e=this.selection.getRange(),i,t;if(e.isEmpty()){var n=e.start;if(i=this.getFoldAt(n.row,n.column))return void this.expandFold(i);(t=this.findMatchingBracket(n))?1==e.comparePoint(t)?e.end=t:(e.start=t,e.start.column++,e.end.column--):(t=this.findMatchingBracket({row:n.row,column:n.column+1}))?(1==e.comparePoint(t)?e.end=t:e.start=t,e.start.column++):e=this.getCommentFoldRange(n.row,n.column)||e}else{var r=this.getFoldsInRange(e);if(a&&r.length)return void this.expandFolds(r);1==r.length&&(i=r[0])}if(i||(i=this.getFoldAt(e.start.row,e.start.column)),i&&i.range.toString()==e.toString())this.expandFold(i);else{var o='...';if(!e.isMultiLine()){if(4>(o=this.getTextRange(e)).length)return;o=o.trim().substring(0,2)+'..'}this.addFold(o,e)}},this.getCommentFoldRange=function(s,e,t){var n=new i(this,s,e),r=n.getCurrentToken(),o=r.type;if(r&&/^comment|string/.test(o)){'comment'==(o=o.match(/comment|string/)[0])&&(o+='|doc-start');var a=new RegExp(o),c=new d;if(1!=t){do r=n.stepBackward();while(r&&a.test(r.type));n.stepForward()}if(c.start.row=n.getCurrentTokenRow(),c.start.column=n.getCurrentTokenColumn()+2,n=new i(this,s,e),-1!=t){var l=-1;do if(r=n.stepForward(),-1==l){var u=this.getState(n.$row);a.test(u)||(l=n.$row)}else if(n.$row>l)break;while(r&&a.test(r.type));r=n.stepBackward()}else r=n.getCurrentToken();return c.end.row=n.getCurrentTokenRow(),c.end.column=n.getCurrentTokenColumn()+r.value.length-2,c}},this.foldAll=function(a,e,t){null==t&&(t=1e5);var n=this.foldWidgets;if(n){e=e||this.getLength();for(var i=a=a||0;i<e;i++)if(null==n[i]&&(n[i]=this.getFoldWidget(i)),'start'==n[i]){var r=this.getFoldWidgetRange(i);if(r&&r.isMultiLine()&&r.end.row<=e&&r.start.row>=a){i=r.end.row;try{var o=this.addFold('...',r);o&&(o.collapseChildren=t)}catch(t){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle='markbegin',this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error('invalid fold style: '+n+'['+Object.keys(this.$foldStyles).join(', ')+']');if(this.$foldStyle!=n){this.$foldStyle=n,'manual'==n&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){this.$foldMode!=t&&(this.$foldMode=t,this.off('change',this.$updateFoldWidgets),this.off('tokenizerUpdate',this.$tokenizerUpdateFoldWidgets),this._signal('changeAnnotation'),t&&'manual'!=this.$foldStyle?(this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on('change',this.$updateFoldWidgets),this.on('tokenizerUpdate',this.$tokenizerUpdateFoldWidgets)):this.foldWidgets=null)},this.getParentFoldRangeData=function(a,e){var t=this.foldWidgets;if(!t||e&&t[a])return{};for(var l=a-1,r,d;0<=l;){if(d=t[l],null==d&&(d=t[l]=this.getFoldWidget(l)),'start'==d){var o=this.getFoldWidgetRange(l);if(r||(r=o),o&&o.end.row>=a)break}l--}return{range:-1!=l&&o,firstRange:r}},this.onFoldWidgetClick=function(r,e){var t={children:(e=e.domEvent).shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey};if(!this.$toggleFoldWidget(r,t)){var n=e.target||e.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=' ace_invalid')}},this.$toggleFoldWidget=function(d,e){if(this.getFoldWidget){var t=this.getFoldWidget(d),n=this.getLine(d),i='end'===t?-1:1,r=this.getFoldAt(d,-1==i?0:n.length,i);if(r)return e.children||e.all?this.removeFold(r):this.expandFold(r),r;var o=this.getFoldWidgetRange(d,!0);if(o&&!o.isMultiLine()&&(r=this.getFoldAt(o.start.row,o.start.column,1))&&o.isEqual(r.range))return this.removeFold(r),r;if(e.siblings){var s=this.getParentFoldRangeData(d);if(s.range)var a=s.range.start.row+1,c=s.range.end.row;this.foldAll(a,c,e.all?1e4:0)}else e.children?(c=o?o.end.row:this.getLength(),this.foldAll(d+1,c,e.all?1e4:0)):o&&(e.all&&(o.collapseChildren=1e4),this.addFold('...',o));return o}},this.toggleFoldWidget=function(){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var t=this.$toggleFoldWidget(e,{});if(!t){var a=this.getParentFoldRangeData(e,!0);if(t=a.range||a.firstRange){e=t.start.row;var o=this.getFoldAt(e,this.getLine(e).length,1);o?this.removeFold(o):this.addFold('...',t)}}},this.updateFoldWidgets=function(r){var e=r.start.row,t=r.end.row-e;if(0==t)this.foldWidgets[e]=null;else if('remove'==r.action)this.foldWidgets.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(n){var e=n.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}}),ace.define('ace/edit_session/bracket_match',['require','exports','module','ace/token_iterator','ace/range'],function(n,e){'use strict';var d=n('../token_iterator').TokenIterator,o=n('../range').Range;e.BracketMatch=function(){this.findMatchingBracket=function(r,e){if(0==r.column)return null;var t=e||this.getLine(r.row).charAt(r.column-1);if(''==t)return null;var n=t.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],r):this.$findOpeningBracket(n[2],r):null},this.getBracketRange=function(r){var e=this.getLine(r.row),n=!0,i=e.charAt(r.column-1),l=i&&i.match(/([\(\[\{])|([\)\]\}])/),d;if(l||(i=e.charAt(r.column),r={row:r.row,column:r.column+1},l=i&&i.match(/([\(\[\{])|([\)\]\}])/),n=!1),!l)return null;if(l[1]){if(!(t=this.$findClosingBracket(l[1],r)))return null;d=o.fromPoints(r,t),n||(d.end.column++,d.start.column--),d.cursor=d.end}else{var t;if(!(t=this.$findOpeningBracket(l[2],r)))return null;d=o.fromPoints(t,r),n||(d.start.column++,d.end.column--),d.cursor=d.start}return d},this.$brackets={")":'(',"(":')',"]":'[',"[":']',"{":'}',"}":'{'},this.$findOpeningBracket=function(i,e,t){var n=this.$brackets[i],r=1,o=new d(this,e.row,e.column),s=o.getCurrentToken();if(s||(s=o.stepForward()),s){t||(t=new RegExp('(\\.?'+s.type.replace('.','\\.').replace('rparen','.paren').replace(/\b(?:end)\b/,'(?:start|begin|end)')+')+'));for(var a=e.column-o.getCurrentTokenColumn()-2,c=s.value;;){for(;0<=a;){var l=c.charAt(a);if(l!=n)l==i&&(r+=1);else if(0==(r-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()};a-=1}do s=o.stepBackward();while(s&&!t.test(s.type));if(null==s)break;a=(c=s.value).length-1}return null}},this.$findClosingBracket=function(i,e,t){var n=this.$brackets[i],r=1,o=new d(this,e.row,e.column),s=o.getCurrentToken();if(s||(s=o.stepForward()),s){t||(t=new RegExp('(\\.?'+s.type.replace('.','\\.').replace('lparen','.paren').replace(/\b(?:start|begin)\b/,'(?:start|begin|end)')+')+'));for(var a=e.column-o.getCurrentTokenColumn();;){for(var c=s.value,l=c.length,u;a<l;){if(u=c.charAt(a),u!=n)u==i&&(r+=1);else if(0==(r-=1))return{row:o.getCurrentTokenRow(),column:a+o.getCurrentTokenColumn()};a+=1}do s=o.stepForward();while(s&&!t.test(s.type));if(null==s)break;a=0}return null}}}}),ace.define('ace/edit_session',['require','exports','module','ace/lib/oop','ace/lib/lang','ace/config','ace/lib/event_emitter','ace/selection','ace/mode/text','ace/range','ace/document','ace/background_tokenizer','ace/search_highlight','ace/edit_session/folding','ace/edit_session/bracket_match'],function(n,e){'use strict';var m=n('./lib/oop'),i=n('./lib/lang'),r=n('./config'),o=n('./lib/event_emitter').EventEmitter,s=n('./selection').Selection,a=n('./mode/text').Mode,f=n('./range').Range,l=n('./document').Document,t=n('./background_tokenizer').BackgroundTokenizer,c=n('./search_highlight').SearchHighlight,u=function(n,a){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id='session'+ ++u.$uid,this.$foldData.toString=function(){return this.join('\n')},this.on('changeFold',this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),'object'==typeof n&&n.getLine||(n=new l(n)),this.setDocument(n),this.selection=new s(this),r.resetOptions(this),this.setMode(a),r._signal('session',this)};u.$uid=0,function(){function p(t){return!(4352>t)&&(4352<=t&&4447>=t||4515<=t&&4519>=t||4602<=t&&4607>=t||9001<=t&&9002>=t||11904<=t&&11929>=t||11931<=t&&12019>=t||12032<=t&&12245>=t||12272<=t&&12283>=t||12288<=t&&12350>=t||12353<=t&&12438>=t||12441<=t&&12543>=t||12549<=t&&12589>=t||12593<=t&&12686>=t||12688<=t&&12730>=t||12736<=t&&12771>=t||12784<=t&&12830>=t||12832<=t&&12871>=t||12880<=t&&13054>=t||13056<=t&&19903>=t||19968<=t&&42124>=t||42128<=t&&42182>=t||43360<=t&&43388>=t||44032<=t&&55203>=t||55216<=t&&55238>=t||55243<=t&&55291>=t||63744<=t&&64255>=t||65040<=t&&65049>=t||65072<=t&&65106>=t||65108<=t&&65126>=t||65128<=t&&65131>=t||65281<=t&&65376>=t||65504<=t&&65510>=t)}m.implement(this,o),this.setDocument=function(t){this.doc&&this.doc.removeListener('change',this.$onChange),this.doc=t,t.on('change',this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(r){if(!r)return this.$docRowCache=[],void(this.$screenRowCache=[]);var a=this.$docRowCache.length,t=this.$getRowCacheIndex(this.$docRowCache,r)+1;a>t&&(this.$docRowCache.splice(t,a),this.$screenRowCache.splice(t,a))},this.$getRowCacheIndex=function(a,e){for(var t=0,n=a.length-1;t<=n;){var i=t+n>>1,r=a[i];if(e>r)t=i+1;else{if(!(e<r))return i;n=i-1}}return t-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(n){var e=n.data;this.$resetRowCache(e.start.row)},this.onChange=function(n){this.$modified=!0,this.$resetRowCache(n.start.row);var e=this.$updateInternalDataOnChange(n);this.$fromUndo||!this.$undoManager||n.ignore||(this.$deltasDoc.push(n),e&&0!=e.length&&this.$deltasFold.push({action:'removeFolds',folds:e}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(n),this._signal('change',n)},this.setValue=function(t){this.doc.setValue(t),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(t){return this.bgTokenizer.getState(t)},this.getTokens=function(t){return this.bgTokenizer.getTokens(t)},this.getTokenAt=function(a,e){var t=this.bgTokenizer.getTokens(a),i=0,r;if(null==e)n=t.length-1,i=this.getLine(a).length;else for(var n=0;n<t.length&&!((i+=t[n].value.length)>=e);n++);return(r=t[n])?(r.index=n,r.start=i-r.value.length,r):null},this.setUndoManager=function(n){if(this.$undoManager=n,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),n){var e=this;this.$syncInformUndoManager=function(){e.$informUndoManager.cancel(),e.$deltasFold.length&&(e.$deltas.push({group:'fold',deltas:e.$deltasFold}),e.$deltasFold=[]),e.$deltasDoc.length&&(e.$deltas.push({group:'doc',deltas:e.$deltasDoc}),e.$deltasDoc=[]),0<e.$deltas.length&&n.execute({action:'aceupdate',args:[e.$deltas,e],merge:e.mergeUndoDeltas}),e.mergeUndoDeltas=!1,e.$deltas=[]},this.$informUndoManager=i.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?i.stringRepeat(' ',this.getTabSize()):'\t'},this.setUseSoftTabs=function(t){this.setOption('useSoftTabs',t)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(t){this.setOption('tabSize',t)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(t){return this.$useSoftTabs&&0==t.column%this.$tabSize},this.setNavigateWithinSoftTabs=function(t){this.setOption('navigateWithinSoftTabs',t)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(t){this.setOption('overwrite',t)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(n,e){this.$decorations[n]||(this.$decorations[n]=''),this.$decorations[n]+=' '+e,this._signal('changeBreakpoint',{})},this.removeGutterDecoration=function(n,e){this.$decorations[n]=(this.$decorations[n]||'').replace(' '+e,''),this._signal('changeBreakpoint',{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(n){this.$breakpoints=[];for(var e=0;e<n.length;e++)this.$breakpoints[n[e]]='ace_breakpoint';this._signal('changeBreakpoint',{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal('changeBreakpoint',{})},this.setBreakpoint=function(n,e){void 0===e&&(e='ace_breakpoint'),e?this.$breakpoints[n]=e:delete this.$breakpoints[n],this._signal('changeBreakpoint',{})},this.clearBreakpoint=function(t){delete this.$breakpoints[t],this._signal('changeBreakpoint',{})},this.addMarker=function(a,s,l,d){var c=this.$markerId++,u={range:a,type:l||'line',renderer:'function'==typeof l?l:null,clazz:s,inFront:!!d,id:c};return d?(this.$frontMarkers[c]=u,this._signal('changeFrontMarker')):(this.$backMarkers[c]=u,this._signal('changeBackMarker')),c},this.addDynamicMarker=function(r,e){if(r.update){var a=this.$markerId++;return r.id=a,r.inFront=!!e,e?(this.$frontMarkers[a]=r,this._signal('changeFrontMarker')):(this.$backMarkers[a]=r,this._signal('changeBackMarker')),r}},this.removeMarker=function(r){var e=this.$frontMarkers[r]||this.$backMarkers[r];if(e){var t=e.inFront?this.$frontMarkers:this.$backMarkers;e&&(delete t[r],this._signal(e.inFront?'changeFrontMarker':'changeBackMarker'))}},this.getMarkers=function(t){return t?this.$frontMarkers:this.$backMarkers},this.highlight=function(n){if(!this.$searchHighlight){var e=new c(null,'ace_selected-word','text');this.$searchHighlight=this.addDynamicMarker(e)}this.$searchHighlight.setRegexp(n)},this.highlightLines=function(a,e,o,n){'number'!=typeof e&&(o=e,e=a),o||(o='ace_step');var i=new f(a,0,e,1/0);return i.id=this.addMarker(i,o,'fullLine',n),i},this.setAnnotations=function(t){this.$annotations=t,this._signal('changeAnnotation',{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(n){var e=n.match(/^.*?(\r?\n)/m);this.$autoNewLine=e?e[1]:'\n'},this.getWordRange=function(a,e){var t=this.getLine(a),n=!1;if(0<e&&(n=!!t.charAt(e-1).match(this.tokenRe)),n||(n=!!t.charAt(e).match(this.tokenRe)),n)var i=this.tokenRe;else i=/^\s+$/.test(t.slice(e-1,e+1))?/\s/:this.nonTokenRe;var r=e;if(0<r){do r--;while(0<=r&&t.charAt(r).match(i));r++}for(var o=e;o<t.length&&t.charAt(o).match(i);)o++;return new f(a,r,a,o)},this.getAWordRange=function(r,e){for(var t=this.getWordRange(r,e),n=this.getLine(t.end.row);n.charAt(t.end.column).match(/[ \t]/);)t.end.column+=1;return t},this.setNewLineMode=function(t){this.doc.setNewLineMode(t)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(t){this.setOption('useWorker',t)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(n){var e=n.data;this.bgTokenizer.start(e.first),this._signal('tokenizerUpdate',n)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(o,s){if(o&&'object'==typeof o){if(o.getTokenizer)return this.$onChangeMode(o);var t=o,l=t.path}else l=o||'ace/mode/text';return(this.$modes['ace/mode/text']||(this.$modes['ace/mode/text']=new a),this.$modes[l]&&!t)?(this.$onChangeMode(this.$modes[l]),void(s&&s())):void(this.$modeId=l,r.loadModule(['mode',l],function(r){return this.$modeId===l?void(this.$modes[l]&&!t?this.$onChangeMode(this.$modes[l]):r&&r.Mode&&(r=new r.Mode(t),t||(this.$modes[l]=r,r.$id=l),this.$onChangeMode(r)),s&&s()):s&&s()}.bind(this)),this.$mode||this.$onChangeMode(this.$modes['ace/mode/text'],!0))},this.$onChangeMode=function(a,e){if(e||(this.$modeId=a.$id),this.$mode!==a){this.$mode=a,this.$stopWorker(),this.$useWorker&&this.$startWorker();var o=a.getTokenizer();if(void 0!==o.addEventListener){var n=this.onReloadTokenizer.bind(this);o.addEventListener('update',n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(o);else{this.bgTokenizer=new t(o);var i=this;this.bgTokenizer.addEventListener('update',function(t){i._signal('tokenizerUpdate',t)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=a.tokenRe,this.nonTokenRe=a.nonTokenRe,e||(a.attachToSession&&a.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(a.foldingRules),this.bgTokenizer.start(0),this._emit('changeMode'))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(t){r.warn('Could not load worker',t),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(t){this.$scrollTop===t||isNaN(t)||(this.$scrollTop=t,this._signal('changeScrollTop',t))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(t){this.$scrollLeft===t||isNaN(t)||(this.$scrollLeft=t,this._signal('changeScrollLeft',t))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?x(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var n=0;return this.lineWidgets.forEach(function(e){e&&e.screenWidth>n&&(n=e.screenWidth)}),this.lineWidgetWidth=n},this.$computeWidth=function(l){if(this.$modified||l){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var e=this.doc.getAllLines(),t=this.$rowLengthCache,n=0,i=0,r=this.$foldData[i],o=r?r.start.row:1/0,s=e.length,a=0;a<s;a++){if(a>o){if((a=r.end.row+1)>=s)break;o=(r=this.$foldData[i++])?r.start.row:1/0}null==t[a]&&(t[a]=this.$getStringScreenWidth(e[a])[0]),t[a]>n&&(n=t[a])}this.screenWidth=n}},this.getLine=function(t){return this.doc.getLine(t)},this.getLines=function(n,e){return this.doc.getLines(n,e)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(t){return this.doc.getTextRange(t||this.selection.getRange())},this.insert=function(n,e){return this.doc.insert(n,e)},this.remove=function(t){return this.doc.remove(t)},this.removeFullLines=function(n,e){return this.doc.removeFullLines(n,e)},this.undoChanges=function(a,e){if(a.length){this.$fromUndo=!0;for(var o=null,n=a.length-1,i;-1!=n;n--)i=a[n],'doc'==i.group?(this.doc.revertDeltas(i.deltas),o=this.$getUndoSelection(i.deltas,!0,o)):i.deltas.forEach(function(t){this.addFolds(t.folds)},this);return this.$fromUndo=!1,o&&this.$undoSelect&&!e&&this.selection.setSelectionRange(o),o}},this.redoChanges=function(a,e){if(a.length){this.$fromUndo=!0;for(var o=null,n=0,i;n<a.length;n++)i=a[n],'doc'==i.group&&(this.doc.applyDeltas(i.deltas),o=this.$getUndoSelection(i.deltas,!1,o));return this.$fromUndo=!1,o&&this.$undoSelect&&!e&&this.selection.setSelectionRange(o),o}},this.setUndoSelect=function(t){this.$undoSelect=t},this.$getUndoSelection=function(l,d,e){function i(t){return d?'insert'!==t.action:'insert'===t.action}var t=l[0],n,r;n=i(t)?f.fromPoints(t.start,t.end):f.fromPoints(t.start,t.start);for(var o=1;o<l.length;o++)i(t=l[o])?(r=t.start,-1==n.compare(r.row,r.column)&&n.setStart(r),r=t.end,1==n.compare(r.row,r.column)&&n.setEnd(r),!0):(r=t.start,-1==n.compare(r.row,r.column)&&(n=f.fromPoints(t.start,t.start)),!1);if(null!=e){0===f.comparePoints(e.start,n.start)&&(e.start.column+=n.end.column-n.start.column,e.end.column+=n.end.column-n.start.column);var a=e.compareRange(n);1==a?n.setStart(e.start):-1==a&&n.setEnd(e.end)}return n},this.replace=function(n,e){return this.doc.replace(n,e)},this.moveText=function(l,e,t){var d=this.getTextRange(l),i=this.getFoldsInRange(l),r=f.fromPoints(e,e);if(!t){this.remove(l);var o=l.start.row-l.end.row;(c=o?-l.end.column:l.start.column-l.end.column)&&(r.start.row==l.end.row&&r.start.column>l.end.column&&(r.start.column+=c),r.end.row==l.end.row&&r.end.column>l.end.column&&(r.end.column+=c)),o&&r.start.row>=l.end.row&&(r.start.row+=o,r.end.row+=o)}if(r.end=this.insert(r.start,d),i.length){var s=l.start,a=r.start,c=(o=a.row-s.row,a.column-s.column);this.addFolds(i.map(function(t){return(t=t.clone()).start.row==s.row&&(t.start.column+=c),t.end.row==s.row&&(t.end.column+=c),t.start.row+=o,t.end.row+=o,t}))}return r},this.indentRows=function(r,e,t){t=t.replace(/\t/g,this.getTabString());for(var n=r;n<=e;n++)this.doc.insertInLine({row:n,column:0},t)},this.outdentRows=function(a){for(var e=a.collapseRows(),t=new f(0,0,0,0),n=this.getTabSize(),i=e.start.row,r;i<=e.end.row;++i){r=this.getLine(i),t.start.row=i,t.end.row=i;for(var o=0;o<n&&' '==r.charAt(o);++o);o<n&&'\t'==r.charAt(o)?(t.start.column=o,t.end.column=o+1):(t.start.column=0,t.end.column=o),this.remove(t)}},this.$moveLines=function(l,e,t){if(l=this.getRowFoldStart(l),e=this.getRowFoldEnd(e),0>t){if(0>(i=this.getRowFoldStart(l+t)))return 0;var n=i-l}else if(0<t){var i;if((i=this.getRowFoldEnd(e+t))>this.doc.getLength()-1)return 0;n=i-e}else l=this.$clipRowToDocument(l),n=(e=this.$clipRowToDocument(e))-l+1;var r=new f(l,0,e,d),o=this.getFoldsInRange(r).map(function(t){return(t=t.clone()).start.row+=n,t.end.row+=n,t}),s=0==t?this.doc.getLines(l,e):this.doc.removeFullLines(l,e);return this.doc.insertFullLines(l+n,s),o.length&&this.addFolds(o),n},this.moveLinesUp=function(n,e){return this.$moveLines(n,e,-1)},this.moveLinesDown=function(n,e){return this.$moveLines(n,e,1)},this.duplicateLines=function(n,e){return this.$moveLines(n,e,0)},this.$clipRowToDocument=function(t){return x(0,b(t,this.doc.getLength()-1))},this.$clipColumnToRow=function(n,e){return 0>e?0:b(this.doc.getLine(n).length,e)},this.$clipPositionToDocument=function(r,a){if(a=x(0,a),0>r)r=0,a=0;else{var o=this.doc.getLength();r>=o?(r=o-1,a=this.doc.getLine(o-1).length):a=b(this.doc.getLine(r).length,a)}return{row:r,column:a}},this.$clipRangeToDocument=function(n){0>n.start.row?(n.start.row=0,n.start.column=0):n.start.column=this.$clipColumnToRow(n.start.row,n.start.column);var e=this.doc.getLength()-1;return n.end.row>e?(n.end.row=e,n.end.column=this.doc.getLine(e).length):n.end.column=this.$clipColumnToRow(n.end.row,n.end.column),n},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(n){if(n!=this.$useWrapMode){if(this.$useWrapMode=n,this.$modified=!0,this.$resetRowCache(0),n){var e=this.getLength();this.$wrapData=Array(e),this.$updateWrapData(0,e-1)}this._signal('changeWrapMode')}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(n,r){this.$wrapLimitRange.min===n&&this.$wrapLimitRange.max===r||(this.$wrapLimitRange={min:n,max:r},this.$modified=!0,this.$useWrapMode&&this._signal('changeWrapMode'))},this.adjustWrapLimit=function(r,e){var a=this.$wrapLimitRange;0>a.max&&(a={min:e,max:e});var n=this.$constrainWrapLimit(r,a.min,a.max);return n!=this.$wrapLimit&&1<n&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal('changeWrapLimit')),!0)},this.$constrainWrapLimit=function(r,e,t){return e&&(r=x(e,r)),t&&(r=b(t,r)),r},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(t){this.setWrapLimitRange(t,t)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(_){var e=this.$useWrapMode,t=_.action,n=_.start,i=_.end,r=n.row,o=i.row,s=o-r,y=null;if(this.$updating=!0,0==s)s=g(_.start.column-_.end.column),'remove'===t&&(y=this.getFoldsInRange(_),this.removeFolds(y),s=-s),(m=this.getFoldLine(r))&&m.addRemoveChars(r,n.column,s);else if('remove'===t){this[e?'$wrapData':'$rowLengthCache'].splice(r,s);var c=this.$foldData;y=this.getFoldsInRange(_),this.removeFolds(y);var l=0;if(m=this.getFoldLine(i.row)){m.addRemoveChars(i.row,i.column,n.column-i.column),m.shiftRow(-s);var u=this.getFoldLine(r);u&&u!==m&&(u.merge(m),m=u),l=c.indexOf(m)+1}for(;l<c.length;l++)(m=c[l]).start.row>=i.row&&m.shiftRow(-s);o=r}else{var h=Array(s);h.unshift(r,0);var d=e?this.$wrapData:this.$rowLengthCache;if(d.splice.apply(d,h),c=this.$foldData,l=0,m=this.getFoldLine(r)){var p=m.range.compareInside(n.row,n.column);0==p?(m=m.split(n.row,n.column))&&(m.shiftRow(s),m.addRemoveChars(o,0,i.column-n.column)):-1==p&&(m.addRemoveChars(r,0,i.column-n.column),m.shiftRow(s)),l=c.indexOf(m)+1}for(;l<c.length;l++){var m;(m=c[l]).start.row>=r&&m.shiftRow(s)}}return e&&this.$wrapData.length!=this.doc.getLength()&&console.error('doc.getLength() and $wrapData.length have to be the same!'),this.$updating=!1,e?this.$updateWrapData(r,o):this.$updateRowLengthCache(r,o),y},this.$updateRowLengthCache=function(n,e){this.$rowLengthCache[n]=null,this.$rowLengthCache[e]=null},this.$updateWrapData=function(t,n){var d=this.doc.getAllLines(),i=this.getTabSize(),a=this.$wrapData,c=this.$wrapLimit,l=t,u,r;for(n=b(n,d.length-1);l<=n;)(r=this.getFoldLine(l,r))?(u=[],r.walk(function(t,n,r,o){var a;if(null!=t){(a=this.$getDisplayTokens(t,u.length))[0]=s;for(var i=1;i<a.length;i++)a[i]=e}else a=this.$getDisplayTokens(d[n].substring(o,r),u.length);u=u.concat(a)}.bind(this),r.end.row,d[r.end.row].length+1),a[r.start.row]=this.$computeWrapSplits(u,c,i),l=r.end.row+1):(u=this.$getDisplayTokens(d[l]),a[l]=this.$computeWrapSplits(u,c,i),l++)};var s=3,e=4,h=10,n=11,l=12;this.$computeWrapSplits=function(a,t,i){function f(s){var e=a.slice(c,s),t=e.length;e.join('').replace(/12/g,function(){t-=1}).replace(/2/g,function(){t-=1}),o.length||(m=function(){var o=0;if(0===p)return o;if(d)for(var e=0,t;e<a.length;e++)if(t=a[e],t==h)o+=1;else{if(t!=n){if(t==l)continue;break}o+=i}return _&&!1!==d&&(o+=i),b(o,p)}(),o.indent=m),u+=t,o.push(u),c=s}if(0==a.length)return[];for(var o=[],r=a.length,c=0,u=0,_=this.$wrapAsCode,d=this.$indentedSoftWrap,p=t<=x(2*i,8)||!1===d?0:T(t/2),m=0,g;r-c>t-m;)if(g=c+t-m,a[g-1]>=h&&a[g]>=h)f(g);else if(a[g]!=s&&a[g]!=e){for(var y=x(g-(t-(t>>2)),c-1);g>y&&a[g]<s;)g--;if(_){for(;g>y&&a[g]<s;)g--;for(;g>y&&9==a[g];)g--}else for(;g>y&&a[g]<h;)g--;g>y?f(++g):(2==a[g=c+t]&&g--,f(g-m))}else{for(;g!=c-1&&a[g]!=s;g--);if(g>c){f(g);continue}for(g=c+t;g<a.length&&a[g]==e;g++);if(g==a.length)break;f(g)}return o},this.$getDisplayTokens=function(a,e){var t=[],r;e=e||0;for(var i=0,o;i<a.length;i++)if(o=a.charCodeAt(i),9==o){r=this.getScreenTabSize(t.length+e),t.push(n);for(var s=1;s<r;s++)t.push(l)}else 32==o?t.push(h):39<o&&48>o||57<o&&64>o?t.push(9):4352<=o&&p(o)?t.push(1,2):t.push(1);return t},this.$getStringScreenWidth=function(a,e,t){if(0==e)return[0,0];var n,o;for(null==e&&(e=1/0),t=t||0,o=0;o<a.length&&(t+=9==(n=a.charCodeAt(o))?this.getScreenTabSize(t):4352<=n&&p(n)?2:1,!(t>e));o++);return[t,o]},this.lineWidgets=null,this.getRowLength=function(n){if(this.lineWidgets)var e=this.lineWidgets[n]&&this.lineWidgets[n].rowCount||0;else e=0;return this.$useWrapMode&&this.$wrapData[n]?this.$wrapData[n].length+1+e:1+e},this.getRowLineCount=function(t){return this.$useWrapMode&&this.$wrapData[t]?this.$wrapData[t].length+1:1},this.getRowWrapIndent=function(r){if(this.$useWrapMode){var e=this.screenToDocumentPosition(r,Number.MAX_VALUE),t=this.$wrapData[e.row];return t.length&&t[0]<e.column?t.indent:0}return 0},this.getScreenLastRowColumn=function(n){var e=this.screenToDocumentPosition(n,Number.MAX_VALUE);return this.documentToScreenColumn(e.row,e.column)},this.getDocumentLastRowColumn=function(r,e){var t=this.documentToScreenRow(r,e);return this.getScreenLastRowColumn(t)},this.getDocumentLastRowColumnPosition=function(r,e){var t=this.documentToScreenRow(r,e);return this.screenToDocumentPosition(t,d/10)},this.getRowSplitData=function(t){return this.$useWrapMode?this.$wrapData[t]:void 0},this.getScreenTabSize=function(t){return this.$tabSize-t%this.$tabSize},this.screenToDocumentRow=function(n,e){return this.screenToDocumentPosition(n,e).row},this.screenToDocumentColumn=function(n,e){return this.screenToDocumentPosition(n,e).column},this.screenToDocumentPosition=function(_,e){if(0>_)return{row:0,column:0};var t=0,y=0,x=0,s=0,a=this.$screenRowCache,c=this.$getRowCacheIndex(a,_),l=a.length,A,n;if(l&&0<=c){x=a[c],t=this.$docRowCache[c];var i=_>a[l-1]}else i=!l;for(var h=this.getLength()-1,b=this.getNextFoldLine(t),p=b?b.start.row:1/0;x<=_&&!(x+(s=this.getRowLength(t))>_||t>=h);)x+=s,++t>p&&(t=b.end.row+1,p=(b=this.getNextFoldLine(t,b))?b.start.row:1/0),i&&(this.$docRowCache.push(t),this.$screenRowCache.push(x));if(b&&b.start.row<=t)A=this.getFoldDisplayLine(b),t=b.start.row;else{if(x+s<=_||t>h)return{row:h,column:this.getLine(h).length};A=this.getLine(t),b=null}var m=0;if(this.$useWrapMode){var f=this.$wrapData[t];if(f){var g=T(_-x);n=f[g],0<g&&f.length&&(m=f.indent,y=f[g-1]||f[f.length-1],A=A.substring(y))}}return y+=this.$getStringScreenWidth(A,e-m)[1],this.$useWrapMode&&y>=n&&(y=n-1),b?b.idxToPosition(y):{row:t,column:y}},this.documentToScreenPosition=function(_,e){if(void 0===e)var t=this.$clipPositionToDocument(_.row,_.column);else t=this.$clipPositionToDocument(_,e);_=t.row,e=t.column;var n=0,y=null,o;(o=this.getFoldAt(_,e,1))&&(_=o.start.row,e=o.start.column);var i=0,a=this.$docRowCache,c=this.$getRowCacheIndex(a,_),l=a.length,x;if(l&&0<=c){i=a[c],n=this.$screenRowCache[c];var s=_>a[l-1]}else s=!l;for(var h=this.getNextFoldLine(i),d=h?h.start.row:1/0;i<_;){if(i>=d){if((x=h.end.row+1)>_)break;d=(h=this.getNextFoldLine(x,h))?h.start.row:1/0}else x=i+1;n+=this.getRowLength(i),i=x,s&&(this.$docRowCache.push(i),this.$screenRowCache.push(n))}var p='';h&&i>=d?(p=this.getFoldDisplayLine(h,_,e),y=h.start.row):(p=this.getLine(_).substring(0,e),y=_);var m=0;if(this.$useWrapMode){var f=this.$wrapData[y];if(f){for(var g=0;p.length>=f[g];)n++,g++;p=p.substring(f[g-1]||0,p.length),m=0<g?f.indent:0}}return{row:n,column:m+this.$getStringScreenWidth(p)[0]}},this.documentToScreenColumn=function(n,e){return this.documentToScreenPosition(n,e).column},this.documentToScreenRow=function(n,e){return this.documentToScreenPosition(n,e).row},this.getScreenLength=function(){var l=0,e=null;if(this.$useWrapMode)for(var t=this.$wrapData.length,n=0,i=(s=0,(e=this.$foldData[s++])?e.start.row:1/0),r;n<t;)r=this.$wrapData[n],l+=r?r.length+1:1,++n>i&&(n=e.end.row+1,i=(e=this.$foldData[s++])?e.start.row:1/0);else{l=this.getLength();for(var o=this.$foldData,s=0;s<o.length;s++)l-=(e=o[s]).end.row-e.start.row}return this.lineWidgets&&(l+=this.$getWidgetScreenLength()),l},this.$setFontMetrics=function(a){this.$enableVarChar&&(this.$getStringScreenWidth=function(e,t,n){if(0===t)return[0,0];var i,r;for(t||(t=1/0),n=n||0,r=0;r<e.length&&!((n+='\t'===(i=e.charAt(r))?this.getScreenTabSize(n):a.getCharacterWidth(i))>t);r++);return[n,r]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}.call(u.prototype),n('./edit_session/folding').Folding.call(u.prototype),n('./edit_session/bracket_match').BracketMatch.call(u.prototype),r.defineOptions(u.prototype,'session',{wrap:{set:function(n){if(n&&'off'!=n?'free'==n?n=!0:'printMargin'==n?n=-1:'string'==typeof n&&(n=parseInt(n,10)||!1):n=!1,this.$wrap!=n)if(this.$wrap=n,n){var r='number'==typeof n?n:null;this.setWrapLimitRange(r,r),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1)},get:function(){return this.getUseWrapMode()?-1==this.$wrap?'printMargin':this.getWrapLimitRange().min?this.$wrap:'free':'off'},handlesSet:!0},wrapMethod:{set:function(t){(t='auto'==t?'text'!=this.$mode.type:'text'!=t)!=this.$wrapAsCode&&(this.$wrapAsCode=t,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:'auto'},indentedSoftWrap:{initialValue:!0},firstLineNumber:{set:function(){this._signal('changeBreakpoint')},initialValue:1},useWorker:{set:function(t){this.$useWorker=t,this.$stopWorker(),t&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(t){isNaN(t)||this.$tabSize===t||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=t,this._signal('changeTabSize'))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},overwrite:{set:function(){this._signal('changeOverwrite')},initialValue:!1},newLineMode:{set:function(t){this.doc.setNewLineMode(t)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(t){this.setMode(t)},get:function(){return this.$modeId}}}),e.EditSession=u}),ace.define('ace/search',['require','exports','module','ace/lib/lang','ace/lib/oop','ace/range'],function(n,e){'use strict';var l=n('./lib/lang'),t=n('./lib/oop'),u=n('./range').Range,r=function(){this.$options={}};(function(){this.set=function(n){return t.mixin(this.$options,n),this},this.getOptions=function(){return l.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(r){var a=this.$options,e=this.$matchIterator(r,a);if(!e)return!1;var t=null;return e.forEach(function(o,e,n,r){return t=new u(o,e,n,r),!(e==r&&a.start&&a.start.start&&0!=a.skipCurrent&&t.isEqual(a.start))||(t=null,!1)}),t},this.findAll=function(o){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var t=e.range,n=t?o.getLines(t.start.row,t.end.row):o.doc.getAllLines(),r=[],i=e.re;if(e.$isMultiLine){var a=i.length,s=n.length-a,y;e:for(var c=i.offset||0;c<=s;c++){for(var h=0;h<a;h++)if(-1==n[c+h].search(i[h]))continue e;var d=n[c],p=n[c+a-1],m=d.length-d.match(i[0])[0].length,f=p.match(i[a-1])[0].length;y&&y.end.row===c&&y.end.column>m||(r.push(y=new u(c,m,c+a-1,f)),2<a&&(c=c+a-2))}}else for(var g=0,E;g<n.length;g++)for(E=l.getMatchOffsets(n[g],i),h=0;h<E.length;h++){var x=E[h];r.push(new u(g,x.offset,g,x.offset+x.length))}if(t){var A=t.start.column,b=t.start.column;for(g=0,h=r.length-1;g<h&&r[g].start.column<A&&r[g].start.row==t.start.row;)g++;for(;g<h&&r[h].end.column>b&&r[h].end.row==t.end.row;)h--;for(r=r.slice(g,h+1),g=0,h=r.length;g<h;g++)r[g].start.row+=t.start.row,r[g].end.row+=t.start.row}return r},this.replace=function(a,e){var t=this.$options,n=this.$assembleRegExp(t);if(t.$isMultiLine)return e;if(n){var i=n.exec(a);if(!i||i[0].length!=a.length)return null;if(e=a.replace(n,e),t.preserveCase){e=e.split('');for(var l=b(a.length,a.length),o;l--;)o=a[l],e[l]=o&&o.toLowerCase()!=o?e[l].toUpperCase():e[l].toLowerCase();e=e.join('')}return e}},this.$assembleRegExp=function(a,e){if(a.needle instanceof RegExp)return a.re=a.needle;var i=a.needle;if(!a.needle)return a.re=!1;a.regExp||(i=l.escapeRegExp(i)),a.wholeWord&&(i=function(r,a){function n(t){return /\w/.test(t)||a.regExp?'\\b':''}return n(r[0])+r+n(r[r.length-1])}(i,a));var n=a.caseSensitive?'gm':'gmi';if(a.$isMultiLine=!e&&/[\n\r]/.test(i),a.$isMultiLine)return a.re=this.$assembleMultilineRegExp(i,n);try{var r=new RegExp(i,n)}catch(t){r=!1}return a.re=r},this.$assembleMultilineRegExp=function(a,e){for(var t=a.replace(/\r\n|\r|\n/g,'$\n^').split('\n'),n=[],o=0;o<t.length;o++)try{n.push(new RegExp(t[o],e))}catch(t){return!1}return n},this.$matchIterator=function(d,p){var e=this.$assembleRegExp(p);if(!e)return!1;var m=1==p.backwards,t=0!=p.skipCurrent,r=p.range,o=p.start;o||(o=r?r[m?'end':'start']:d.selection.getRange()),o.start&&(o=o[t==m?'start':'end']);var i=r?r.start.row:0,a=r?r.end.row:d.getLength()-1;if(m)var s=function(t){var e=o.row;if(!c(e,o.column,t)){for(e--;e>=i;e--)if(c(e,Number.MAX_VALUE,t))return;if(0!=p.wrap)for(e=a,i=o.row;e>=i;e--)if(c(e,Number.MAX_VALUE,t))return}};else s=function(t){var e=o.row;if(!c(e,o.column,t)){for(e+=1;e<=a;e++)if(c(e,0,t))return;if(0!=p.wrap)for(e=i,a=o.row;e<=a;e++)if(c(e,0,t))return}};if(p.$isMultiLine)var g=e.length,c=function(n,t,r){var o=m?n-g+1:n;if(!(0>o)){var i=d.getLine(o),a=i.search(e[0]);if((m||!(a<t))&&-1!==a){for(var s=1;s<g;s++)if(-1==(i=d.getLine(o+s)).search(e[s]))return;var l=i.match(e[g-1])[0].length;if(!(m&&l>t))return!!r(o,a,o+g-1,l)||void 0}}};else c=m?function(n,t,i){var r=d.getLine(n),s=[],a=0,c;for(e.lastIndex=0;c=e.exec(r);){var o=c[0].length;if(a=c.index,!o){if(a>=r.length)break;e.lastIndex=a+=1}if(c.index+o>t)break;s.push(c.index,o)}for(var p=s.length-1,u;0<=p;p-=2)if(u=s[p-1],i(n,u,n,u+(o=s[p])))return!0}:function(n,t,i){var r=d.getLine(n),s=t,a;for(e.lastIndex=t;a=e.exec(r);){var o=a[0].length;if(i(n,s=a.index,n,s+o))return!0;if(!o&&(e.lastIndex=s+=1,s>=r.length))return!1}};return{forEach:s}}}).call(r.prototype),e.Search=r}),ace.define('ace/keyboard/hash_handler',['require','exports','module','ace/lib/keys','ace/lib/useragent'],function(n,e){'use strict';function s(n,e){this.platform=e||(i.isMac?'mac':'win'),this.commands={},this.commandKeyBinding={},this.addCommands(n),this.$singleCommand=!0}function a(n,e){s.call(this,n,e),this.$singleCommand=!1}var l=n('../lib/keys'),i=n('../lib/useragent'),d=l.KEY_MODS;a.prototype=s.prototype,function(){function e(t){return'object'==typeof t&&t.bindKey&&t.bindKey.position||(t.isDefault?-100:0)}this.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},this.removeCommand=function(a,l){var t=a&&('string'==typeof a?a:a.name);a=this.commands[t],l||delete this.commands[t];var n=this.commandKeyBinding;for(var i in n){var r=n[i];if(r==a)delete n[i];else if(Array.isArray(r)){var o=r.indexOf(a);-1!=o&&(r.splice(o,1),1==r.length&&(n[i]=r[0]))}}},this.bindKey=function(r,o,l){if('object'==typeof r&&r&&(null==l&&(l=r.position),r=r[this.platform]),r)return'function'==typeof o?this.addCommand({exec:o,bindKey:r,name:o.name||r}):void r.split('|').forEach(function(t){var c='';if(-1!=t.indexOf(' ')){var e=t.split(/\s+/);t=e.pop(),e.forEach(function(r){var e=this.parseKeys(r),t=d[e.hashId]+e.key;c+=(c?' ':'')+t,this._addCommandToBinding(c,'chainKeys')},this),c+=' '}var n=this.parseKeys(t),r=d[n.hashId]+n.key;this._addCommandToBinding(c+r,o,l)},this)},this._addCommandToBinding=function(a,t,l){var d=this.commandKeyBinding,o;if(!t)delete d[a];else if(!d[a]||this.$singleCommand)d[a]=t;else{Array.isArray(d[a])?-1!=(o=d[a].indexOf(t))&&d[a].splice(o,1):d[a]=[d[a]],'number'!=typeof l&&(l=e(t));var r=d[a];for(o=0;o<r.length&&!(e(r[o])>l);o++);r.splice(o,0,t)}},this.addCommands=function(r){r&&Object.keys(r).forEach(function(e){var t=r[e];if(t){if('string'==typeof t)return this.bindKey(t,e);'function'==typeof t&&(t={exec:t}),'object'==typeof t&&(t.name||(t.name=e),this.addCommand(t))}},this)},this.removeCommands=function(n){Object.keys(n).forEach(function(e){this.removeCommand(n[e])},this)},this.bindKeys=function(n){Object.keys(n).forEach(function(e){this.bindKey(e,n[e])},this)},this._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},this.parseKeys=function(i){var e=i.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(t){return t}),t=e.pop(),d=l[t];if(l.FUNCTION_KEYS[d])t=l.FUNCTION_KEYS[d].toLowerCase();else{if(!e.length)return{key:t,hashId:-1};if(1==e.length&&'shift'==e[0])return{key:t.toUpperCase(),hashId:-1}}for(var r=0,c=e.length,s;c--;){if(s=l.KEY_MODS[e[c]],null==s)return'undefined'!=typeof console&&console.error('invalid modifier '+e[c]+' in '+i),!1;r|=s}return{key:t,hashId:r}},this.findKeyCommand=function(r,e){var t=d[r]+e;return this.commandKeyBinding[t]},this.handleKeyboard=function(a,e,t,n){if(!(0>n)){var o=d[e]+t,r=this.commandKeyBinding[o];return a.$keyChain&&(a.$keyChain+=' '+o,r=this.commandKeyBinding[a.$keyChain]||r),r&&('chainKeys'==r||'chainKeys'==r[r.length-1])?(a.$keyChain=a.$keyChain||o,{command:'null'}):(a.$keyChain&&(e&&4!=e||1!=t.length?(-1==e||0<n)&&(a.$keyChain=''):a.$keyChain=a.$keyChain.slice(0,-o.length-1)),{command:r})}},this.getStatusText=function(n,e){return e.$keyChain||''}}.call(s.prototype),e.HashHandler=s,e.MultiHashHandler=a}),ace.define('ace/commands/command_manager',['require','exports','module','ace/lib/oop','ace/keyboard/hash_handler','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('../keyboard/hash_handler').MultiHashHandler,r=n('../lib/event_emitter').EventEmitter,o=function(n,e){a.call(this,e,n),this.byName=this.commands,this.setDefaultHandler('exec',function(t){return t.command.exec(t.editor,t.args||{})})};t.inherits(o,a),function(){t.implement(this,r),this.exec=function(a,o,s){if(Array.isArray(a)){for(var l=a.length;l--;)if(this.exec(a[l],o,s))return!0;return!1}if('string'==typeof a&&(a=this.commands[a]),!a)return!1;if(o&&o.$readOnly&&!a.readOnly)return!1;if(a.isAvailable&&!a.isAvailable(o))return!1;var i={editor:o,command:a,args:s};return i.returnValue=this._emit('exec',i),this._signal('afterExec',i),!1!==i.returnValue},this.toggleRecording=function(t){if(!this.$inReplay)return t&&t._emit('changeStatus'),this.recording?(this.macro.pop(),this.removeEventListener('exec',this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(t){this.macro.push([t.command,t.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on('exec',this.$addCommandToMacro),this.recording=!0)},this.replay=function(n){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(n);try{this.$inReplay=!0,this.macro.forEach(function(e){'string'==typeof e?this.exec(e,n):this.exec(e[0],n,e[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(t){return t.map(function(t){return'string'!=typeof t[0]&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}.call(o.prototype),e.CommandManager=o}),ace.define('ace/commands/default_commands',['require','exports','module','ace/lib/lang','ace/config','ace/range'],function(n,e){'use strict';function s(n,r){return{win:n,mac:r}}var a=n('../lib/lang'),t=n('../config'),d=n('../range').Range;e.commands=[{name:'showSettingsMenu',bindKey:s('Ctrl-,','Command-,'),exec:function(n){t.loadModule('ace/ext/settings_menu',function(e){e.init(n),n.showSettingsMenu()})},readOnly:!0},{name:'goToNextError',bindKey:s('Alt-E','F4'),exec:function(n){t.loadModule('ace/ext/error_marker',function(e){e.showErrorMarker(n,1)})},scrollIntoView:'animate',readOnly:!0},{name:'goToPreviousError',bindKey:s('Alt-Shift-E','Shift-F4'),exec:function(n){t.loadModule('ace/ext/error_marker',function(e){e.showErrorMarker(n,-1)})},scrollIntoView:'animate',readOnly:!0},{name:'selectall',bindKey:s('Ctrl-A','Command-A'),exec:function(t){t.selectAll()},readOnly:!0},{name:'centerselection',bindKey:s(null,'Ctrl-L'),exec:function(t){t.centerSelection()},readOnly:!0},{name:'gotoline',bindKey:s('Ctrl-L','Command-L'),exec:function(n){var e=parseInt(prompt('Enter line number:'),10);isNaN(e)||n.gotoLine(e)},readOnly:!0},{name:'fold',bindKey:s('Alt-L|Ctrl-F1','Command-Alt-L|Command-F1'),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'unfold',bindKey:s('Alt-Shift-L|Ctrl-Shift-F1','Command-Alt-Shift-L|Command-Shift-F1'),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'toggleFoldWidget',bindKey:s('F2','F2'),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'toggleParentFoldWidget',bindKey:s('Alt-F2','Alt-F2'),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'foldall',bindKey:s(null,'Ctrl-Command-Option-0'),exec:function(t){t.session.foldAll()},scrollIntoView:'center',readOnly:!0},{name:'foldOther',bindKey:s('Alt-0','Command-Option-0'),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:'center',readOnly:!0},{name:'unfoldall',bindKey:s('Alt-Shift-0','Command-Option-Shift-0'),exec:function(t){t.session.unfold()},scrollIntoView:'center',readOnly:!0},{name:'findnext',bindKey:s('Ctrl-K','Command-G'),exec:function(t){t.findNext()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'findprevious',bindKey:s('Ctrl-Shift-K','Command-Shift-G'),exec:function(t){t.findPrevious()},multiSelectAction:'forEach',scrollIntoView:'center',readOnly:!0},{name:'selectOrFindNext',bindKey:s('Alt-K','Ctrl-G'),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:'selectOrFindPrevious',bindKey:s('Alt-Shift-K','Ctrl-Shift-G'),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:'find',bindKey:s('Ctrl-F','Command-F'),exec:function(n){t.loadModule('ace/ext/searchbox',function(e){e.Search(n)})},readOnly:!0},{name:'overwrite',bindKey:'Insert',exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:'selecttostart',bindKey:s('Ctrl-Shift-Home','Command-Shift-Home|Command-Shift-Up'),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'gotostart',bindKey:s('Ctrl-Home','Command-Home|Command-Up'),exec:function(t){t.navigateFileStart()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'selectup',bindKey:s('Shift-Up','Shift-Up|Ctrl-Shift-P'),exec:function(t){t.getSelection().selectUp()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'golineup',bindKey:s('Up','Up|Ctrl-P'),exec:function(n,e){n.navigateUp(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttoend',bindKey:s('Ctrl-Shift-End','Command-Shift-End|Command-Shift-Down'),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'gotoend',bindKey:s('Ctrl-End','Command-End|Command-Down'),exec:function(t){t.navigateFileEnd()},multiSelectAction:'forEach',readOnly:!0,scrollIntoView:'animate',aceCommandGroup:'fileJump'},{name:'selectdown',bindKey:s('Shift-Down','Shift-Down|Ctrl-Shift-N'),exec:function(t){t.getSelection().selectDown()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'golinedown',bindKey:s('Down','Down|Ctrl-N'),exec:function(n,e){n.navigateDown(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectwordleft',bindKey:s('Ctrl-Shift-Left','Option-Shift-Left'),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotowordleft',bindKey:s('Ctrl-Left','Option-Left'),exec:function(t){t.navigateWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttolinestart',bindKey:s('Alt-Shift-Left','Command-Shift-Left|Ctrl-Shift-A'),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotolinestart',bindKey:s('Alt-Left|Home','Command-Left|Home|Ctrl-A'),exec:function(t){t.navigateLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectleft',bindKey:s('Shift-Left','Shift-Left|Ctrl-Shift-B'),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotoleft',bindKey:s('Left','Left|Ctrl-B'),exec:function(n,e){n.navigateLeft(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectwordright',bindKey:s('Ctrl-Shift-Right','Option-Shift-Right'),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotowordright',bindKey:s('Ctrl-Right','Option-Right'),exec:function(t){t.navigateWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selecttolineend',bindKey:s('Alt-Shift-Right','Command-Shift-Right|Shift-End|Ctrl-Shift-E'),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotolineend',bindKey:s('Alt-Right|End','Command-Right|End|Ctrl-E'),exec:function(t){t.navigateLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectright',bindKey:s('Shift-Right','Shift-Right'),exec:function(t){t.getSelection().selectRight()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'gotoright',bindKey:s('Right','Right|Ctrl-F'),exec:function(n,e){n.navigateRight(e.times)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectpagedown',bindKey:'Shift-PageDown',exec:function(t){t.selectPageDown()},readOnly:!0},{name:'pagedown',bindKey:s(null,'Option-PageDown'),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:'gotopagedown',bindKey:s('PageDown','PageDown|Ctrl-V'),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:'selectpageup',bindKey:'Shift-PageUp',exec:function(t){t.selectPageUp()},readOnly:!0},{name:'pageup',bindKey:s(null,'Option-PageUp'),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:'gotopageup',bindKey:'PageUp',exec:function(t){t.gotoPageUp()},readOnly:!0},{name:'scrollup',bindKey:s('Ctrl-Up',null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:'scrolldown',bindKey:s('Ctrl-Down',null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:'selectlinestart',bindKey:'Shift-Home',exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'selectlineend',bindKey:'Shift-End',exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'togglerecording',bindKey:s('Ctrl-Alt-E','Command-Option-E'),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:'replaymacro',bindKey:s('Ctrl-Shift-E','Command-Shift-E'),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:'jumptomatching',bindKey:s('Ctrl-P','Ctrl-P'),exec:function(t){t.jumpToMatching()},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'selecttomatching',bindKey:s('Ctrl-Shift-P','Ctrl-Shift-P'),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'expandToMatching',bindKey:s('Ctrl-Shift-M','Ctrl-Shift-M'),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:'forEach',scrollIntoView:'animate',readOnly:!0},{name:'passKeysToBrowser',bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:'copy',exec:function(){},readOnly:!0},{name:'cut',exec:function(n){var e=n.getSelectionRange();n._emit('cut',e),n.selection.isEmpty()||(n.session.remove(e),n.clearSelection())},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'paste',exec:function(n,e){n.$handlePaste(e)},scrollIntoView:'cursor'},{name:'removeline',bindKey:s('Ctrl-D','Command-D'),exec:function(t){t.removeLines()},scrollIntoView:'cursor',multiSelectAction:'forEachLine'},{name:'duplicateSelection',bindKey:s('Ctrl-Shift-D','Command-Shift-D'),exec:function(t){t.duplicateSelection()},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'sortlines',bindKey:s('Ctrl-Alt-S','Command-Alt-S'),exec:function(t){t.sortLines()},scrollIntoView:'selection',multiSelectAction:'forEachLine'},{name:'togglecomment',bindKey:s('Ctrl-/','Command-/'),exec:function(t){t.toggleCommentLines()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'toggleBlockComment',bindKey:s('Ctrl-Shift-/','Command-Shift-/'),exec:function(t){t.toggleBlockComment()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'modifyNumberUp',bindKey:s('Ctrl-Shift-Up','Alt-Shift-Up'),exec:function(t){t.modifyNumber(1)},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'modifyNumberDown',bindKey:s('Ctrl-Shift-Down','Alt-Shift-Down'),exec:function(t){t.modifyNumber(-1)},scrollIntoView:'cursor',multiSelectAction:'forEach'},{name:'replace',bindKey:s('Ctrl-H','Command-Option-F'),exec:function(n){t.loadModule('ace/ext/searchbox',function(e){e.Search(n,!0)})}},{name:'undo',bindKey:s('Ctrl-Z','Command-Z'),exec:function(t){t.undo()}},{name:'redo',bindKey:s('Ctrl-Shift-Z|Ctrl-Y','Command-Shift-Z|Command-Y'),exec:function(t){t.redo()}},{name:'copylinesup',bindKey:s('Alt-Shift-Up','Command-Option-Up'),exec:function(t){t.copyLinesUp()},scrollIntoView:'cursor'},{name:'movelinesup',bindKey:s('Alt-Up','Option-Up'),exec:function(t){t.moveLinesUp()},scrollIntoView:'cursor'},{name:'copylinesdown',bindKey:s('Alt-Shift-Down','Command-Option-Down'),exec:function(t){t.copyLinesDown()},scrollIntoView:'cursor'},{name:'movelinesdown',bindKey:s('Alt-Down','Option-Down'),exec:function(t){t.moveLinesDown()},scrollIntoView:'cursor'},{name:'del',bindKey:s('Delete','Delete|Ctrl-D|Shift-Delete'),exec:function(t){t.remove('right')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'backspace',bindKey:s('Shift-Backspace|Backspace','Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H'),exec:function(t){t.remove('left')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'cut_or_delete',bindKey:s('Shift-Delete',null),exec:function(t){return!!t.selection.isEmpty()&&void t.remove('left')},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removetolinestart',bindKey:s('Alt-Backspace','Command-Backspace'),exec:function(t){t.removeToLineStart()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removetolineend',bindKey:s('Alt-Delete','Ctrl-K'),exec:function(t){t.removeToLineEnd()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removewordleft',bindKey:s('Ctrl-Backspace','Alt-Backspace|Ctrl-Alt-Backspace'),exec:function(t){t.removeWordLeft()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'removewordright',bindKey:s('Ctrl-Delete','Alt-Delete'),exec:function(t){t.removeWordRight()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'outdent',bindKey:s('Shift-Tab','Shift-Tab'),exec:function(t){t.blockOutdent()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'indent',bindKey:s('Tab','Tab'),exec:function(t){t.indent()},multiSelectAction:'forEach',scrollIntoView:'selectionPart'},{name:'blockoutdent',bindKey:s('Ctrl-[','Ctrl-['),exec:function(t){t.blockOutdent()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'blockindent',bindKey:s('Ctrl-]','Ctrl-]'),exec:function(t){t.blockIndent()},multiSelectAction:'forEachLine',scrollIntoView:'selectionPart'},{name:'insertstring',exec:function(n,e){n.insert(e)},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'inserttext',exec:function(n,e){n.insert(a.stringRepeat(e.text||'',e.times||1))},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'splitline',bindKey:s(null,'Ctrl-O'),exec:function(t){t.splitLine()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'transposeletters',bindKey:s('Alt-Shift-X','Ctrl-T'),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:'cursor'},{name:'touppercase',bindKey:s('Ctrl-U','Ctrl-U'),exec:function(t){t.toUpperCase()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'tolowercase',bindKey:s('Ctrl-Shift-U','Ctrl-Shift-U'),exec:function(t){t.toLowerCase()},multiSelectAction:'forEach',scrollIntoView:'cursor'},{name:'expandtoline',bindKey:s('Ctrl-Shift-L','Command-Shift-L'),exec:function(n){var e=n.selection.getRange();e.start.column=e.end.column=0,e.end.row++,n.selection.setRange(e,!1)},multiSelectAction:'forEach',scrollIntoView:'cursor',readOnly:!0},{name:'joinlines',bindKey:s(null,null),exec:function(o){for(var e=o.selection.isBackwards(),t=e?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),n=e?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),r=o.session.doc.getLine(t.row).length,i=o.session.doc.getTextRange(o.selection.getRange()).replace(/\n\s*/,' ').length,s=o.session.doc.getLine(t.row),c=t.row+1,l;c<=n.row+1;c++)l=a.stringTrimLeft(a.stringTrimRight(o.session.doc.getLine(c))),0!==l.length&&(l=' '+l),s+=l;n.row+1<o.session.doc.getLength()-1&&(s+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new d(t.row,0,n.row+2,0),s),0<i?(o.selection.moveCursorTo(t.row,t.column),o.selection.selectTo(t.row,t.column+i)):(r=o.session.doc.getLine(t.row).length>r?r+1:r,o.selection.moveCursorTo(t.row,r))},multiSelectAction:'forEach',readOnly:!0},{name:'invertSelection',bindKey:s(null,null),exec:function(a){var e=a.session.doc.getLength()-1,t=a.session.doc.getLine(e).length,n=a.selection.rangeList.ranges,o=[];1>n.length&&(n=[a.selection.getRange()]);for(var r=0;r<n.length;r++)r==n.length-1&&(n[r].end.row===e&&n[r].end.column===t||o.push(new d(n[r].end.row,n[r].end.column,e,t))),0===r?0===n[r].start.row&&0===n[r].start.column||o.push(new d(0,0,n[r].start.row,n[r].start.column)):o.push(new d(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));for(a.exitMultiSelectMode(),a.clearSelection(),r=0;r<o.length;r++)a.selection.addRange(o[r],!1)},readOnly:!0,scrollIntoView:'none'}]}),ace.define('ace/editor',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/keyboard/textinput','ace/mouse/mouse_handler','ace/mouse/fold_handler','ace/keyboard/keybinding','ace/edit_session','ace/search','ace/range','ace/lib/event_emitter','ace/commands/command_manager','ace/commands/default_commands','ace/config','ace/token_iterator'],function(n,e){'use strict';n('./lib/fixoldbrowsers');var _=n('./lib/oop'),i=n('./lib/dom'),y=n('./lib/lang'),r=n('./lib/useragent'),o=n('./keyboard/textinput').TextInput,a=n('./mouse/mouse_handler').MouseHandler,s=n('./mouse/fold_handler').FoldHandler,l=n('./keyboard/keybinding').KeyBinding,c=n('./edit_session').EditSession,u=n('./search').Search,v=n('./range').Range,t=n('./lib/event_emitter').EventEmitter,d=n('./commands/command_manager').CommandManager,p=n('./commands/default_commands').commands,h=n('./config'),E=n('./token_iterator').TokenIterator,f=function(i,e){var t=i.getContainerElement();this.container=t,this.renderer=i,this.id='editor'+ ++f.$uid,this.commands=new d(r.isMac?'mac':'win',p),'object'==typeof document&&(this.textInput=new o(i.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new a(this),new s(this)),this.keyBinding=new l(this),this.$blockScrolling=0,this.$search=new u().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on('exec',this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=y.delayedCall(function(){this._signal('input',{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on('change',function(n,e){e._$emitInputEvent.schedule(31)}),this.setSession(e||new c('')),h.resetOptions(this),h._signal('editor',this)};f.$uid=0,function(){_.implement(this,t),this.$initOperationListeners=function(){this.selections=[],this.commands.on('exec',this.startOperation.bind(this),!0),this.commands.on('afterExec',this.endOperation.bind(this),!0),this.$opResetTimer=y.delayedCall(this.endOperation.bind(this)),this.on('change',function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on('changeSelection',function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(t){if(this.curOp){if(!t||this.curOp.command)return;this.prevOp=this.curOp}t||(this.previousCommand=null,t={}),this.$opResetTimer.schedule(),this.curOp={command:t.command||{},args:t.args,scrollTop:this.renderer.scrollTop},this.curOp.command.name&&void 0!==this.curOp.command.scrollIntoView&&this.$blockScrolling++},this.endOperation=function(a){if(this.curOp){if(a&&!1===a.returnValue)return this.curOp=null;this._signal('beforeEndOperation');var e=this.curOp.command;e.name&&0<this.$blockScrolling&&this.$blockScrolling--;var t=e&&e.scrollIntoView;if(t){switch(t){case'center-animate':t='animate';case'center':this.renderer.scrollCursorIntoView(null,.5);break;case'animate':case'cursor':this.renderer.scrollCursorIntoView();break;case'selectionPart':var n=this.selection.getRange(),o=this.renderer.layerConfig;(n.start.row>=o.lastRow||n.end.row<=o.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);}'animate'==t&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=['backspace','del','insertstring'],this.$historyTracker=function(a){if(this.$mergeUndoDeltas){var e=this.prevOp,t=this.$mergeableCommands,n=e.command&&a.command.name==e.command.name;if('insertstring'==a.command.name){var o=a.args;void 0===this.mergeNextCommand&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(o)||/\s/.test(e.args)),this.mergeNextCommand=!0}else n=n&&-1!==t.indexOf(a.command.name);'always'!=this.$mergeUndoDeltas&&2e3<Date.now()-this.sequenceStartTime&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==t.indexOf(a.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(r,a){if(r&&'string'==typeof r){this.$keybindingId=r;var t=this;h.loadModule(['keybinding',r],function(e){t.$keybindingId==r&&t.keyBinding.setKeyboardHandler(e&&e.handler),a&&a()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(r),a&&a()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(r){if(this.session!=r){this.curOp&&this.endOperation(),this.curOp={};var a=this.session;if(a){this.session.off('change',this.$onDocumentChange),this.session.off('changeMode',this.$onChangeMode),this.session.off('tokenizerUpdate',this.$onTokenizerUpdate),this.session.off('changeTabSize',this.$onChangeTabSize),this.session.off('changeWrapLimit',this.$onChangeWrapLimit),this.session.off('changeWrapMode',this.$onChangeWrapMode),this.session.off('changeFold',this.$onChangeFold),this.session.off('changeFrontMarker',this.$onChangeFrontMarker),this.session.off('changeBackMarker',this.$onChangeBackMarker),this.session.off('changeBreakpoint',this.$onChangeBreakpoint),this.session.off('changeAnnotation',this.$onChangeAnnotation),this.session.off('changeOverwrite',this.$onCursorChange),this.session.off('changeScrollTop',this.$onScrollTopChange),this.session.off('changeScrollLeft',this.$onScrollLeftChange);var o=this.session.getSelection();o.off('changeCursor',this.$onCursorChange),o.off('changeSelection',this.$onSelectionChange)}this.session=r,r?(this.$onDocumentChange=this.onDocumentChange.bind(this),r.on('change',this.$onDocumentChange),this.renderer.setSession(r),this.$onChangeMode=this.onChangeMode.bind(this),r.on('changeMode',this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),r.on('tokenizerUpdate',this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),r.on('changeTabSize',this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),r.on('changeWrapLimit',this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),r.on('changeWrapMode',this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),r.on('changeFold',this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on('changeFrontMarker',this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on('changeBackMarker',this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on('changeBreakpoint',this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on('changeAnnotation',this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on('changeOverwrite',this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on('changeScrollTop',this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on('changeScrollLeft',this.$onScrollLeftChange),this.selection=r.getSelection(),this.selection.on('changeCursor',this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on('changeSelection',this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(r)),this._signal('changeSession',{session:r,oldSession:a}),this.curOp=null,a&&a._signal('changeEditor',{oldEditor:this}),r&&r._signal('changeEditor',{editor:this}),r&&r.bgTokenizer&&r.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(n,e){return this.session.doc.setValue(n),e?1==e?this.navigateFileEnd():-1==e&&this.navigateFileStart():this.selectAll(),n},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(t){this.renderer.onResize(t)},this.setTheme=function(n,e){this.renderer.setTheme(n,e)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(t){this.renderer.setStyle(t)},this.unsetStyle=function(t){this.renderer.unsetStyle(t)},this.getFontSize=function(){return this.getOption('fontSize')||i.computedStyle(this.container,'fontSize')},this.setFontSize=function(t){this.setOption('fontSize',t)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var r=this;this.$highlightPending=!0,setTimeout(function(){r.$highlightPending=!1;var e=r.session;if(e&&e.bgTokenizer){var t=e.findMatchingBracket(r.getCursorPosition());if(t)var n=new v(t.row,t.column,t.row,t.column+1);else e.$mode.getMatching&&(n=e.$mode.getMatching(r.session));n&&(e.$bracketHighlight=e.addMarker(n,'ace_bracket','text'))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var d=this;this.$highlightTagPending=!0,setTimeout(function(){d.$highlightTagPending=!1;var e=d.session;if(e&&e.bgTokenizer){var t=d.getCursorPosition(),n=new E(d.session,t.row,t.column),i=n.getCurrentToken();if(!i||!/\b(?:tag-open|tag-name)/.test(i.type))return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);if(-1==i.type.indexOf('tag-open')||(i=n.stepForward())){var p=i.value,o=0,s=n.stepBackward();if('<'==s.value)do s=i,(i=n.stepForward())&&i.value===p&&-1!==i.type.indexOf('tag-name')&&('<'===s.value?o++:'</'===s.value&&o--);while(i&&0<=o);else{do i=s,s=n.stepBackward(),i&&i.value===p&&-1!==i.type.indexOf('tag-name')&&('<'===s.value?o++:'</'===s.value&&o--);while(s&&0>=o);n.stepForward()}if(!i)return e.removeMarker(e.$tagHighlight),void(e.$tagHighlight=null);var a=n.getCurrentTokenRow(),c=n.getCurrentTokenColumn(),l=new v(a,c,a,c+i.value.length),u=e.$backMarkers[e.$tagHighlight];e.$tagHighlight&&null!=u&&0!==l.compareRange(u.range)&&(e.removeMarker(e.$tagHighlight),e.$tagHighlight=null),l&&!e.$tagHighlight&&(e.$tagHighlight=e.addMarker(l,'ace_bracket','text'))}}},50)}},this.focus=function(){var t=this;setTimeout(function(){t.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(t){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit('focus',t))},this.onBlur=function(t){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit('blur',t))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(r){var e=this.session.$useWrapMode,t=r.start.row==r.end.row?r.end.row:1/0;this.renderer.updateLines(r.start.row,t,e),this._signal('change',r),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(n){var e=n.data;this.renderer.updateLines(e.first,e.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||(h.warn('Automatically scrolling cursor into view after selection change','this will be disabled in the next version','set editor.$blockScrolling = Infinity to disable this message'),this.renderer.scrollCursorIntoView()),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal('changeSelection')},this.$updateHighlightActiveLine=function(){var r=this.getSession(),t;if(this.$highlightActiveLine&&('line'==this.$selectionStyle&&this.selection.isMultiLine()||(t=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||1<this.renderer.$minLines||(t=!1)),r.$highlightLineMarker&&!t)r.removeMarker(r.$highlightLineMarker.id),r.$highlightLineMarker=null;else if(!r.$highlightLineMarker&&t){var a=new v(t.row,t.column,t.row,1/0);a.id=r.addMarker(a,'ace_active-line','screenLine'),r.$highlightLineMarker=a}else t&&(r.$highlightLineMarker.start.row=t.row,r.$highlightLineMarker.end.row=t.row,r.$highlightLineMarker.start.column=t.column,r._signal('changeBackMarker'))},this.onSelectionChange=function(){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var t=this.selection.getRange(),n=this.getSelectionStyle();e.$selectionMarker=e.addMarker(t,'ace_selection',n)}var a=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(a),this._signal('changeSelection')},this.$getSelectionHighLightRegexp=function(){var a=this.session,e=this.getSelectionRange();if(!e.isEmpty()&&!e.isMultiLine()){var t=e.start.column-1,n=e.end.column+1,i=a.getLine(e.start.row),r=i.length,o=i.substring(x(t,0),b(n,r));if(!(0<=t&&/^[\w\d]/.test(o)||n<=r&&/[\w\d]$/.test(o))&&(o=i.substring(e.start.column,e.end.column),/^[\w\d]+$/.test(o)))return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:o})}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(t){this.renderer.updateText(),this._emit('changeMode',t)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var t=this.getSelectedText();return this._signal('copy',t),t},this.onCopy=function(){this.commands.exec('copy',this)},this.onCut=function(){this.commands.exec('cut',this)},this.onPaste=function(n,r){this.commands.exec('paste',this,{text:n,event:r})},this.$handlePaste=function(a){'string'==typeof a&&(a={text:a}),this._signal('paste',a);var s=a.text;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)this.insert(s);else{var t=s.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(t.length>n.length||2>t.length||!t[1])return this.commands.exec('insertstring',this,s);for(var i=n.length,r;i--;)r=n[i],r.isEmpty()||this.session.remove(r),this.session.insert(r.start,t[i])}},this.execCommand=function(n,e){return this.commands.exec(n,this,e)},this.insert=function(p,e){var m=this.session,n=m.getMode(),i=this.getCursorPosition();if(this.getBehavioursEnabled()&&!e){var r=n.transformAction(m.getState(i.row),'insertion',this,m,p);r&&(p!==r.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),p=r.text)}if('\t'==p&&(p=this.session.getTabString()),this.selection.isEmpty())this.session.getOverwrite()&&-1==p.indexOf('\n')&&((o=new v.fromPoints(i,i)).end.column+=p.length,this.session.remove(o));else{var o=this.getSelectionRange();i=this.session.remove(o),this.clearSelection()}if('\n'==p||'\r\n'==p){var s=m.getLine(i.row);if(i.column>s.search(/\S|$/)){var a=s.substr(i.column).search(/\S|$/);m.doc.removeInLine(i.row,i.column,i.column+a)}}this.clearSelection();var c=i.column,l=m.getState(i.row),u=(s=m.getLine(i.row),n.checkOutdent(l,s,p));if(m.insert(i,p),r&&r.selection&&(2==r.selection.length?this.selection.setSelectionRange(new v(i.row,c+r.selection[0],i.row,c+r.selection[1])):this.selection.setSelectionRange(new v(i.row+r.selection[0],r.selection[1],i.row+r.selection[2],r.selection[3]))),m.getDocument().isNewLine(p)){var g=n.getNextLineIndent(l,s.slice(0,i.column),m.getTabString());m.insert({row:i.row+1,column:0},g)}u&&n.autoOutdent(l,m,i.row)},this.onTextInput=function(t){this.keyBinding.onTextInput(t)},this.onCommandKey=function(r,e,t){this.keyBinding.onCommandKey(r,e,t)},this.setOverwrite=function(t){this.session.setOverwrite(t)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(t){this.setOption('scrollSpeed',t)},this.getScrollSpeed=function(){return this.getOption('scrollSpeed')},this.setDragDelay=function(t){this.setOption('dragDelay',t)},this.getDragDelay=function(){return this.getOption('dragDelay')},this.setSelectionStyle=function(t){this.setOption('selectionStyle',t)},this.getSelectionStyle=function(){return this.getOption('selectionStyle')},this.setHighlightActiveLine=function(t){this.setOption('highlightActiveLine',t)},this.getHighlightActiveLine=function(){return this.getOption('highlightActiveLine')},this.setHighlightGutterLine=function(t){this.setOption('highlightGutterLine',t)},this.getHighlightGutterLine=function(){return this.getOption('highlightGutterLine')},this.setHighlightSelectedWord=function(t){this.setOption('highlightSelectedWord',t)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(t){this.renderer.setAnimatedScroll(t)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(t){this.renderer.setShowInvisibles(t)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(t){this.renderer.setDisplayIndentGuides(t)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(t){this.renderer.setShowPrintMargin(t)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(t){this.renderer.setPrintMarginColumn(t)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(t){this.setOption('readOnly',t)},this.getReadOnly=function(){return this.getOption('readOnly')},this.setBehavioursEnabled=function(t){this.setOption('behavioursEnabled',t)},this.getBehavioursEnabled=function(){return this.getOption('behavioursEnabled')},this.setWrapBehavioursEnabled=function(t){this.setOption('wrapBehavioursEnabled',t)},this.getWrapBehavioursEnabled=function(){return this.getOption('wrapBehavioursEnabled')},this.setShowFoldWidgets=function(t){this.setOption('showFoldWidgets',t)},this.getShowFoldWidgets=function(){return this.getOption('showFoldWidgets')},this.setFadeFoldWidgets=function(t){this.setOption('fadeFoldWidgets',t)},this.getFadeFoldWidgets=function(){return this.getOption('fadeFoldWidgets')},this.remove=function(a){this.selection.isEmpty()&&('left'==a?this.selection.selectLeft():this.selection.selectRight());var e=this.getSelectionRange();if(this.getBehavioursEnabled()){var t=this.session,n=t.getState(e.start.row),i=t.getMode().transformAction(n,'deletion',this,t,e);if(0===e.end.column){var r=t.getTextRange(e);if('\n'==r[r.length-1]){var o=t.getLine(e.end.row);/^\s+$/.test(o)&&(e.end.column=o.length)}}i&&(e=i)}this.session.remove(e),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var t=this.getSelectionRange();t.start.column==t.end.column&&t.start.row==t.end.row&&(t.end.column=0,t.end.row++),this.session.remove(t),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var t=this.getCursorPosition();this.insert('\n'),this.moveCursorToPosition(t)},this.transposeLetters=function(){if(this.selection.isEmpty()){var a=this.getCursorPosition(),e=a.column;if(0!==e){var t=this.session.getLine(a.row),r,n;e<t.length?(r=t.charAt(e)+t.charAt(e-1),n=new v(a.row,e-1,a.row,e+1)):(r=t.charAt(e-1)+t.charAt(e-2),n=new v(a.row,e-2,a.row,e)),this.session.replace(n,r),this.session.selection.moveToPosition(n.end)}}},this.toLowerCase=function(){var r=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),t=this.session.getTextRange(e);this.session.replace(e,t.toLowerCase()),this.selection.setSelectionRange(r)},this.toUpperCase=function(){var r=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var e=this.getSelectionRange(),t=this.session.getTextRange(e);this.session.replace(e,t.toUpperCase()),this.selection.setSelectionRange(r)},this.indent=function(){var o=this.session,e=this.getSelectionRange();if(!(e.start.row<e.end.row)){if(e.start.column<e.end.column){var t=o.getTextRange(e);if(!/^\s+$/.test(t))return l=this.$getSelectedRows(),void o.indentRows(l.first,l.last,'\t')}var n=o.getLine(e.start.row),i=e.start,r=o.getTabSize(),s=o.documentToScreenColumn(i.row,i.column);if(this.session.getUseSoftTabs())var a=r-s%r,d=y.stringRepeat(' ',a);else{for(a=s%r;' '==n[e.start.column-1]&&a;)e.start.column--,a--;this.selection.setSelectionRange(e),d='\t'}return this.insert(d)}var l=this.$getSelectedRows();o.indentRows(l.first,l.last,'\t')},this.blockIndent=function(){var t=this.$getSelectedRows();this.session.indentRows(t.first,t.last,'\t')},this.blockOutdent=function(){var t=this.session.getSelection();this.session.outdentRows(t.getRange())},this.sortLines=function(){var a=this.$getSelectedRows(),e=this.session,t=[];for(i=a.first;i<=a.last;i++)t.push(e.getLine(i));t.sort(function(n,e){return n.toLowerCase()<e.toLowerCase()?-1:n.toLowerCase()>e.toLowerCase()?1:0});for(var n=new v(0,0,0,0),i=a.first,r;i<=a.last;i++)r=e.getLine(i),n.start.row=i,n.end.row=i,n.end.column=r.length,e.replace(n,t[i-a.first])},this.toggleCommentLines=function(){var n=this.session.getState(this.getCursorPosition().row),e=this.$getSelectedRows();this.session.getMode().toggleCommentLines(n,this.session,e.first,e.last)},this.toggleBlockComment=function(){var r=this.getCursorPosition(),e=this.session.getState(r.row),t=this.getSelectionRange();this.session.getMode().toggleBlockComment(e,this.session,t,r)},this.getNumberAt=function(a,e){var t=/[\-]?[0-9]+(?:\.[0-9]+)?/g;t.lastIndex=0;for(var n=this.session.getLine(a),o;t.lastIndex<e;)if(o=t.exec(n),o.index<=e&&o.index+o[0].length>=e)return{value:o[0],start:o.index,end:o.index+o[0].length};return null},this.modifyNumber=function(d){var e=this.selection.getCursor().row,t=this.selection.getCursor().column,n=new v(e,t-1,e,t),i=this.session.getTextRange(n);if(!isNaN(parseFloat(i))&&isFinite(i)){var r=this.getNumberAt(e,t);if(r){var o=0<=r.value.indexOf('.')?r.start+r.value.indexOf('.')+1:r.end,s=r.start+r.value.length-o,a=parseFloat(r.value);a*=m(10,s),d*=o!==r.end&&t<o?m(10,r.end-t-1):m(10,r.end-t),a+=d;var c=(a/=m(10,s)).toFixed(s),l=new v(e,r.start,e,r.end);this.session.replace(l,c),this.moveCursorTo(e,x(r.start+1,t+c.length-r.value.length))}}},this.removeLines=function(){var t=this.$getSelectedRows();this.session.removeFullLines(t.first,t.last),this.clearSelection()},this.duplicateSelection=function(){var a=this.selection,e=this.session,t=a.getRange(),n=a.isBackwards();if(t.isEmpty()){var i=t.start.row;e.duplicateLines(i,i)}else{var r=n?t.start:t.end,o=e.insert(r,e.getTextRange(t),!1);t.start=r,t.end=o,a.setSelectionRange(t,n)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(r,e,t){return this.session.moveText(r,e,t)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(g,e){var f=this.selection,r,n;if(!f.inMultiSelectMode||this.inVirtualSelectionMode){var i=f.toOrientedRange();r=this.$getSelectedRows(i),n=this.session.$moveLines(r.first,r.last,e?0:g),e&&-1==g&&(n=0),i.moveBy(n,0),f.fromOrientedRange(i)}else{var o=f.rangeList.ranges;f.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var s=0,a=0,c=o.length,l=0,u;l<c;l++){u=l,o[l].moveBy(s,0);for(var h=(r=this.$getSelectedRows(o[l])).first,d=r.last;++l<c;){a&&o[l].moveBy(a,0);var p=this.$getSelectedRows(o[l]);if(e&&p.first!=d)break;if(!e&&p.first>d+1)break;d=p.last}for(l--,s=this.session.$moveLines(h,d,e?0:g),e&&-1==g&&(u=l+1);u<=l;)o[u].moveBy(s,0),u++;e||(s=0),a+=s}f.fromOrientedRange(f.ranges[0]),f.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(t){return t=(t||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(t.start.row),last:this.session.getRowFoldEnd(t.end.row)}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(t){this.renderer.setCompositionText(t)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(t){return t>=this.getFirstVisibleRow()&&t<=this.getLastVisibleRow()},this.isRowFullyVisible=function(t){return t>=this.renderer.getFirstFullyVisibleRow()&&t<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(a,e){var t=this.renderer,n=this.renderer.layerConfig,i=a*T(n.height/n.lineHeight);this.$blockScrolling++,!0===e?this.selection.$moveSelection(function(){this.moveCursorBy(i,0)}):!1==e&&(this.selection.moveCursorBy(i,0),this.selection.clearSelection()),this.$blockScrolling--;var r=t.scrollTop;t.scrollBy(0,i*n.lineHeight),null!=e&&t.scrollCursorIntoView(null,.5),t.animateScrolling(r)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(t){this.renderer.scrollToRow(t)},this.scrollToLine=function(r,e,t,n){this.renderer.scrollToLine(r,e,t,n)},this.centerSelection=function(){var n=this.getSelectionRange(),e={row:T(n.start.row+(n.end.row-n.start.row)/2),column:T(n.start.column+(n.end.column-n.start.column)/2)};this.renderer.alignCursor(e,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(n,e){this.selection.moveCursorTo(n,e)},this.moveCursorToPosition=function(t){this.selection.moveCursorToPosition(t)},this.jumpToMatching=function(p,e){var t=this.getCursorPosition(),n=new E(this.session,t.row,t.column),i=n.getCurrentToken(),r=i||n.stepForward();if(r){var _=!1,y={},l=t.column-r.start,u={")":'(',"(":'(',"]":'[',"[":'[',"{":'{',"}":'{'},h,s;do{if(r.value.match(/[{}()\[\]]/g)){for(;l<r.value.length&&!_;l++)if(u[r.value[l]])switch(s=u[r.value[l]]+'.'+r.type.replace('rparen','lparen'),isNaN(y[s])&&(y[s]=0),r.value[l]){case'(':case'[':case'{':y[s]++;break;case')':case']':case'}':y[s]--,-1===y[s]&&(h='bracket',_=!0);}}else r&&-1!==r.type.indexOf('tag-name')&&(isNaN(y[r.value])&&(y[r.value]=0),'<'===i.value?y[r.value]++:'</'===i.value&&y[r.value]--,-1===y[r.value]&&(h='tag',_=!0));_||(i=r,r=n.stepForward(),l=0)}while(r&&!_);if(h){var a,d;if('bracket'===h)(a=this.session.getBracketRange(t))||(d=(a=new v(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+l-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+l-1)).start,(e||d.row===t.row&&2>g(d.column-t.column))&&(a=this.session.getBracketRange(d)));else if('tag'===h){if(!r||-1===r.type.indexOf('tag-name'))return;var m=r.value;if(0===(a=new v(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2)).compare(t.row,t.column)){_=!1;do r=i,(i=n.stepBackward())&&(-1!==i.type.indexOf('tag-close')&&a.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),r.value===m&&-1!==r.type.indexOf('tag-name')&&('<'===i.value?y[m]++:'</'===i.value&&y[m]--,0===y[m]&&(_=!0)));while(i&&!_)}r&&r.type.indexOf('tag-name')&&(d=a.start).row==t.row&&2>g(d.column-t.column)&&(d=a.end)}(d=a&&a.cursor||d)&&(p?a&&e?this.selection.setRange(a):a&&a.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(d.row,d.column):this.selection.moveTo(d.row,d.column))}}},this.gotoLine=function(r,e,t){this.selection.clearSelection(),this.session.unfold({row:r-1,column:e||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(r-1,e||0),this.$blockScrolling-=1,this.isRowFullyVisible(r-1)||this.scrollToLine(r-1,!0,t)},this.navigateTo=function(n,e){this.selection.moveTo(n,e)},this.navigateUp=function(n){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var r=this.selection.anchor.getPosition();return this.moveCursorToPosition(r)}this.selection.clearSelection(),this.selection.moveCursorBy(-n||-1,0)},this.navigateDown=function(n){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var e=this.selection.anchor.getPosition();return this.moveCursorToPosition(e)}this.selection.clearSelection(),this.selection.moveCursorBy(n||1,0)},this.navigateLeft=function(n){if(this.selection.isEmpty())for(n=n||1;n--;)this.selection.moveCursorLeft();else{var e=this.getSelectionRange().start;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateRight=function(n){if(this.selection.isEmpty())for(n=n||1;n--;)this.selection.moveCursorRight();else{var e=this.getSelectionRange().end;this.moveCursorToPosition(e)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(r,e){e&&this.$search.set(e);var t=this.$search.find(this.session),n=0;return t?(this.$tryReplace(t,r)&&(n=1),null!==t&&(this.selection.setSelectionRange(t),this.renderer.scrollSelectionIntoView(t.start,t.end)),n):n},this.replaceAll=function(a,e){e&&this.$search.set(e);var t=this.$search.findAll(this.session),n=0;if(!t.length)return n;this.$blockScrolling+=1;var i=this.getSelectionRange();this.selection.moveTo(0,0);for(var r=t.length-1;0<=r;--r)this.$tryReplace(t[r],a)&&n++;return this.selection.setSelectionRange(i),this.$blockScrolling-=1,n},this.$tryReplace=function(r,e){var t=this.session.getTextRange(r);return null===(e=this.$search.replace(t,e))?null:(r.end=this.session.replace(r,e),r)},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(a,i,t){i||(i={}),'string'==typeof a||a instanceof RegExp?i.needle=a:'object'==typeof a&&_.mixin(i,a);var n=this.selection.getRange();null==i.needle&&((a=this.session.getTextRange(n)||this.$search.$options.needle)||(n=this.session.getWordRange(n.start.row,n.start.column),a=this.session.getTextRange(n)),this.$search.set({needle:a})),this.$search.set(i),i.start||this.$search.set({start:n});var s=this.$search.find(this.session);return i.preventScroll?s:s?(this.revealRange(s,t),s):(i.backwards?n.start=n.end:n.end=n.start,void this.selection.setRange(n))},this.findNext=function(n,e){this.find({skipCurrent:!0,backwards:!1},n,e)},this.findPrevious=function(n,e){this.find(n,{skipCurrent:!0,backwards:!0},e)},this.revealRange=function(r,e){this.$blockScrolling+=1,this.session.unfold(r),this.selection.setSelectionRange(r),this.$blockScrolling-=1;var t=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(r.start,r.end,.5),!1!==e&&this.renderer.animateScrolling(t)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal('destroy',this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(l){if(l){var d=this,n=!1,i;this.$scrollAnchor||(this.$scrollAnchor=document.createElement('div'));var t=this.$scrollAnchor;t.style.cssText='position:absolute',this.container.insertBefore(t,this.container.firstChild);var r=this.on('changeSelection',function(){n=!0}),o=this.renderer.on('beforeRender',function(){n&&(i=d.renderer.container.getBoundingClientRect())}),s=this.renderer.on('afterRender',function(){if(n&&i&&(d.isFocused()||d.searchBox&&d.searchBox.isFocused())){var r=d.renderer,e=r.$cursorLayer.$pixelPos,o=r.layerConfig,s=e.top-o.offset;null!=(n=0<=e.top&&0>s+i.top||!(e.top<o.height&&e.top+i.top+o.lineHeight>window.innerHeight)&&null)&&(t.style.top=s+'px',t.style.left=e.left+'px',t.style.height=o.lineHeight+'px',t.scrollIntoView(n)),n=i=null}});this.setAutoScrollEditorIntoView=function(t){t||(delete this.setAutoScrollEditorIntoView,this.off('changeSelection',r),this.renderer.off('afterRender',s),this.renderer.off('beforeRender',o))}}},this.$resetCursorStyle=function(){var n=this.$cursorStyle||'ace',e=this.renderer.$cursorLayer;e&&(e.setSmoothBlinking(/smooth/.test(n)),e.isBlinking=!this.$readOnly&&'wide'!=n,i.setCssClass(e.element,'ace_slim-cursors',/slim/.test(n)))}}.call(f.prototype),h.defineOptions(f.prototype,'editor',{selectionStyle:{set:function(t){this.onSelectionChange(),this._signal('changeSelectionStyle',{data:t})},initialValue:'line'},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(){this.$resetCursorStyle()},values:['ace','slim','smooth','wide'],initialValue:'ace'},mergeUndoDeltas:{values:[!1,!0,'always'],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(t){this.setAutoScrollEditorIntoView(t)}},keyboardHandler:{set:function(t){this.setKeyboardHandler(t)},get:function(){return this.keybindingId},handlesSet:!0},hScrollBarAlwaysVisible:'renderer',vScrollBarAlwaysVisible:'renderer',highlightGutterLine:'renderer',animatedScroll:'renderer',showInvisibles:'renderer',showPrintMargin:'renderer',printMarginColumn:'renderer',printMargin:'renderer',fadeFoldWidgets:'renderer',showFoldWidgets:'renderer',showLineNumbers:'renderer',showGutter:'renderer',displayIndentGuides:'renderer',fontSize:'renderer',fontFamily:'renderer',maxLines:'renderer',minLines:'renderer',scrollPastEnd:'renderer',fixedWidthGutter:'renderer',theme:'renderer',scrollSpeed:'$mouseHandler',dragDelay:'$mouseHandler',dragEnabled:'$mouseHandler',focusTimout:'$mouseHandler',tooltipFollowsMouse:'$mouseHandler',firstLineNumber:'session',overwrite:'session',newLineMode:'session',useWorker:'session',useSoftTabs:'session',tabSize:'session',wrap:'session',indentedSoftWrap:'session',foldStyle:'session',mode:'session'}),e.Editor=f}),ace.define('ace/undomanager',['require','exports','module'],function(n,e){'use strict';var t=function(){this.reset()};(function(){function e(t){return{action:t.action,start:t.start,end:t.end,lines:1==t.lines.length?null:t.lines,text:1==t.lines.length?t.lines[0]:null}}function t(t){return{action:t.action,start:t.start,end:t.end,lines:t.lines||[t.text]}}function n(l,e){for(var t=Array(l.length),d=0;d<l.length;d++){for(var i=l[d],r={group:i.group,deltas:Array(i.length)},o=0,s;o<i.deltas.length;o++)s=i.deltas[o],r.deltas[o]=e(s);t[d]=r}return t}this.execute=function(n){var e=n.args[0];this.$doc=n.args[1],n.merge&&this.hasUndo()&&(this.dirtyCounter--,e=this.$undoStack.pop().concat(e)),this.$undoStack.push(e),this.$redoStack=[],0>this.dirtyCounter&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(r){var e=this.$undoStack.pop(),t=null;return e&&(t=this.$doc.undoChanges(e,r),this.$redoStack.push(e),this.dirtyCounter--),t},this.redo=function(r){var e=this.$redoStack.pop(),t=null;return e&&(t=this.$doc.redoChanges(this.$deserializeDeltas(e),r),this.$undoStack.push(e),this.dirtyCounter++),t},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return 0<this.$undoStack.length},this.hasRedo=function(){return 0<this.$redoStack.length},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter},this.$serializeDeltas=function(r){return n(r,e)},this.$deserializeDeltas=function(r){return n(r,t)}}).call(t.prototype),e.UndoManager=t}),ace.define('ace/layer/gutter',['require','exports','module','ace/lib/dom','ace/lib/oop','ace/lib/lang','ace/lib/event_emitter'],function(n,e){'use strict';var _=n('../lib/dom'),t=n('../lib/oop'),l=n('../lib/lang'),r=n('../lib/event_emitter').EventEmitter,o=function(t){this.element=_.createElement('div'),this.element.className='ace_layer ace_gutter-layer',t.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){t.implement(this,r),this.setSession=function(t){this.session&&this.session.removeEventListener('change',this.$updateAnnotations),this.session=t,t&&t.on('change',this.$updateAnnotations)},this.addGutterDecoration=function(n,e){window.console&&console.warn&&console.warn('deprecated use session.addGutterDecoration'),this.session.addGutterDecoration(n,e)},this.removeGutterDecoration=function(n,e){window.console&&console.warn&&console.warn('deprecated use session.removeGutterDecoration'),this.session.removeGutterDecoration(n,e)},this.setAnnotations=function(o){this.$annotations=[];for(var e=0;e<o.length;e++){var t=o[e],n=t.row,i=this.$annotations[n];i||(i=this.$annotations[n]={text:[]});var r=t.text;r=r?l.escapeHTML(r):t.html||'',-1===i.text.indexOf(r)&&i.text.push(r);var s=t.type;'error'==s?i.className=' ace_error':'warning'==s&&' ace_error'!=i.className?i.className=' ace_warning':'info'!=s||i.className||(i.className=' ace_info')}},this.$updateAnnotations=function(r){if(this.$annotations.length){var e=r.start.row,t=r.end.row-e;if(0==t);else if('remove'==r.action)this.$annotations.splice(e,t+1,null);else{var n=Array(t+1);n.unshift(e,1),this.$annotations.splice.apply(this.$annotations,n)}}},this.update=function(i){for(var e=this.session,t=i.firstRow,n=b(i.lastRow+i.gutterOffset,e.getLength()-1),r=e.getNextFoldLine(t),o=r?r.start.row:1/0,s=this.$showFoldWidgets&&e.foldWidgets,a=e.$breakpoints,c=e.$decorations,l=e.$firstLineNumber,u=0,h=e.gutterRenderer||this.$renderer,d=null,p=-1,m=t;;){if(m>o&&(m=r.end.row+1,o=(r=e.getNextFoldLine(m,r))?r.start.row:1/0),m>n){for(;this.$cells.length>p+1;)d=this.$cells.pop(),this.element.removeChild(d.element);break}(d=this.$cells[++p])||((d={element:null,textNode:null,foldWidget:null}).element=_.createElement('div'),d.textNode=document.createTextNode(''),d.element.appendChild(d.textNode),this.element.appendChild(d.element),this.$cells[p]=d);var f='ace_gutter-cell ';if(a[m]&&(f+=a[m]),c[m]&&(f+=c[m]),this.$annotations[m]&&(f+=this.$annotations[m].className),d.element.className!=f&&(d.element.className=f),(E=e.getRowLength(m)*i.lineHeight+'px')!=d.element.style.height&&(d.element.style.height=E),s){var g=s[m];null==g&&(g=s[m]=e.getFoldWidget(m))}if(g){d.foldWidget||(d.foldWidget=_.createElement('span'),d.element.appendChild(d.foldWidget)),f='ace_fold-widget ace_'+g,f+='start'==g&&m==o&&m<r.end.row?' ace_closed':' ace_open',d.foldWidget.className!=f&&(d.foldWidget.className=f);var E=i.lineHeight+'px';d.foldWidget.style.height!=E&&(d.foldWidget.style.height=E)}else d.foldWidget&&(d.element.removeChild(d.foldWidget),d.foldWidget=null);var x=u=h?h.getText(e,m):m+l;x!==d.textNode.data&&(d.textNode.data=x),m++}this.element.style.height=i.minHeight+'px',(this.$fixedWidth||e.$useWrapMode)&&(u=e.getLength()+l);var A=h?h.getWidth(e,u,i):u.toString().length*i.characterWidth,T=this.$padding||this.$computePadding();(A+=T.left+T.right)===this.gutterWidth||isNaN(A)||(this.gutterWidth=A,this.element.style.width=y(this.gutterWidth)+'px',this._emit('changeGutterWidth',A))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer='',this.setShowLineNumbers=function(t){this.$renderer=!t&&{getWidth:function(){return''},getText:function(){return''}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(t){t?_.addCssClass(this.element,'ace_folding-enabled'):_.removeCssClass(this.element,'ace_folding-enabled'),this.$showFoldWidgets=t,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var t=_.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(t.paddingLeft)+1||0,this.$padding.right=parseInt(t.paddingRight)||0,this.$padding},this.getRegion=function(r){var e=this.$padding||this.$computePadding(),t=this.element.getBoundingClientRect();return r.x<e.left+t.left?'markers':this.$showFoldWidgets&&r.x>t.right-e.right?'foldWidgets':void 0}}).call(o.prototype),e.Gutter=o}),ace.define('ace/layer/marker',['require','exports','module','ace/range','ace/lib/dom'],function(n,e){'use strict';var m=n('../range').Range,t=n('../lib/dom'),r=function(n){this.element=t.createElement('div'),this.element.className='ace_layer ace_marker-layer',n.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setMarkers=function(t){this.markers=t},this.update=function(a){if(a){this.config=a;var e=[];for(var t in this.markers){var n=this.markers[t];if(n.range){var i=n.range.clipRows(a.firstRow,a.lastRow);if(!i.isEmpty())if(i=i.toScreenRange(this.session),n.renderer){var r=this.$getTop(i.start.row,a),o=this.$padding+i.start.column*a.characterWidth;n.renderer(e,i,o,r,a)}else'fullLine'==n.type?this.drawFullLineMarker(e,i,n.clazz,a):'screenLine'==n.type?this.drawScreenLineMarker(e,i,n.clazz,a):i.isMultiLine()?'text'==n.type?this.drawTextMarker(e,i,n.clazz,a):this.drawMultiLineMarker(e,i,n.clazz,a):this.drawSingleLineMarker(e,i,n.clazz+' ace_start ace_br15',a)}else n.update(e,this,this.session,a)}this.element.innerHTML=e.join('')}},this.$getTop=function(n,e){return(n-e.firstRowScreen)*e.lineHeight},this.drawTextMarker=function(i,e,t,n,r){for(var o=this.session,s=e.start.row,a=e.end.row,c=s,l=0,u=0,g=o.getScreenLastRowColumn(c),d=new m(c,e.start.column,c,u);c<=a;c++)d.start.row=d.end.row=c,d.start.column=c==s?e.start.column:o.getRowWrapIndent(c),d.end.column=g,l=u,u=g,g=c+1<a?o.getScreenLastRowColumn(c+1):c==a?0:e.end.column,this.drawSingleLineMarker(i,d,t+(c==s?' ace_start':'')+' ace_br'+((c==s||c==s+1&&e.start.column?1:0)|(l<u?2:0)|(u>g?4:0)|(c==a?8:0)),n,c==a?0:1,r)},this.drawMultiLineMarker=function(d,e,t,n,i){var r=this.$padding,o=n.lineHeight,s=this.$getTop(e.start.row,n),a=r+e.start.column*n.characterWidth;i=i||'',d.push('<div class=\'',t,' ace_br1 ace_start\' style=\'','height:',o,'px;','right:0;','top:',s,'px;','left:',a,'px;',i,'\'></div>'),s=this.$getTop(e.end.row,n);var c=e.end.column*n.characterWidth;if(d.push('<div class=\'',t,' ace_br12\' style=\'','height:',o,'px;','width:',c,'px;','top:',s,'px;','left:',r,'px;',i,'\'></div>'),!(0>=(o=(e.end.row-e.start.row-1)*n.lineHeight))){s=this.$getTop(e.start.row+1,n);var l=(e.start.column?1:0)|(e.end.column?0:8);d.push('<div class=\'',t,l?' ace_br'+l:'','\' style=\'','height:',o,'px;','right:0;','top:',s,'px;','left:',r,'px;',i,'\'></div>')}},this.drawSingleLineMarker=function(d,e,t,n,i,r){var o=n.lineHeight,s=(e.end.column+(i||0)-e.start.column)*n.characterWidth,a=this.$getTop(e.start.row,n),c=this.$padding+e.start.column*n.characterWidth;d.push('<div class=\'',t,'\' style=\'','height:',o,'px;','width:',s,'px;','top:',a,'px;','left:',c,'px;',r||'','\'></div>')},this.drawFullLineMarker=function(a,e,t,n,i){var r=this.$getTop(e.start.row,n),o=n.lineHeight;e.start.row!=e.end.row&&(o+=this.$getTop(e.end.row,n)-r),a.push('<div class=\'',t,'\' style=\'','height:',o,'px;','top:',r,'px;','left:0;right:0;',i||'','\'></div>')},this.drawScreenLineMarker=function(a,e,t,n,i){var r=this.$getTop(e.start.row,n),o=n.lineHeight;a.push('<div class=\'',t,'\' style=\'','height:',o,'px;','top:',r,'px;','left:0;right:0;',i||'','\'></div>')}}).call(r.prototype),e.Marker=r}),ace.define('ace/layer/text',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('../lib/oop'),u=n('../lib/dom'),p=n('../lib/lang'),r=(n('../lib/useragent'),n('../lib/event_emitter').EventEmitter),o=function(t){this.element=u.createElement('div'),this.element.className='ace_layer ace_text-layer',t.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){t.implement(this,r),this.EOF_CHAR='\xB6',this.EOL_CHAR_LF='\xAC',this.EOL_CHAR_CRLF='\xA4',this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR='\u2014',this.SPACE_CHAR='\xB7',this.$padding=0,this.$updateEolChar=function(){var t='\n'==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=t)return this.EOL_CHAR=t,!0},this.setPadding=function(t){this.$padding=t,this.element.style.padding='0 '+t+'px'},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(t){this.$fontMetrics=t,this.$fontMetrics.on('changeCharacterSize',function(t){this._signal('changeCharacterSize',t)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(t){this.session=t,t&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(t){return this.showInvisibles!=t&&(this.showInvisibles=t,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(t){return this.displayIndentGuides!=t&&(this.displayIndentGuides=t,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var o=this.session.getTabSize();this.tabSize=o;for(var e=this.$tabStrings=[0],t=1;t<o+1;t++)this.showInvisibles?e.push('<span class=\'ace_invisible ace_invisible_tab\'>'+p.stringRepeat(this.TAB_CHAR,t)+'</span>'):e.push(p.stringRepeat(' ',t));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n='ace_indent-guide',i='',r='';if(this.showInvisibles){n+=' ace_invisible',i=' ace_invisible_space',r=' ace_invisible_tab';var s=p.stringRepeat(this.SPACE_CHAR,this.tabSize),a=p.stringRepeat(this.TAB_CHAR,this.tabSize)}else a=s=p.stringRepeat(' ',this.tabSize);this.$tabStrings[' ']='<span class=\''+n+i+'\'>'+s+'</span>',this.$tabStrings['\t']='<span class=\''+n+r+'\'>'+a+'</span>'}},this.updateLines=function(d,e,t){this.config.lastRow==d.lastRow&&this.config.firstRow==d.firstRow||this.scrollLines(d),this.config=d;for(var n=x(e,d.firstRow),i=b(t,d.lastRow),r=this.element.childNodes,o=0,s=d.firstRow;s<n;s++){if(l=this.session.getFoldLine(s)){if(l.containsRow(n)){n=l.start.row;break}s=l.end.row}o++}s=n;for(var a=(l=this.session.getNextFoldLine(s))?l.start.row:1/0,l,c;s>a&&(s=l.end.row+1,a=(l=this.session.getNextFoldLine(s,l))?l.start.row:1/0),!(s>i);){if(c=r[o++],c){var u=[];this.$renderLine(u,s,!this.$useLineGroups(),s==a&&l),c.style.height=d.lineHeight*this.session.getRowLength(s)+'px',c.innerHTML=u.join('')}s++}},this.scrollLines=function(a){var e=this.config;if(this.config=a,!e||e.lastRow<a.firstRow)return this.update(a);if(a.lastRow<e.firstRow)return this.update(a);var o=this.element;if(e.firstRow<a.firstRow)for(var n=this.session.getFoldedRowCount(e.firstRow,a.firstRow-1);0<n;n--)o.removeChild(o.firstChild);if(e.lastRow>a.lastRow)for(n=this.session.getFoldedRowCount(a.lastRow+1,e.lastRow);0<n;n--)o.removeChild(o.lastChild);if(a.firstRow<e.firstRow){var i=this.$renderLinesFragment(a,a.firstRow,e.firstRow-1);o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i)}a.lastRow>e.lastRow&&(i=this.$renderLinesFragment(a,e.lastRow+1,a.lastRow),o.appendChild(i))},this.$renderLinesFragment=function(r,e,t){for(var n=this.element.ownerDocument.createDocumentFragment(),i=e,o=this.session.getNextFoldLine(i),s=o?o.start.row:1/0;i>s&&(i=o.end.row+1,s=(o=this.session.getNextFoldLine(i,o))?o.start.row:1/0),!(i>t);){var a=u.createElement('div'),d=[];if(this.$renderLine(d,i,!1,i==s&&o),a.innerHTML=d.join(''),this.$useLineGroups())a.className='ace_line_group',n.appendChild(a),a.style.height=r.lineHeight*this.session.getRowLength(i)+'px';else for(;a.firstChild;)n.appendChild(a.firstChild);i++}return n},this.update=function(a){this.config=a;for(var e=[],t=a.firstRow,n=a.lastRow,i=t,r=this.session.getNextFoldLine(i),o=r?r.start.row:1/0;i>o&&(i=r.end.row+1,o=(r=this.session.getNextFoldLine(i,r))?r.start.row:1/0),!(i>n);)this.$useLineGroups()&&e.push('<div class=\'ace_line_group\' style=\'height:',a.lineHeight*this.session.getRowLength(i),'px\'>'),this.$renderLine(e,i,!1,i==o&&r),this.$useLineGroups()&&e.push('</div>'),i++;this.element.innerHTML=e.join('')},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(o,d,e,t){var m=this,n=t.replace(/\t|&|<|>|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF\uFFF9-\uFFFC])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,function(t,e,n,r){if(e)return m.showInvisibles?'<span class=\'ace_invisible ace_invisible_space\'>'+p.stringRepeat(m.SPACE_CHAR,t.length)+'</span>':t;if('&'==t)return'&#38;';if('<'==t)return'&#60;';if('>'==t)return'&#62;';if('\t'==t){var a=m.session.getScreenTabSize(d+r);return d+=a-1,m.$tabStrings[a]}if('\u3000'==t){var o=m.showInvisibles?'ace_cjk ace_invisible ace_invisible_space':'ace_cjk',i=m.showInvisibles?m.SPACE_CHAR:'';return d+=1,'<span class=\''+o+'\' style=\'width:'+2*m.config.characterWidth+'px\'>'+i+'</span>'}return n?'<span class=\'ace_invisible ace_invisible_space ace_invalid\'>'+m.SPACE_CHAR+'</span>':(d+=1,'<span class=\'ace_cjk\' style=\'width:'+2*m.config.characterWidth+'px\'>'+t+'</span>')});if(this.$textToken[e.type])o.push(n);else{var r='ace_'+e.type.replace(/\./g,' ace_'),a='';'fold'==e.type&&(a=' style=\'width:'+e.value.length*this.config.characterWidth+'px;\' '),o.push('<span class=\'',r,'\'',a,'>',n,'</span>')}return d+t.length},this.renderIndentGuide=function(r,e,t){var n=e.search(this.$indentGuideRe);return 0>=n||n>=t?e:' '==e[0]?(n-=n%this.tabSize,r.push(p.stringRepeat(this.$tabStrings[' '],n/this.tabSize)),e.substr(n)):'\t'==e[0]?(r.push(p.stringRepeat(this.$tabStrings['\t'],n)),e.substr(n)):e},this.$renderWrappedLine=function(o,e,t,n){for(var i=0,r=0,s=t[0],a=0,c=0;c<e.length;c++){var l=e[c],u=l.value;if(0==c&&this.displayIndentGuides){if(i=u.length,!(u=this.renderIndentGuide(o,u,s)))continue;i-=u.length}if(i+u.length<s)a=this.$renderToken(o,a,l,u),i+=u.length;else{for(;i+u.length>=s;)a=this.$renderToken(o,a,l,u.substring(0,s-i)),u=u.substring(s-i),i=s,n||o.push('</div>','<div class=\'ace_line\' style=\'height:',this.config.lineHeight,'px\'>'),o.push(p.stringRepeat('\xA0',t.indent)),a=0,s=t[++r]||d;0!=u.length&&(i+=u.length,a=this.$renderToken(o,a,l,u))}}},this.$renderSimpleLine=function(a,e){var t=0,n=e[0],i=n.value;this.displayIndentGuides&&(i=this.renderIndentGuide(a,i)),i&&(t=this.$renderToken(a,t,n,i));for(var r=1;r<e.length;r++)i=(n=e[r]).value,t=this.$renderToken(a,t,n,i)},this.$renderLine=function(a,e,t,n){if(n||0==n||(n=this.session.getFoldLine(e)),n)var i=this.$getFoldLineTokens(e,n);else i=this.session.getTokens(e);if(t||a.push('<div class=\'ace_line\' style=\'height:',this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(e)),'px\'>'),i.length){var r=this.session.getRowSplitData(e);r&&r.length?this.$renderWrappedLine(a,i,r,t):this.$renderSimpleLine(a,i)}this.showInvisibles&&(n&&(e=n.end.row),a.push('<span class=\'ace_invisible ace_invisible_eol\'>',e==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,'</span>')),t||a.push('</div>')},this.$getFoldLineTokens=function(a,e){var l=this.session,d=[],n=l.getTokens(a);return e.walk(function(r,i,t,o,s){null==r?(s&&(n=l.getTokens(i)),n.length&&function(a,e,t){for(var n=0,r=0;r+a[n].value.length<e;)if(r+=a[n].value.length,++n==a.length)return;for(r!=e&&((o=a[n].value.substring(e-r)).length>t-e&&(o=o.substring(0,t-e)),d.push({type:a[n].type,value:o}),r=e+o.length,n+=1);r<t&&n<a.length;){var o;(o=a[n].value).length+r>t?d.push({type:a[n].type,value:o.substring(0,t-r)}):d.push(a[n]),r+=o.length,n+=1}}(n,o,t)):d.push({type:'fold',value:r})},e.end.row,this.session.getLine(e.end.row).length),d},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(o.prototype),e.Text=o}),ace.define('ace/layer/cursor',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';var a=n('../lib/dom'),t=function(t){this.element=a.createElement('div'),this.element.className='ace_layer ace_cursor-layer',t.appendChild(this.element),void 0===r&&(r=!('opacity'in this.element.style)),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,'ace_hidden-cursors'),this.$updateCursors=(r?this.$updateVisibility:this.$updateOpacity).bind(this)},r;(function(){this.$updateVisibility=function(r){for(var e=this.cursors,t=e.length;t--;)e[t].style.visibility=r?'':'hidden'},this.$updateOpacity=function(r){for(var e=this.cursors,t=e.length;t--;)e[t].style.opacity=r?'':'0'},this.$padding=0,this.setPadding=function(t){this.$padding=t},this.setSession=function(t){this.session=t},this.setBlinking=function(t){t!=this.isBlinking&&(this.isBlinking=t,this.restartTimer())},this.setBlinkInterval=function(t){t!=this.blinkInterval&&(this.blinkInterval=t,this.restartTimer())},this.setSmoothBlinking=function(t){t==this.smoothBlinking||r||(this.smoothBlinking=t,a.setCssClass(this.element,'ace_smooth-blinking',t),this.$updateCursors(!0),this.$updateCursors=this.$updateOpacity.bind(this),this.restartTimer())},this.addCursor=function(){var t=a.createElement('div');return t.className='ace_cursor',this.element.appendChild(t),this.cursors.push(t),t},this.removeCursor=function(){if(1<this.cursors.length){var t=this.cursors.pop();return t.parentNode.removeChild(t),t}},this.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,'ace_hidden-cursors'),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,'ace_hidden-cursors'),this.restartTimer()},this.restartTimer=function(){var n=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&a.removeCssClass(this.element,'ace_smooth-blinking'),n(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){a.addCssClass(this.element,'ace_smooth-blinking')}.bind(this));var e=function(){this.timeoutId=setTimeout(function(){n(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){n(!0),e()},this.blinkInterval),e()}},this.getPixelPosition=function(r,e){if(!this.config||!this.session)return{left:0,top:0};r||(r=this.session.selection.getCursor());var t=this.session.documentToScreenPosition(r);return{left:this.$padding+t.column*this.config.characterWidth,top:(t.row-(e?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(l){this.config=l;var e=this.session.$selectionMarkers,t=0,n=0;void 0!==e&&0!==e.length||(e=[{cursor:null}]),t=0;for(var i=e.length,r;t<i;t++)if(r=this.getPixelPosition(e[t].cursor,!0),!((r.top>l.height+l.offset||0>r.top)&&1<t)){var o=(this.cursors[n++]||this.addCursor()).style;this.drawCursor?this.drawCursor(o,r,l,e[t],this.session):(o.left=r.left+'px',o.top=r.top+'px',o.width=l.characterWidth+'px',o.height=l.lineHeight+'px')}for(;this.cursors.length>n;)this.removeCursor();var s=this.session.getOverwrite();this.$setOverwrite(s),this.$pixelPos=r,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(t){t!=this.overwrite&&(this.overwrite=t,t?a.addCssClass(this.element,'ace_overwrite-cursors'):a.removeCssClass(this.element,'ace_overwrite-cursors'))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(t.prototype),e.Cursor=t}),ace.define('ace/scrollbar',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/event','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),i=n('./lib/dom'),r=n('./lib/event'),o=n('./lib/event_emitter').EventEmitter,s=function(t){this.element=i.createElement('div'),this.element.className='ace_scrollbar ace_scrollbar'+this.classSuffix,this.inner=i.createElement('div'),this.inner.className='ace_scrollbar-inner',this.element.appendChild(this.inner),t.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,r.addListener(this.element,'scroll',this.onScroll.bind(this)),r.addListener(this.element,'mousedown',r.preventDefault)};(function(){t.implement(this,o),this.setVisible=function(t){this.element.style.display=t?'':'none',this.isVisible=t,this.coeff=1}}).call(s.prototype);var a=function(n,e){s.call(this,n),this.scrollTop=0,this.scrollHeight=0,e.$scrollbarWidth=this.width=i.scrollbarWidth(n.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+'px',this.$minWidth=0};t.inherits(a,s),function(){this.classSuffix='-v',this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,1!=this.coeff){var t=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-t)/(this.coeff-t)}this._emit('scroll',{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return x(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(t){this.element.style.height=t+'px'},this.setInnerHeight=this.setScrollHeight=function(t){this.scrollHeight=t,32768<t?(this.coeff=32768/t,t=32768):1!=this.coeff&&(this.coeff=1),this.inner.style.height=t+'px'},this.setScrollTop=function(t){this.scrollTop!=t&&(this.skipEvent=!0,this.scrollTop=t,this.element.scrollTop=t*this.coeff)}}.call(a.prototype);var d=function(n,e){s.call(this,n),this.scrollLeft=0,this.height=e.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+'px'};t.inherits(d,s),function(){this.classSuffix='-h',this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit('scroll',{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(t){this.element.style.width=t+'px'},this.setInnerWidth=function(t){this.inner.style.width=t+'px'},this.setScrollWidth=function(t){this.inner.style.width=t+'px'},this.setScrollLeft=function(t){this.scrollLeft!=t&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=t)}}.call(d.prototype),e.ScrollBar=a,e.ScrollBarV=a,e.ScrollBarH=d,e.VScrollBar=a,e.HScrollBar=d}),ace.define('ace/renderloop',['require','exports','module','ace/lib/event'],function(n,e){'use strict';var a=n('./lib/event'),t=function(n,e){this.onRender=n,this.pending=!1,this.changes=0,this.window=e||window};(function(){this.schedule=function(n){if(this.changes|=n,!this.pending&&this.changes){this.pending=!0;var r=this;a.nextFrame(function(){var t;for(r.pending=!1;t=r.changes;)r.changes=0,r.onRender(t)},this.window)}}}).call(t.prototype),e.RenderLoop=t}),ace.define('ace/layer/font_metrics',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/lib/lang','ace/lib/useragent','ace/lib/event_emitter'],function(n,e){var t=n('../lib/oop'),i=n('../lib/dom'),r=n('../lib/lang'),o=n('../lib/useragent'),s=n('../lib/event_emitter').EventEmitter,a=0,d=e.FontMetrics=function(t){this.el=i.createElement('div'),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=i.createElement('div'),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=i.createElement('div'),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),t.appendChild(this.el),a||this.$testFractionalRect(),this.$measureNode.innerHTML=r.stringRepeat('X',a),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){t.implement(this,s),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var n=i.createElement('div');this.$setMeasureNodeStyles(n.style),n.style.width='0.2px',document.documentElement.appendChild(n);var e=n.getBoundingClientRect().width;a=0<e&&1>e?50:100,n.parentNode.removeChild(n)},this.$setMeasureNodeStyles=function(n,e){n.width=n.height='auto',n.left=n.top='0px',n.visibility='hidden',n.position='absolute',n.whiteSpace='pre',8>o.isIE?n['font-family']='inherit':n.font='inherit',n.overflow=e?'hidden':'visible'},this.checkForSizeChanges=function(){var n=this.$measureSizes();if(n&&(this.$characterSize.width!==n.width||this.$characterSize.height!==n.height)){this.$measureNode.style.fontWeight='bold';var r=this.$measureSizes();this.$measureNode.style.fontWeight='',this.$characterSize=n,this.charSizes=Object.create(null),this.allowBoldFonts=r&&r.width===n.width&&r.height===n.height,this._emit('changeCharacterSize',{data:n})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var t=this;return this.$pollSizeChangesTimer=setInterval(function(){t.checkForSizeChanges()},500)},this.setPolling=function(t){t?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(){if(50==a){var n=null;try{n=this.$measureNode.getBoundingClientRect()}catch(e){n={width:0,height:0}}var e={height:n.height,width:n.width/a}}else e={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return 0===e.width||0===e.height?null:e},this.$measureCharWidth=function(t){return this.$main.innerHTML=r.stringRepeat(t,a),this.$main.getBoundingClientRect().width/a},this.getCharacterWidth=function(n){var e=this.charSizes[n];return void 0===e&&(e=this.charSizes[n]=this.$measureCharWidth(n)/this.$characterSize.width),e},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(d.prototype)}),ace.define('ace/virtual_renderer',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/config','ace/lib/useragent','ace/layer/gutter','ace/layer/marker','ace/layer/text','ace/layer/cursor','ace/scrollbar','ace/scrollbar','ace/renderloop','ace/layer/font_metrics','ace/lib/event_emitter'],function(n,e){'use strict';var t=n('./lib/oop'),_=n('./lib/dom'),r=n('./config'),o=n('./lib/useragent'),s=n('./layer/gutter').Gutter,a=n('./layer/marker').Marker,c=n('./layer/text').Text,l=n('./layer/cursor').Cursor,u=n('./scrollbar').HScrollBar,h=n('./scrollbar').VScrollBar,d=n('./renderloop').RenderLoop,p=n('./layer/font_metrics').FontMetrics,i=n('./lib/event_emitter').EventEmitter;_.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;text-align: left;-webkit-tap-highlight-color: rgba(0, 0, 0, 0);}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;white-space: pre!important;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;word-wrap: normal;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid;transform: translatez(0);}.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}.ace_br1 {border-top-left-radius    : 3px;}.ace_br2 {border-top-right-radius   : 3px;}.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}.ace_br4 {border-bottom-right-radius: 3px;}.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}.ace_br8 {border-bottom-left-radius : 3px;}.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}.ace_text-input-ios {position: absolute !important;top: -100000px !important;left: -100000px !important;}','ace_editor.css');var f=function(m,e){var t=this;this.container=m||_.createElement('div'),this.$keepTextAreaAtCursor=!o.isOldIE,_.addCssClass(this.container,'ace_editor'),this.setTheme(e),this.$gutter=_.createElement('div'),this.$gutter.className='ace_gutter',this.container.appendChild(this.$gutter),this.scroller=_.createElement('div'),this.scroller.className='ace_scroller',this.container.appendChild(this.scroller),this.content=_.createElement('div'),this.content.className='ace_content',this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on('changeGutterWidth',this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var n=this.$textLayer=new c(this.content);this.canvas=n.element,this.$markerFront=new a(this.content),this.$cursorLayer=new l(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new h(this.container,this),this.scrollBarH=new u(this.container,this),this.scrollBarV.addEventListener('scroll',function(n){t.$scrollAnimation||t.session.setScrollTop(n.data-t.scrollMargin.top)}),this.scrollBarH.addEventListener('scroll',function(n){t.$scrollAnimation||t.session.setScrollLeft(n.data-t.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener('changeCharacterSize',function(n){t.updateCharacterSize(),t.onResize(!0,t.gutterWidth,t.$size.width,t.$size.height),t._signal('changeCharacterSize',n)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),r.resetOptions(this),r._emit('renderer',this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,t.implement(this,i),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle('ace_nobold',!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(t){this.session&&this.session.doc.off('changeNewLineMode',this.onChangeNewLineMode),this.session=t,t&&this.scrollMargin.top&&0>=t.getScrollTop()&&t.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(t),this.$markerBack.setSession(t),this.$markerFront.setSession(t),this.$gutterLayer.setSession(t),this.$textLayer.setSession(t),t&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on('changeNewLineMode',this.onChangeNewLineMode))},this.updateLines=function(r,a,o){if(void 0===a&&(a=1/0),this.$changedLines?(this.$changedLines.firstRow>r&&(this.$changedLines.firstRow=r),this.$changedLines.lastRow<a&&(this.$changedLines.lastRow=a)):this.$changedLines={firstRow:r,lastRow:a},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!o)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(t){t?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(a,e,t,s){if(!(2<this.resizing)){0<this.resizing?this.resizing++:this.resizing=a?1:0;var l=this.container;s||(s=l.clientHeight||l.scrollHeight),t||(t=l.clientWidth||l.scrollWidth);var r=this.$updateCachedSize(a,e,t,s);if(!this.$size.scrollerHeight||!t&&!s)return this.resizing=0;a&&(this.$gutterLayer.$padding=null),a?this.$renderChanges(r|this.$changes,!0):this.$loop.schedule(r|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(a,e,t,l){l-=this.$extraHeight||0;var d=0,r=this.$size,o={width:r.width,height:r.height,scrollerHeight:r.scrollerHeight,scrollerWidth:r.scrollerWidth};return l&&(a||r.height!=l)&&(r.height=l,d|=this.CHANGE_SIZE,r.scrollerHeight=r.height,this.$horizScroll&&(r.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+'px',d|=this.CHANGE_SCROLL),t&&(a||r.width!=t)&&(d|=this.CHANGE_SIZE,r.width=t,null==e&&(e=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=e,this.scrollBarH.element.style.left=this.scroller.style.left=e+'px',r.scrollerWidth=x(0,t-e-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+'px',this.scroller.style.bottom=this.scrollBarH.getHeight()+'px',(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||a)&&(d|=this.CHANGE_FULL)),r.$dirty=!t||!l,d&&this._signal('resize',o),d},this.onGutterResize=function(){var t=this.$showGutter?this.$gutter.offsetWidth:0;t!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,t,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var n=this.$size.scrollerWidth-2*this.$padding,e=T(n/this.characterWidth);return this.session.adjustWrapLimit(e,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(t){this.setOption('animatedScroll',t)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(t){this.setOption('showInvisibles',t)},this.getShowInvisibles=function(){return this.getOption('showInvisibles')},this.getDisplayIndentGuides=function(){return this.getOption('displayIndentGuides')},this.setDisplayIndentGuides=function(t){this.setOption('displayIndentGuides',t)},this.setShowPrintMargin=function(t){this.setOption('showPrintMargin',t)},this.getShowPrintMargin=function(){return this.getOption('showPrintMargin')},this.setPrintMarginColumn=function(t){this.setOption('printMarginColumn',t)},this.getPrintMarginColumn=function(){return this.getOption('printMarginColumn')},this.getShowGutter=function(){return this.getOption('showGutter')},this.setShowGutter=function(t){return this.setOption('showGutter',t)},this.getFadeFoldWidgets=function(){return this.getOption('fadeFoldWidgets')},this.setFadeFoldWidgets=function(t){this.setOption('fadeFoldWidgets',t)},this.setHighlightGutterLine=function(t){this.setOption('highlightGutterLine',t)},this.getHighlightGutterLine=function(){return this.getOption('highlightGutterLine')},this.$updateGutterLineHighlight=function(){var r=this.$cursorLayer.$pixelPos,e=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var t=this.session.selection.getCursor();t.column=0,r=this.$cursorLayer.getPixelPosition(t,!0),e*=this.session.getRowLength(t.row)}this.$gutterLineHighlight.style.top=r.top-this.layerConfig.offset+'px',this.$gutterLineHighlight.style.height=e+'px'},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var n=_.createElement('div');n.className='ace_layer ace_print-margin-layer',this.$printMarginEl=_.createElement('div'),this.$printMarginEl.className='ace_print-margin',n.appendChild(this.$printMarginEl),this.content.insertBefore(n,this.content.firstChild)}var e=this.$printMarginEl.style;e.left=this.characterWidth*this.$printMarginColumn+this.$padding+'px',e.visibility=this.$showPrintMargin?'visible':'hidden',this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var a=this.layerConfig,e=this.$cursorLayer.$pixelPos.top,t=this.$cursorLayer.$pixelPos.left;e-=a.offset;var n=this.textarea.style,i=this.lineHeight;if(0>e||e>a.height-i)n.top=n.left='0';else{var r=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,'');r*=this.session.$getStringScreenWidth(o)[0]+2,i+=2}(t-=this.scrollLeft)>this.$size.scrollerWidth-r&&(t=this.$size.scrollerWidth-r),t+=this.gutterWidth,n.height=i+'px',n.width=r+'px',n.left=b(t,this.$size.scrollerWidth-r)+'px',n.top=b(e,this.$size.height-i)+'px'}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var n=this.layerConfig,e=n.lastRow;return this.session.documentToScreenRow(e,0)*n.lineHeight-this.session.getScrollTop()>n.height-n.lineHeight?e-1:e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(t){this.$padding=t,this.$textLayer.setPadding(t),this.$cursorLayer.setPadding(t),this.$markerFront.setPadding(t),this.$markerBack.setPadding(t),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(a,e,t,n){var o=this.scrollMargin;o.top=0|a,o.bottom=0|e,o.right=0|n,o.left=0|t,o.v=o.top+o.bottom,o.h=o.left+o.right,o.top&&0>=this.scrollTop&&this.session&&this.session.setScrollTop(-o.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(t){this.setOption('hScrollBarAlwaysVisible',t)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(t){this.setOption('vScrollBarAlwaysVisible',t)},this.$updateScrollBarV=function(){var n=this.layerConfig.maxHeight,e=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(n-=(e-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>n-e&&(n=this.scrollTop+e,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(n+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(r,e){if(this.$changes&&(r|=this.$changes,this.$changes=0),this.session&&this.container.offsetWidth&&!this.$frozen&&(r||e)){if(this.$size.$dirty)return this.$changes|=r,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal('beforeRender');var t=this.layerConfig;if(r&this.CHANGE_FULL||r&this.CHANGE_SIZE||r&this.CHANGE_TEXT||r&this.CHANGE_LINES||r&this.CHANGE_SCROLL||r&this.CHANGE_H_SCROLL){if(r|=this.$computeLayerConfig(),t.firstRow!=this.layerConfig.firstRow&&t.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(t.firstRow-this.layerConfig.firstRow)*this.lineHeight;0<n&&(this.scrollTop=n,r|=this.CHANGE_SCROLL,r|=this.$computeLayerConfig())}t=this.layerConfig,this.$updateScrollBarV(),r&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-t.offset+'px',this.content.style.marginTop=-t.offset+'px',this.content.style.width=t.width+2*this.$padding+'px',this.content.style.height=t.minHeight+'px'}if(r&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+'px',this.scroller.className=0>=this.scrollLeft?'ace_scroller':'ace_scroller ace_scroll-left'),r&this.CHANGE_FULL)return this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal('afterRender');if(r&this.CHANGE_SCROLL)return r&this.CHANGE_TEXT||r&this.CHANGE_LINES?this.$textLayer.update(t):this.$textLayer.scrollLines(t),this.$showGutter&&this.$gutterLayer.update(t),this.$markerBack.update(t),this.$markerFront.update(t),this.$cursorLayer.update(t),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal('afterRender');r&this.CHANGE_TEXT?(this.$textLayer.update(t),this.$showGutter&&this.$gutterLayer.update(t)):r&this.CHANGE_LINES?(this.$updateLines()||r&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(t):(r&this.CHANGE_TEXT||r&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(t),r&this.CHANGE_CURSOR&&(this.$cursorLayer.update(t),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),r&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(t),r&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(t),this._signal('afterRender')}else this.$changes|=r},this.$autosize=function(){var a=this.session.getScreenLength()*this.lineHeight,e=this.$maxLines*this.lineHeight,t=b(e,x((this.$minLines||1)*this.lineHeight,a))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(t+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&t>this.$maxPixelHeight&&(t=this.$maxPixelHeight);var n=a>e;if(t!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var o=this.container.clientWidth;this.container.style.height=t+'px',this.$updateCachedSize(!0,this.$gutterWidth,o,t),this.desiredHeight=t,this._signal('autosize')}},this.$computeLayerConfig=function(){var T=this.session,e=this.$size,t=e.height<=2*this.lineHeight,R=this.session.getScreenLength()*this.lineHeight,F=this.$getLongestLine(),w=!t&&(this.$hScrollBarAlwaysVisible||0>e.scrollerWidth-F-2*this.$padding),o=this.$horizScroll!==w;o&&(this.$horizScroll=w,this.scrollBarH.setVisible(w));var s=this.$vScroll;this.$maxLines&&1<this.lineHeight&&this.$autosize();var a=this.scrollTop%this.lineHeight,L=e.scrollerHeight+this.lineHeight,M=!this.$maxLines&&this.$scrollPastEnd?(e.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;R+=M;var u=this.scrollMargin;this.session.setScrollTop(x(-u.top,b(this.scrollTop,R-e.scrollerHeight+u.bottom))),this.session.setScrollLeft(x(-u.left,b(this.scrollLeft,F+2*this.$padding-e.scrollerWidth+u.right)));var h=!t&&(this.$vScrollBarAlwaysVisible||0>e.scrollerHeight-R+M||this.scrollTop>u.top),d=s!==h;d&&(this.$vScroll=h,this.scrollBarV.setVisible(h));var p=y(L/this.lineHeight)-1,g=x(0,S((this.scrollTop-a)/this.lineHeight)),I=g+p,D=this.lineHeight,B,N;g=T.screenToDocumentRow(g,0);var f=T.getFoldLine(g);f&&(g=f.start.row),B=T.documentToScreenRow(g,0),N=T.getRowLength(g)*D,I=b(T.screenToDocumentRow(I,0),T.getLength()-1),L=e.scrollerHeight+T.getRowLength(I)*D+N,a=this.scrollTop-B*D;var v=0;return this.layerConfig.width!=F&&(v=this.CHANGE_H_SCROLL),(o||d)&&(v=this.$updateCachedSize(!0,this.gutterWidth,e.width,e.height),this._signal('scrollbarVisibilityChanged'),d&&(F=this.$getLongestLine())),this.layerConfig={width:F,padding:this.$padding,firstRow:g,firstRowScreen:B,lastRow:I,lineHeight:D,characterWidth:this.characterWidth,minHeight:L,maxHeight:R,offset:a,gutterOffset:D?x(0,y((a+e.height-e.scrollerHeight)/D)):0,height:this.$size.scrollerHeight},v},this.$updateLines=function(){if(this.$changedLines){var r=this.$changedLines.firstRow,e=this.$changedLines.lastRow;this.$changedLines=null;var t=this.layerConfig;if(!(r>t.lastRow+1||e<t.firstRow))return e===1/0?(this.$showGutter&&this.$gutterLayer.update(t),void this.$textLayer.update(t)):(this.$textLayer.updateLines(t,r,e),!0)}},this.$getLongestLine=function(){var t=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(t+=1),x(this.$size.scrollerWidth-2*this.$padding,S(t*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(n,e){this.$gutterLayer.addGutterDecoration(n,e)},this.removeGutterDecoration=function(n,e){this.$gutterLayer.removeGutterDecoration(n,e)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(t){this.$gutterLayer.setAnnotations(t),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(r,e,t){this.scrollCursorIntoView(r,t),this.scrollCursorIntoView(e,t)},this.scrollCursorIntoView=function(d,e,t){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(d),i=n.left,r=n.top,o=t&&t.top||0,s=t&&t.bottom||0,a=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;a+o>r?(e&&a+o>r+this.lineHeight&&(r-=e*this.$size.scrollerHeight),0==r&&(r=-this.scrollMargin.top),this.session.setScrollTop(r)):a+this.$size.scrollerHeight-s<r+this.lineHeight&&(e&&a+this.$size.scrollerHeight-s<r-this.lineHeight&&(r+=e*this.$size.scrollerHeight),this.session.setScrollTop(r+this.lineHeight-this.$size.scrollerHeight));var c=this.scrollLeft;c>i?(i<this.$padding+2*this.layerConfig.characterWidth&&(i=-this.scrollMargin.left),this.session.setScrollLeft(i)):c+this.$size.scrollerWidth<i+this.characterWidth?this.session.setScrollLeft(S(i+this.characterWidth-this.$size.scrollerWidth)):c<=this.$padding&&i-c<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return x(0,T((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(t){this.session.setScrollTop(t*this.lineHeight)},this.alignCursor=function(a,o){'number'==typeof a&&(a={row:a,column:0});var t=this.$cursorLayer.getPixelPosition(a),n=this.$size.scrollerHeight-this.lineHeight,i=t.top-n*(o||0);return this.session.setScrollTop(i),i},this.STEPS=8,this.$calcSteps=function(a,e){var t=0,r=this.STEPS,o=[],s,n;for(t=0;t<r;++t)o.push((s=t/this.STEPS,n=a,(e-a)*(m(s-1,3)+1)+n));return o},this.scrollToLine=function(a,s,t,n){var i=this.$cursorLayer.getPixelPosition({row:a,column:0}).top;s&&(i-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(i),!1!==t&&this.animateScrolling(r,n)},this.animateScrolling=function(a,s){var t=this.scrollTop;if(this.$animatedScroll){var l=this;if(a!=t){if(this.$scrollAnimation){var i=this.$scrollAnimation.steps;if(i.length&&(a=i[0])==t)return}var r=l.$calcSteps(a,t);this.$scrollAnimation={from:a,to:t,steps:r},clearInterval(this.$timer),l.session.setScrollTop(r.shift()),l.session.$scrollTop=t,this.$timer=setInterval(function(){r.length?(l.session.setScrollTop(r.shift()),l.session.$scrollTop=t):null==t?(l.$timer=clearInterval(l.$timer),l.$scrollAnimation=null,s&&s()):(l.session.$scrollTop=-1,l.session.setScrollTop(t),t=null)},10)}}},this.scrollToY=function(t){this.scrollTop!==t&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=t)},this.scrollToX=function(t){this.scrollLeft!==t&&(this.scrollLeft=t),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(n,e){this.session.setScrollTop(e),this.session.setScrollLeft(e)},this.scrollBy=function(n,e){e&&this.session.setScrollTop(this.session.getScrollTop()+e),n&&this.session.setScrollLeft(this.session.getScrollLeft()+n)},this.isScrollableBy=function(n,e){return 0>e&&this.session.getScrollTop()>=1-this.scrollMargin.top||0<e&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||0>n&&this.session.getScrollLeft()>=1-this.scrollMargin.left||0<n&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0},this.pixelToScreenCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=(a+this.scrollLeft-t.left-this.$padding)/this.characterWidth,i=T((e+this.scrollTop-t.top)/this.lineHeight),s=S(n);return{row:i,column:s,side:0<n-s?1:-1}},this.screenToTextCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=S((a+this.scrollLeft-t.left-this.$padding)/this.characterWidth),o=(e+this.scrollTop-t.top)/this.lineHeight;return this.session.screenToDocumentPosition(o,x(n,0))},this.textToScreenCoordinates=function(a,e){var t=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(a,e),i=this.$padding+S(n.column*this.characterWidth),r=n.row*this.lineHeight;return{pageX:t.left+i-this.scrollLeft,pageY:t.top+r-this.scrollTop}},this.visualizeFocus=function(){_.addCssClass(this.container,'ace_focus')},this.visualizeBlur=function(){_.removeCssClass(this.container,'ace_focus')},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,_.addCssClass(this.textarea,'ace_composition'),this.textarea.style.cssText='',this.$moveTextAreaToCursor()},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(_.removeCssClass(this.textarea,'ace_composition'),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(a,l){function s(e){if(t.$themeId!=a)return l&&l();if(!e||!e.cssClass)throw new Error('couldn\'t load module '+a+' or it didn\'t call define');_.importCssString(e.cssText,e.cssClass,t.container.ownerDocument),t.theme&&_.removeCssClass(t.container,t.theme.cssClass);var n='padding'in e?e.padding:'padding'in(t.theme||{})?4:t.$padding;t.$padding&&n!=t.$padding&&t.setPadding(n),t.$theme=e.cssClass,t.theme=e,_.addCssClass(t.container,e.cssClass),_.setCssClass(t.container,'ace_dark',e.isDark),t.$size&&(t.$size.width=0,t.$updateSizeAsync()),t._dispatchEvent('themeLoaded',{theme:e}),l&&l()}var t=this;if(this.$themeId=a,t._dispatchEvent('themeChange',{theme:a}),a&&'string'!=typeof a)s(a);else{var n=a||this.$options.theme.initialValue;r.loadModule(['theme',n],s)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(n,e){_.setCssClass(this.container,n,!1!==e)},this.unsetStyle=function(t){_.removeCssClass(this.container,t)},this.setCursorStyle=function(t){this.scroller.style.cursor!=t&&(this.scroller.style.cursor=t)},this.setMouseCursor=function(t){this.scroller.style.cursor=t},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(f.prototype),r.defineOptions(f.prototype,'renderer',{animatedScroll:{initialValue:!1},showInvisibles:{set:function(t){this.$textLayer.setShowInvisibles(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(t){'number'==typeof t&&(this.$printMarginColumn=t),this.$showPrintMargin=!!t,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(t){this.$gutter.style.display=t?'block':'none',this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(t){_.setCssClass(this.$gutter,'ace_fade-fold-widgets',t)},initialValue:!1},showFoldWidgets:{set:function(t){this.$gutterLayer.setShowFoldWidgets(t)},initialValue:!0},showLineNumbers:{set:function(t){this.$gutterLayer.setShowLineNumbers(t),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(t){this.$textLayer.setDisplayIndentGuides(t)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(t){return this.$gutterLineHighlight?void(this.$gutterLineHighlight.style.display=t?'':'none',this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()):(this.$gutterLineHighlight=_.createElement('div'),this.$gutterLineHighlight.className='ace_gutter-active-line',void this.$gutter.appendChild(this.$gutterLineHighlight))},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(t){'number'==typeof t&&(t+='px'),this.container.style.fontSize=t,this.updateFontSize()},initialValue:12},fontFamily:{set:function(t){this.container.style.fontFamily=t,this.updateFontSize()}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},maxPixelHeight:{set:function(){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(t){t=+t||0,this.$scrollPastEnd!=t&&(this.$scrollPastEnd=t,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(t){this.$gutterLayer.$fixedWidth=!!t,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(t){this.setTheme(t)},get:function(){return this.$themeId||this.theme},initialValue:'./theme/textmate',handlesSet:!0}}),e.VirtualRenderer=f}),ace.define('ace/worker/worker_client',['require','exports','module','ace/lib/oop','ace/lib/net','ace/lib/event_emitter','ace/config'],function(d,e){'use strict';function a(r){var e=function(r){var e='importScripts(\''+i.qualifyURL(r)+'\');';try{return new Blob([e],{type:'application/javascript'})}catch(n){var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return t.append(e),t.getBlob('application/javascript')}}(r),t=(window.URL||window.webkitURL).createObjectURL(e);return new Worker(t)}var t=d('../lib/oop'),i=d('../lib/net'),u=d('../lib/event_emitter').EventEmitter,p=d('../config'),n=function(e,t,s,u,r){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),d.nameToUrl&&!d.toUrl&&(d.toUrl=d.nameToUrl),p.get('packaged')||!d.toUrl)u=u||p.moduleUrl(t,'worker');else{var o=this.$normalizePath;u=u||o(d.toUrl('ace/worker/worker.js',null,'_'));var c={};e.forEach(function(e){c[e]=o(d.toUrl(e,null,'_').replace(/(\.js)?(\?.*)?$/,''))})}this.$worker=a(u),r&&this.send('importScripts',r),this.$worker.postMessage({init:!0,tlns:c,module:t,classname:s}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){t.implement(this,u),this.onMessage=function(r){var e=r.data;switch(e.type){case'event':this._signal(e.name,{data:e.data});break;case'call':var t=this.callbacks[e.id];t&&(t(e.data),delete this.callbacks[e.id]);break;case'error':this.reportError(e.data);break;case'log':window.console&&console.log&&console.log.apply(console,e.data);}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return i.qualifyURL(t)},this.terminate=function(){this._signal('terminate',{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off('change',this.changeListener),this.$doc=null},this.send=function(n,r){this.$worker.postMessage({command:n,args:r})},this.call=function(r,e,t){if(t){var n=this.callbackId++;this.callbacks[n]=t,e.push(n)}this.send(r,e)},this.emit=function(n,r){try{this.$worker.postMessage({event:n,data:{data:r.data}})}catch(t){console.error(t.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call('setValue',[t.getValue()]),t.on('change',this.changeListener)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),'insert'==t.action?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,50<t.length&&t.length>this.$doc.getLength()>>1?this.call('setValue',[this.$doc.getValue()]):this.emit('change',{data:t}))}}).call(n.prototype);var r=function(o,e,t){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,i=!1,r=Object.create(u),a=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(t){a.messageBuffer.push(t),n&&(i?setTimeout(s):s())},this.setEmitSync=function(t){i=t};var s=function(){var t=a.messageBuffer.shift();t.command?n[t.command].apply(n,t.args):t.event&&r._signal(t.event,t.data)};r.postMessage=function(t){a.onMessage({data:t})},r.callback=function(n,r){this.postMessage({type:'call',id:r,data:n})},r.emit=function(n,r){this.postMessage({type:'event',name:n,data:r})},p.loadModule(['worker',e],function(o){for(n=new o[t](r);a.messageBuffer.length;)s()})};r.prototype=n.prototype,e.UIWorkerClient=r,e.WorkerClient=n,e.createWorker=a}),ace.define('ace/placeholder',['require','exports','module','ace/range','ace/lib/event_emitter','ace/lib/oop'],function(n,e){'use strict';var l=n('./range').Range,t=n('./lib/event_emitter').EventEmitter,r=n('./lib/oop'),a=function(l,e,t,n,i,r){var o=this;this.length=e,this.session=l,this.doc=l.getDocument(),this.mainClass=i,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on('change',this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=t;var s=l.getUndoManager().$undoStack||l.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=s.length,this.setup(),l.selection.on('changeCursor',this.$onCursorChange)};(function(){r.implement(this,t),this.setup=function(){var a=this,e=this.doc,t=this.session;this.selectionBefore=t.selection.toJSON(),t.selection.inMultiSelectMode&&t.selection.toSingleRange(),this.pos=e.createAnchor(this.$pos.row,this.$pos.column);var n=this.pos;n.$insertRight=!0,n.detach(),n.markerId=t.addMarker(new l(n.row,n.column,n.row,n.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(t){var n=e.createAnchor(t.row,t.column);n.$insertRight=!0,n.detach(),a.others.push(n)}),t.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var r=this.session,e=this;this.othersActive=!0,this.others.forEach(function(t){t.markerId=r.addMarker(new l(t.row,t.column,t.row,t.column+e.length),e.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var t=0;t<this.others.length;t++)this.session.removeMarker(this.others[t].markerId)}},this.onUpdate=function(i){if(this.$updating)return this.updateAnchors(i);var e=i;if(e.start.row===e.end.row&&e.start.row===this.pos.row){this.$updating=!0;var t='insert'===i.action?e.end.column-e.start.column:e.start.column-e.end.column,n=e.start.column>=this.pos.column&&e.start.column<=this.pos.column+this.length+1,r=e.start.column-this.pos.column;if(this.updateAnchors(i),n&&(this.length+=t),n&&!this.session.$fromUndo)if('insert'===i.action)for(var o=this.others.length-1,s;0<=o;o--)s={row:(a=this.others[o]).row,column:a.column+r},this.doc.insertMergedLines(s,i.lines);else if('remove'===i.action)for(o=this.others.length-1;0<=o;o--){var a;s={row:(a=this.others[o]).row,column:a.column+r},this.doc.remove(new l(s.row,s.column,s.row,s.column-t))}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(n){this.pos.onChange(n);for(var e=this.others.length;e--;)this.others[e].onChange(n);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var a=this,e=this.session,t=function(t,n){e.removeMarker(t.markerId),t.markerId=e.addMarker(new l(t.row,t.column,t.row,t.column+a.length),n,null,!1)};t(this.pos,this.mainClass);for(var n=this.others.length;n--;)t(this.others[n],this.othersClass)}},this.onCursorChange=function(n){if(!this.$updating&&this.session){var e=this.session.selection.getCursor();e.row===this.pos.row&&e.column>=this.pos.column&&e.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit('cursorEnter',n)):(this.hideOtherMarkers(),this._emit('cursorLeave',n))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.removeEventListener('change',this.$onUpdate),this.session.selection.removeEventListener('changeCursor',this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1!==this.$undoStackDepth){for(var r=this.session.getUndoManager(),e=(r.$undoStack||r.$undostack).length-this.$undoStackDepth,t=0;t<e;t++)r.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(a.prototype),e.PlaceHolder=a}),ace.define('ace/mouse/multi_select_handler',['require','exports','module','ace/lib/event','ace/lib/useragent'],function(n,e){function o(n,e){return n.row==e.row&&n.column==e.column}var t=n('../lib/event'),i=n('../lib/useragent');e.onMouseDown=function(r){var e=r.domEvent,x=e.altKey,n=e.shiftKey,s=e.ctrlKey,a=r.getAccelKey(),w=r.getButton();if(s&&i.isMac&&(w=e.button),r.editor.inMultiSelectMode&&2==w)r.editor.textInput.onContextMenu(r.domEvent);else if(!(s||x||a))0===w&&r.editor.inMultiSelectMode&&r.editor.exitMultiSelectMode();else if(0===w){var l=r.editor,h=l.selection,d=l.inMultiSelectMode,L=r.getDocumentPosition(),m=h.getCursor(),f=r.inSelection()||h.isEmpty()&&o(L,m),g=r.x,E=r.y,A=l.session,C=l.renderer.pixelToScreenCoordinates(g,E),v=C,_;if(l.$mouseHandler.$enableJumpToDef)s&&x||a&&x?_=n?'block':'add':x&&l.$blockSelectEnabled&&(_='block');else if(!a||x)x&&l.$blockSelectEnabled&&(_='block');else if(_='add',!d&&n)return;if(_&&i.isMac&&e.ctrlKey&&l.$mouseHandler.cancelContextMenu(),'add'==_){if(!d&&f)return;if(!d){var u=h.toOrientedRange();l.addSelectionMarker(u)}var F=h.rangeList.rangeAtPoint(L);l.$blockScrolling++,l.inVirtualSelectionMode=!0,n&&(F=null,u=h.ranges[0]||u,l.removeSelectionMarker(u)),l.once('mouseup',function(){var t=h.toOrientedRange();F&&t.isEmpty()&&o(F.cursor,t.cursor)?h.substractPoint(t.cursor):(n?h.substractPoint(u.cursor):u&&(l.removeSelectionMarker(u),h.addRange(u)),h.addRange(t)),l.$blockScrolling--,l.inVirtualSelectionMode=!1})}else if('block'==_){var S;r.stop(),l.inVirtualSelectionMode=!0;var y=[];l.$blockScrolling++,d&&!a?h.toSingleRange():!d&&a&&(S=h.toOrientedRange(),l.addSelectionMarker(S)),n?C=A.documentToScreenPosition(h.lead):h.moveToPosition(L),l.$blockScrolling--,v={row:-1,column:-1};var R=function(){var n=l.renderer.pixelToScreenCoordinates(g,E),e=A.screenToDocumentPosition(n.row,n.column);o(v,n)&&o(e,h.lead)||(v=n,l.$blockScrolling++,l.selection.moveToPosition(e),l.renderer.scrollCursorIntoView(),l.removeSelectionMarkers(y),y=h.rectangularRangeBlock(v,C),l.$mouseHandler.$clickSelection&&1==y.length&&y[0].isEmpty()&&(y[0]=l.$mouseHandler.$clickSelection.clone()),y.forEach(l.addSelectionMarker,l),l.updateSelectionMarkers(),l.$blockScrolling--)};t.capture(l.container,function(t){g=t.clientX,E=t.clientY},function(){clearInterval(b),l.removeSelectionMarkers(y),y.length||(y=[h.toOrientedRange()]),l.$blockScrolling++,S&&(l.removeSelectionMarker(S),h.toSingleRange(S));for(var e=0;e<y.length;e++)h.addRange(y[e]);l.inVirtualSelectionMode=!1,l.$mouseHandler.$clickSelection=null,l.$blockScrolling--});var b=setInterval(function(){R()},20);return r.preventDefault()}}}}),ace.define('ace/commands/multi_select_commands',['require','exports','module','ace/keyboard/hash_handler'],function(n,e){e.defaultCommands=[{name:'addCursorAbove',exec:function(t){t.selectMoreLines(-1)},bindKey:{win:'Ctrl-Alt-Up',mac:'Ctrl-Alt-Up'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorBelow',exec:function(t){t.selectMoreLines(1)},bindKey:{win:'Ctrl-Alt-Down',mac:'Ctrl-Alt-Down'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorAboveSkipCurrent',exec:function(t){t.selectMoreLines(-1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Up',mac:'Ctrl-Alt-Shift-Up'},scrollIntoView:'cursor',readOnly:!0},{name:'addCursorBelowSkipCurrent',exec:function(t){t.selectMoreLines(1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Down',mac:'Ctrl-Alt-Shift-Down'},scrollIntoView:'cursor',readOnly:!0},{name:'selectMoreBefore',exec:function(t){t.selectMore(-1)},bindKey:{win:'Ctrl-Alt-Left',mac:'Ctrl-Alt-Left'},scrollIntoView:'cursor',readOnly:!0},{name:'selectMoreAfter',exec:function(t){t.selectMore(1)},bindKey:{win:'Ctrl-Alt-Right',mac:'Ctrl-Alt-Right'},scrollIntoView:'cursor',readOnly:!0},{name:'selectNextBefore',exec:function(t){t.selectMore(-1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Left',mac:'Ctrl-Alt-Shift-Left'},scrollIntoView:'cursor',readOnly:!0},{name:'selectNextAfter',exec:function(t){t.selectMore(1,!0)},bindKey:{win:'Ctrl-Alt-Shift-Right',mac:'Ctrl-Alt-Shift-Right'},scrollIntoView:'cursor',readOnly:!0},{name:'splitIntoLines',exec:function(t){t.multiSelect.splitIntoLines()},bindKey:{win:'Ctrl-Alt-L',mac:'Ctrl-Alt-L'},readOnly:!0},{name:'alignCursors',exec:function(t){t.alignCursors()},bindKey:{win:'Ctrl-Alt-A',mac:'Ctrl-Alt-A'},scrollIntoView:'cursor'},{name:'findAll',exec:function(t){t.findAll()},bindKey:{win:'Ctrl-Alt-K',mac:'Ctrl-Alt-G'},scrollIntoView:'cursor',readOnly:!0}],e.multiSelectCommands=[{name:'singleSelection',bindKey:'esc',exec:function(t){t.exitMultiSelectMode()},scrollIntoView:'cursor',readOnly:!0,isAvailable:function(t){return t&&t.inMultiSelectMode}}];var t=n('../keyboard/hash_handler').HashHandler;e.keyboardHandler=new t(e.multiSelectCommands)}),ace.define('ace/multi_select',['require','exports','module','ace/range_list','ace/range','ace/selection','ace/mouse/multi_select_handler','ace/lib/event','ace/lib/lang','ace/commands/multi_select_commands','ace/search','ace/edit_session','ace/editor','ace/config'],function(n,m){function p(n){n.$multiselectOnSessionChange||(n.$onAddRange=n.$onAddRange.bind(n),n.$onRemoveRange=n.$onRemoveRange.bind(n),n.$onMultiSelect=n.$onMultiSelect.bind(n),n.$onSingleSelect=n.$onSingleSelect.bind(n),n.$multiselectOnSessionChange=m.onSessionChange.bind(n),n.$checkMultiselectChange=n.$checkMultiselectChange.bind(n),n.$multiselectOnSessionChange(n),n.on('changeSession',n.$multiselectOnSessionChange),n.on('mousedown',t),n.commands.addCommands(a.defaultCommands),function(a){function i(){o&&(a.renderer.setMouseCursor(''),o=!1)}var e=a.textInput.getElement(),o=!1;r.addListener(e,'keydown',function(e){var t=18==e.keyCode&&!(e.ctrlKey||e.shiftKey||e.metaKey);a.$blockSelectEnabled&&t?o||(a.renderer.setMouseCursor('crosshair'),o=!0):o&&i()}),r.addListener(e,'keyup',i),r.addListener(e,'blur',i)}(n))}var e=n('./range_list').RangeList,g=n('./range').Range,_=n('./selection').Selection,t=n('./mouse/multi_select_handler').onMouseDown,r=n('./lib/event'),f=n('./lib/lang'),a=n('./commands/multi_select_commands');m.commands=a.defaultCommands.concat(a.multiSelectCommands);var o=new(0,n('./search').Search),i=n('./edit_session').EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(i.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(r,e){if(r){if(!this.inMultiSelectMode&&0===this.rangeCount){var t=this.toOrientedRange();if(this.rangeList.add(t),this.rangeList.add(r),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),e||this.fromOrientedRange(r);this.rangeList.removeAll(),this.rangeList.add(t),this.$onAddRange(t)}r.cursor||(r.cursor=r.end);var n=this.rangeList.add(r);return this.$onAddRange(r),n.length&&this.$onRemoveRange(n),1<this.rangeCount&&!this.inMultiSelectMode&&(this._signal('multiSelect'),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),e||this.fromOrientedRange(r)}},this.toSingleRange=function(n){n=n||this.ranges[0];var e=this.rangeList.removeAll();e.length&&this.$onRemoveRange(e),n&&this.fromOrientedRange(n)},this.substractPoint=function(n){var e=this.rangeList.substractPoint(n);if(e)return this.$onRemoveRange(e),e[0]},this.mergeOverlappingRanges=function(){var t=this.rangeList.merge();t.length?this.$onRemoveRange(t):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(t){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(t),this._signal('addRange',{range:t})},this.$onRemoveRange=function(r){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var a=this.rangeList.ranges.pop();r.push(a),this.rangeCount=0}for(var t=r.length,n;t--;)n=this.ranges.indexOf(r[t]),this.ranges.splice(n,1);this._signal('removeRange',{ranges:r}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal('singleSelect'),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(a=a||this.ranges[0])&&!a.isEqual(this.getRange())&&this.fromOrientedRange(a)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new e,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(1<this.rangeCount){var r=this.rangeList.ranges,e=r[r.length-1],t=g.fromPoints(r[0].start,e.end);this.toSingleRange(),this.setSelectionRange(t,e.cursor==e.start)}else{t=this.getRange();var n=this.isBackwards(),i=t.start.row,o=t.end.row;if(i==o){if(n)var s=t.end,a=t.start;else s=t.start,a=t.end;return this.addRange(g.fromPoints(a,a)),void this.addRange(g.fromPoints(s,s))}var d=[],l=this.getLineRange(i,!0);l.start.column=t.start.column,d.push(l);for(var c=i+1;c<o;c++)d.push(this.getLineRange(c,!0));(l=this.getLineRange(o,!0)).end.column=t.end.column,d.push(l),d.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(1<this.rangeCount){var r=this.rangeList.ranges,e=r[r.length-1],t=g.fromPoints(r[0].start,e.end);this.toSingleRange(),this.setSelectionRange(t,e.cursor==e.start)}else{var n=this.session.documentToScreenPosition(this.selectionLead),a=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(n,a).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(r,e,t){var _=[],i=r.column<e.column;if(i)var o=r.column,s=e.column;else o=e.column,s=r.column;var a=r.row<e.row,u,c;if(a)var l=r.row,h=e.row;else l=e.row,h=r.row;0>o&&(o=0),0>l&&(l=0),l==h&&(t=!0);for(var d=l,p;d<=h;d++){if(p=g.fromPoints(this.session.screenToDocumentPosition(d,o),this.session.screenToDocumentPosition(d,s)),p.isEmpty()){if(m&&(u=p.end,c=m,u.row==c.row&&u.column==c.column))break;var m=p.end}p.cursor=i?p.start:p.end,_.push(p)}if(a&&_.reverse(),!t){for(var f=_.length-1;_[f].isEmpty()&&0<f;)f--;if(0<f)for(var y=0;_[y].isEmpty();)y++;for(var E=f;E>=y;E--)_[E].isEmpty()&&_.splice(E,1)}return _}}.call(_.prototype);var s=n('./editor').Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(n){n.cursor||(n.cursor=n.end);var e=this.getSelectionStyle();return n.marker=this.session.addMarker(n,'ace_selection',e),this.session.$selectionMarkers.push(n),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,n},this.removeSelectionMarker=function(n){if(n.marker){this.session.removeMarker(n.marker);var e=this.session.$selectionMarkers.indexOf(n);-1!=e&&this.session.$selectionMarkers.splice(e,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(a){for(var e=this.session.$selectionMarkers,t=a.length,n;t--;)if(n=a[t],n.marker){this.session.removeMarker(n.marker);var o=e.indexOf(n);-1!=o&&e.splice(o,1)}this.session.selectionMarkerCount=e.length},this.$onAddRange=function(t){this.addSelectionMarker(t.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(t){this.removeSelectionMarkers(t.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle('ace_multiselect'),this.keyBinding.addKeyboardHandler(a.keyboardHandler),this.commands.setDefaultHandler('exec',this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle('ace_multiselect'),this.keyBinding.removeKeyboardHandler(a.keyboardHandler),this.commands.removeDefaultHandler('exec',this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit('changeSelection'))},this.$onMultiSelectExec=function(r){var e=r.command,t=r.editor;if(t.multiSelect){if(e.multiSelectAction)'forEach'==e.multiSelectAction?n=t.forEachSelection(e,r.args):'forEachLine'==e.multiSelectAction?n=t.forEachSelection(e,r.args,!0):'single'==e.multiSelectAction?(t.exitMultiSelectMode(),n=e.exec(t,r.args||{})):n=e.multiSelectAction(t,r.args||{});else{var n=e.exec(t,r.args||{});t.multiSelect.addRange(t.multiSelect.toOrientedRange()),t.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(o,e,t){if(!this.inVirtualSelectionMode){var n=t&&t.keepOrder,r=1==t||t&&t.$byLines,s=this.session,a=this.selection,c=a.rangeList,l=(n?a:c).ranges,u;if(!l.length)return o.exec?o.exec(this,e||{}):o(this,e||{});var i=a._eventRegistry;a._eventRegistry={};var g=new _(s);this.inVirtualSelectionMode=!0;for(var d=l.length;d--;){if(r)for(;0<d&&l[d].start.row==l[d-1].end.row;)d--;g.fromOrientedRange(l[d]),g.index=d,this.selection=s.selection=g;var p=o.exec?o.exec(this,e||{}):o(this,e||{});u||void 0===p||(u=p),g.toOrientedRange(l[d])}g.detach(),this.selection=s.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=i,a.mergeOverlappingRanges();var m=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),m&&m.from==m.to&&this.renderer.animateScrolling(m.from),u}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var a='';if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var e=this.multiSelect.rangeList.ranges,t=[],n=0;n<e.length;n++)t.push(this.session.getTextRange(e[n]));var o=this.session.getDocument().getNewLineCharacter();(a=t.join(o)).length==(t.length-1)*o.length&&(a='')}else this.selection.isEmpty()||(a=this.session.getTextRange(this.getSelectionRange()));return a},this.$checkMultiselectChange=function(r,e){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var t=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&e==this.multiSelect.anchor)return;var n=e==this.multiSelect.anchor?t.cursor==t.start?t.end:t.start:t.cursor;n.row==e.row&&this.session.$clipPositionToDocument(n.row,n.column).column==e.column||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.findAll=function(a,e,t){if((e=e||{}).needle=a||e.needle,null==e.needle){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();e.needle=this.session.getTextRange(n)}this.$search.set(e);var i=this.$search.findAll(this.session);if(!i.length)return 0;this.$blockScrolling+=1;var r=this.multiSelect;t||r.toSingleRange(i[0]);for(var o=i.length;o--;)r.addRange(i[o],!0);return n&&r.rangeList.rangeAtPoint(n.start)&&r.addRange(n,!0),this.$blockScrolling-=1,i.length},this.selectMoreLines=function(r,e){var t=this.selection.toOrientedRange(),n=t.cursor==t.end,i=this.session.documentToScreenPosition(t.cursor);this.selection.$desiredColumn&&(i.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(i.row+r,i.column),a;if(t.isEmpty())d=o;else var s=this.session.documentToScreenPosition(n?t.end:t.start),d=this.session.screenToDocumentPosition(s.row+r,s.column);if(n?(a=g.fromPoints(o,d)).cursor=a.start:(a=g.fromPoints(d,o)).cursor=a.end,a.desiredColumn=i.column,!this.selection.inMultiSelectMode)this.selection.addRange(t);else if(e)var l=t.cursor;this.selection.addRange(a),l&&this.selection.substractPoint(l)},this.transposeSelections=function(l){for(var e=this.session,t=e.multiSelect,n=t.ranges,i=n.length;i--;)if((s=n[i]).isEmpty()){var r=e.getWordRange(s.start.row,s.start.column);s.start.row=r.start.row,s.start.column=r.start.column,s.end.row=r.end.row,s.end.column=r.end.column}t.mergeOverlappingRanges();var o=[];for(i=n.length;i--;){var s=n[i];o.unshift(e.getTextRange(s))}for(0>l?o.unshift(o.pop()):o.push(o.shift()),i=n.length;i--;)r=(s=n[i]).clone(),e.replace(s,o[i]),s.start.row=r.start.row,s.start.column=r.start.column},this.selectMore=function(a,e,t){var l=this.session,i=l.multiSelect.toOrientedRange();if(!i.isEmpty()||((i=l.getWordRange(i.start.row,i.start.column)).cursor=-1==a?i.start:i.end,this.multiSelect.addRange(i),!t)){var r=l.getTextRange(i),d=function(r,e,t){return o.$options.wrap=!0,o.$options.needle=e,o.$options.backwards=-1==t,o.find(r)}(l,r,a);d&&(d.cursor=-1==a?d.start:d.end,this.$blockScrolling+=1,this.session.unfold(d),this.multiSelect.addRange(d),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),e&&this.multiSelect.substractPoint(i.cursor)}},this.alignCursors=function(){var r=this.session,c=r.multiSelect,e=c.ranges,t=-1,n=e.filter(function(n){return n.cursor.row==t||void(t=n.cursor.row)});if(e.length&&n.length!=e.length-1){n.forEach(function(t){c.substractPoint(t.cursor)});var _=0,s=1/0,a=e.map(function(e){var t=e.cursor,n=r.getLine(t.row).substr(t.column).search(/\S/g);return-1==n&&(n=0),t.column>_&&(_=t.column),n<s&&(s=n),n});e.forEach(function(e,t){var n=e.cursor,i=_-n.column,o=a[t]-s;i>o?r.insert(n,f.stringRepeat(' ',i-o)):r.remove(new g(n.row,n.column,n.row,n.column-i+o)),e.start.column=e.end.column=_,e.start.row=e.end.row=n.row,e.cursor=e.end}),c.fromOrientedRange(e[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var o=this.selection.getRange(),i=o.start.row,l=o.end.row,d=i==l;if(d){var u=this.session.getLength(),p;do p=this.session.getLine(l);while(/[=:]/.test(p)&&++l<u);do p=this.session.getLine(i);while(/[=:]/.test(p)&&0<--i);0>i&&(i=0),l>=u&&(l=u-1)}var m=this.session.removeFullLines(i,l);m=this.$reAlignText(m,d),this.session.insert({row:i,column:0},m.join('\n')+'\n'),d||(o.start.column=0,o.end.column=m[m.length-1].length),this.selection.setRange(o)}},this.$reAlignText=function(d,e){function a(t){return f.stringRepeat(' ',t)}function l(t){return t[2]?a(s)+t[2]+a(n-t[2].length+i)+t[4].replace(/^([=:])\s+/,'$1 '):t[0]}var c=!0,o=!0,s,n,i;return d.map(function(r){var e=r.match(/(\s*)(.*?)(\s*)([=:].*)/);return e?null==s?(s=e[1].length,n=e[2].length,i=e[3].length,e):(s+n+i!=e[1].length+e[2].length+e[3].length&&(o=!1),s!=e[1].length&&(c=!1),s>e[1].length&&(s=e[1].length),n<e[2].length&&(n=e[2].length),i>e[3].length&&(i=e[3].length),e):[r]}).map(e?l:c?o?function(t){return t[2]?a(s+n-t[2].length)+t[2]+a(i)+t[4].replace(/^([=:])\s+/,'$1 '):t[0]}:l:function(t){return t[2]?a(s)+t[2]+a(i)+t[4].replace(/^([=:])\s+/,'$1 '):t[0]})}}).call(s.prototype),m.onSessionChange=function(r){var e=r.session;e&&!e.multiSelect&&(e.$selectionMarkers=[],e.selection.$initRangeList(),e.multiSelect=e.selection),this.multiSelect=e&&e.multiSelect;var t=r.oldSession;t&&(t.multiSelect.off('addRange',this.$onAddRange),t.multiSelect.off('removeRange',this.$onRemoveRange),t.multiSelect.off('multiSelect',this.$onMultiSelect),t.multiSelect.off('singleSelect',this.$onSingleSelect),t.multiSelect.lead.off('change',this.$checkMultiselectChange),t.multiSelect.anchor.off('change',this.$checkMultiselectChange)),e&&(e.multiSelect.on('addRange',this.$onAddRange),e.multiSelect.on('removeRange',this.$onRemoveRange),e.multiSelect.on('multiSelect',this.$onMultiSelect),e.multiSelect.on('singleSelect',this.$onSingleSelect),e.multiSelect.lead.on('change',this.$checkMultiselectChange),e.multiSelect.anchor.on('change',this.$checkMultiselectChange)),e&&this.inMultiSelectMode!=e.selection.inMultiSelectMode&&(e.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},m.MultiSelect=p,n('./config').defineOptions(s.prototype,'editor',{enableMultiselect:{set:function(n){p(this),n?(this.on('changeSession',this.$multiselectOnSessionChange),this.on('mousedown',t)):(this.off('changeSession',this.$multiselectOnSessionChange),this.off('mousedown',t))},value:!0},enableBlockSelect:{set:function(t){this.$blockSelectEnabled=t},value:!0}})}),ace.define('ace/mode/folding/fold_mode',['require','exports','module','ace/range'],function(n,e){'use strict';var o=n('../../range').Range,t=e.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(r,e,t){var n=r.getLine(t);return this.foldingStartMarker.test(n)?'start':'markbeginend'==e&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?'end':''},this.getFoldWidgetRange=function(){return null},this.indentationBlock=function(i,e,t){var n=/\S/,r=i.getLine(e),p=r.search(n);if(-1!=p){for(var s=t||r.length,a=i.getLength(),c=e,l=e,u;++e<a;)if(u=i.getLine(e).search(n),-1!=u){if(u<=p)break;l=e}if(l>c){var m=i.getLine(l).length;return new o(c,s,l,m)}}},this.openingBracketBlock=function(i,e,t,l,r){var d={row:t,column:l+1},s=i.$findClosingBracket(e,d,r);if(s){var a=i.foldWidgets[s.row];return null==a&&(a=i.getFoldWidget(s.row)),'start'==a&&s.row>d.row&&(s.row--,s.column=i.getLine(s.row).length),o.fromPoints(d,s)}},this.closingBracketBlock=function(i,e,t,l){var d={row:t,column:l},s=i.$findOpeningBracket(e,d);if(s)return s.column++,d.column--,o.fromPoints(s,d)}}).call(t.prototype)}),ace.define('ace/theme/textmate',['require','exports','module','ace/lib/dom'],function(n,e){'use strict';e.isDark=!1,e.cssClass='ace-tm',e.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',n('../lib/dom').importCssString(e.cssText,e.cssClass)}),ace.define('ace/line_widgets',['require','exports','module','ace/lib/oop','ace/lib/dom','ace/range'],function(n,e){'use strict';function r(t){this.session=t,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on('change',this.updateOnChange),this.session.on('changeFold',this.updateOnFold),this.session.on('changeEditor',this.$onChangeEditor)}n('./lib/oop');var a=n('./lib/dom');n('./range').Range,function(){this.getRowLength=function(n){var e;return e=this.lineWidgets&&this.lineWidgets[n]&&this.lineWidgets[n].rowCount||0,this.$useWrapMode&&this.$wrapData[n]?this.$wrapData[n].length+1+e:1+e},this.$getWidgetScreenLength=function(){var n=0;return this.lineWidgets.forEach(function(e){e&&e.rowCount&&!e.hidden&&(n+=e.rowCount)}),n},this.$onChangeEditor=function(t){this.attach(t.editor)},this.attach=function(t){t&&t.widgetManager&&t.widgetManager!=this&&t.widgetManager.detach(),this.editor!=t&&(this.detach(),this.editor=t,t&&(t.widgetManager=this,t.renderer.on('beforeRender',this.measureWidgets),t.renderer.on('afterRender',this.renderWidgets)))},this.detach=function(){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off('beforeRender',this.measureWidgets),e.renderer.off('afterRender',this.renderWidgets);var t=this.session.lineWidgets;t&&t.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(l,e){var t=e.lineWidgets;if(t&&l.action){for(var n=l.data,i=n.start.row,r=n.end.row,o='add'==l.action,s=i+1;s<r;s++)t[s]&&(t[s].hidden=o);t[r]&&(o?t[i]?t[r].hidden=o:t[i]=t[r]:(t[i]==t[r]&&(t[i]=void 0),t[r].hidden=o))}},this.updateOnChange=function(a){var e=this.session.lineWidgets;if(e){var t=a.start.row,n=a.end.row-t;if(0==n);else if('remove'==a.action)e.splice(t+1,n).forEach(function(t){t&&this.removeLineWidget(t)},this),this.$updateRows();else{var o=Array(n);o.unshift(t,0),e.splice.apply(e,o),this.$updateRows()}}},this.$updateRows=function(){var n=this.session.lineWidgets;if(n){var r=!0;n.forEach(function(t,e){if(t)for(r=!1,t.row=e;t.$oldWidget;)t.$oldWidget.row=e,t=t.$oldWidget}),r&&(this.session.lineWidgets=null)}},this.addLineWidget=function(i){this.session.lineWidgets||(this.session.lineWidgets=Array(this.session.getLength()));var e=this.session.lineWidgets[i.row];e&&(i.$oldWidget=e,e.el&&e.el.parentNode&&(e.el.parentNode.removeChild(e.el),e._inDocument=!1)),this.session.lineWidgets[i.row]=i,i.session=this.session;var t=this.editor.renderer;i.html&&!i.el&&(i.el=a.createElement('div'),i.el.innerHTML=i.html),i.el&&(a.addCssClass(i.el,'ace_lineWidgetContainer'),i.el.style.position='absolute',i.el.style.zIndex=5,t.container.appendChild(i.el),i._inDocument=!0),i.coverGutter||(i.el.style.zIndex=3),null==i.pixelHeight&&(i.pixelHeight=i.el.offsetHeight),null==i.rowCount&&(i.rowCount=i.pixelHeight/t.layerConfig.lineHeight);var n=this.session.getFoldAt(i.row,0);if(i.$fold=n,n){var r=this.session.lineWidgets;i.row!=n.end.row||r[n.start.row]?i.hidden=!0:r[n.start.row]=i}return this.session._emit('changeFold',{data:{start:{row:i.row}}}),this.$updateRows(),this.renderWidgets(null,t),this.onWidgetChanged(i),i},this.removeLineWidget=function(n){if(n._inDocument=!1,n.session=null,n.el&&n.el.parentNode&&n.el.parentNode.removeChild(n.el),n.editor&&n.editor.destroy)try{n.editor.destroy()}catch(t){}if(this.session.lineWidgets){var e=this.session.lineWidgets[n.row];if(e==n)this.session.lineWidgets[n.row]=n.$oldWidget,n.$oldWidget&&this.onWidgetChanged(n.$oldWidget);else for(;e;){if(e.$oldWidget==n){e.$oldWidget=n.$oldWidget;break}e=e.$oldWidget}}this.session._emit('changeFold',{data:{start:{row:n.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(r){for(var e=this.session.lineWidgets,t=e&&e[r],n=[];t;)n.push(t),t=t.$oldWidget;return n},this.onWidgetChanged=function(t){this.session._changedWidgets.push(t),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(l,e){var t=this.session._changedWidgets,n=e.layerConfig;if(t&&t.length){for(var i=1/0,d=0,o;d<t.length;d++)if(o=t[d],o&&o.el&&o.session==this.session){if(!o._inDocument){if(this.session.lineWidgets[o.row]!=o)continue;o._inDocument=!0,e.container.appendChild(o.el)}o.h=o.el.offsetHeight,o.fixedWidth||(o.w=o.el.offsetWidth,o.screenWidth=y(o.w/n.characterWidth));var s=o.h/n.lineHeight;o.coverLine&&0>(s-=this.session.getRowLineCount(o.row))&&(s=0),o.rowCount!=s&&(o.rowCount=s,o.row<i&&(i=o.row))}i!=1/0&&(this.session._emit('changeFold',{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(d,e){var t=e.layerConfig,n=this.session.lineWidgets;if(n){for(var i=b(this.firstRow,t.firstRow),r=x(this.lastRow,t.lastRow,n.length);0<i&&!n[i];)i--;this.firstRow=t.firstRow,this.lastRow=t.lastRow,e.$cursorLayer.config=t;for(var o=i,u;o<=r;o++)if(u=n[o],u&&u.el)if(u.hidden)u.el.style.top=-100-(u.pixelHeight||0)+'px';else{u._inDocument||(u._inDocument=!0,e.container.appendChild(u.el));var a=e.$cursorLayer.getPixelPosition({row:o,column:0},!0).top;u.coverLine||(a+=t.lineHeight*this.session.getRowLineCount(u.row)),u.el.style.top=a-t.offset+'px';var c=u.coverGutter?0:e.gutterWidth;u.fixedWidth||(c-=e.scrollLeft),u.el.style.left=c+'px',u.fullWidth&&u.screenWidth&&(u.el.style.minWidth=t.width+2*t.padding+'px'),u.el.style.right=u.fixedWidth?e.scrollBar.getWidth()+'px':''}}}}.call(r.prototype),e.LineWidgets=r}),ace.define('ace/ext/error_marker',['require','exports','module','ace/line_widgets','ace/lib/dom','ace/range'],function(n,e){'use strict';var _=n('../line_widgets').LineWidgets,i=n('../lib/dom'),l=n('../range').Range;e.showErrorMarker=function(r,e){var t=r.session;t.widgetManager||(t.widgetManager=new _(t),t.widgetManager.attach(r));var n=r.getCursorPosition(),o=n.row,a=t.widgetManager.getWidgetsAtRow(o).filter(function(t){return'errorMarker'==t.type})[0];a?a.destroy():o-=e;var s=function(o,e,d){var n=o.getAnnotations().sort(l.comparePoints);if(n.length){var i=function(a,e,t){for(var n=0,i=a.length-1;n<=i;){var r=n+i>>1,o=t(e,a[r]);if(0<o)n=r+1;else{if(!(0>o))return r;i=r-1}}return-(n+1)}(n,{row:e,column:-1},l.comparePoints);0>i&&(i=-i-1),i>=n.length?i=0<d?0:n.length-1:0===i&&0>d&&(i=n.length-1);var c=n[i];if(c&&d){if(c.row===e){do c=n[i+=d];while(c&&c.row===e);if(!c)return n.slice()}var u=[];e=c.row;do u[0>d?'unshift':'push'](c),c=n[i+=d];while(c&&c.row==e);return u.length&&u}}}(t,o,e),c;if(s){var u=s[0];n.column=(u.pos&&'number'!=typeof u.column?u.pos.sc:u.column)||0,n.row=u.row,c=r.renderer.$gutterLayer.$annotations[n.row]}else{if(a)return;c={text:['Looks good!'],className:'ace_ok'}}r.session.unfold(n.row),r.selection.moveToPosition(n);var h={row:n.row,fixedWidth:!0,coverGutter:!0,el:i.createElement('div'),type:'errorMarker'},d=h.el.appendChild(i.createElement('div')),p=h.el.appendChild(i.createElement('div'));p.className='error_widget_arrow '+c.className;var m=r.renderer.$cursorLayer.getPixelPosition(n).left;p.style.left=m+r.renderer.gutterWidth-5+'px',h.el.className='error_widget_wrapper',d.className='error_widget '+c.className,d.innerHTML=c.text.join('<br>'),d.appendChild(i.createElement('div'));var f=function(r,e,t){if(0===e&&('esc'===t||'return'===t))return h.destroy(),{command:'null'}};h.destroy=function(){r.$mouseHandler.isMousePressed||(r.keyBinding.removeKeyboardHandler(f),t.widgetManager.removeLineWidget(h),r.off('changeSelection',h.destroy),r.off('changeSession',h.destroy),r.off('mouseup',h.destroy),r.off('change',h.destroy))},r.keyBinding.addKeyboardHandler(f),r.on('changeSelection',h.destroy),r.on('changeSession',h.destroy),r.on('mouseup',h.destroy),r.on('change',h.destroy),r.session.widgetManager.addLineWidget(h),h.el.onmousedown=r.focus.bind(r),r.renderer.scrollCursorIntoView(null,.5,{bottom:h.el.offsetHeight})},i.importCssString('    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }','')}),ace.define('ace/ace',['require','exports','module','ace/lib/fixoldbrowsers','ace/lib/dom','ace/lib/event','ace/editor','ace/edit_session','ace/undomanager','ace/virtual_renderer','ace/worker/worker_client','ace/keyboard/hash_handler','ace/placeholder','ace/multi_select','ace/mode/folding/fold_mode','ace/theme/textmate','ace/ext/error_marker','ace/config'],function(n,d){'use strict';n('./lib/fixoldbrowsers');var t=n('./lib/dom'),r=n('./lib/event'),o=n('./editor').Editor,i=n('./edit_session').EditSession,a=n('./undomanager').UndoManager,s=n('./virtual_renderer').VirtualRenderer;n('./worker/worker_client'),n('./keyboard/hash_handler'),n('./placeholder'),n('./multi_select'),n('./mode/folding/fold_mode'),n('./theme/textmate'),n('./ext/error_marker'),d.config=n('./config'),d.require=n,d.define=_(2),d.edit=function(l){if('string'==typeof l){var p=l;if(!(l=document.getElementById(p)))throw new Error('ace.edit can\'t find div #'+p)}if(l&&l.env&&l.env.editor instanceof o)return l.env.editor;var n='';if(l&&/input|textarea/i.test(l.tagName)){var i=l;n=i.value,l=t.createElement('pre'),i.parentNode.replaceChild(l,i)}else l&&(n=t.getInnerText(l),l.innerHTML='');var a=d.createEditSession(n),m=new o(new s(l));m.setSession(a);var g={document:a,editor:m,onResize:m.resize.bind(m,null)};return i&&(g.textarea=i),r.addListener(window,'resize',g.onResize),m.on('destroy',function(){r.removeListener(window,'resize',g.onResize),g.editor.container.env=null}),m.container.env=m.env=g,m},d.createEditSession=function(r,e){var t=new i(r,e);return t.setUndoManager(new a),t},d.EditSession=i,d.UndoManager=a,d.version='1.2.8'}),ace.require(['ace/ace'],function(n){for(var e in n&&(n.config.init(!0),n.define=ace.define),window.ace||(window.ace=n),n)n.hasOwnProperty(e)&&(window.ace[e]=n[e])}),ace.define('ace/theme/monokai',['require','exports','module','ace/lib/dom'],function(n,e){e.isDark=!0,e.cssClass='ace-monokai',e.cssText='.ace-monokai .ace_gutter {    background: #222;    color: #8F908A    }    .ace-monokai .ace_print-margin {    width: 1px;    background: #555651    }    .ace-monokai {    background-color: #222;    color: #f9f9f9;    font-size: 14px;    }    .ace-monokai .ace_cursor {    color: #F8F8F0    }    .ace-monokai .ace_marker-layer .ace_selection {    background: #a6e22e    }    .ace-monokai.ace_multiselect .ace_selection.ace_start {    box-shadow: 0 0 3px 0px #272822;    }    .ace-monokai .ace_marker-layer .ace_step {    background: rgb(102, 82, 0)    }    .ace-monokai .ace_marker-layer .ace_bracket {    margin: -1px 0 0 -1px;    border: 1px solid #a6e22e    }    .ace-monokai .ace_marker-layer .ace_active-line {    background: #2c2c2c    }    .ace-monokai .ace_gutter-active-line {    background-color: #2c2c2c    }    .ace-monokai .ace_marker-layer .ace_selected-word {    border: 1px solid #a6e22e    }    .ace-monokai .ace_invisible {    color: #52524d    }    .ace-monokai .ace_entity.ace_name.ace_tag,    .ace-monokai .ace_keyword,    .ace-monokai .ace_meta.ace_tag,    .ace-monokai .ace_storage {    color: #F0640D    }    .ace-monokai .ace_punctuation,    .ace-monokai .ace_punctuation.ace_tag {    color: #fff    }    .ace-monokai .ace_constant.ace_character,    .ace-monokai .ace_constant.ace_other {    color: #5db0d7    }    .ace-monokai .ace_constant.ace_language {        color: #e6db74    }    .ace-monokai .ace_constant.ace_numeric {    color: #ae81ff    }    .ace-monokai .ace_invalid {    color: #F8F8F0;    background-color: #F0640D    }    .ace-monokai .ace_invalid.ace_deprecated {    color: #F8F8F0;    background-color: #5db0d7    }    .ace-monokai .ace_support.ace_constant,    .ace-monokai .ace_support.ace_function {    color: #5db0d7    }    .ace-monokai .ace_fold {    background-color: #A6E22E;    border-color: #F8F8F2    }    .ace-monokai .ace_storage.ace_type,    .ace-monokai .ace_support.ace_class,    .ace-monokai .ace_support.ace_type {    font-style: italic;    color: #5db0d7    }    .ace-monokai .ace_entity.ace_name.ace_function,    .ace-monokai .ace_entity.ace_other,    .ace-monokai .ace_entity.ace_other.ace_attribute-name,    .ace-monokai .ace_variable {    color: #A6E22E    }    .ace-monokai .ace_variable.ace_parameter {    font-style: italic;    color: #FD971F    }    .ace-monokai .ace_string {    color: #E6DB74    }    .ace-monokai .ace_comment {    color: #75715E    }    .ace-monokai .ace_indent-guide {    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y    }',n('../lib/dom').importCssString(e.cssText,e.cssClass)}),ace.define('ace/ext/searchbox',['require','exports','module','ace/lib/dom','ace/lib/lang','ace/lib/event','ace/keyboard/hash_handler','ace/lib/keys'],function(n,e){'use strict';var d=n('../lib/dom'),i=n('../lib/lang'),u=n('../lib/event'),t=n('../keyboard/hash_handler').HashHandler,o=n('../lib/keys');d.importCssString('        .ace_search {        background-color: #ddd;        color: #666;        border: 1px solid #cbcbcb;        border-top: 0 none;        overflow: hidden;        margin: 0;        padding: 4px 6px 0 4px;        position: absolute;        top: 0;        z-index: 99;        white-space: normal;        }        .ace_search.left {        border-left: 0 none;        border-radius: 0px 0px 5px 0px;        left: 0;        }        .ace_search.right {        border-radius: 0px 0px 0px 5px;        border-right: 0 none;        right: 0;        }        .ace_search_form, .ace_replace_form {        margin: 0 20px 4px 0;        overflow: hidden;        line-height: 1.9;        }        .ace_replace_form {        margin-right: 0;        }        .ace_search_form.ace_nomatch {        outline: 1px solid red;        }        .ace_search_field {        border-radius: 3px 0 0 3px;        background-color: white;        color: black;        border: 1px solid #cbcbcb;        border-right: 0 none;        box-sizing: border-box!important;        outline: 0;        padding: 0;        font-size: inherit;        margin: 0;        line-height: inherit;        padding: 0 6px;        min-width: 17em;        vertical-align: top;        }        .ace_searchbtn {        border: 1px solid #cbcbcb;        line-height: inherit;        display: inline-block;        padding: 0 6px;        background: #fff;        border-right: 0 none;        border-left: 1px solid #dcdcdc;        cursor: pointer;        margin: 0;        position: relative;        box-sizing: content-box!important;        color: #666;        }        .ace_searchbtn:last-child {        border-radius: 0 3px 3px 0;        border-right: 1px solid #cbcbcb;        }        .ace_searchbtn:disabled {        background: none;        cursor: default;        }        .ace_searchbtn:hover {        background-color: #eef1f6;        }        .ace_searchbtn.prev, .ace_searchbtn.next {        padding: 0px 0.7em        }        .ace_searchbtn.prev:after, .ace_searchbtn.next:after {        content: "";        border: solid 2px #888;        width: 0.5em;        height: 0.5em;        border-width:  2px 0 0 2px;        display:inline-block;        transform: rotate(-45deg);        }        .ace_searchbtn.next:after {        border-width: 0 2px 2px 0 ;        }        .ace_searchbtn_close {        background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;        border-radius: 50%;        border: 0 none;        color: #656565;        cursor: pointer;        font: 16px/16px Arial;        padding: 0;        height: 14px;        width: 14px;        top: 9px;        right: 7px;        position: absolute;        }        .ace_searchbtn_close:hover {        background-color: #656565;        background-position: 50% 100%;        color: white;        }        .ace_button {        margin-left: 2px;        cursor: pointer;        -webkit-user-select: none;        -moz-user-select: none;        -o-user-select: none;        -ms-user-select: none;        user-select: none;        overflow: hidden;        opacity: 0.7;        border: 1px solid rgba(100,100,100,0.23);        padding: 1px;        box-sizing:    border-box!important;        color: black;        }        .ace_button:hover {        background-color: #eee;        opacity:1;        }        .ace_button:active {        background-color: #ddd;        }        .ace_button.checked {        border-color: #3399ff;        opacity:1;        }        .ace_search_options{        margin-bottom: 3px;        text-align: right;        -webkit-user-select: none;        -moz-user-select: none;        -o-user-select: none;        -ms-user-select: none;        user-select: none;        clear: both;        }        .ace_search_counter {        float: left;        font-family: arial;        padding: 0 8px;        }','ace_searchbox');var a='<div class="ace_search right">            <span action="hide" class="ace_searchbtn_close"></span>            <div class="ace_search_form">                <input class="ace_search_field" placeholder="Search for" spellcheck="false"></input>                <span action="findPrev" class="ace_searchbtn prev"></span>                <span action="findNext" class="ace_searchbtn next"></span>                <span action="findAll" class="ace_searchbtn" title="Alt-Enter">All</span>            </div>            <div class="ace_replace_form">                <input class="ace_search_field" placeholder="Replace with" spellcheck="false"></input>                <span action="replaceAndFindNext" class="ace_searchbtn">Replace</span>                <span action="replaceAll" class="ace_searchbtn">All</span>            </div>            <div class="ace_search_options">                <span action="toggleReplace" class="ace_button" title="Toggel Replace mode"                    style="float:left;margin-top:-2px;padding:0 5px;">+</span>                <span class="ace_search_counter"></span>                <span action="toggleRegexpMode" class="ace_button" title="RegExp Search">.*</span>                <span action="toggleCaseSensitive" class="ace_button" title="CaseSensitive Search">Aa</span>                <span action="toggleWholeWords" class="ace_button" title="Whole Word Search">\\b</span>                <span action="searchInSelection" class="ace_button" title="Search In Selection">S</span>            </div>        </div>'.replace(/> +/g,'>'),r=function(t){var e=d.createElement('div');e.innerHTML=a,this.element=e.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(t)};(function(){this.setEditor=function(t){t.searchBox=this,t.renderer.scroller.appendChild(this.element),this.editor=t},this.setSession=function(){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(t){this.searchBox=t.querySelector('.ace_search_form'),this.replaceBox=t.querySelector('.ace_replace_form'),this.searchOption=t.querySelector('[action=searchInSelection]'),this.replaceOption=t.querySelector('[action=toggleReplace]'),this.regExpOption=t.querySelector('[action=toggleRegexpMode]'),this.caseSensitiveOption=t.querySelector('[action=toggleCaseSensitive]'),this.wholeWordOption=t.querySelector('[action=toggleWholeWords]'),this.searchInput=this.searchBox.querySelector('.ace_search_field'),this.replaceInput=this.replaceBox.querySelector('.ace_search_field'),this.searchCounter=t.querySelector('.ace_search_counter')},this.$init=function(){var n=this.element;this.$initElements(n);var a=this;u.addListener(n,'mousedown',function(t){setTimeout(function(){a.activeInput.focus()},0),u.stopPropagation(t)}),u.addListener(n,'click',function(t){var e=(t.target||t.srcElement).getAttribute('action');e&&a[e]?a[e]():a.$searchBarKb.commands[e]&&a.$searchBarKb.commands[e].exec(a),u.stopPropagation(t)}),u.addCommandKeyListener(n,function(t,e,n){var i=o.keyCodeToString(n),r=a.$searchBarKb.findKeyCommand(e,i);r&&r.exec&&(r.exec(a),u.stopEvent(t))}),this.$onChange=i.delayedCall(function(){a.find(!1,!1)}),u.addListener(this.searchInput,'input',function(){a.$onChange.schedule(20)}),u.addListener(this.searchInput,'focus',function(){a.activeInput=a.searchInput,a.searchInput.value&&a.highlight()}),u.addListener(this.replaceInput,'focus',function(){a.activeInput=a.replaceInput,a.searchInput.value&&a.highlight()})},this.$closeSearchBarKb=new t([{bindKey:'Esc',name:'closeSearchBar',exec:function(t){t.searchBox.hide()}}]),this.$searchBarKb=new t,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(n){var e=n.isReplace=!n.isReplace;n.replaceBox.style.display=e?'':'none',n.replaceOption.checked=!1,n.$syncOptions(),n.searchInput.focus()},"Ctrl-H|Command-Option-F":function(t){t.replaceOption.checked=!0,t.$syncOptions(),t.replaceInput.focus()},"Ctrl-G|Command-G":function(t){t.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(t){t.findPrev()},esc:function(t){setTimeout(function(){t.hide()})},Return:function(t){t.activeInput==t.replaceInput&&t.replace(),t.findNext()},"Shift-Return":function(t){t.activeInput==t.replaceInput&&t.replace(),t.findPrev()},"Alt-Return":function(t){t.activeInput==t.replaceInput&&t.replaceAll(),t.findAll()},Tab:function(t){(t.activeInput==t.replaceInput?t.searchInput:t.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:'toggleRegexpMode',bindKey:{win:'Alt-R|Alt-/',mac:'Ctrl-Alt-R|Ctrl-Alt-/'},exec:function(t){t.regExpOption.checked=!t.regExpOption.checked,t.$syncOptions()}},{name:'toggleCaseSensitive',bindKey:{win:'Alt-C|Alt-I',mac:'Ctrl-Alt-R|Ctrl-Alt-I'},exec:function(t){t.caseSensitiveOption.checked=!t.caseSensitiveOption.checked,t.$syncOptions()}},{name:'toggleWholeWords',bindKey:{win:'Alt-B|Alt-W',mac:'Ctrl-Alt-B|Ctrl-Alt-W'},exec:function(t){t.wholeWordOption.checked=!t.wholeWordOption.checked,t.$syncOptions()}},{name:'toggleReplace',exec:function(t){t.replaceOption.checked=!t.replaceOption.checked,t.$syncOptions()}},{name:'searchInSelection',exec:function(t){t.searchOption.checked=!t.searchRange,t.setSearchRange(t.searchOption.checked&&t.editor.getSelectionRange()),t.$syncOptions()}}]),this.setSearchRange=function(t){this.searchRange=t,t?this.searchRangeMarker=this.editor.session.addMarker(t,'ace_active-line'):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(t){d.setCssClass(this.replaceOption,'checked',this.searchRange),d.setCssClass(this.searchOption,'checked',this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?'-':'+',d.setCssClass(this.regExpOption,'checked',this.regExpOption.checked),d.setCssClass(this.wholeWordOption,'checked',this.wholeWordOption.checked),d.setCssClass(this.caseSensitiveOption,'checked',this.caseSensitiveOption.checked),this.replaceBox.style.display=this.replaceOption.checked?'':'none',this.find(!1,!1,t)},this.highlight=function(t){this.editor.session.highlight(t||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(a,o,i){var s=!this.editor.find(this.searchInput.value,{skipCurrent:a,backwards:o,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:i,range:this.searchRange})&&this.searchInput.value;d.setCssClass(this.searchBox,'ace_nomatch',s),this.editor._emit('findSearchBox',{match:!s}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var l=this.editor,e=l.$search.$options.re,t=0,n=0;if(e){var i=this.searchRange?l.session.getTextRange(this.searchRange):l.getValue(),r=l.session.doc.positionToIndex(l.selection.anchor);this.searchRange&&(r-=l.session.doc.positionToIndex(this.searchRange.start));for(var o=e.lastIndex=0,a;(a=e.exec(i))&&(t++,(o=a.index)<=r&&n++,!(999<t))&&(a[0]||(e.lastIndex=o+=1,!(o>=i.length))););}this.searchCounter.textContent=n+' of '+(999<t?'999+':t)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var t=!this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked})&&this.searchInput.value;d.setCssClass(this.searchBox,'ace_nomatch',t),this.editor._emit('findSearchBox',{match:!t}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off('changeSession',this.setSession),this.element.style.display='none',this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(n,e){this.active=!0,this.editor.on('changeSession',this.setSession),this.element.style.display='',this.replaceOption.checked=e,n&&(this.searchInput.value=n),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var t=document.activeElement;return t==this.searchInput||t==this.replaceInput}}).call(r.prototype),e.SearchBox=r,e.Search=function(n,e){(n.searchBox||new r(n)).show(n.session.getTextRange(),e)}}),ace.require(['ace/ext/searchbox'],function(){}),ace.define('ace/mode/doc_comment_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/text_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('./text_highlight_rules').TextHighlightRules,r=function(){this.$rules={start:[{token:'comment.doc.tag',regex:'@[\\w\\d_]+'},r.getTagRule(),{defaultToken:'comment.doc',caseInsensitive:!0}]}};t.inherits(r,a),r.getTagRule=function(){return{token:'comment.doc.tag.storage.type',regex:'\\b(?:TODO|FIXME|XXX|HACK)\\b'}},r.getStartRule=function(t){return{token:'comment.doc',regex:'\\/\\*(?=\\*)',next:t}},r.getEndRule=function(t){return{token:'comment.doc',regex:'\\*\\/',next:t}},e.DocCommentHighlightRules=r}),ace.define('ace/mode/c_cpp_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/doc_comment_highlight_rules','ace/mode/text_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./doc_comment_highlight_rules').DocCommentHighlightRules,r=n('./text_highlight_rules').TextHighlightRules,o=e.cFunctions='\\b(?:hypot(?:f|l)?|s(?:scanf|ystem|nprintf|ca(?:nf|lb(?:n(?:f|l)?|ln(?:f|l)?))|i(?:n(?:h(?:f|l)?|f|l)?|gn(?:al|bit))|tr(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?)|error|pbrk|ftime|len|rchr|xfrm)|printf|et(?:jmp|vbuf|locale|buf)|qrt(?:f|l)?|w(?:scanf|printf)|rand)|n(?:e(?:arbyint(?:f|l)?|xt(?:toward(?:f|l)?|after(?:f|l)?))|an(?:f|l)?)|c(?:s(?:in(?:h(?:f|l)?|f|l)?|qrt(?:f|l)?)|cos(?:h(?:f)?|f|l)?|imag(?:f|l)?|t(?:ime|an(?:h(?:f|l)?|f|l)?)|o(?:s(?:h(?:f|l)?|f|l)?|nj(?:f|l)?|pysign(?:f|l)?)|p(?:ow(?:f|l)?|roj(?:f|l)?)|e(?:il(?:f|l)?|xp(?:f|l)?)|l(?:o(?:ck|g(?:f|l)?)|earerr)|a(?:sin(?:h(?:f|l)?|f|l)?|cos(?:h(?:f|l)?|f|l)?|tan(?:h(?:f|l)?|f|l)?|lloc|rg(?:f|l)?|bs(?:f|l)?)|real(?:f|l)?|brt(?:f|l)?)|t(?:ime|o(?:upper|lower)|an(?:h(?:f|l)?|f|l)?|runc(?:f|l)?|gamma(?:f|l)?|mp(?:nam|file))|i(?:s(?:space|n(?:ormal|an)|cntrl|inf|digit|u(?:nordered|pper)|p(?:unct|rint)|finite|w(?:space|c(?:ntrl|type)|digit|upper|p(?:unct|rint)|lower|al(?:num|pha)|graph|xdigit|blank)|l(?:ower|ess(?:equal|greater)?)|al(?:num|pha)|gr(?:eater(?:equal)?|aph)|xdigit|blank)|logb(?:f|l)?|max(?:div|abs))|di(?:v|fftime)|_Exit|unget(?:c|wc)|p(?:ow(?:f|l)?|ut(?:s|c(?:har)?|wc(?:har)?)|error|rintf)|e(?:rf(?:c(?:f|l)?|f|l)?|x(?:it|p(?:2(?:f|l)?|f|l|m1(?:f|l)?)?))|v(?:s(?:scanf|nprintf|canf|printf|w(?:scanf|printf))|printf|f(?:scanf|printf|w(?:scanf|printf))|w(?:scanf|printf)|a_(?:start|copy|end|arg))|qsort|f(?:s(?:canf|e(?:tpos|ek))|close|tell|open|dim(?:f|l)?|p(?:classify|ut(?:s|c|w(?:s|c))|rintf)|e(?:holdexcept|set(?:e(?:nv|xceptflag)|round)|clearexcept|testexcept|of|updateenv|r(?:aiseexcept|ror)|get(?:e(?:nv|xceptflag)|round))|flush|w(?:scanf|ide|printf|rite)|loor(?:f|l)?|abs(?:f|l)?|get(?:s|c|pos|w(?:s|c))|re(?:open|e|ad|xp(?:f|l)?)|m(?:in(?:f|l)?|od(?:f|l)?|a(?:f|l|x(?:f|l)?)?))|l(?:d(?:iv|exp(?:f|l)?)|o(?:ngjmp|cal(?:time|econv)|g(?:1(?:p(?:f|l)?|0(?:f|l)?)|2(?:f|l)?|f|l|b(?:f|l)?)?)|abs|l(?:div|abs|r(?:int(?:f|l)?|ound(?:f|l)?))|r(?:int(?:f|l)?|ound(?:f|l)?)|gamma(?:f|l)?)|w(?:scanf|c(?:s(?:s(?:tr|pn)|nc(?:py|at|mp)|c(?:spn|hr|oll|py|at|mp)|to(?:imax|d|u(?:l(?:l)?|max)|k|f|l(?:d|l)?|mbs)|pbrk|ftime|len|r(?:chr|tombs)|xfrm)|to(?:b|mb)|rtomb)|printf|mem(?:set|c(?:hr|py|mp)|move))|a(?:s(?:sert|ctime|in(?:h(?:f|l)?|f|l)?)|cos(?:h(?:f|l)?|f|l)?|t(?:o(?:i|f|l(?:l)?)|exit|an(?:h(?:f|l)?|2(?:f|l)?|f|l)?)|b(?:s|ort))|g(?:et(?:s|c(?:har)?|env|wc(?:har)?)|mtime)|r(?:int(?:f|l)?|ound(?:f|l)?|e(?:name|alloc|wind|m(?:ove|quo(?:f|l)?|ainder(?:f|l)?))|a(?:nd|ise))|b(?:search|towc)|m(?:odf(?:f|l)?|em(?:set|c(?:hr|py|mp)|move)|ktime|alloc|b(?:s(?:init|towcs|rtowcs)|towc|len|r(?:towc|len))))\\b',l=function(){var n=this.$keywords=this.createKeywordMapper({"keyword.control":'break|case|continue|default|do|else|for|goto|if|_Pragma|return|switch|while|catch|operator|try|throw|using',"storage.type":'asm|__asm__|auto|bool|_Bool|char|_Complex|double|enum|float|_Imaginary|int|long|short|signed|struct|typedef|union|unsigned|void|class|wchar_t|template|char16_t|char32_t',"storage.modifier":'const|extern|register|restrict|static|volatile|inline|private|protected|public|friend|explicit|virtual|export|mutable|typename|constexpr|new|delete|alignas|alignof|decltype|noexcept|thread_local',"keyword.operator":'and|and_eq|bitand|bitor|compl|not|not_eq|or|or_eq|typeid|xor|xor_eqconst_cast|dynamic_cast|reinterpret_cast|static_cast|sizeof|namespace',"variable.language":'this',"constant.language":'NULL|true|false|TRUE|FALSE|nullptr'},'identifier'),r=/\\(?:['"?\\abfnrtv]|[0-7]{1,3}|x[a-fA-F\d]{2}|u[a-fA-F\d]{4}U[a-fA-F\d]{8}|.)/.source;this.$rules={start:[{token:'comment',regex:'//$',next:'start'},{token:'comment',regex:'//',next:'singleLineComment'},i.getStartRule('doc-start'),{token:'comment',regex:'\\/\\*',next:'comment'},{token:'string',regex:'\'(?:'+r+'|.)?\''},{token:'string.start',regex:'"',stateName:'qqstring',next:[{token:'string',regex:/\\\s*$/,next:'qqstring'},{token:'constant.language.escape',regex:r},{token:'constant.language.escape',regex:/%[^'"\\]/},{token:'string.end',regex:'"|$',next:'start'},{defaultToken:'string'}]},{token:'string.start',regex:'R"\\(',stateName:'rawString',next:[{token:'string.end',regex:'\\)"',next:'start'},{defaultToken:'string'}]},{token:'constant.numeric',regex:'0[xX][0-9a-fA-F]+(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b'},{token:'constant.numeric',regex:'[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?(L|l|UL|ul|u|U|F|f|ll|LL|ull|ULL)?\\b'},{token:'keyword',regex:'#\\s*(?:include|import|pragma|line|define|undef|version)\\b',next:'directive'},{token:'keyword',regex:'#\\s*(?:endif|if|ifdef|else|elif|ifndef)\\b'},{token:'support.function.C99.c',regex:o},{token:n,regex:'[a-zA-Z_$][a-zA-Z0-9_$]*'},{token:'keyword.operator',regex:/--|\+\+|<<=|>>=|>>>=|<>|&&|\|\||\?:|[*%\/+\-&\^|~!<>=]=?/},{token:'punctuation.operator',regex:'\\?|\\:|\\,|\\;|\\.'},{token:'paren.lparen',regex:'[[({]'},{token:'paren.rparen',regex:'[\\])}]'},{token:'text',regex:'\\s+'}],comment:[{token:'comment',regex:'\\*\\/',next:'start'},{defaultToken:'comment'}],singleLineComment:[{token:'comment',regex:/\\$/,next:'singleLineComment'},{token:'comment',regex:/$/,next:'start'},{defaultToken:'comment'}],directive:[{token:'constant.other.multiline',regex:/\\/},{token:'constant.other.multiline',regex:/.*\\/},{token:'constant.other',regex:'\\s*<.+?>',next:'start'},{token:'constant.other',regex:'\\s*["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]',next:'start'},{token:'constant.other',regex:'\\s*[\'](?:(?:\\\\.)|(?:[^\'\\\\]))*?[\']',next:'start'},{token:'constant.other',regex:/[^\\\/]+/,next:'start'}]},this.embedRules(i,'doc-',[i.getEndRule('start')]),this.normalizeRules()};t.inherits(l,r),e.c_cppHighlightRules=l}),ace.define('ace/mode/matching_brace_outdent',['require','exports','module','ace/range'],function(n,e){'use strict';var a=n('../range').Range,t=function(){};(function(){this.checkOutdent=function(n,e){return!!/^\s+$/.test(n)&&/^\s*\}/.test(e)},this.autoOutdent=function(i,e){var l=i.getLine(e).match(/^(\s*\})/);if(!l)return 0;var d=l[1].length,c=i.findMatchingBracket({row:e,column:d});if(!c||c.row==e)return 0;var u=this.$getIndent(i.getLine(c.row));i.replace(new a(e,0,e,d-1),u)},this.$getIndent=function(t){return t.match(/^\s*/)[0]}}).call(t.prototype),e.MatchingBraceOutdent=t}),ace.define('ace/mode/folding/cstyle',['require','exports','module','ace/lib/oop','ace/range','ace/mode/folding/fold_mode'],function(n,e){'use strict';var t=n('../../lib/oop'),d=n('../../range').Range,r=n('./fold_mode').FoldMode,a=e.FoldMode=function(t){t&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,'|'+t.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,'|'+t.end)))};t.inherits(a,r),function(){this.foldingStartMarker=/(\{|\[)[^\}\]]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{]*(\}|\])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(a,e,t){var n=a.getLine(t);if(this.singleLineBlockCommentRe.test(n)&&!this.startRegionRe.test(n)&&!this.tripleStarBlockCommentRe.test(n))return'';var o=this._getFoldWidgetBase(a,e,t);return!o&&this.startRegionRe.test(n)?'start':o},this.getFoldWidgetRange=function(l,e,t,n){var i=l.getLine(t),o;if(this.startRegionRe.test(i))return this.getCommentRegionBlock(l,i,t);if(o=i.match(this.foldingStartMarker)){var r=o.index;if(o[1])return this.openingBracketBlock(l,o[1],t,r);var s=l.getCommentFoldRange(t,r+o[0].length,1);return s&&!s.isMultiLine()&&(n?s=this.getSectionRange(l,t):'all'!=e&&(s=null)),s}return'markbegin'!==e&&(o=i.match(this.foldingStopMarker))?(r=o.index+o[0].length,o[1]?this.closingBracketBlock(l,o[1],t,r):l.getCommentFoldRange(t,r,-1)):void 0},this.getSectionRange=function(r,e){for(var t=r.getLine(e),n=t.search(/\S/),i=e,o=t.length,s=e+=1,a=r.getLength(),c;++e<a;)if(c=(t=r.getLine(e)).search(/\S/),-1!==c){if(n>c)break;var l=this.getFoldWidgetRange(r,'all',e);if(l){if(l.start.row<=i)break;if(l.isMultiLine())e=l.end.row;else if(n==c)break}s=e}return new d(i,o,s,r.getLine(s).length)},this.getCommentRegionBlock=function(r,e,t){for(var n=e.search(/\s*$/),i=r.getLength(),o=t,s=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,a=1;++t<i;){e=r.getLine(t);var u=s.exec(e);if(u&&(u[1]?a--:a++,!a))break}if(t>o)return new d(o,n,t,e.length)}}.call(a.prototype)}),ace.define('ace/mode/c_cpp',['require','exports','module','ace/lib/oop','ace/mode/text','ace/mode/c_cpp_highlight_rules','ace/mode/matching_brace_outdent','ace/range','ace/mode/behaviour/cstyle','ace/mode/folding/cstyle'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./text').Mode,r=n('./c_cpp_highlight_rules').c_cppHighlightRules,o=n('./matching_brace_outdent').MatchingBraceOutdent,s=(n('../range').Range,n('./behaviour/cstyle').CstyleBehaviour),a=n('./folding/cstyle').FoldMode,d=function(){this.HighlightRules=r,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};t.inherits(d,i),function(){this.lineCommentStart='//',this.blockComment={start:'/*',end:'*/'},this.getNextLineIndent=function(l,e,t){var n=this.$getIndent(e),i=this.getTokenizer().getLineTokens(e,l),r=i.tokens,o=i.state;if(r.length&&'comment'==r[r.length-1].type)return n;if('start'==l)(s=e.match(/^.*[\{\(\[]\s*$/))&&(n+=t);else if('doc-start'==l){if('start'==o)return'';var s;(s=e.match(/^\s*(\/?)\*/))&&(s[1]&&(n+=' '),n+='* ')}return n},this.checkOutdent=function(r,e,t){return this.$outdent.checkOutdent(e,t)},this.autoOutdent=function(r,e,t){this.$outdent.autoOutdent(e,t)},this.$id='ace/mode/c_cpp'}.call(d.prototype),e.Mode=d}),ace.define('ace/mode/glsl_highlight_rules',['require','exports','module','ace/lib/oop','ace/mode/c_cpp_highlight_rules'],function(n,e){'use strict';var t=n('../lib/oop'),a=n('./c_cpp_highlight_rules').c_cppHighlightRules,r=function(){var n=this.createKeywordMapper({"variable.language":'this',keyword:'layout|attribute|const|uniform|varying|break|continue|do|for|while|if|else|in|out|inout|float|int|void|bool|true|false|lowp|mediump|highp|precision|invariant|discard|return|mat2|mat3|mat4|vec2|vec3|vec4|ivec2|ivec3|ivec4|bvec2|bvec3|bvec4|sampler2D|samplerCube|struct',"constant.language":'radians|degrees|sin|cos|tan|asin|acos|atan|pow|exp|log|exp2|log2|sqrt|inversesqrt|abs|sign|floor|ceil|fract|mod|min|max|clamp|mix|step|smoothstep|length|distance|dot|cross|normalize|faceforward|reflect|refract|matrixCompMult|lessThan|lessThanEqual|greaterThan|greaterThanEqual|equal|notEqual|any|all|not|dFdx|dFdy|fwidth|texture2D|texture2DProj|texture2DLod|texture2DProjLod|textureCube|textureCubeLod|gl_MaxVertexAttribs|gl_MaxVertexUniformVectors|gl_MaxVaryingVectors|gl_MaxVertexTextureImageUnits|gl_MaxCombinedTextureImageUnits|gl_MaxTextureImageUnits|gl_MaxFragmentUniformVectors|gl_MaxDrawBuffers|gl_DepthRangeParameters|gl_DepthRange|gl_Position|gl_PointSize|gl_FragCoord|gl_FrontFacing|gl_PointCoord|gl_FragColor|gl_FragData'},'identifier');this.$rules=new a().$rules,this.$rules.start.forEach(function(e){'function'==typeof e.token&&(e.token=n)})};t.inherits(r,a),e.glslHighlightRules=r}),ace.define('ace/mode/glsl',['require','exports','module','ace/lib/oop','ace/mode/c_cpp','ace/mode/glsl_highlight_rules','ace/mode/matching_brace_outdent','ace/range','ace/mode/behaviour/cstyle','ace/mode/folding/cstyle'],function(n,e){'use strict';var t=n('../lib/oop'),i=n('./c_cpp').Mode,r=n('./glsl_highlight_rules').glslHighlightRules,o=n('./matching_brace_outdent').MatchingBraceOutdent,s=(n('../range').Range,n('./behaviour/cstyle').CstyleBehaviour),a=n('./folding/cstyle').FoldMode,d=function(){this.HighlightRules=r,this.$outdent=new o,this.$behaviour=new s,this.foldingRules=new a};t.inherits(d,i),function(){this.$id='ace/mode/glsl'}.call(d.prototype),e.Mode=d}),r.exports=ace},function(a,e,t){var n=t(11);'string'==typeof n&&(n=[[a.i,n,'']]);var o={insertInto:('html','html'),hmr:!0,transform:void 0};t(1)(n,o),n.locals&&(a.exports=n.locals)},function(r,e,t){(e=r.exports=t(0)(!1)).push([r.i,'@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);','']),e.push([r.i,'.captureMenuComponent {\n  position: absolute;\n  padding: 7px;\n  z-index: 99999;\n  top: 10px;\n  left: 50%;\n  margin-left: -209px;\n  height: 40px;\n  width: 400px;\n  border: 2px solid #222;\n  background-color: #2c2c2c;\n  visibility: hidden;\n  display: none;\n  color: #f9f9f9;\n  font-family: Consolas, monaco, monospace;\n  font-size: 14px;\n  font-weight: 500; }\n  .captureMenuComponent.active {\n    visibility: visible;\n    display: block; }\n  .captureMenuComponent, .captureMenuComponent:after, .captureMenuComponent:before {\n    box-sizing: content-box; }\n\n.captureMenuLogComponent {\n  position: absolute;\n  padding: 7px;\n  z-index: 80000;\n  top: 66px;\n  left: 50%;\n  margin-left: -209px;\n  height: 40px;\n  width: 400px;\n  border: 2px solid #222;\n  background-color: #2c2c2c;\n  visibility: hidden;\n  display: none;\n  color: #f9f9f9;\n  font-family: Consolas, monaco, monospace;\n  font-size: 14px;\n  font-weight: 500; }\n  .captureMenuLogComponent.active {\n    visibility: visible;\n    display: block; }\n  .captureMenuLogComponent, .captureMenuLogComponent:after, .captureMenuLogComponent:before {\n    box-sizing: content-box; }\n  .captureMenuLogComponent span.error {\n    color: red; }\n\n.canvasListComponent {\n  float: left;\n  width: 50%;\n  height: 100%; }\n  .canvasListComponent [commandName=onCanvasSelection] {\n    vertical-align: center;\n    line-height: 40px;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    width: 190px;\n    display: inline-block;\n    overflow: hidden;\n    margin: 0px 5px; }\n    .canvasListComponent [commandName=onCanvasSelection]:hover {\n      color: #c9c9c9;\n      cursor: pointer;\n      transition: color 0.3s;\n      -webkit-transition: color 0.3s;\n      -moz-transition: color 0.3s; }\n  .canvasListComponent ul {\n    margin: 0px;\n    padding: 7px;\n    list-style: none;\n    position: absolute;\n    top: 54px;\n    left: -2px;\n    width: 400px;\n    border: 2px solid #222;\n    background-color: #2c2c2c; }\n    .canvasListComponent ul li {\n      margin: 5px; }\n      .canvasListComponent ul li:hover {\n        color: #c9c9c9;\n        cursor: pointer;\n        transition: color 0.3s;\n        -webkit-transition: color 0.3s;\n        -moz-transition: color 0.3s; }\n\n.captureMenuActionsComponent {\n  float: left;\n  width: 30%;\n  height: 100%;\n  margin-top: 7.5px; }\n  .captureMenuActionsComponent div {\n    float: left; }\n  .captureMenuActionsComponent [commandName=onCaptureRequested] {\n    border-radius: 50%;\n    background: #2c2c2c;\n    border: 2px solid red;\n    width: 21px;\n    height: 21px; }\n    .captureMenuActionsComponent [commandName=onCaptureRequested]:hover {\n      background: red;\n      cursor: pointer;\n      transition: background 0.3s;\n      -webkit-transition: background 0.3s;\n      -moz-transition: background 0.3s; }\n  .captureMenuActionsComponent [commandName=onPlayRequested], .captureMenuActionsComponent [commandName=onPlayNextFrameRequested] {\n    width: 21px;\n    height: 21px;\n    border: 2px solid #f9f9f9;\n    border-radius: 50%;\n    margin-left: 9px; }\n    .captureMenuActionsComponent [commandName=onPlayRequested]:before, .captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before {\n      content: \'\';\n      position: absolute;\n      display: inline-block;\n      margin-top: 6px;\n      margin-left: 4px;\n      width: 7px;\n      height: 7px;\n      border-top: 2px solid #f9f9f9;\n      border-right: 2px solid #f9f9f9;\n      background-color: #f9f9f9;\n      -moz-transform: rotate(45deg);\n      -webkit-transform: rotate(45deg);\n      transform: rotate(45deg);\n      z-index: -20; }\n    .captureMenuActionsComponent [commandName=onPlayRequested]:after, .captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:after {\n      content: \'\';\n      position: absolute;\n      display: inline-block;\n      width: 8px;\n      height: 20px;\n      background-color: #2c2c2c;\n      z-index: -10; }\n    .captureMenuActionsComponent [commandName=onPlayRequested]:hover, .captureMenuActionsComponent :hover[commandName=onPlayNextFrameRequested] {\n      cursor: pointer;\n      border: 2px solid #c9c9c9;\n      transition: border 0.3s;\n      -webkit-transition: border 0.3s;\n      -moz-transition: border 0.3s; }\n  .captureMenuActionsComponent [commandName=onPauseRequested] {\n    width: 21px;\n    height: 21px;\n    border: 2px solid #f9f9f9;\n    border-radius: 50%;\n    margin-left: 9px; }\n    .captureMenuActionsComponent [commandName=onPauseRequested]:before {\n      content: \'\';\n      position: absolute;\n      display: inline-block;\n      width: 2px;\n      height: 13px;\n      margin-left: 12px;\n      margin-top: 4px;\n      background-color: #f9f9f9; }\n    .captureMenuActionsComponent [commandName=onPauseRequested]:after {\n      content: \'\';\n      position: absolute;\n      display: inline-block;\n      width: 2px;\n      height: 13px;\n      margin-left: 7px;\n      margin-top: 4px;\n      background-color: #f9f9f9; }\n    .captureMenuActionsComponent [commandName=onPauseRequested]:hover {\n      cursor: pointer;\n      border: 2px solid #c9c9c9;\n      transition: border 0.3s;\n      -webkit-transition: border 0.3s;\n      -moz-transition: border 0.3s; }\n  .captureMenuActionsComponent [commandName=onPlayNextFrameRequested]:before {\n    background-color: #2c2c2c; }\n\n.fpsCounterComponent {\n  float: left;\n  width: 20%;\n  vertical-align: center;\n  line-height: 40px;\n  white-space: nowrap; }\n',''])},function(a,e,t){var n=t(13);'string'==typeof n&&(n=[[a.i,n,'']]);var o={insertInto:('html','html'),hmr:!0,transform:void 0};t(1)(n,o),n.locals&&(a.exports=n.locals)},function(r,e,t){(e=r.exports=t(0)(!1)).push([r.i,'@import url(https://fonts.googleapis.com/css?family=Montserrat:300,400);','']),e.push([r.i,'/* The main window */\n.resultViewComponent {\n  position: absolute;\n  z-index: 99999;\n  border: 1px solid black;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: #222;\n  opacity: 1;\n  visibility: hidden;\n  display: none;\n  color: #f9f9f9;\n  font-family: Consolas, monaco, monospace;\n  font-size: 14px;\n  font-weight: 500; }\n  .resultViewComponent.active {\n    visibility: visible;\n    display: block; }\n  .resultViewComponent, .resultViewComponent:after, .resultViewComponent:before {\n    box-sizing: content-box; }\n\n.resultViewMenuComponent {\n  font-family: \'Montserrat\', sans-serif;\n  font-size: 13px;\n  font-weight: 300;\n  line-height: 40px;\n  flex: 1 100%;\n  display: flex;\n  flex-flow: row wrap;\n  height: 42px;\n  outline: 0 none;\n  border-bottom: 2px solid #222;\n  box-sizing: border-box;\n  list-style: none;\n  margin: 0;\n  background: #2c2c2c;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-flow: row wrap;\n  flex-flow: row wrap;\n  justify-content: flex-end; }\n  .resultViewMenuComponent .resultViewMenuOpen {\n    display: none;\n    visibility: hidden; }\n  .resultViewMenuComponent a {\n    outline: 0 none;\n    text-decoration: none;\n    display: block;\n    padding: 0 20px 0 20px;\n    color: #cccccc;\n    background: #2c2c2c;\n    box-sizing: border-box;\n    height: 100%; }\n    .resultViewMenuComponent a.active {\n      background: #222;\n      color: white;\n      font-weight: 400;\n      border-bottom: 2px solid #F0640D; }\n    .resultViewMenuComponent a:hover {\n      background: #222;\n      color: #c9c9c9;\n      cursor: pointer;\n      transition: color 0.3s;\n      -webkit-transition: color 0.3s;\n      -moz-transition: color 0.3s; }\n      .resultViewMenuComponent a:hover.active {\n        color: #F0640D;\n        transition: color 0;\n        -webkit-transition: color 0;\n        -moz-transition: color 0; }\n    .resultViewMenuComponent a.clearSearch {\n      display: inline-block;\n      padding: 0px;\n      margin-left: -30px;\n      margin-right: 20px;\n      z-index: 9000;\n      color: #f9f9f9; }\n      .resultViewMenuComponent a.clearSearch:hover {\n        background: #2c2c2c;\n        color: #F0640D; }\n  @media all and (max-width: 1024px) {\n    .resultViewMenuComponent {\n      padding: 0px;\n      position: absolute;\n      overflow-y: visible;\n      top: 0px;\n      left: 0px;\n      right: 0px;\n      bottom: 0px;\n      z-index: 999999;\n      display: block; }\n      .resultViewMenuComponent .resultViewMenuOpen {\n        display: block;\n        visibility: visible; }\n      .resultViewMenuComponent li:not(.resultViewMenuSmall) {\n        display: none;\n        visibility: hidden; }\n      .resultViewMenuComponent li {\n        background: #2c2c2c; }\n      .resultViewMenuComponent li.searchContainer {\n        background: #464646; }\n      .resultViewMenuComponent a.active {\n        background: #2c2c2c; } }\n  .resultViewMenuComponent input {\n    border: 0;\n    font-family: \'Montserrat\', sans-serif;\n    font-weight: 300;\n    padding: 0 20px 0 20px;\n    background: #464646;\n    color: #f9f9f9;\n    height: 100%;\n    position: relative;\n    top: -1px;\n    box-sizing: border-box; }\n    .resultViewMenuComponent input:focus {\n      border: 0;\n      outline: 0 none; }\n  .resultViewMenuComponent .clearSearch {\n    position: relative;\n    background: transparent;\n    display: inline;\n    padding: 0px;\n    margin-left: -30px;\n    z-index: 9000;\n    color: #F0640D; }\n    .resultViewMenuComponent .clearSearch:hover {\n      background: transparent !important; }\n  .resultViewMenuComponent ::-webkit-input-placeholder {\n    /* WebKit, Blink, Edge */\n    color: #cccccc; }\n  .resultViewMenuComponent :-moz-placeholder {\n    /* Mozilla Firefox 4 to 18 */\n    color: #cccccc; }\n  .resultViewMenuComponent ::-moz-placeholder {\n    /* Mozilla Firefox 19+ */\n    color: #cccccc; }\n  .resultViewMenuComponent :-ms-input-placeholder {\n    /* Internet Explorer 10-11 */\n    color: #cccccc; }\n\n.resultViewContentComponent {\n  position: absolute;\n  top: 40px;\n  left: 0;\n  bottom: 0;\n  right: 0; }\n\n.informationColumnLeftComponent {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 50%;\n  overflow: auto;\n  overflow-x: hidden;\n  overflow-y: visible; }\n\n.informationColumnRightComponent {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  bottom: 0;\n  right: 0;\n  overflow: auto;\n  overflow-x: hidden;\n  overflow-y: visible; }\n\n.captureListComponent {\n  position: absolute;\n  top: 40px;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: #222;\n  z-index: 9000;\n  display: none;\n  visibility: hidden;\n  overflow-y: visible;\n  overflow-x: hidden; }\n  .captureListComponent.active {\n    display: block;\n    visibility: visible; }\n  .captureListComponent .openCaptureFile {\n    border: 1px dashed #f9f9f9;\n    display: block;\n    margin: 5px;\n    padding: 5px;\n    text-align: center;\n    font-style: italic; }\n    .captureListComponent .openCaptureFile span {\n      line-height: 100%;\n      vertical-align: middle; }\n  .captureListComponent ul {\n    margin: 0px;\n    padding: 0px;\n    list-style: none;\n    display: -webkit-box;\n    display: -moz-box;\n    display: -ms-flexbox;\n    display: -webkit-flex;\n    display: flex;\n    -webkit-flex-flow: row wrap;\n    flex-flow: row wrap;\n    justify-content: flex-start; }\n    .captureListComponent ul li {\n      margin: 5px;\n      border: 1px solid #606060; }\n      .captureListComponent ul li img {\n        width: 295px;\n        background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));\n        background-image: -moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%), -moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);\n        -webkit-background-size: 50px 51px;\n        -moz-background-size: 50px 50px;\n        background-size: 50px 50px;\n        background-position: 0 0, 25px 0, 25px -25px, 0px 25px;\n        display: block; }\n      .captureListComponent ul li span {\n        display: block;\n        text-align: center;\n        border: 5px solid #222; }\n        .captureListComponent ul li span .captureListItemSave {\n          color: #f9f9f9;\n          font-size: 16px;\n          margin-left: 10px;\n          position: relative;\n          padding: 3px 8px 3px 32px; }\n          .captureListComponent ul li span .captureListItemSave:before, .captureListComponent ul li span .captureListItemSave:after {\n            box-sizing: border-box;\n            content: "";\n            position: absolute; }\n          .captureListComponent ul li span .captureListItemSave:before {\n            background: #d9d9d9;\n            border-color: #f9f9f9;\n            border-style: solid;\n            border-width: 7px 2px 1px;\n            border-radius: 1px;\n            height: 16px;\n            left: 8px;\n            top: 5px;\n            width: 16px; }\n          .captureListComponent ul li span .captureListItemSave:after {\n            background: #f9f9f9;\n            border-color: #d9d9d9;\n            border-style: solid;\n            border-width: 1px 1px 1px 4px;\n            height: 5px;\n            left: 13px;\n            top: 5px;\n            width: 7px; }\n      .captureListComponent ul li:hover {\n        cursor: pointer; }\n      .captureListComponent ul li.active span {\n        background: #F0640D;\n        border: 5px solid #F0640D; }\n        .captureListComponent ul li.active span .captureListItemSave:before {\n          background: #F0640D; }\n        .captureListComponent ul li.active span .captureListItemSave:after {\n          border-color: #F0640D; }\n\n.visualStateListComponent {\n  position: absolute;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  padding: 5px;\n  right: 80%;\n  overflow-y: visible;\n  overflow-x: hidden; }\n  .visualStateListComponent ul {\n    margin: 0px;\n    padding: 0px;\n    list-style: none; }\n    .visualStateListComponent ul li {\n      margin: 20px 15px 0px 15px;\n      border: 1px solid #606060; }\n      .visualStateListComponent ul li img {\n        display: block;\n        width: 100%;\n        margin: 0px;\n        padding: 0px;\n        box-sizing: border-box;\n        background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));\n        background-image: -moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%), -moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);\n        -webkit-background-size: 50px 51px;\n        -moz-background-size: 50px 50px;\n        background-size: 50px 50px;\n        background-position: 0 0, 25px 0, 25px -25px, 0px 25px; }\n      .visualStateListComponent ul li:hover {\n        cursor: pointer; }\n      .visualStateListComponent ul li span {\n        border: 5px solid #222;\n        background: #222;\n        box-sizing: border-box;\n        display: inline-block;\n        width: 100%;\n        margin: 0px;\n        padding: 5px;\n        word-wrap: break-word; }\n      .visualStateListComponent ul li.active {\n        border: 2px solid #F0640D; }\n\n.commandListComponent {\n  position: absolute;\n  top: 0;\n  left: 20%;\n  right: 40%;\n  bottom: 0;\n  color: lightgray; }\n  .commandListComponent ul {\n    margin: 0px;\n    padding: 0px;\n    list-style: none;\n    overflow-y: visible;\n    overflow-x: hidden;\n    height: 100%; }\n    .commandListComponent ul li {\n      padding: 8px; }\n      .commandListComponent ul li span {\n        word-wrap: break-word;\n        line-height: 22px; }\n      .commandListComponent ul li:hover {\n        color: #f9f9f9;\n        cursor: pointer;\n        transition: color 0.3s;\n        -webkit-transition: color 0.3s;\n        -moz-transition: color 0.3s; }\n      .commandListComponent ul li:nth-child(even) {\n        background: #2c2c2c; }\n      .commandListComponent ul li:nth-child(odd) {\n        background: #222; }\n      .commandListComponent ul li .important {\n        font-weight: 800; }\n        .commandListComponent ul li .important.deprecated {\n          color: red; }\n        .commandListComponent ul li .important.unused {\n          color: yellow; }\n        .commandListComponent ul li .important.disabled {\n          color: gray; }\n        .commandListComponent ul li .important.redundant {\n          color: orange; }\n        .commandListComponent ul li .important.valid {\n          color: greenyellow; }\n      .commandListComponent ul li .marker {\n        font-size: 16px;\n        font-weight: 900;\n        color: greenyellow; }\n      .commandListComponent ul li.active {\n        background: #f37628;\n        color: #222; }\n      .commandListComponent ul li.drawCall {\n        background: #5db0d7;\n        color: #222; }\n      .commandListComponent ul li a {\n        margin-left: 5px;\n        margin-right: 5px;\n        color: #5db0d7;\n        background: #222;\n        padding: 5px;\n        font-weight: 900;\n        display: inline-block; }\n\n.commandDetailComponent {\n  position: absolute;\n  top: 0;\n  left: 60%;\n  right: 0;\n  bottom: 0;\n  overflow-y: visible;\n  overflow-x: hidden; }\n\n.jsonGroupComponent {\n  display: block;\n  margin: 10px;\n  padding: 10px;\n  padding-bottom: 5px; }\n  .jsonGroupComponent .jsonGroupComponentTitle {\n    display: block;\n    font-size: 16px;\n    color: #5db0d7;\n    border-bottom: 1px solid #5db0d7;\n    padding-bottom: 5px;\n    margin-bottom: 5px;\n    text-transform: capitalize; }\n  .jsonGroupComponent ul {\n    margin: 0px;\n    padding: 0px;\n    list-style: none; }\n    .jsonGroupComponent ul li:nth-child(even) {\n      background: #222; }\n    .jsonGroupComponent ul li:nth-child(odd) {\n      background: #222; }\n\n.jsonItemComponentKey {\n  color: #F0640D; }\n\n.jsonItemComponentValue {\n  white-space: pre-wrap; }\n\n.jsonItemImageHolder {\n  width: 50%;\n  margin: auto; }\n  .jsonItemImageHolder .jsonItemImage {\n    margin: 5px;\n    display: block;\n    border: 1px solid #606060;\n    width: 100%; }\n    .jsonItemImageHolder .jsonItemImage img {\n      width: 100%;\n      display: block;\n      margin: auto;\n      max-width: 256px;\n      background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));\n      background-image: -moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%), -moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);\n      -webkit-background-size: 50px 51px;\n      -moz-background-size: 50px 50px;\n      background-size: 50px 50px;\n      background-position: 0 0, 25px 0, 25px -25px, 0px 25px; }\n    .jsonItemImageHolder .jsonItemImage span {\n      margin: 0px;\n      padding: 5px;\n      word-wrap: break-word;\n      display: inline-block;\n      width: 100%;\n      box-sizing: border-box; }\n\n[commandName=onOpenSourceClicked]:hover {\n  color: #f9f9f9;\n  cursor: pointer;\n  transition: color 0.3s;\n  -webkit-transition: color 0.3s;\n  -moz-transition: color 0.3s; }\n\n.jsonVisualStateItemComponent {\n  text-align: center;\n  padding: 10px; }\n  .jsonVisualStateItemComponent img {\n    border: 1px solid #606060;\n    margin: 5px;\n    background-image: -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.25, #c9c9c9), color-stop(0.25, transparent)), -webkit-gradient(linear, 0 100%, 100% 0, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9)), -webkit-gradient(linear, 0 0, 100% 100%, color-stop(0.75, transparent), color-stop(0.75, #c9c9c9));\n    background-image: -moz-linear-gradient(45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(-45deg, #d9d9d9 25%, transparent 25%), -moz-linear-gradient(45deg, transparent 75%, #d9d9d9 75%), -moz-linear-gradient(-45deg, transparent 75%, #d9d9d9 75%);\n    -webkit-background-size: 50px 51px;\n    -moz-background-size: 50px 50px;\n    background-size: 50px 50px;\n    background-position: 0 0, 25px 0, 25px -25px, 0px 25px;\n    width: 100%;\n    max-width: 512px; }\n  .jsonVisualStateItemComponent span {\n    display: block; }\n\n.jsonContentComponent {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  padding: 10px;\n  overflow-y: visible;\n  overflow-x: hidden; }\n\n.jsonItemComponentValue {\n  word-break: break-all;\n  white-space: normal; }\n\n.jsonSourceItemComponentOpen {\n  font-weight: bold;\n  color: #5db0d7;\n  text-decoration: underline; }\n\n.sourceCodeMenuComponentContainer {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 40%; }\n\n.sourceCodeMenuComponent {\n  font-family: \'Montserrat\', sans-serif;\n  font-size: 13px;\n  font-weight: 300;\n  line-height: 40px;\n  flex: 1 100%;\n  display: flex;\n  flex-flow: row wrap;\n  height: 42px;\n  outline: 0 none;\n  border-bottom: 2px solid #222;\n  box-sizing: border-box;\n  list-style: none;\n  margin: 0;\n  background: #2c2c2c;\n  display: -webkit-box;\n  display: -moz-box;\n  display: -ms-flexbox;\n  display: -webkit-flex;\n  display: flex;\n  -webkit-flex-flow: row wrap;\n  flex-flow: row wrap;\n  justify-content: flex-end; }\n  .sourceCodeMenuComponent .resultViewMenuOpen {\n    display: none;\n    visibility: hidden; }\n  .sourceCodeMenuComponent a {\n    outline: 0 none;\n    text-decoration: none;\n    display: block;\n    padding: 0 20px 0 20px;\n    color: #cccccc;\n    background: #2c2c2c;\n    box-sizing: border-box;\n    height: 100%; }\n    .sourceCodeMenuComponent a.active {\n      background: #222;\n      color: white;\n      font-weight: 400;\n      border-bottom: 2px solid #F0640D; }\n    .sourceCodeMenuComponent a:hover {\n      background: #222;\n      color: #c9c9c9;\n      cursor: pointer;\n      transition: color 0.3s;\n      -webkit-transition: color 0.3s;\n      -moz-transition: color 0.3s; }\n      .sourceCodeMenuComponent a:hover.active {\n        color: #F0640D;\n        transition: color 0;\n        -webkit-transition: color 0;\n        -moz-transition: color 0; }\n    .sourceCodeMenuComponent a.clearSearch {\n      display: inline-block;\n      padding: 0px;\n      margin-left: -30px;\n      margin-right: 20px;\n      z-index: 9000;\n      color: #f9f9f9; }\n      .sourceCodeMenuComponent a.clearSearch:hover {\n        background: #2c2c2c;\n        color: #F0640D; }\n  .sourceCodeMenuComponent input {\n    border: 0;\n    font-family: \'Montserrat\', sans-serif;\n    font-weight: 300;\n    padding: 0 20px 0 20px;\n    background: #464646;\n    color: #f9f9f9;\n    height: 100%;\n    position: relative;\n    top: -1px;\n    box-sizing: border-box; }\n    .sourceCodeMenuComponent input:focus {\n      border: 0;\n      outline: 0 none; }\n  .sourceCodeMenuComponent .clearSearch {\n    position: relative;\n    background: transparent;\n    display: inline;\n    padding: 0px;\n    margin-left: -30px;\n    z-index: 9000;\n    color: #F0640D; }\n    .sourceCodeMenuComponent .clearSearch:hover {\n      background: transparent !important; }\n  .sourceCodeMenuComponent ::-webkit-input-placeholder {\n    /* WebKit, Blink, Edge */\n    color: #cccccc; }\n  .sourceCodeMenuComponent :-moz-placeholder {\n    /* Mozilla Firefox 4 to 18 */\n    color: #cccccc; }\n  .sourceCodeMenuComponent ::-moz-placeholder {\n    /* Mozilla Firefox 19+ */\n    color: #cccccc; }\n  .sourceCodeMenuComponent :-ms-input-placeholder {\n    /* Internet Explorer 10-11 */\n    color: #cccccc; }\n\n.sourceCodeComponentEditable, .sourceCodeComponent {\n  position: absolute;\n  top: 42px;\n  left: 0;\n  bottom: 0;\n  right: 40%;\n  background: #222;\n  z-index: 9000;\n  overflow-x: visible;\n  overflow: auto; }\n  .sourceCodeComponentEditable .sourceCodeComponentTitle, .sourceCodeComponent .sourceCodeComponentTitle {\n    font-size: 16px;\n    font-weight: 800;\n    line-height: 50px;\n    color: #F0640D;\n    padding: 1em;\n    margin: .5em 0; }\n',''])},function(er,e,t){'use strict';t.r(e);var tr=function(){function e(){}return e.isBuildableProgram=function(t){return!!t&&!!t[this.rebuildProgramFunctionName]},e.rebuildProgram=function(a,e,t,n,o){this.isBuildableProgram(a)&&a[this.rebuildProgramFunctionName](e,t,n,o)},e.rebuildProgramFunctionName='__SPECTOR_rebuildProgram',e}(),nr;!function(t){t[t.noLog=0]='noLog',t[t.error=1]='error',t[t.warning=2]='warning',t[t.info=3]='info'}(nr||(nr={}));var rr=function(){function e(){}return e.error=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];0<this.level&&console.error(r,e)},e.warn=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];1<this.level&&console.warn(r,e)},e.info=function(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];2<this.level&&console.log(r,e)},e.level=nr.warning,e}(),r=function(){function e(){this.callbacks=[],this.counter=-1}return e.prototype.add=function(n,e){return this.counter++,e&&(n=n.bind(e)),this.callbacks[this.counter]=n,this.counter},e.prototype.remove=function(t){delete this.callbacks[t]},e.prototype.clear=function(){this.callbacks={}},e.prototype.trigger=function(n){for(var e in this.callbacks)this.callbacks.hasOwnProperty(e)&&this.callbacks[e](n)},e}(),o=function(){function e(){if(window.performance&&window.performance.now)this.nowFunction=this.dateBasedPerformanceNow.bind(this);else{var t=new Date;this.nowFunction=t.getTime.bind(t)}}return e.prototype.dateBasedPerformanceNow=function(){return performance.timing.navigationStart+performance.now()},Object.defineProperty(e,'now',{get:function(){return e.instance.nowFunction()},enumerable:!0,configurable:!0}),e.instance=new e,e}(),n=function(){function e(t){this.options=t}return e.prototype.appendAnalysis=function(n){n.analyses=n.analyses||[];var e=this.getAnalysis(n);n.analyses.push(e)},e.prototype.getAnalysis=function(n){var e={analyserName:this.analyserName};return this.appendToAnalysis(n,e),e},e}(),a=(m=function(n,e){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(n,e)},function(r,e){function n(){this.constructor=r}m(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return a(t,n),Object.defineProperty(t.prototype,'analyserName',{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(d,e){if(d.commands){for(var t={},n=0,i=d.commands,r;n<i.length;n++)r=i[n],t[r.name]=t[r.name]||0,t[r.name]++;var o=Object.keys(t).map(function(n){return[n,t[n]]});o.sort(function(r,e){var t=e[1]-r[1];return 0==t?r[0].localeCompare(e[0]):t});for(var s=0,a=o,c;s<a.length;s++)c=a[s],e[c[0]]=c[1]}},t.analyserName='Commands',t}(n),s=['drawArrays','drawElements','drawArraysInstanced','drawArraysInstancedANGLE','drawElementsInstanced','drawElementsInstancedANGLE','drawRangeElements'],l=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),u=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return l(t,n),Object.defineProperty(t.prototype,'analyserName',{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(a,e){if(a.commands){e.total=a.commands.length,e.draw=0,e.clear=0;for(var t=0,n=a.commands,o;t<n.length;t++)o=n[t],'clear'===o.name?e.clear++:-1<s.indexOf(o.name)&&e.draw++}},t.analyserName='CommandsSummary',t}(n),ar=function(){function e(){}return e.isWebGlConstant=function(t){return null!==g[t]&&void 0!==g[t]},e.stringifyWebGlConstant=function(r,e){if(0===r)return this.zeroMeaningByCommand[e]||'0';if(1===r)return this.oneMeaningByCommand[e]||'1';var t=g[r];return t?t.name:r+''},e.DEPTH_BUFFER_BIT={name:'DEPTH_BUFFER_BIT',value:256,description:'Passed to clear to clear the current depth buffer.'},e.STENCIL_BUFFER_BIT={name:'STENCIL_BUFFER_BIT',value:1024,description:'Passed to clear to clear the current stencil buffer.'},e.COLOR_BUFFER_BIT={name:'COLOR_BUFFER_BIT',value:16384,description:'Passed to clear to clear the current color buffer.'},e.POINTS={name:'POINTS',value:0,description:'Passed to drawElements or drawArrays to draw single points.'},e.LINES={name:'LINES',value:1,description:'Passed to drawElements or drawArrays to draw lines. Each vertex connects to the one after it.'},e.LINE_LOOP={name:'LINE_LOOP',value:2,description:'Passed to drawElements or drawArrays to draw lines. Each set of two vertices is treated as a separate line segment.'},e.LINE_STRIP={name:'LINE_STRIP',value:3,description:'Passed to drawElements or drawArrays to draw a connected group of line segments from the first vertex to the last.'},e.TRIANGLES={name:'TRIANGLES',value:4,description:'Passed to drawElements or drawArrays to draw triangles. Each set of three vertices creates a separate triangle.'},e.TRIANGLE_STRIP={name:'TRIANGLE_STRIP',value:5,description:'Passed to drawElements or drawArrays to draw a connected group of triangles.'},e.TRIANGLE_FAN={name:'TRIANGLE_FAN',value:6,description:'Passed to drawElements or drawArrays to draw a connected group of triangles. Each vertex connects to the previous and the first vertex in the fan.'},e.ZERO={name:'ZERO',value:0,description:'Passed to blendFunc or blendFuncSeparate to turn off a component.'},e.ONE={name:'ONE',value:1,description:'Passed to blendFunc or blendFuncSeparate to turn on a component.'},e.SRC_COLOR={name:'SRC_COLOR',value:768,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the source elements color.'},e.ONE_MINUS_SRC_COLOR={name:'ONE_MINUS_SRC_COLOR',value:769,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source elements color.'},e.SRC_ALPHA={name:'SRC_ALPHA',value:770,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the source\'s alpha.'},e.ONE_MINUS_SRC_ALPHA={name:'ONE_MINUS_SRC_ALPHA',value:771,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the source\'s alpha.'},e.DST_ALPHA={name:'DST_ALPHA',value:772,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the destination\'s alpha.'},e.ONE_MINUS_DST_ALPHA={name:'ONE_MINUS_DST_ALPHA',value:773,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination\'s alpha.'},e.DST_COLOR={name:'DST_COLOR',value:774,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the destination\'s color.'},e.ONE_MINUS_DST_COLOR={name:'ONE_MINUS_DST_COLOR',value:775,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by one minus the destination\'s color.'},e.SRC_ALPHA_SATURATE={name:'SRC_ALPHA_SATURATE',value:776,description:'Passed to blendFunc or blendFuncSeparate to multiply a component by the minimum of source\'s alpha or one minus the destination\'s alpha.'},e.CONSTANT_COLOR={name:'CONSTANT_COLOR',value:32769,description:'Passed to blendFunc or blendFuncSeparate to specify a constant color blend function.'},e.ONE_MINUS_CONSTANT_COLOR={name:'ONE_MINUS_CONSTANT_COLOR',value:32770,description:'Passed to blendFunc or blendFuncSeparate to specify one minus a constant color blend function.'},e.CONSTANT_ALPHA={name:'CONSTANT_ALPHA',value:32771,description:'Passed to blendFunc or blendFuncSeparate to specify a constant alpha blend function.'},e.ONE_MINUS_CONSTANT_ALPHA={name:'ONE_MINUS_CONSTANT_ALPHA',value:32772,description:'Passed to blendFunc or blendFuncSeparate to specify one minus a constant alpha blend function.'},e.FUNC_ADD={name:'FUNC_ADD',value:32774,description:'Passed to blendEquation or blendEquationSeparate to set an addition blend function.'},e.FUNC_SUBSTRACT={name:'FUNC_SUBSTRACT',value:32778,description:'Passed to blendEquation or blendEquationSeparate to specify a subtraction blend function (source - destination).'},e.FUNC_REVERSE_SUBTRACT={name:'FUNC_REVERSE_SUBTRACT',value:32779,description:'Passed to blendEquation or blendEquationSeparate to specify a reverse subtraction blend function (destination - source).'},e.BLEND_EQUATION={name:'BLEND_EQUATION',value:32777,description:'Passed to getParameter to get the current RGB blend function.'},e.BLEND_EQUATION_RGB={name:'BLEND_EQUATION_RGB',value:32777,description:'Passed to getParameter to get the current RGB blend function. Same as BLEND_EQUATION'},e.BLEND_EQUATION_ALPHA={name:'BLEND_EQUATION_ALPHA',value:34877,description:'Passed to getParameter to get the current alpha blend function. Same as BLEND_EQUATION'},e.BLEND_DST_RGB={name:'BLEND_DST_RGB',value:32968,description:'Passed to getParameter to get the current destination RGB blend function.'},e.BLEND_SRC_RGB={name:'BLEND_SRC_RGB',value:32969,description:'Passed to getParameter to get the current destination RGB blend function.'},e.BLEND_DST_ALPHA={name:'BLEND_DST_ALPHA',value:32970,description:'Passed to getParameter to get the current destination alpha blend function.'},e.BLEND_SRC_ALPHA={name:'BLEND_SRC_ALPHA',value:32971,description:'Passed to getParameter to get the current source alpha blend function.'},e.BLEND_COLOR={name:'BLEND_COLOR',value:32773,description:'Passed to getParameter to return a the current blend color.'},e.ARRAY_BUFFER_BINDING={name:'ARRAY_BUFFER_BINDING',value:34964,description:'Passed to getParameter to get the array buffer binding.'},e.ELEMENT_ARRAY_BUFFER_BINDING={name:'ELEMENT_ARRAY_BUFFER_BINDING',value:34965,description:'Passed to getParameter to get the current element array buffer.'},e.LINE_WIDTH={name:'LINE_WIDTH',value:2849,description:'Passed to getParameter to get the current lineWidth (set by the lineWidth method).'},e.ALIASED_POINT_SIZE_RANGE={name:'ALIASED_POINT_SIZE_RANGE',value:33901,description:'Passed to getParameter to get the current size of a point drawn with gl.POINTS'},e.ALIASED_LINE_WIDTH_RANGE={name:'ALIASED_LINE_WIDTH_RANGE',value:33902,description:'Passed to getParameter to get the range of available widths for a line. Returns a length-2 array with the lo value at 0, and hight at 1.'},e.CULL_FACE_MODE={name:'CULL_FACE_MODE',value:2885,description:'Passed to getParameter to get the current value of cullFace. Should return FRONT, BACK, or FRONT_AND_BACK'},e.FRONT_FACE={name:'FRONT_FACE',value:2886,description:'Passed to getParameter to determine the current value of frontFace. Should return CW or CCW.'},e.DEPTH_RANGE={name:'DEPTH_RANGE',value:2928,description:'Passed to getParameter to return a length-2 array of floats giving the current depth range.'},e.DEPTH_WRITEMASK={name:'DEPTH_WRITEMASK',value:2930,description:'Passed to getParameter to determine if the depth write mask is enabled.'},e.DEPTH_CLEAR_VALUE={name:'DEPTH_CLEAR_VALUE',value:2931,description:'Passed to getParameter to determine the current depth clear value.'},e.DEPTH_FUNC={name:'DEPTH_FUNC',value:2932,description:'Passed to getParameter to get the current depth function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.'},e.STENCIL_CLEAR_VALUE={name:'STENCIL_CLEAR_VALUE',value:2961,description:'Passed to getParameter to get the value the stencil will be cleared to.'},e.STENCIL_FUNC={name:'STENCIL_FUNC',value:2962,description:'Passed to getParameter to get the current stencil function. Returns NEVER, ALWAYS, LESS, EQUAL, LEQUAL, GREATER, GEQUAL, or NOTEQUAL.'},e.STENCIL_FAIL={name:'STENCIL_FAIL',value:2964,description:'Passed to getParameter to get the current stencil fail function. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},e.STENCIL_PASS_DEPTH_FAIL={name:'STENCIL_PASS_DEPTH_FAIL',value:2965,description:'Passed to getParameter to get the current stencil fail function should the depth buffer test fail. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},e.STENCIL_PASS_DEPTH_PASS={name:'STENCIL_PASS_DEPTH_PASS',value:2966,description:'Passed to getParameter to get the current stencil fail function should the depth buffer test pass. Should return KEEP, REPLACE, INCR, DECR, INVERT, INCR_WRAP, or DECR_WRAP.'},e.STENCIL_REF={name:'STENCIL_REF',value:2967,description:'Passed to getParameter to get the reference value used for stencil tests.'},e.STENCIL_VALUE_MASK={name:'STENCIL_VALUE_MASK',value:2963,description:'\xA0'},e.STENCIL_WRITEMASK={name:'STENCIL_WRITEMASK',value:2968,description:'\xA0'},e.STENCIL_BACK_FUNC={name:'STENCIL_BACK_FUNC',value:34816,description:'\xA0'},e.STENCIL_BACK_FAIL={name:'STENCIL_BACK_FAIL',value:34817,description:'\xA0'},e.STENCIL_BACK_PASS_DEPTH_FAIL={name:'STENCIL_BACK_PASS_DEPTH_FAIL',value:34818,description:'\xA0'},e.STENCIL_BACK_PASS_DEPTH_PASS={name:'STENCIL_BACK_PASS_DEPTH_PASS',value:34819,description:'\xA0'},e.STENCIL_BACK_REF={name:'STENCIL_BACK_REF',value:36003,description:'\xA0'},e.STENCIL_BACK_VALUE_MASK={name:'STENCIL_BACK_VALUE_MASK',value:36004,description:'\xA0'},e.STENCIL_BACK_WRITEMASK={name:'STENCIL_BACK_WRITEMASK',value:36005,description:'\xA0'},e.VIEWPORT={name:'VIEWPORT',value:2978,description:'Returns an Int32Array with four elements for the current viewport dimensions.'},e.SCISSOR_BOX={name:'SCISSOR_BOX',value:3088,description:'Returns an Int32Array with four elements for the current scissor box dimensions.'},e.COLOR_CLEAR_VALUE={name:'COLOR_CLEAR_VALUE',value:3106,description:'\xA0'},e.COLOR_WRITEMASK={name:'COLOR_WRITEMASK',value:3107,description:'\xA0'},e.UNPACK_ALIGNMENT={name:'UNPACK_ALIGNMENT',value:3317,description:'\xA0'},e.PACK_ALIGNMENT={name:'PACK_ALIGNMENT',value:3333,description:'\xA0'},e.MAX_TEXTURE_SIZE={name:'MAX_TEXTURE_SIZE',value:3379,description:'\xA0'},e.MAX_VIEWPORT_DIMS={name:'MAX_VIEWPORT_DIMS',value:3386,description:'\xA0'},e.SUBPIXEL_BITS={name:'SUBPIXEL_BITS',value:3408,description:'\xA0'},e.RED_BITS={name:'RED_BITS',value:3410,description:'\xA0'},e.GREEN_BITS={name:'GREEN_BITS',value:3411,description:'\xA0'},e.BLUE_BITS={name:'BLUE_BITS',value:3412,description:'\xA0'},e.ALPHA_BITS={name:'ALPHA_BITS',value:3413,description:'\xA0'},e.DEPTH_BITS={name:'DEPTH_BITS',value:3414,description:'\xA0'},e.STENCIL_BITS={name:'STENCIL_BITS',value:3415,description:'\xA0'},e.POLYGON_OFFSET_UNITS={name:'POLYGON_OFFSET_UNITS',value:10752,description:'\xA0'},e.POLYGON_OFFSET_FACTOR={name:'POLYGON_OFFSET_FACTOR',value:32824,description:'\xA0'},e.TEXTURE_BINDING_2D={name:'TEXTURE_BINDING_2D',value:32873,description:'\xA0'},e.SAMPLE_BUFFERS={name:'SAMPLE_BUFFERS',value:32936,description:'\xA0'},e.SAMPLES={name:'SAMPLES',value:32937,description:'\xA0'},e.SAMPLE_COVERAGE_VALUE={name:'SAMPLE_COVERAGE_VALUE',value:32938,description:'\xA0'},e.SAMPLE_COVERAGE_INVERT={name:'SAMPLE_COVERAGE_INVERT',value:32939,description:'\xA0'},e.COMPRESSED_TEXTURE_FORMATS={name:'COMPRESSED_TEXTURE_FORMATS',value:34467,description:'\xA0'},e.VENDOR={name:'VENDOR',value:7936,description:'\xA0'},e.RENDERER={name:'RENDERER',value:7937,description:'\xA0'},e.VERSION={name:'VERSION',value:7938,description:'\xA0'},e.IMPLEMENTATION_COLOR_READ_TYPE={name:'IMPLEMENTATION_COLOR_READ_TYPE',value:35738,description:'\xA0'},e.IMPLEMENTATION_COLOR_READ_FORMAT={name:'IMPLEMENTATION_COLOR_READ_FORMAT',value:35739,description:'\xA0'},e.BROWSER_DEFAULT_WEBGL={name:'BROWSER_DEFAULT_WEBGL',value:37444,description:'\xA0'},e.STATIC_DRAW={name:'STATIC_DRAW',value:35044,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and not change often.'},e.STREAM_DRAW={name:'STREAM_DRAW',value:35040,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to not be used often.'},e.DYNAMIC_DRAW={name:'DYNAMIC_DRAW',value:35048,description:'Passed to bufferData as a hint about whether the contents of the buffer are likely to be used often and change often.'},e.ARRAY_BUFFER={name:'ARRAY_BUFFER',value:34962,description:'Passed to bindBuffer or bufferData to specify the type of buffer being used.'},e.ELEMENT_ARRAY_BUFFER={name:'ELEMENT_ARRAY_BUFFER',value:34963,description:'Passed to bindBuffer or bufferData to specify the type of buffer being used.'},e.BUFFER_SIZE={name:'BUFFER_SIZE',value:34660,description:'Passed to getBufferParameter to get a buffer\'s size.'},e.BUFFER_USAGE={name:'BUFFER_USAGE',value:34661,description:'Passed to\xA0getBufferParameter to get the hint for the buffer passed in when it was created.'},e.CURRENT_VERTEX_ATTRIB={name:'CURRENT_VERTEX_ATTRIB',value:34342,description:'Passed to getVertexAttrib to read back the current vertex attribute.'},e.VERTEX_ATTRIB_ARRAY_ENABLED={name:'VERTEX_ATTRIB_ARRAY_ENABLED',value:34338,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_SIZE={name:'VERTEX_ATTRIB_ARRAY_SIZE',value:34339,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_STRIDE={name:'VERTEX_ATTRIB_ARRAY_STRIDE',value:34340,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_TYPE={name:'VERTEX_ATTRIB_ARRAY_TYPE',value:34341,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_NORMALIZED={name:'VERTEX_ATTRIB_ARRAY_NORMALIZED',value:34922,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_POINTER={name:'VERTEX_ATTRIB_ARRAY_POINTER',value:34373,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING={name:'VERTEX_ATTRIB_ARRAY_BUFFER_BINDING',value:34975,description:'\xA0'},e.CULL_FACE={name:'CULL_FACE',value:2884,description:'Passed to enable/disable to turn on/off culling. Can also be used with getParameter to find the current culling method.'},e.FRONT={name:'FRONT',value:1028,description:'Passed to cullFace to specify that only front faces should be drawn.'},e.BACK={name:'BACK',value:1029,description:'Passed to cullFace to specify that only back faces should be drawn.'},e.FRONT_AND_BACK={name:'FRONT_AND_BACK',value:1032,description:'Passed to\xA0cullFace to specify that front and back faces should be drawn.'},e.BLEND={name:'BLEND',value:3042,description:'Passed to enable/disable to turn on/off blending. Can also be used with getParameter to find the current blending method.'},e.DEPTH_TEST={name:'DEPTH_TEST',value:2929,description:'Passed to enable/disable to turn on/off the depth test. Can also be used with getParameter to query the depth test.'},e.DITHER={name:'DITHER',value:3024,description:'Passed to enable/disable to turn on/off dithering. Can also be used with getParameter to find the current dithering method.'},e.POLYGON_OFFSET_FILL={name:'POLYGON_OFFSET_FILL',value:32823,description:'Passed to enable/disable to turn on/off the polygon offset. Useful for rendering hidden-line images, decals, and or solids with highlighted edges. Can also be used with getParameter to query the scissor test.'},e.SAMPLE_ALPHA_TO_COVERAGE={name:'SAMPLE_ALPHA_TO_COVERAGE',value:32926,description:'Passed to enable/disable to turn on/off the alpha to coverage. Used in multi-sampling alpha channels.'},e.SAMPLE_COVERAGE={name:'SAMPLE_COVERAGE',value:32928,description:'Passed to enable/disable to turn on/off the sample coverage. Used in multi-sampling.'},e.SCISSOR_TEST={name:'SCISSOR_TEST',value:3089,description:'Passed to enable/disable to turn on/off the scissor test. Can also be used with getParameter to query the scissor test.'},e.STENCIL_TEST={name:'STENCIL_TEST',value:2960,description:'Passed to enable/disable to turn on/off the stencil test. Can also be used with getParameter to query the stencil test.'},e.NO_ERROR={name:'NO_ERROR',value:0,description:'Returned from getError.'},e.INVALID_ENUM={name:'INVALID_ENUM',value:1280,description:'Returned from getError.'},e.INVALID_VALUE={name:'INVALID_VALUE',value:1281,description:'Returned from getError.'},e.INVALID_OPERATION={name:'INVALID_OPERATION',value:1282,description:'Returned from getError.'},e.OUT_OF_MEMORY={name:'OUT_OF_MEMORY',value:1285,description:'Returned from getError.'},e.CONTEXT_LOST_WEBGL={name:'CONTEXT_LOST_WEBGL',value:37442,description:'Returned from getError.'},e.CW={name:'CW',value:2304,description:'Passed to frontFace to specify the front face of a polygon is drawn in the clockwise direction'},e.CCW={name:'CCW',value:2305,description:'Passed to frontFace to specify the front face of a polygon is drawn in the counter clockwise direction'},e.DONT_CARE={name:'DONT_CARE',value:4352,description:'There is no preference for this behavior.'},e.FASTEST={name:'FASTEST',value:4353,description:'The most efficient behavior should be used.'},e.NICEST={name:'NICEST',value:4354,description:'The most correct or the highest quality option should be used.'},e.GENERATE_MIPMAP_HINT={name:'GENERATE_MIPMAP_HINT',value:33170,description:'Hint for the quality of filtering when generating mipmap images with WebGLRenderingContext.generateMipmap().'},e.BYTE={name:'BYTE',value:5120,description:'\xA0'},e.UNSIGNED_BYTE={name:'UNSIGNED_BYTE',value:5121,description:'\xA0'},e.SHORT={name:'SHORT',value:5122,description:'\xA0'},e.UNSIGNED_SHORT={name:'UNSIGNED_SHORT',value:5123,description:'\xA0'},e.INT={name:'INT',value:5124,description:'\xA0'},e.UNSIGNED_INT={name:'UNSIGNED_INT',value:5125,description:'\xA0'},e.FLOAT={name:'FLOAT',value:5126,description:'\xA0'},e.DEPTH_COMPONENT={name:'DEPTH_COMPONENT',value:6402,description:'\xA0'},e.ALPHA={name:'ALPHA',value:6406,description:'\xA0'},e.RGB={name:'RGB',value:6407,description:'\xA0'},e.RGBA={name:'RGBA',value:6408,description:'\xA0'},e.LUMINANCE={name:'LUMINANCE',value:6409,description:'\xA0'},e.LUMINANCE_ALPHA={name:'LUMINANCE_ALPHA',value:6410,description:'\xA0'},e.UNSIGNED_SHORT_4_4_4_4={name:'UNSIGNED_SHORT_4_4_4_4',value:32819,description:'\xA0'},e.UNSIGNED_SHORT_5_5_5_1={name:'UNSIGNED_SHORT_5_5_5_1',value:32820,description:'\xA0'},e.UNSIGNED_SHORT_5_6_5={name:'UNSIGNED_SHORT_5_6_5',value:33635,description:'\xA0'},e.FRAGMENT_SHADER={name:'FRAGMENT_SHADER',value:35632,description:'Passed to createShader to define a fragment shader.'},e.VERTEX_SHADER={name:'VERTEX_SHADER',value:35633,description:'Passed to createShader to define a vertex shader'},e.COMPILE_STATUS={name:'COMPILE_STATUS',value:35713,description:'Passed to getShaderParamter to get the status of the compilation. Returns false if the shader was not compiled. You can then query getShaderInfoLog to find the exact error'},e.DELETE_STATUS={name:'DELETE_STATUS',value:35712,description:'Passed to getShaderParamter to determine if a shader was deleted via deleteShader. Returns true if it was, false otherwise.'},e.LINK_STATUS={name:'LINK_STATUS',value:35714,description:'Passed to getProgramParameter after calling linkProgram to determine if a program was linked correctly. Returns false if there were errors. Use getProgramInfoLog to find the exact error.'},e.VALIDATE_STATUS={name:'VALIDATE_STATUS',value:35715,description:'Passed to getProgramParameter after calling validateProgram to determine if it is valid. Returns false if errors were found.'},e.ATTACHED_SHADERS={name:'ATTACHED_SHADERS',value:35717,description:'Passed to getProgramParameter after calling attachShader to determine if the shader was attached correctly. Returns false if errors occurred.'},e.ACTIVE_ATTRIBUTES={name:'ACTIVE_ATTRIBUTES',value:35721,description:'Passed to getProgramParameter to get the number of attributes active in a program.'},e.ACTIVE_UNIFORMS={name:'ACTIVE_UNIFORMS',value:35718,description:'Passed to getProgramParamter to get the number of uniforms active in a program.'},e.MAX_VERTEX_ATTRIBS={name:'MAX_VERTEX_ATTRIBS',value:34921,description:'\xA0'},e.MAX_VERTEX_UNIFORM_VECTORS={name:'MAX_VERTEX_UNIFORM_VECTORS',value:36347,description:'\xA0'},e.MAX_VARYING_VECTORS={name:'MAX_VARYING_VECTORS',value:36348,description:'\xA0'},e.MAX_COMBINED_TEXTURE_IMAGE_UNITS={name:'MAX_COMBINED_TEXTURE_IMAGE_UNITS',value:35661,description:'\xA0'},e.MAX_VERTEX_TEXTURE_IMAGE_UNITS={name:'MAX_VERTEX_TEXTURE_IMAGE_UNITS',value:35660,description:'\xA0'},e.MAX_TEXTURE_IMAGE_UNITS={name:'MAX_TEXTURE_IMAGE_UNITS',value:34930,description:'Implementation dependent number of maximum texture units. At least 8.'},e.MAX_FRAGMENT_UNIFORM_VECTORS={name:'MAX_FRAGMENT_UNIFORM_VECTORS',value:36349,description:'\xA0'},e.SHADER_TYPE={name:'SHADER_TYPE',value:35663,description:'\xA0'},e.SHADING_LANGUAGE_VERSION={name:'SHADING_LANGUAGE_VERSION',value:35724,description:'\xA0'},e.CURRENT_PROGRAM={name:'CURRENT_PROGRAM',value:35725,description:'\xA0'},e.NEVER={name:'NEVER',value:512,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will never pass. i.e. Nothing will be drawn.'},e.ALWAYS={name:'ALWAYS',value:519,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will always pass. i.e. Pixels will be drawn in the order they are drawn.'},e.LESS={name:'LESS',value:513,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than the stored value.'},e.EQUAL={name:'EQUAL',value:514,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is equals to the stored value.'},e.LEQUAL={name:'LEQUAL',value:515,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is less than or equal to the stored value.'},e.GREATER={name:'GREATER',value:516,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than the stored value.'},e.GEQUAL={name:'GEQUAL',value:518,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is greater than or equal to the stored value.'},e.NOTEQUAL={name:'NOTEQUAL',value:517,description:'Passed to depthFunction or stencilFunction to specify depth or stencil tests will pass if the new depth value is not equal to the stored value.'},e.KEEP={name:'KEEP',value:7680,description:'\xA0'},e.REPLACE={name:'REPLACE',value:7681,description:'\xA0'},e.INCR={name:'INCR',value:7682,description:'\xA0'},e.DECR={name:'DECR',value:7683,description:'\xA0'},e.INVERT={name:'INVERT',value:5386,description:'\xA0'},e.INCR_WRAP={name:'INCR_WRAP',value:34055,description:'\xA0'},e.DECR_WRAP={name:'DECR_WRAP',value:34056,description:'\xA0'},e.NEAREST={name:'NEAREST',value:9728,description:'\xA0'},e.LINEAR={name:'LINEAR',value:9729,description:'\xA0'},e.NEAREST_MIPMAP_NEAREST={name:'NEAREST_MIPMAP_NEAREST',value:9984,description:'\xA0'},e.LINEAR_MIPMAP_NEAREST={name:'LINEAR_MIPMAP_NEAREST',value:9985,description:'\xA0'},e.NEAREST_MIPMAP_LINEAR={name:'NEAREST_MIPMAP_LINEAR',value:9986,description:'\xA0'},e.LINEAR_MIPMAP_LINEAR={name:'LINEAR_MIPMAP_LINEAR',value:9987,description:'\xA0'},e.TEXTURE_MAG_FILTER={name:'TEXTURE_MAG_FILTER',value:10240,description:'\xA0'},e.TEXTURE_MIN_FILTER={name:'TEXTURE_MIN_FILTER',value:10241,description:'\xA0'},e.TEXTURE_WRAP_S={name:'TEXTURE_WRAP_S',value:10242,description:'\xA0'},e.TEXTURE_WRAP_T={name:'TEXTURE_WRAP_T',value:10243,description:'\xA0'},e.TEXTURE_2D={name:'TEXTURE_2D',value:3553,description:'\xA0'},e.TEXTURE={name:'TEXTURE',value:5890,description:'\xA0'},e.TEXTURE_CUBE_MAP={name:'TEXTURE_CUBE_MAP',value:34067,description:'\xA0'},e.TEXTURE_BINDING_CUBE_MAP={name:'TEXTURE_BINDING_CUBE_MAP',value:34068,description:'\xA0'},e.TEXTURE_CUBE_MAP_POSITIVE_X={name:'TEXTURE_CUBE_MAP_POSITIVE_X',value:34069,description:'\xA0'},e.TEXTURE_CUBE_MAP_NEGATIVE_X={name:'TEXTURE_CUBE_MAP_NEGATIVE_X',value:34070,description:'\xA0'},e.TEXTURE_CUBE_MAP_POSITIVE_Y={name:'TEXTURE_CUBE_MAP_POSITIVE_Y',value:34071,description:'\xA0'},e.TEXTURE_CUBE_MAP_NEGATIVE_Y={name:'TEXTURE_CUBE_MAP_NEGATIVE_Y',value:34072,description:'\xA0'},e.TEXTURE_CUBE_MAP_POSITIVE_Z={name:'TEXTURE_CUBE_MAP_POSITIVE_Z',value:34073,description:'\xA0'},e.TEXTURE_CUBE_MAP_NEGATIVE_Z={name:'TEXTURE_CUBE_MAP_NEGATIVE_Z',value:34074,description:'\xA0'},e.MAX_CUBE_MAP_TEXTURE_SIZE={name:'MAX_CUBE_MAP_TEXTURE_SIZE',value:34076,description:'\xA0'},e.TEXTURE0={name:'TEXTURE0',value:33984,description:'A texture unit.'},e.TEXTURE1={name:'TEXTURE1',value:33985,description:'A texture unit.'},e.TEXTURE2={name:'TEXTURE2',value:33986,description:'A texture unit.'},e.TEXTURE3={name:'TEXTURE3',value:33987,description:'A texture unit.'},e.TEXTURE4={name:'TEXTURE4',value:33988,description:'A texture unit.'},e.TEXTURE5={name:'TEXTURE5',value:33989,description:'A texture unit.'},e.TEXTURE6={name:'TEXTURE6',value:33990,description:'A texture unit.'},e.TEXTURE7={name:'TEXTURE7',value:33991,description:'A texture unit.'},e.TEXTURE8={name:'TEXTURE8',value:33992,description:'A texture unit.'},e.TEXTURE9={name:'TEXTURE9',value:33993,description:'A texture unit.'},e.TEXTURE10={name:'TEXTURE10',value:33994,description:'A texture unit.'},e.TEXTURE11={name:'TEXTURE11',value:33995,description:'A texture unit.'},e.TEXTURE12={name:'TEXTURE12',value:33996,description:'A texture unit.'},e.TEXTURE13={name:'TEXTURE13',value:33997,description:'A texture unit.'},e.TEXTURE14={name:'TEXTURE14',value:33998,description:'A texture unit.'},e.TEXTURE15={name:'TEXTURE15',value:33999,description:'A texture unit.'},e.TEXTURE16={name:'TEXTURE16',value:34e3,description:'A texture unit.'},e.TEXTURE17={name:'TEXTURE17',value:34001,description:'A texture unit.'},e.TEXTURE18={name:'TEXTURE18',value:34002,description:'A texture unit.'},e.TEXTURE19={name:'TEXTURE19',value:34003,description:'A texture unit.'},e.TEXTURE20={name:'TEXTURE20',value:34004,description:'A texture unit.'},e.TEXTURE21={name:'TEXTURE21',value:34005,description:'A texture unit.'},e.TEXTURE22={name:'TEXTURE22',value:34006,description:'A texture unit.'},e.TEXTURE23={name:'TEXTURE23',value:34007,description:'A texture unit.'},e.TEXTURE24={name:'TEXTURE24',value:34008,description:'A texture unit.'},e.TEXTURE25={name:'TEXTURE25',value:34009,description:'A texture unit.'},e.TEXTURE26={name:'TEXTURE26',value:34010,description:'A texture unit.'},e.TEXTURE27={name:'TEXTURE27',value:34011,description:'A texture unit.'},e.TEXTURE28={name:'TEXTURE28',value:34012,description:'A texture unit.'},e.TEXTURE29={name:'TEXTURE29',value:34013,description:'A texture unit.'},e.TEXTURE30={name:'TEXTURE30',value:34014,description:'A texture unit.'},e.TEXTURE31={name:'TEXTURE31',value:34015,description:'A texture unit.'},e.ACTIVE_TEXTURE={name:'ACTIVE_TEXTURE',value:34016,description:'The current active texture unit.'},e.REPEAT={name:'REPEAT',value:10497,description:'\xA0'},e.CLAMP_TO_EDGE={name:'CLAMP_TO_EDGE',value:33071,description:'\xA0'},e.MIRRORED_REPEAT={name:'MIRRORED_REPEAT',value:33648,description:'\xA0'},e.FLOAT_VEC2={name:'FLOAT_VEC2',value:35664,description:'\xA0'},e.FLOAT_VEC3={name:'FLOAT_VEC3',value:35665,description:'\xA0'},e.FLOAT_VEC4={name:'FLOAT_VEC4',value:35666,description:'\xA0'},e.INT_VEC2={name:'INT_VEC2',value:35667,description:'\xA0'},e.INT_VEC3={name:'INT_VEC3',value:35668,description:'\xA0'},e.INT_VEC4={name:'INT_VEC4',value:35669,description:'\xA0'},e.BOOL={name:'BOOL',value:35670,description:'\xA0'},e.BOOL_VEC2={name:'BOOL_VEC2',value:35671,description:'\xA0'},e.BOOL_VEC3={name:'BOOL_VEC3',value:35672,description:'\xA0'},e.BOOL_VEC4={name:'BOOL_VEC4',value:35673,description:'\xA0'},e.FLOAT_MAT2={name:'FLOAT_MAT2',value:35674,description:'\xA0'},e.FLOAT_MAT3={name:'FLOAT_MAT3',value:35675,description:'\xA0'},e.FLOAT_MAT4={name:'FLOAT_MAT4',value:35676,description:'\xA0'},e.SAMPLER_2D={name:'SAMPLER_2D',value:35678,description:'\xA0'},e.SAMPLER_CUBE={name:'SAMPLER_CUBE',value:35680,description:'\xA0'},e.LOW_FLOAT={name:'LOW_FLOAT',value:36336,description:'\xA0'},e.MEDIUM_FLOAT={name:'MEDIUM_FLOAT',value:36337,description:'\xA0'},e.HIGH_FLOAT={name:'HIGH_FLOAT',value:36338,description:'\xA0'},e.LOW_INT={name:'LOW_INT',value:36339,description:'\xA0'},e.MEDIUM_INT={name:'MEDIUM_INT',value:36340,description:'\xA0'},e.HIGH_INT={name:'HIGH_INT',value:36341,description:'\xA0'},e.FRAMEBUFFER={name:'FRAMEBUFFER',value:36160,description:'\xA0'},e.RENDERBUFFER={name:'RENDERBUFFER',value:36161,description:'\xA0'},e.RGBA4={name:'RGBA4',value:32854,description:'\xA0'},e.RGB5_A1={name:'RGB5_A1',value:32855,description:'\xA0'},e.RGB565={name:'RGB565',value:36194,description:'\xA0'},e.DEPTH_COMPONENT16={name:'DEPTH_COMPONENT16',value:33189,description:'\xA0'},e.STENCIL_INDEX={name:'STENCIL_INDEX',value:6401,description:'\xA0'},e.STENCIL_INDEX8={name:'STENCIL_INDEX8',value:36168,description:'\xA0'},e.DEPTH_STENCIL={name:'DEPTH_STENCIL',value:34041,description:'\xA0'},e.RENDERBUFFER_WIDTH={name:'RENDERBUFFER_WIDTH',value:36162,description:'\xA0'},e.RENDERBUFFER_HEIGHT={name:'RENDERBUFFER_HEIGHT',value:36163,description:'\xA0'},e.RENDERBUFFER_INTERNAL_FORMAT={name:'RENDERBUFFER_INTERNAL_FORMAT',value:36164,description:'\xA0'},e.RENDERBUFFER_RED_SIZE={name:'RENDERBUFFER_RED_SIZE',value:36176,description:'\xA0'},e.RENDERBUFFER_GREEN_SIZE={name:'RENDERBUFFER_GREEN_SIZE',value:36177,description:'\xA0'},e.RENDERBUFFER_BLUE_SIZE={name:'RENDERBUFFER_BLUE_SIZE',value:36178,description:'\xA0'},e.RENDERBUFFER_ALPHA_SIZE={name:'RENDERBUFFER_ALPHA_SIZE',value:36179,description:'\xA0'},e.RENDERBUFFER_DEPTH_SIZE={name:'RENDERBUFFER_DEPTH_SIZE',value:36180,description:'\xA0'},e.RENDERBUFFER_STENCIL_SIZE={name:'RENDERBUFFER_STENCIL_SIZE',value:36181,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE={name:'FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE',value:36048,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME={name:'FRAMEBUFFER_ATTACHMENT_OBJECT_NAME',value:36049,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL',value:36050,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE',value:36051,description:'\xA0'},e.COLOR_ATTACHMENT0={name:'COLOR_ATTACHMENT0',value:36064,description:'\xA0'},e.DEPTH_ATTACHMENT={name:'DEPTH_ATTACHMENT',value:36096,description:'\xA0'},e.STENCIL_ATTACHMENT={name:'STENCIL_ATTACHMENT',value:36128,description:'\xA0'},e.DEPTH_STENCIL_ATTACHMENT={name:'DEPTH_STENCIL_ATTACHMENT',value:33306,description:'\xA0'},e.NONE={name:'NONE',value:0,description:'\xA0'},e.FRAMEBUFFER_COMPLETE={name:'FRAMEBUFFER_COMPLETE',value:36053,description:'\xA0'},e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT={name:'FRAMEBUFFER_INCOMPLETE_ATTACHMENT',value:36054,description:'\xA0'},e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT={name:'FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT',value:36055,description:'\xA0'},e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS={name:'FRAMEBUFFER_INCOMPLETE_DIMENSIONS',value:36057,description:'\xA0'},e.FRAMEBUFFER_UNSUPPORTED={name:'FRAMEBUFFER_UNSUPPORTED',value:36061,description:'\xA0'},e.FRAMEBUFFER_BINDING={name:'FRAMEBUFFER_BINDING',value:36006,description:'\xA0'},e.RENDERBUFFER_BINDING={name:'RENDERBUFFER_BINDING',value:36007,description:'\xA0'},e.MAX_RENDERBUFFER_SIZE={name:'MAX_RENDERBUFFER_SIZE',value:34024,description:'\xA0'},e.INVALID_FRAMEBUFFER_OPERATION={name:'INVALID_FRAMEBUFFER_OPERATION',value:1286,description:'\xA0'},e.UNPACK_FLIP_Y_WEBGL={name:'UNPACK_FLIP_Y_WEBGL',value:37440,description:'\xA0'},e.UNPACK_PREMULTIPLY_ALPHA_WEBGL={name:'UNPACK_PREMULTIPLY_ALPHA_WEBGL',value:37441,description:'\xA0'},e.UNPACK_COLORSPACE_CONVERSION_WEBGL={name:'UNPACK_COLORSPACE_CONVERSION_WEBGL',value:37443,description:'\xA0'},e.READ_BUFFER={name:'READ_BUFFER',value:3074,description:'\xA0'},e.UNPACK_ROW_LENGTH={name:'UNPACK_ROW_LENGTH',value:3314,description:'\xA0'},e.UNPACK_SKIP_ROWS={name:'UNPACK_SKIP_ROWS',value:3315,description:'\xA0'},e.UNPACK_SKIP_PIXELS={name:'UNPACK_SKIP_PIXELS',value:3316,description:'\xA0'},e.PACK_ROW_LENGTH={name:'PACK_ROW_LENGTH',value:3330,description:'\xA0'},e.PACK_SKIP_ROWS={name:'PACK_SKIP_ROWS',value:3331,description:'\xA0'},e.PACK_SKIP_PIXELS={name:'PACK_SKIP_PIXELS',value:3332,description:'\xA0'},e.TEXTURE_BINDING_3D={name:'TEXTURE_BINDING_3D',value:32874,description:'\xA0'},e.UNPACK_SKIP_IMAGES={name:'UNPACK_SKIP_IMAGES',value:32877,description:'\xA0'},e.UNPACK_IMAGE_HEIGHT={name:'UNPACK_IMAGE_HEIGHT',value:32878,description:'\xA0'},e.MAX_3D_TEXTURE_SIZE={name:'MAX_3D_TEXTURE_SIZE',value:32883,description:'\xA0'},e.MAX_ELEMENTS_VERTICES={name:'MAX_ELEMENTS_VERTICES',value:33e3,description:'\xA0'},e.MAX_ELEMENTS_INDICES={name:'MAX_ELEMENTS_INDICES',value:33001,description:'\xA0'},e.MAX_TEXTURE_LOD_BIAS={name:'MAX_TEXTURE_LOD_BIAS',value:34045,description:'\xA0'},e.MAX_FRAGMENT_UNIFORM_COMPONENTS={name:'MAX_FRAGMENT_UNIFORM_COMPONENTS',value:35657,description:'\xA0'},e.MAX_VERTEX_UNIFORM_COMPONENTS={name:'MAX_VERTEX_UNIFORM_COMPONENTS',value:35658,description:'\xA0'},e.MAX_ARRAY_TEXTURE_LAYERS={name:'MAX_ARRAY_TEXTURE_LAYERS',value:35071,description:'\xA0'},e.MIN_PROGRAM_TEXEL_OFFSET={name:'MIN_PROGRAM_TEXEL_OFFSET',value:35076,description:'\xA0'},e.MAX_PROGRAM_TEXEL_OFFSET={name:'MAX_PROGRAM_TEXEL_OFFSET',value:35077,description:'\xA0'},e.MAX_VARYING_COMPONENTS={name:'MAX_VARYING_COMPONENTS',value:35659,description:'\xA0'},e.FRAGMENT_SHADER_DERIVATIVE_HINT={name:'FRAGMENT_SHADER_DERIVATIVE_HINT',value:35723,description:'\xA0'},e.RASTERIZER_DISCARD={name:'RASTERIZER_DISCARD',value:35977,description:'\xA0'},e.VERTEX_ARRAY_BINDING={name:'VERTEX_ARRAY_BINDING',value:34229,description:'\xA0'},e.MAX_VERTEX_OUTPUT_COMPONENTS={name:'MAX_VERTEX_OUTPUT_COMPONENTS',value:37154,description:'\xA0'},e.MAX_FRAGMENT_INPUT_COMPONENTS={name:'MAX_FRAGMENT_INPUT_COMPONENTS',value:37157,description:'\xA0'},e.MAX_SERVER_WAIT_TIMEOUT={name:'MAX_SERVER_WAIT_TIMEOUT',value:37137,description:'\xA0'},e.MAX_ELEMENT_INDEX={name:'MAX_ELEMENT_INDEX',value:36203,description:'\xA0'},e.RED={name:'RED',value:6403,description:'\xA0'},e.RGB8={name:'RGB8',value:32849,description:'\xA0'},e.RGBA8={name:'RGBA8',value:32856,description:'\xA0'},e.RGB10_A2={name:'RGB10_A2',value:32857,description:'\xA0'},e.TEXTURE_3D={name:'TEXTURE_3D',value:32879,description:'\xA0'},e.TEXTURE_WRAP_R={name:'TEXTURE_WRAP_R',value:32882,description:'\xA0'},e.TEXTURE_MIN_LOD={name:'TEXTURE_MIN_LOD',value:33082,description:'\xA0'},e.TEXTURE_MAX_LOD={name:'TEXTURE_MAX_LOD',value:33083,description:'\xA0'},e.TEXTURE_BASE_LEVEL={name:'TEXTURE_BASE_LEVEL',value:33084,description:'\xA0'},e.TEXTURE_MAX_LEVEL={name:'TEXTURE_MAX_LEVEL',value:33085,description:'\xA0'},e.TEXTURE_COMPARE_MODE={name:'TEXTURE_COMPARE_MODE',value:34892,description:'\xA0'},e.TEXTURE_COMPARE_FUNC={name:'TEXTURE_COMPARE_FUNC',value:34893,description:'\xA0'},e.SRGB={name:'SRGB',value:35904,description:'\xA0'},e.SRGB8={name:'SRGB8',value:35905,description:'\xA0'},e.SRGB8_ALPHA8={name:'SRGB8_ALPHA8',value:35907,description:'\xA0'},e.COMPARE_REF_TO_TEXTURE={name:'COMPARE_REF_TO_TEXTURE',value:34894,description:'\xA0'},e.RGBA32F={name:'RGBA32F',value:34836,description:'\xA0'},e.RGB32F={name:'RGB32F',value:34837,description:'\xA0'},e.RGBA16F={name:'RGBA16F',value:34842,description:'\xA0'},e.RGB16F={name:'RGB16F',value:34843,description:'\xA0'},e.TEXTURE_2D_ARRAY={name:'TEXTURE_2D_ARRAY',value:35866,description:'\xA0'},e.TEXTURE_BINDING_2D_ARRAY={name:'TEXTURE_BINDING_2D_ARRAY',value:35869,description:'\xA0'},e.R11F_G11F_B10F={name:'R11F_G11F_B10F',value:35898,description:'\xA0'},e.RGB9_E5={name:'RGB9_E5',value:35901,description:'\xA0'},e.RGBA32UI={name:'RGBA32UI',value:36208,description:'\xA0'},e.RGB32UI={name:'RGB32UI',value:36209,description:'\xA0'},e.RGBA16UI={name:'RGBA16UI',value:36214,description:'\xA0'},e.RGB16UI={name:'RGB16UI',value:36215,description:'\xA0'},e.RGBA8UI={name:'RGBA8UI',value:36220,description:'\xA0'},e.RGB8UI={name:'RGB8UI',value:36221,description:'\xA0'},e.RGBA32I={name:'RGBA32I',value:36226,description:'\xA0'},e.RGB32I={name:'RGB32I',value:36227,description:'\xA0'},e.RGBA16I={name:'RGBA16I',value:36232,description:'\xA0'},e.RGB16I={name:'RGB16I',value:36233,description:'\xA0'},e.RGBA8I={name:'RGBA8I',value:36238,description:'\xA0'},e.RGB8I={name:'RGB8I',value:36239,description:'\xA0'},e.RED_INTEGER={name:'RED_INTEGER',value:36244,description:'\xA0'},e.RGB_INTEGER={name:'RGB_INTEGER',value:36248,description:'\xA0'},e.RGBA_INTEGER={name:'RGBA_INTEGER',value:36249,description:'\xA0'},e.R8={name:'R8',value:33321,description:'\xA0'},e.RG8={name:'RG8',value:33323,description:'\xA0'},e.R16F={name:'R16F',value:33325,description:'\xA0'},e.R32F={name:'R32F',value:33326,description:'\xA0'},e.RG16F={name:'RG16F',value:33327,description:'\xA0'},e.RG32F={name:'RG32F',value:33328,description:'\xA0'},e.R8I={name:'R8I',value:33329,description:'\xA0'},e.R8UI={name:'R8UI',value:33330,description:'\xA0'},e.R16I={name:'R16I',value:33331,description:'\xA0'},e.R16UI={name:'R16UI',value:33332,description:'\xA0'},e.R32I={name:'R32I',value:33333,description:'\xA0'},e.R32UI={name:'R32UI',value:33334,description:'\xA0'},e.RG8I={name:'RG8I',value:33335,description:'\xA0'},e.RG8UI={name:'RG8UI',value:33336,description:'\xA0'},e.RG16I={name:'RG16I',value:33337,description:'\xA0'},e.RG16UI={name:'RG16UI',value:33338,description:'\xA0'},e.RG32I={name:'RG32I',value:33339,description:'\xA0'},e.RG32UI={name:'RG32UI',value:33340,description:'\xA0'},e.R8_SNORM={name:'R8_SNORM',value:36756,description:'\xA0'},e.RG8_SNORM={name:'RG8_SNORM',value:36757,description:'\xA0'},e.RGB8_SNORM={name:'RGB8_SNORM',value:36758,description:'\xA0'},e.RGBA8_SNORM={name:'RGBA8_SNORM',value:36759,description:'\xA0'},e.RGB10_A2UI={name:'RGB10_A2UI',value:36975,description:'\xA0'},e.TEXTURE_IMMUTABLE_FORMAT={name:'TEXTURE_IMMUTABLE_FORMAT',value:37167,description:'\xA0'},e.TEXTURE_IMMUTABLE_LEVELS={name:'TEXTURE_IMMUTABLE_LEVELS',value:33503,description:'\xA0'},e.UNSIGNED_INT_2_10_10_10_REV={name:'UNSIGNED_INT_2_10_10_10_REV',value:33640,description:'\xA0'},e.UNSIGNED_INT_10F_11F_11F_REV={name:'UNSIGNED_INT_10F_11F_11F_REV',value:35899,description:'\xA0'},e.UNSIGNED_INT_5_9_9_9_REV={name:'UNSIGNED_INT_5_9_9_9_REV',value:35902,description:'\xA0'},e.FLOAT_32_UNSIGNED_INT_24_8_REV={name:'FLOAT_32_UNSIGNED_INT_24_8_REV',value:36269,description:'\xA0'},e.UNSIGNED_INT_24_8={name:'UNSIGNED_INT_24_8',value:34042,description:'\xA0'},e.HALF_FLOAT={name:'HALF_FLOAT',value:5131,description:'\xA0'},e.RG={name:'RG',value:33319,description:'\xA0'},e.RG_INTEGER={name:'RG_INTEGER',value:33320,description:'\xA0'},e.INT_2_10_10_10_REV={name:'INT_2_10_10_10_REV',value:36255,description:'\xA0'},e.CURRENT_QUERY={name:'CURRENT_QUERY',value:34917,description:'\xA0'},e.QUERY_RESULT={name:'QUERY_RESULT',value:34918,description:'\xA0'},e.QUERY_RESULT_AVAILABLE={name:'QUERY_RESULT_AVAILABLE',value:34919,description:'\xA0'},e.ANY_SAMPLES_PASSED={name:'ANY_SAMPLES_PASSED',value:35887,description:'\xA0'},e.ANY_SAMPLES_PASSED_CONSERVATIVE={name:'ANY_SAMPLES_PASSED_CONSERVATIVE',value:36202,description:'\xA0'},e.MAX_DRAW_BUFFERS={name:'MAX_DRAW_BUFFERS',value:34852,description:'\xA0'},e.DRAW_BUFFER0={name:'DRAW_BUFFER0',value:34853,description:'\xA0'},e.DRAW_BUFFER1={name:'DRAW_BUFFER1',value:34854,description:'\xA0'},e.DRAW_BUFFER2={name:'DRAW_BUFFER2',value:34855,description:'\xA0'},e.DRAW_BUFFER3={name:'DRAW_BUFFER3',value:34856,description:'\xA0'},e.DRAW_BUFFER4={name:'DRAW_BUFFER4',value:34857,description:'\xA0'},e.DRAW_BUFFER5={name:'DRAW_BUFFER5',value:34858,description:'\xA0'},e.DRAW_BUFFER6={name:'DRAW_BUFFER6',value:34859,description:'\xA0'},e.DRAW_BUFFER7={name:'DRAW_BUFFER7',value:34860,description:'\xA0'},e.DRAW_BUFFER8={name:'DRAW_BUFFER8',value:34861,description:'\xA0'},e.DRAW_BUFFER9={name:'DRAW_BUFFER9',value:34862,description:'\xA0'},e.DRAW_BUFFER10={name:'DRAW_BUFFER10',value:34863,description:'\xA0'},e.DRAW_BUFFER11={name:'DRAW_BUFFER11',value:34864,description:'\xA0'},e.DRAW_BUFFER12={name:'DRAW_BUFFER12',value:34865,description:'\xA0'},e.DRAW_BUFFER13={name:'DRAW_BUFFER13',value:34866,description:'\xA0'},e.DRAW_BUFFER14={name:'DRAW_BUFFER14',value:34867,description:'\xA0'},e.DRAW_BUFFER15={name:'DRAW_BUFFER15',value:34868,description:'\xA0'},e.MAX_COLOR_ATTACHMENTS={name:'MAX_COLOR_ATTACHMENTS',value:36063,description:'\xA0'},e.COLOR_ATTACHMENT1={name:'COLOR_ATTACHMENT1',value:36065,description:'\xA0'},e.COLOR_ATTACHMENT2={name:'COLOR_ATTACHMENT2',value:36066,description:'\xA0'},e.COLOR_ATTACHMENT3={name:'COLOR_ATTACHMENT3',value:36067,description:'\xA0'},e.COLOR_ATTACHMENT4={name:'COLOR_ATTACHMENT4',value:36068,description:'\xA0'},e.COLOR_ATTACHMENT5={name:'COLOR_ATTACHMENT5',value:36069,description:'\xA0'},e.COLOR_ATTACHMENT6={name:'COLOR_ATTACHMENT6',value:36070,description:'\xA0'},e.COLOR_ATTACHMENT7={name:'COLOR_ATTACHMENT7',value:36071,description:'\xA0'},e.COLOR_ATTACHMENT8={name:'COLOR_ATTACHMENT8',value:36072,description:'\xA0'},e.COLOR_ATTACHMENT9={name:'COLOR_ATTACHMENT9',value:36073,description:'\xA0'},e.COLOR_ATTACHMENT10={name:'COLOR_ATTACHMENT10',value:36074,description:'\xA0'},e.COLOR_ATTACHMENT11={name:'COLOR_ATTACHMENT11',value:36075,description:'\xA0'},e.COLOR_ATTACHMENT12={name:'COLOR_ATTACHMENT12',value:36076,description:'\xA0'},e.COLOR_ATTACHMENT13={name:'COLOR_ATTACHMENT13',value:36077,description:'\xA0'},e.COLOR_ATTACHMENT14={name:'COLOR_ATTACHMENT14',value:36078,description:'\xA0'},e.COLOR_ATTACHMENT15={name:'COLOR_ATTACHMENT15',value:36079,description:'\xA0'},e.SAMPLER_3D={name:'SAMPLER_3D',value:35679,description:'\xA0'},e.SAMPLER_2D_SHADOW={name:'SAMPLER_2D_SHADOW',value:35682,description:'\xA0'},e.SAMPLER_2D_ARRAY={name:'SAMPLER_2D_ARRAY',value:36289,description:'\xA0'},e.SAMPLER_2D_ARRAY_SHADOW={name:'SAMPLER_2D_ARRAY_SHADOW',value:36292,description:'\xA0'},e.SAMPLER_CUBE_SHADOW={name:'SAMPLER_CUBE_SHADOW',value:36293,description:'\xA0'},e.INT_SAMPLER_2D={name:'INT_SAMPLER_2D',value:36298,description:'\xA0'},e.INT_SAMPLER_3D={name:'INT_SAMPLER_3D',value:36299,description:'\xA0'},e.INT_SAMPLER_CUBE={name:'INT_SAMPLER_CUBE',value:36300,description:'\xA0'},e.INT_SAMPLER_2D_ARRAY={name:'INT_SAMPLER_2D_ARRAY',value:36303,description:'\xA0'},e.UNSIGNED_INT_SAMPLER_2D={name:'UNSIGNED_INT_SAMPLER_2D',value:36306,description:'\xA0'},e.UNSIGNED_INT_SAMPLER_3D={name:'UNSIGNED_INT_SAMPLER_3D',value:36307,description:'\xA0'},e.UNSIGNED_INT_SAMPLER_CUBE={name:'UNSIGNED_INT_SAMPLER_CUBE',value:36308,description:'\xA0'},e.UNSIGNED_INT_SAMPLER_2D_ARRAY={name:'UNSIGNED_INT_SAMPLER_2D_ARRAY',value:36311,description:'\xA0'},e.MAX_SAMPLES={name:'MAX_SAMPLES',value:36183,description:'\xA0'},e.SAMPLER_BINDING={name:'SAMPLER_BINDING',value:35097,description:'\xA0'},e.PIXEL_PACK_BUFFER={name:'PIXEL_PACK_BUFFER',value:35051,description:'\xA0'},e.PIXEL_UNPACK_BUFFER={name:'PIXEL_UNPACK_BUFFER',value:35052,description:'\xA0'},e.PIXEL_PACK_BUFFER_BINDING={name:'PIXEL_PACK_BUFFER_BINDING',value:35053,description:'\xA0'},e.PIXEL_UNPACK_BUFFER_BINDING={name:'PIXEL_UNPACK_BUFFER_BINDING',value:35055,description:'\xA0'},e.COPY_READ_BUFFER={name:'COPY_READ_BUFFER',value:36662,description:'\xA0'},e.COPY_WRITE_BUFFER={name:'COPY_WRITE_BUFFER',value:36663,description:'\xA0'},e.COPY_READ_BUFFER_BINDING={name:'COPY_READ_BUFFER_BINDING',value:36662,description:'\xA0'},e.COPY_WRITE_BUFFER_BINDING={name:'COPY_WRITE_BUFFER_BINDING',value:36663,description:'\xA0'},e.FLOAT_MAT2x3={name:'FLOAT_MAT2x3',value:35685,description:'\xA0'},e.FLOAT_MAT2x4={name:'FLOAT_MAT2x4',value:35686,description:'\xA0'},e.FLOAT_MAT3x2={name:'FLOAT_MAT3x2',value:35687,description:'\xA0'},e.FLOAT_MAT3x4={name:'FLOAT_MAT3x4',value:35688,description:'\xA0'},e.FLOAT_MAT4x2={name:'FLOAT_MAT4x2',value:35689,description:'\xA0'},e.FLOAT_MAT4x3={name:'FLOAT_MAT4x3',value:35690,description:'\xA0'},e.UNSIGNED_INT_VEC2={name:'UNSIGNED_INT_VEC2',value:36294,description:'\xA0'},e.UNSIGNED_INT_VEC3={name:'UNSIGNED_INT_VEC3',value:36295,description:'\xA0'},e.UNSIGNED_INT_VEC4={name:'UNSIGNED_INT_VEC4',value:36296,description:'\xA0'},e.UNSIGNED_NORMALIZED={name:'UNSIGNED_NORMALIZED',value:35863,description:'\xA0'},e.SIGNED_NORMALIZED={name:'SIGNED_NORMALIZED',value:36764,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_INTEGER={name:'VERTEX_ATTRIB_ARRAY_INTEGER',value:35069,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_DIVISOR={name:'VERTEX_ATTRIB_ARRAY_DIVISOR',value:35070,description:'\xA0'},e.TRANSFORM_FEEDBACK_BUFFER_MODE={name:'TRANSFORM_FEEDBACK_BUFFER_MODE',value:35967,description:'\xA0'},e.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS={name:'MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS',value:35968,description:'\xA0'},e.TRANSFORM_FEEDBACK_VARYINGS={name:'TRANSFORM_FEEDBACK_VARYINGS',value:35971,description:'\xA0'},e.TRANSFORM_FEEDBACK_BUFFER_START={name:'TRANSFORM_FEEDBACK_BUFFER_START',value:35972,description:'\xA0'},e.TRANSFORM_FEEDBACK_BUFFER_SIZE={name:'TRANSFORM_FEEDBACK_BUFFER_SIZE',value:35973,description:'\xA0'},e.TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN={name:'TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN',value:35976,description:'\xA0'},e.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS={name:'MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS',value:35978,description:'\xA0'},e.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS={name:'MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS',value:35979,description:'\xA0'},e.INTERLEAVED_ATTRIBS={name:'INTERLEAVED_ATTRIBS',value:35980,description:'\xA0'},e.SEPARATE_ATTRIBS={name:'SEPARATE_ATTRIBS',value:35981,description:'\xA0'},e.TRANSFORM_FEEDBACK_BUFFER={name:'TRANSFORM_FEEDBACK_BUFFER',value:35982,description:'\xA0'},e.TRANSFORM_FEEDBACK_BUFFER_BINDING={name:'TRANSFORM_FEEDBACK_BUFFER_BINDING',value:35983,description:'\xA0'},e.TRANSFORM_FEEDBACK={name:'TRANSFORM_FEEDBACK',value:36386,description:'\xA0'},e.TRANSFORM_FEEDBACK_PAUSED={name:'TRANSFORM_FEEDBACK_PAUSED',value:36387,description:'\xA0'},e.TRANSFORM_FEEDBACK_ACTIVE={name:'TRANSFORM_FEEDBACK_ACTIVE',value:36388,description:'\xA0'},e.TRANSFORM_FEEDBACK_BINDING={name:'TRANSFORM_FEEDBACK_BINDING',value:36389,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING={name:'FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING',value:33296,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE={name:'FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE',value:33297,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_RED_SIZE={name:'FRAMEBUFFER_ATTACHMENT_RED_SIZE',value:33298,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE={name:'FRAMEBUFFER_ATTACHMENT_GREEN_SIZE',value:33299,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE={name:'FRAMEBUFFER_ATTACHMENT_BLUE_SIZE',value:33300,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE={name:'FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE',value:33301,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE={name:'FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE',value:33302,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE={name:'FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE',value:33303,description:'\xA0'},e.FRAMEBUFFER_DEFAULT={name:'FRAMEBUFFER_DEFAULT',value:33304,description:'\xA0'},e.DEPTH24_STENCIL8={name:'DEPTH24_STENCIL8',value:35056,description:'\xA0'},e.DRAW_FRAMEBUFFER_BINDING={name:'DRAW_FRAMEBUFFER_BINDING',value:36006,description:'\xA0'},e.READ_FRAMEBUFFER={name:'READ_FRAMEBUFFER',value:36008,description:'\xA0'},e.DRAW_FRAMEBUFFER={name:'DRAW_FRAMEBUFFER',value:36009,description:'\xA0'},e.READ_FRAMEBUFFER_BINDING={name:'READ_FRAMEBUFFER_BINDING',value:36010,description:'\xA0'},e.RENDERBUFFER_SAMPLES={name:'RENDERBUFFER_SAMPLES',value:36011,description:'\xA0'},e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER={name:'FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER',value:36052,description:'\xA0'},e.FRAMEBUFFER_INCOMPLETE_MULTISAMPLE={name:'FRAMEBUFFER_INCOMPLETE_MULTISAMPLE',value:36182,description:'\xA0'},e.UNIFORM_BUFFER={name:'UNIFORM_BUFFER',value:35345,description:'\xA0'},e.UNIFORM_BUFFER_BINDING={name:'UNIFORM_BUFFER_BINDING',value:35368,description:'\xA0'},e.UNIFORM_BUFFER_START={name:'UNIFORM_BUFFER_START',value:35369,description:'\xA0'},e.UNIFORM_BUFFER_SIZE={name:'UNIFORM_BUFFER_SIZE',value:35370,description:'\xA0'},e.MAX_VERTEX_UNIFORM_BLOCKS={name:'MAX_VERTEX_UNIFORM_BLOCKS',value:35371,description:'\xA0'},e.MAX_FRAGMENT_UNIFORM_BLOCKS={name:'MAX_FRAGMENT_UNIFORM_BLOCKS',value:35373,description:'\xA0'},e.MAX_COMBINED_UNIFORM_BLOCKS={name:'MAX_COMBINED_UNIFORM_BLOCKS',value:35374,description:'\xA0'},e.MAX_UNIFORM_BUFFER_BINDINGS={name:'MAX_UNIFORM_BUFFER_BINDINGS',value:35375,description:'\xA0'},e.MAX_UNIFORM_BLOCK_SIZE={name:'MAX_UNIFORM_BLOCK_SIZE',value:35376,description:'\xA0'},e.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS={name:'MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS',value:35377,description:'\xA0'},e.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS={name:'MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS',value:35379,description:'\xA0'},e.UNIFORM_BUFFER_OFFSET_ALIGNMENT={name:'UNIFORM_BUFFER_OFFSET_ALIGNMENT',value:35380,description:'\xA0'},e.ACTIVE_UNIFORM_BLOCKS={name:'ACTIVE_UNIFORM_BLOCKS',value:35382,description:'\xA0'},e.UNIFORM_TYPE={name:'UNIFORM_TYPE',value:35383,description:'\xA0'},e.UNIFORM_SIZE={name:'UNIFORM_SIZE',value:35384,description:'\xA0'},e.UNIFORM_BLOCK_INDEX={name:'UNIFORM_BLOCK_INDEX',value:35386,description:'\xA0'},e.UNIFORM_OFFSET={name:'UNIFORM_OFFSET',value:35387,description:'\xA0'},e.UNIFORM_ARRAY_STRIDE={name:'UNIFORM_ARRAY_STRIDE',value:35388,description:'\xA0'},e.UNIFORM_MATRIX_STRIDE={name:'UNIFORM_MATRIX_STRIDE',value:35389,description:'\xA0'},e.UNIFORM_IS_ROW_MAJOR={name:'UNIFORM_IS_ROW_MAJOR',value:35390,description:'\xA0'},e.UNIFORM_BLOCK_BINDING={name:'UNIFORM_BLOCK_BINDING',value:35391,description:'\xA0'},e.UNIFORM_BLOCK_DATA_SIZE={name:'UNIFORM_BLOCK_DATA_SIZE',value:35392,description:'\xA0'},e.UNIFORM_BLOCK_ACTIVE_UNIFORMS={name:'UNIFORM_BLOCK_ACTIVE_UNIFORMS',value:35394,description:'\xA0'},e.UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES={name:'UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES',value:35395,description:'\xA0'},e.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER={name:'UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER',value:35396,description:'\xA0'},e.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER={name:'UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER',value:35398,description:'\xA0'},e.OBJECT_TYPE={name:'OBJECT_TYPE',value:37138,description:'\xA0'},e.SYNC_CONDITION={name:'SYNC_CONDITION',value:37139,description:'\xA0'},e.SYNC_STATUS={name:'SYNC_STATUS',value:37140,description:'\xA0'},e.SYNC_FLAGS={name:'SYNC_FLAGS',value:37141,description:'\xA0'},e.SYNC_FENCE={name:'SYNC_FENCE',value:37142,description:'\xA0'},e.SYNC_GPU_COMMANDS_COMPLETE={name:'SYNC_GPU_COMMANDS_COMPLETE',value:37143,description:'\xA0'},e.UNSIGNALED={name:'UNSIGNALED',value:37144,description:'\xA0'},e.SIGNALED={name:'SIGNALED',value:37145,description:'\xA0'},e.ALREADY_SIGNALED={name:'ALREADY_SIGNALED',value:37146,description:'\xA0'},e.TIMEOUT_EXPIRED={name:'TIMEOUT_EXPIRED',value:37147,description:'\xA0'},e.CONDITION_SATISFIED={name:'CONDITION_SATISFIED',value:37148,description:'\xA0'},e.WAIT_FAILED={name:'WAIT_FAILED',value:37149,description:'\xA0'},e.SYNC_FLUSH_COMMANDS_BIT={name:'SYNC_FLUSH_COMMANDS_BIT',value:1,description:'\xA0'},e.COLOR={name:'COLOR',value:6144,description:'\xA0'},e.DEPTH={name:'DEPTH',value:6145,description:'\xA0'},e.STENCIL={name:'STENCIL',value:6146,description:'\xA0'},e.MIN={name:'MIN',value:32775,description:'\xA0'},e.MAX={name:'MAX',value:32776,description:'\xA0'},e.DEPTH_COMPONENT24={name:'DEPTH_COMPONENT24',value:33190,description:'\xA0'},e.STREAM_READ={name:'STREAM_READ',value:35041,description:'\xA0'},e.STREAM_COPY={name:'STREAM_COPY',value:35042,description:'\xA0'},e.STATIC_READ={name:'STATIC_READ',value:35045,description:'\xA0'},e.STATIC_COPY={name:'STATIC_COPY',value:35046,description:'\xA0'},e.DYNAMIC_READ={name:'DYNAMIC_READ',value:35049,description:'\xA0'},e.DYNAMIC_COPY={name:'DYNAMIC_COPY',value:35050,description:'\xA0'},e.DEPTH_COMPONENT32F={name:'DEPTH_COMPONENT32F',value:36012,description:'\xA0'},e.DEPTH32F_STENCIL8={name:'DEPTH32F_STENCIL8',value:36013,description:'\xA0'},e.INVALID_INDEX={name:'INVALID_INDEX',value:4294967295,description:'\xA0'},e.TIMEOUT_IGNORED={name:'TIMEOUT_IGNORED',value:-1,description:'\xA0'},e.MAX_CLIENT_WAIT_TIMEOUT_WEBGL={name:'MAX_CLIENT_WAIT_TIMEOUT_WEBGL',value:37447,description:'\xA0'},e.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE={name:'VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE',value:35070,description:'Describes the frequency divisor used for instanced rendering.',extensionName:'ANGLE_instanced_arrays'},e.UNMASKED_VENDOR_WEBGL={name:'UNMASKED_VENDOR_WEBGL',value:37445,description:'Passed to getParameter to get the vendor string of the graphics driver.',extensionName:'ANGLE_instanced_arrays'},e.UNMASKED_RENDERER_WEBGL={name:'UNMASKED_RENDERER_WEBGL',value:37446,description:'Passed to getParameter to get the renderer string of the graphics driver.',extensionName:'WEBGL_debug_renderer_info'},e.MAX_TEXTURE_MAX_ANISOTROPY_EXT={name:'MAX_TEXTURE_MAX_ANISOTROPY_EXT',value:34047,description:'Returns the maximum available anisotropy.',extensionName:'EXT_texture_filter_anisotropic'},e.TEXTURE_MAX_ANISOTROPY_EXT={name:'TEXTURE_MAX_ANISOTROPY_EXT',value:34046,description:'Passed to texParameter to set the desired maximum anisotropy for a texture.',extensionName:'EXT_texture_filter_anisotropic'},e.COMPRESSED_RGB_S3TC_DXT1_EXT={name:'COMPRESSED_RGB_S3TC_DXT1_EXT',value:33776,description:'A DXT1-compressed image in an RGB image format.',extensionName:'WEBGL_compressed_texture_s3tc'},e.COMPRESSED_RGBA_S3TC_DXT1_EXT={name:'COMPRESSED_RGBA_S3TC_DXT1_EXT',value:33777,description:'A DXT1-compressed image in an RGB image format with a simple on/off alpha value.',extensionName:'WEBGL_compressed_texture_s3tc'},e.COMPRESSED_RGBA_S3TC_DXT3_EXT={name:'COMPRESSED_RGBA_S3TC_DXT3_EXT',value:33778,description:'A DXT3-compressed image in an RGBA image format. Compared to a 32-bit RGBA texture, it offers 4:1 compression.',extensionName:'WEBGL_compressed_texture_s3tc'},e.COMPRESSED_RGBA_S3TC_DXT5_EXT={name:'COMPRESSED_RGBA_S3TC_DXT5_EXT',value:33779,description:'A DXT5-compressed image in an RGBA image format. It also provides a 4:1 compression, but differs to the DXT3 compression in how the alpha compression is done.',extensionName:'WEBGL_compressed_texture_s3tc'},e.COMPRESSED_R11_EAC={name:'COMPRESSED_R11_EAC',value:37488,description:'One-channel (red) unsigned format compression.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_SIGNED_R11_EAC={name:'COMPRESSED_SIGNED_R11_EAC',value:37489,description:'One-channel (red) signed format compression.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_RG11_EAC={name:'COMPRESSED_RG11_EAC',value:37490,description:'Two-channel (red and green) unsigned format compression.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_SIGNED_RG11_EAC={name:'COMPRESSED_SIGNED_RG11_EAC',value:37491,description:'Two-channel (red and green) signed format compression.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_RGB8_ETC2={name:'COMPRESSED_RGB8_ETC2',value:37492,description:'Compresses RBG8 data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_RGBA8_ETC2_EAC={name:'COMPRESSED_RGBA8_ETC2_EAC',value:37493,description:'Compresses RGBA8 data. The RGB part is encoded the same as RGB_ETC2, but the alpha part is encoded separately.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_SRGB8_ETC2={name:'COMPRESSED_SRGB8_ETC2',value:37494,description:'Compresses sRBG8 data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC={name:'COMPRESSED_SRGB8_ALPHA8_ETC2_EAC',value:37495,description:'Compresses sRGBA8 data. The sRGB part is encoded the same as SRGB_ETC2, but the alpha part is encoded separately.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:'COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2',value:37496,description:'Similar to RGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2={name:'COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2',value:37497,description:'Similar to SRGB8_ETC, but with ability to punch through the alpha channel, which means to make it completely opaque or transparent.',extensionName:'WEBGL_compressed_texture_etc'},e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG={name:'COMPRESSED_RGB_PVRTC_4BPPV1_IMG',value:35840,description:'RGB compression in 4-bit mode. One block for each 4\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG={name:'COMPRESSED_RGBA_PVRTC_4BPPV1_IMG',value:35842,description:'RGBA compression in 4-bit mode. One block for each 4\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG={name:'COMPRESSED_RGB_PVRTC_2BPPV1_IMG',value:35841,description:'RGB compression in 2-bit mode. One block for each 8\xD74 pixels.',extensionName:'WEBGL_compressed_texture_pvrtc'},e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG={name:'COMPRESSED_RGBA_PVRTC_2BPPV1_IMG',value:35843,description:'RGBA compression in 2-bit mode. One block for each 8\xD74 pixe',extensionName:'WEBGL_compressed_texture_pvrtc'},e.COMPRESSED_RGB_ETC1_WEBGL={name:'COMPRESSED_RGB_ETC1_WEBGL',value:36196,description:'Compresses 24-bit RGB data with no alpha channel.',extensionName:'WEBGL_compressed_texture_etc1'},e.COMPRESSED_RGB_ATC_WEBGL={name:'COMPRESSED_RGB_ATC_WEBGL',value:35986,description:'Compresses RGB textures with no alpha channel.',extensionName:'WEBGL_compressed_texture_atc'},e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL={name:'COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL',value:35986,description:'Compresses RGBA textures using explicit alpha encoding (useful when alpha transitions are sharp).',extensionName:'WEBGL_compressed_texture_atc'},e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL={name:'COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL',value:34798,description:'Compresses RGBA textures using interpolated alpha encoding (useful when alpha transitions are gradient).',extensionName:'WEBGL_compressed_texture_atc'},e.UNSIGNED_INT_24_8_WEBGL={name:'UNSIGNED_INT_24_8_WEBGL',value:34042,description:'Unsigned integer type for 24-bit depth texture data.',extensionName:'WEBGL_depth_texture'},e.HALF_FLOAT_OES={name:'HALF_FLOAT_OES',value:36193,description:'Half floating-point type (16-bit).',extensionName:'OES_texture_half_float'},e.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT={name:'FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT',value:33297,description:'\xA0',extensionName:'WEBGL_color_buffer_float'},e.UNSIGNED_NORMALIZED_EXT={name:'UNSIGNED_NORMALIZED_EXT',value:35863,description:'\xA0',extensionName:'WEBGL_color_buffer_float'},e.MIN_EXT={name:'MIN_EXT',value:32775,description:'Produces the minimum color components of the source and destination colors.',extensionName:'EXT_blend_minmax'},e.MAX_EXT={name:'MAX_EXT',value:32776,description:'Produces the maximum color components of the source and destination colors.',extensionName:'EXT_blend_minmax'},e.SRGB_EXT={name:'SRGB_EXT',value:35904,description:'Unsized sRGB format that leaves the precision up to the driver.',extensionName:'EXT_sRGB'},e.SRGB_ALPHA_EXT={name:'SRGB_ALPHA_EXT',value:35906,description:'Unsized sRGB format with unsized alpha component.',extensionName:'EXT_sRGB'},e.SRGB8_ALPHA8_EXT={name:'SRGB8_ALPHA8_EXT',value:35907,description:'Sized (8-bit) sRGB and alpha formats.',extensionName:'EXT_sRGB'},e.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT={name:'FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT',value:33296,description:'Returns the framebuffer color encoding.',extensionName:'EXT_sRGB'},e.FRAGMENT_SHADER_DERIVATIVE_HINT_OES={name:'FRAGMENT_SHADER_DERIVATIVE_HINT_OES',value:35723,description:'Indicates the accuracy of the derivative calculation for the GLSL built-in functions: dFdx, dFdy, and fwidth.',extensionName:'OES_standard_derivatives'},e.COLOR_ATTACHMENT0_WEBGL={name:'COLOR_ATTACHMENT0_WEBGL',value:36064,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT1_WEBGL={name:'COLOR_ATTACHMENT1_WEBGL',value:36065,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT2_WEBGL={name:'COLOR_ATTACHMENT2_WEBGL',value:36066,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT3_WEBGL={name:'COLOR_ATTACHMENT3_WEBGL',value:36067,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT4_WEBGL={name:'COLOR_ATTACHMENT4_WEBGL',value:36068,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT5_WEBGL={name:'COLOR_ATTACHMENT5_WEBGL',value:36069,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT6_WEBGL={name:'COLOR_ATTACHMENT6_WEBGL',value:36070,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT7_WEBGL={name:'COLOR_ATTACHMENT7_WEBGL',value:36071,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT8_WEBGL={name:'COLOR_ATTACHMENT8_WEBGL',value:36072,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT9_WEBGL={name:'COLOR_ATTACHMENT9_WEBGL',value:36073,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT10_WEBGL={name:'COLOR_ATTACHMENT10_WEBGL',value:36074,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT11_WEBGL={name:'COLOR_ATTACHMENT11_WEBGL',value:36075,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT12_WEBGL={name:'COLOR_ATTACHMENT12_WEBGL',value:36076,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT13_WEBGL={name:'COLOR_ATTACHMENT13_WEBGL',value:36077,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT14_WEBGL={name:'COLOR_ATTACHMENT14_WEBGL',value:36078,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.COLOR_ATTACHMENT15_WEBGL={name:'COLOR_ATTACHMENT15_WEBGL',value:36079,description:'Framebuffer color attachment point',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER0_WEBGL={name:'DRAW_BUFFER0_WEBGL',value:34853,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER1_WEBGL={name:'DRAW_BUFFER1_WEBGL',value:34854,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER2_WEBGL={name:'DRAW_BUFFER2_WEBGL',value:34855,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER3_WEBGL={name:'DRAW_BUFFER3_WEBGL',value:34856,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER4_WEBGL={name:'DRAW_BUFFER4_WEBGL',value:34857,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER5_WEBGL={name:'DRAW_BUFFER5_WEBGL',value:34858,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER6_WEBGL={name:'DRAW_BUFFER6_WEBGL',value:34859,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER7_WEBGL={name:'DRAW_BUFFER7_WEBGL',value:34860,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER8_WEBGL={name:'DRAW_BUFFER8_WEBGL',value:34861,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER9_WEBGL={name:'DRAW_BUFFER9_WEBGL',value:34862,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER10_WEBGL={name:'DRAW_BUFFER10_WEBGL',value:34863,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER11_WEBGL={name:'DRAW_BUFFER11_WEBGL',value:34864,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER12_WEBGL={name:'DRAW_BUFFER12_WEBGL',value:34865,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER13_WEBGL={name:'DRAW_BUFFER13_WEBGL',value:34866,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER14_WEBGL={name:'DRAW_BUFFER14_WEBGL',value:34867,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.DRAW_BUFFER15_WEBGL={name:'DRAW_BUFFER15_WEBGL',value:34868,description:'Draw buffer',extensionName:'WEBGL_draw_buffers'},e.MAX_COLOR_ATTACHMENTS_WEBGL={name:'MAX_COLOR_ATTACHMENTS_WEBGL',value:36063,description:'Maximum number of framebuffer color attachment points',extensionName:'WEBGL_draw_buffers'},e.MAX_DRAW_BUFFERS_WEBGL={name:'MAX_DRAW_BUFFERS_WEBGL',value:34852,description:'Maximum number of draw buffers',extensionName:'WEBGL_draw_buffers'},e.VERTEX_ARRAY_BINDING_OES={name:'VERTEX_ARRAY_BINDING_OES',value:34229,description:'The bound vertex array object (VAO).',extensionName:'VERTEX_ARRAY_BINDING_OES'},e.QUERY_COUNTER_BITS_EXT={name:'QUERY_COUNTER_BITS_EXT',value:34916,description:'The number of bits used to hold the query result for the given target.',extensionName:'EXT_disjoint_timer_query'},e.CURRENT_QUERY_EXT={name:'CURRENT_QUERY_EXT',value:34917,description:'The currently active query.',extensionName:'EXT_disjoint_timer_query'},e.QUERY_RESULT_EXT={name:'QUERY_RESULT_EXT',value:34918,description:'The query result.',extensionName:'EXT_disjoint_timer_query'},e.QUERY_RESULT_AVAILABLE_EXT={name:'QUERY_RESULT_AVAILABLE_EXT',value:34919,description:'A Boolean indicating whether or not a query result is available.',extensionName:'EXT_disjoint_timer_query'},e.TIME_ELAPSED_EXT={name:'TIME_ELAPSED_EXT',value:35007,description:'Elapsed time (in nanoseconds).',extensionName:'EXT_disjoint_timer_query'},e.TIMESTAMP_EXT={name:'TIMESTAMP_EXT',value:36392,description:'The current time.',extensionName:'EXT_disjoint_timer_query'},e.GPU_DISJOINT_EXT={name:'GPU_DISJOINT_EXT',value:36795,description:'A Boolean indicating whether or not the GPU performed any disjoint operation.',extensionName:'EXT_disjoint_timer_query'},e.zeroMeaningByCommand={getError:'NO_ERROR',blendFunc:'ZERO',blendFuncSeparate:'ZERO',readBuffer:'NONE',getFramebufferAttachmentParameter:'NONE',texParameterf:'NONE',texParameteri:'NONE',drawArrays:'POINTS',drawElements:'POINTS',drawArraysInstanced:'POINTS',drawArraysInstancedAngle:'POINTS',drawBuffers:'POINTS',drawElementsInstanced:'POINTS',drawRangeElements:'POINTS'},e.oneMeaningByCommand={blendFunc:'ONE',blendFuncSeparate:'ONE',drawArrays:'LINES',drawElements:'LINES',drawArraysInstanced:'LINES',drawArraysInstancedAngle:'LINES',drawBuffers:'LINES',drawElementsInstanced:'LINES',drawRangeElements:'LINES'},e}(),p={},g={},m;!function(){for(var n in ar)if(ar.hasOwnProperty(n)){var e=ar[n];p[e.name]=e,g[e.value]=e}}();var c=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),h=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return c(t,n),Object.defineProperty(t.prototype,'analyserName',{get:function(){return t.analyserName},enumerable:!0,configurable:!0}),t.prototype.appendToAnalysis=function(a,e){if(a.commands){for(var t={total:0,totalTriangles:0,totalTriangleStrip:0,totalTriangleFan:0,totalLines:0,totalLineStrip:0,totalLineLoop:0,totalPoints:0},n=0,i=a.commands,r;n<i.length;n++)r=i[n],'drawArrays'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawArraysInstanced'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawArraysInstancedANGLE'===r.name&&3<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[2]):'drawElements'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawElementsInstanced'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawElementsInstancedANGLE'===r.name&&2<=r.commandArguments.length?this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[1]):'drawRangeElements'===r.name&&4<=r.commandArguments.length&&this.appendToPrimitives(t,r.commandArguments[0],r.commandArguments[3]);e.total=t.total,e.triangles=t.totalTriangles,e.triangleStrip=t.totalTriangleStrip,e.triangleFan=t.totalTriangleFan,e.lines=t.totalLines,e.lineStrip=t.totalLineStrip,e.lineLoop=t.totalLineLoop,e.points=t.totalPoints}},t.prototype.appendToPrimitives=function(r,e,t){e===ar.POINTS.value?r.totalPoints+=t:e===ar.LINES.value?r.totalLines+=t:e===ar.LINE_STRIP.value?r.totalLineStrip+=t:e===ar.LINE_LOOP.value?r.totalLineLoop+=t:e===ar.TRIANGLES.value?r.totalTriangles+=t:e===ar.TRIANGLE_STRIP.value?r.totalTriangleStrip+=t:e===ar.TRIANGLE_FAN.value&&(r.totalTriangleFan+=t),r.total+=t},t.analyserName='Primitives',t}(n),f=function(){function e(t){this.contextInformation=t,this.analysers=[],this.initAnalysers()}return e.prototype.appendAnalyses=function(n){for(var e in this.analysers)this.analysers.hasOwnProperty(e)&&this.analysers[e].appendAnalysis(n)},e.prototype.initAnalysers=function(){this.analysers.push(new i(this.contextInformation),new u(this.contextInformation),new h(this.contextInformation))},e}(),E=function(){function e(){}return e.storeOriginFunction=function(r,e){if(r&&r[e]){var t=this.getOriginFunctionName(e);r[t]||(r[t]=r[e])}},e.storePrototypeOriginFunction=function(r,e){if(r&&r.prototype[e]){var t=this.getOriginFunctionName(e);r.prototype[t]||(r.prototype[t]=r.prototype[e])}},e.executePrototypeOriginFunction=function(a,e,t,n){if(a){var o=this.getOriginFunctionName(t);if(e.prototype[o])return a[o]||(a[o]=e.prototype[o]),this.executeFunction(a,o,n)}},e.executeOriginFunction=function(r,e,t){if(r){var n=this.getOriginFunctionName(e);if(r[n])return this.executeFunction(r,n,t)}},e.executeFunction=function(r,e,t){var n=t;if(void 0===n||0===n.length)return r[e]();switch(n.length){case 1:return r[e](n[0]);case 2:return r[e](n[0],n[1]);case 3:return r[e](n[0],n[1],n[2]);case 4:return r[e](n[0],n[1],n[2],n[3]);case 5:return r[e](n[0],n[1],n[2],n[3],n[4]);case 6:return r[e](n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6]);case 8:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]);case 9:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8]);case 10:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9]);case 11:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10]);case 12:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11]);case 13:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12]);case 14:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13]);case 15:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14]);case 16:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15]);case 17:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16]);case 18:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17]);case 19:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18]);case 20:return r[e](n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11],n[12],n[13],n[14],n[15],n[16],n[17],n[18],n[19]);default:return r[e].apply(r,n);}},e.getOriginFunctionName=function(t){return this.originFunctionPrefix+t},e.originFunctionPrefix='__SPECTOR_Origin_',e}(),U=function(){function e(){}return e.getStackTrace=function(a,e){void 0===a&&(a=0),void 0===e&&(e=0);var t=[];try{throw new Error('Errorator.')}catch(a){if(a.stack)for(var n=0,i=(r=a.stack.split('\n')).length;n<i;n++)r[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)?t.push(r[n]):0===r[n].indexOf('    at ')?(r[n]=r[n].replace('    at ',''),t.push(r[n])):-1===r[n].indexOf('/<@http')?-1!==r[n].indexOf('@http')&&(r[n]=r[n].replace('@http',' (http'),r[n]+=')',t.push(r[n])):(r[n]=r[n].substring(r[n].indexOf('/<@http')+3),t.push(r[n]));else if(a.message){var r;for(n=0,i=(r=a.message.split('\n')).length;n<i;n++)if(r[n].match(/^\s*[A-Za-z0-9\-_\$]+\(/)){var o=r[n];r[n+1]&&(o+=' at '+r[n+1],n++),t.push(o)}}}for(t.shift(),n=0;n<a&&0<t.length;n++)t.shift();for(n=0;n<e&&0<t.length;n++)t.pop();return t},e}(),G=function(){function e(){}return e.getWebGlObjectTag=function(n){return n[e.SPECTOROBJECTTAGKEY]},e.attachWebGlObjectTag=function(r,t){t.displayText=e.stringifyWebGlObjectTag(t),r[e.SPECTOROBJECTTAGKEY]=t},e.stringifyWebGlObjectTag=function(t){return t?t.typeName+' - ID: '+t.id:'No tag available.'},e.SPECTOROBJECTTAGKEY='__SPECTOR_Object_TAG',e}(),V=function(){function e(){this.id=0}return Object.defineProperty(e.prototype,'type',{get:function(){return window[this.typeName]||null},enumerable:!0,configurable:!0}),e.prototype.tagWebGlObject=function(r){if(this.type){var a;if(!r)return a;if(a=G.getWebGlObjectTag(r))return a;if(r instanceof this.type){var t=this.getNextId();return a={typeName:this.typeName,id:t},G.attachWebGlObjectTag(r,a),a}return a}},e.prototype.getNextId=function(){return this.id++},e}(),H=function(){function e(t){this.options=t}return e.prototype.createCapture=function(d,e,u){var p=U.getStackTrace(4,1),m=0===d.name.indexOf('uniform')?this.stringifyUniform(d.arguments):this.stringify(d.arguments,d.result),g={id:e,startTime:d.startTime,commandEndTime:d.endTime,endTime:0,name:d.name,commandArguments:d.arguments,result:d.result,stackTrace:p,status:0,marker:u,text:m};this.transformCapture(g);for(var o=0,s;o<g.commandArguments.length;o++)s=g.commandArguments[o],s&&s.length&&50<s.length&&(g.commandArguments[o]='Array Length: '+s.length);if(g.commandArguments){var a=[];for(o=0;o<g.commandArguments.length;o++){var c=g.commandArguments[o];void 0===c?a.push(void 0):null===c?a.push(null):a.push(JSON.parse(this.stringifyJSON(c)))}g.commandArguments=a}return g.result&&(g.result=JSON.parse(this.stringifyJSON(g.result))),g},e.prototype.stringifyJSON=function(t){try{return JSON.stringify(t)}catch(t){return null}},e.prototype.transformCapture=function(){},e.prototype.stringify=function(r,e){var t=this.spiedCommandName;return r&&0<r.length&&(t+=': '+this.stringifyArgs(r).join(', ')),e&&(t+=' -> '+this.stringifyResult(e)),t},e.prototype.stringifyUniform=function(a){var e=this.spiedCommandName;if(a&&0<a.length){for(var t=[this.stringifyValue(a[0])],n=1;n<a.length;n++)if('number'==typeof a[n]){var o=a[n]+'';t.push(o)}else o=this.stringifyValue(a[n]),t.push(o);e+=': '+t.join(', ')}return e},e.prototype.stringifyArgs=function(a){for(var e=[],t=0;t<a.length;t++){var n=a[t],o=this.stringifyValue(n);e.push(o)}return e},e.prototype.stringifyResult=function(t){if(t)return this.stringifyValue(t)},e.prototype.stringifyValue=function(n){if(null===n)return'null';if(void 0===n)return'undefined';var r=G.getWebGlObjectTag(n);return r?r.displayText:'number'==typeof n&&ar.isWebGlConstant(n)?ar.stringifyWebGlConstant(n,this.spiedCommandName):'string'==typeof n?n:n instanceof HTMLImageElement?n.src:n instanceof ArrayBuffer?'[--('+n.byteLength+')--]':n.length?'[..('+n.length+')..]':n},e}(),W=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),$=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return W(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(a){var e=[],t=this.options.context.getParameter(ar.READ_FRAMEBUFFER_BINDING.value),n=this.options.tagWebGlObject(t);e.push('READ FROM: '+this.stringifyValue(n));var i=this.options.context.getParameter(ar.DRAW_FRAMEBUFFER_BINDING.value),r=this.options.tagWebGlObject(i);e.push('WRITE TO: '+this.stringifyValue(r));for(var o=0;8>o;o++)e.push(a[o]);return(a[8]&ar.DEPTH_BUFFER_BIT.value)===ar.DEPTH_BUFFER_BIT.value&&e.push(ar.DEPTH_BUFFER_BIT.name),(a[8]&ar.STENCIL_BUFFER_BIT.value)===ar.STENCIL_BUFFER_BIT.value&&e.push(ar.STENCIL_BUFFER_BIT.name),(a[8]&ar.COLOR_BUFFER_BIT.value)===ar.COLOR_BUFFER_BIT.value&&e.push(ar.COLOR_BUFFER_BIT.name),e.push(ar.stringifyWebGlConstant(a[9],'blitFrameBuffer')),e},t.commandName='blitFrameBuffer',t}(H),z=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),j=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return z(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return(n[0]&ar.DEPTH_BUFFER_BIT.value)===ar.DEPTH_BUFFER_BIT.value&&e.push(ar.DEPTH_BUFFER_BIT.name),(n[0]&ar.STENCIL_BUFFER_BIT.value)===ar.STENCIL_BUFFER_BIT.value&&e.push(ar.STENCIL_BUFFER_BIT.name),(n[0]&ar.COLOR_BUFFER_BIT.value)===ar.COLOR_BUFFER_BIT.value&&e.push(ar.COLOR_BUFFER_BIT.name),e},t.commandName='clear',t}(H),X=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),K=['lineWidth'],Y=function(r){function t(e,a){var n=r.call(this,e)||this;return n.internalSpiedCommandName=a,n.isDeprecated=-1<K.indexOf(n.spiedCommandName),n}return X(t,r),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return this.internalSpiedCommandName},enumerable:!0,configurable:!0}),t.prototype.transformCapture=function(t){this.isDeprecated&&(t.status=50)},t}(H),q=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Z=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return q(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(n[0]),e},t.commandName='disableVertexAttribArray',t}(H),Q=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),J=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Q(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawArrays')),e.push(n[1]),e.push(n[2]),e},t.commandName='drawArrays',t}(H),ee=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),te=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ee(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawArraysInstanced')),e.push(n[1]),e.push(n[2]),e.push(n[3]),e},t.commandName='drawArraysInstanced',t}(H),ne=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),re=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ne(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawArraysInstancedANGLE')),e.push(n[1]),e.push(n[2]),e.push(n[3]),e},t.commandName='drawArraysInstancedANGLE',t}(H),ae=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),oe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ae(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawElements')),e.push(n[1]),e.push(ar.stringifyWebGlConstant(n[2],'drawElements')),e.push(n[3]),e},t.commandName='drawElements',t}(H),ie=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),se=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ie(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawElementsInstancedANGLE')),e.push(n[1]),e.push(ar.stringifyWebGlConstant(n[2],'drawElementsInstancedANGLE')),e.push(n[3]),e.push(n[4]),e},t.commandName='drawElementsInstancedANGLE',t}(H),le=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),de=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return le(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawElementsInstanced')),e.push(n[1]),e.push(ar.stringifyWebGlConstant(n[2],'drawElementsInstanced')),e.push(n[3]),e.push(n[4]),e},t.commandName='drawElementsInstanced',t}(H),ce=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ue=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ce(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(ar.stringifyWebGlConstant(n[0],'drawRangeElements')),e.push(n[1]),e.push(n[2]),e.push(n[3]),e.push(ar.stringifyWebGlConstant(n[4],'drawRangeElements')),e.push(n[5]),e},t.commandName='drawRangeElements',t}(H),pe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),me=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return pe(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},t.commandName='getActiveAttrib',t}(H),ge=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),he=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ge(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},t.commandName='getActiveUniform',t}(H),fe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ee=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return fe(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(t){return t?'true':'false'},t.commandName='getExtension',t}(H),_e=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ae=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return _e(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(n){if(!n)return'null';var r=G.getWebGlObjectTag(n);return r?r.displayText:n},t.commandName='getParameter',t}(H),Ce=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ye=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ce(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(t){if(t)return'min: '+t.rangeMin+', max: '+t.rangeMax+', precision: '+t.precision},t.commandName='getShaderPrecisionFormat',t}(H),ve=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),be=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ve(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyResult=function(t){if(t)return'name: '+t.name+', size: '+t.size+', type: '+t.type},t.commandName='getTransformFeedbackVarying',t}(H),Te=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Se=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Te(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(r){for(var e=[],t=0;4>t;t++)e.push(r[t].toFixed(0));return e},t.commandName='scissor',t}(H),xe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Re=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return xe(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(n){var e=[];return e.push(n[0]),e.push(n[1]),e.push(ar.stringifyWebGlConstant(n[2],'vertexAttribPointer')),e.push(n[3]),e.push(n[4]),e.push(n[5]),e},t.commandName='vertexAttribPointer',t}(H),Fe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),we=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Fe(t,n),Object.defineProperty(t.prototype,'spiedCommandName',{get:function(){return t.commandName},enumerable:!0,configurable:!0}),t.prototype.stringifyArgs=function(r){for(var e=[],t=0;4>t;t++)e.push(r[t].toFixed(0));return e},t.commandName='viewport',t}(H),Le=function(){function e(t){this.spiedCommandName=t.spiedCommandName,this.spiedCommandRunningContext=t.spiedCommandRunningContext,this.spiedCommand=this.spiedCommandRunningContext[this.spiedCommandName],E.storeOriginFunction(this.spiedCommandRunningContext,this.spiedCommandName),this.callback=t.callback,this.commandOptions={context:t.context,contextVersion:t.contextVersion,extensions:t.extensions,toggleCapture:t.toggleCapture},this.initCustomCommands(),this.initCommand()}return e.prototype.spy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.overloadedCommand},e.prototype.unSpy=function(){this.spiedCommandRunningContext[this.spiedCommandName]=this.spiedCommand},e.prototype.createCapture=function(r,e,t){return this.command.createCapture(r,e,t)},e.prototype.initCommand=function(){this.command=e.customCommandsConstructors[this.spiedCommandName]?e.customCommandsConstructors[this.spiedCommandName](this.commandOptions):new Y(this.commandOptions,this.spiedCommandName),this.overloadedCommand=this.getSpy()},e.prototype.getSpy=function(){var a=this;return function(){var e=o.now,s=E.executeOriginFunction(a.spiedCommandRunningContext,a.spiedCommandName,arguments),l=o.now,d={name:a.spiedCommandName,arguments:arguments,result:s,startTime:e,endTime:l};return a.callback(a,d),s}},e.prototype.initCustomCommands=function(){var n;e.customCommandsConstructors||(e.customCommandsConstructors=((n={})[$.commandName]=function(t){return new $(t)},n[j.commandName]=function(t){return new j(t)},n[Z.commandName]=function(t){return new Z(t)},n[J.commandName]=function(t){return new J(t)},n[te.commandName]=function(t){return new te(t)},n[re.commandName]=function(t){return new re(t)},n[oe.commandName]=function(t){return new oe(t)},n[de.commandName]=function(t){return new de(t)},n[se.commandName]=function(t){return new se(t)},n[ue.commandName]=function(t){return new ue(t)},n[me.commandName]=function(t){return new me(t)},n[he.commandName]=function(t){return new he(t)},n[Ee.commandName]=function(t){return new Ee(t)},n[Ae.commandName]=function(t){return new Ae(t)},n[ye.commandName]=function(t){return new ye(t)},n[be.commandName]=function(t){return new be(t)},n[Se.commandName]=function(t){return new Se(t)},n[Re.commandName]=function(t){return new Re(t)},n[we.commandName]=function(t){return new we(t)},n))},e}(),Ie=function(){function e(t){this.options=t,this.context=t.context,this.contextVersion=t.contextVersion,this.extensions=t.extensions,this.toggleCapture=t.toggleCapture,this.consumeCommands=this.getConsumeCommands(),this.changeCommandsByState=this.getChangeCommandsByState(),this.commandNameToStates=this.getCommandNameToStates()}return Object.defineProperty(e.prototype,'requireStartAndStopStates',{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.startCapture=function(n,e){return this.quickCapture=e,this.capturedCommandsByState={},n&&this.requireStartAndStopStates&&(this.currentState={},this.readFromContextNoSideEffects()),this.copyCurrentStateToPrevious(),this.currentState={},this.previousState},e.prototype.stopCapture=function(){return this.requireStartAndStopStates&&this.readFromContextNoSideEffects(),this.analyse(void 0),this.currentState},e.prototype.registerCallbacks=function(l){for(var e in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(e))for(var t=0,n=this.changeCommandsByState[e],i;t<n.length;t++)i=n[t],l[i]=l[i]||[],l[i].push(this.onChangeCommand.bind(this));for(var r=0,o=this.consumeCommands,s;r<o.length;r++)s=o[r],l[s]=l[s]||[],l[s].push(this.onConsumeCommand.bind(this))},e.prototype.getStateData=function(){return this.currentState},e.prototype.getConsumeCommands=function(){return[]},e.prototype.getChangeCommandsByState=function(){return{}},e.prototype.copyCurrentStateToPrevious=function(){this.currentState&&(this.previousState=this.currentState)},e.prototype.onChangeCommand=function(r){for(var e=0,t=this.commandNameToStates[r.name],n;e<t.length;e++){if(n=t[e],!this.isValidChangeCommand(r,n))return;this.capturedCommandsByState[n]=this.capturedCommandsByState[n]||[],this.capturedCommandsByState[n].push(r)}},e.prototype.isValidChangeCommand=function(){return!0},e.prototype.onConsumeCommand=function(t){this.isValidConsumeCommand(t)&&(this.readFromContextNoSideEffects(),this.analyse(t),this.storeCommandIds(),t[this.stateName]=this.currentState,this.startCapture(!1,this.quickCapture))},e.prototype.isValidConsumeCommand=function(){return!0},e.prototype.analyse=function(l){for(var e in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(e)){var t=this.capturedCommandsByState[e],n=t.length-1;if(0<=n)if(l){for(var i=0,r;i<n;i++)r=t[i],r.consumeCommandId=l.id,this.changeCommandCaptureStatus(r,30);var o=this.isStateEnableNoSideEffects(e,l.commandArguments);(s=t[n]).consumeCommandId=l.id,this.areStatesEquals(this.currentState[e],this.previousState[e])?this.changeCommandCaptureStatus(s,30):o?this.changeCommandCaptureStatus(s,40):this.changeCommandCaptureStatus(s,20)}else for(i=0;i<t.length;i++){var s=t[i];this.changeCommandCaptureStatus(s,10)}}},e.prototype.storeCommandIds=function(){for(var d=['unusedCommandIds','disabledCommandIds','redundantCommandIds','validCommandIds'],e=0,t=d,n;e<t.length;e++)n=t[e],this.currentState[n]=[];for(var i in this.capturedCommandsByState)if(this.capturedCommandsByState.hasOwnProperty(i))for(var r=0,o=this.capturedCommandsByState[i],s;r<o.length;r++)switch(s=o[r],s.status){case 10:this.currentState.unusedCommandIds.push(s.id);break;case 20:this.currentState.disabledCommandIds.push(s.id);break;case 30:this.currentState.redundantCommandIds.push(s.id);break;case 40:this.currentState.validCommandIds.push(s.id);}for(var a=0,c=d;a<c.length;a++)n=c[a],this.currentState[n].length||delete this.currentState[n]},e.prototype.changeCommandCaptureStatus=function(n,e){return n.status<e&&(n.status=e,!0)},e.prototype.areStatesEquals=function(r,a){if(typeof r!=typeof a)return!1;if(r&&!a)return!1;if(a&&!r)return!1;if(null==r)return!0;if(r.length&&a.length&&'string'!=typeof r){if(r.length!==a.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==a[o])return!1;return!0}return r===a},e.prototype.isStateEnable=function(){return!0},e.prototype.getSpectorData=function(t){if(t)return{__SPECTOR_Object_TAG:G.getWebGlObjectTag(t)||this.options.tagWebGlObject(t),__SPECTOR_Object_CustomData:t.__SPECTOR_Object_CustomData,__SPECTOR_Metadata:t.__SPECTOR_Metadata}},e.prototype.readFromContextNoSideEffects=function(){this.toggleCapture(!1),this.readFromContext(),this.toggleCapture(!0)},e.prototype.isStateEnableNoSideEffects=function(r,e){this.toggleCapture(!1);var t=this.isStateEnable(r,e);return this.toggleCapture(!0),t},e.prototype.getCommandNameToStates=function(){var a={};for(var e in this.changeCommandsByState)if(this.changeCommandsByState.hasOwnProperty(e))for(var t=0,n=this.changeCommandsByState[e],o;t<n.length;t++)o=n[t],a[o]=a[o]||[],a[o].push(e);return a},e}(),De=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Me=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return De(t,n),t.prototype.getWebgl1Parameters=function(){return[]},t.prototype.getWebgl2Parameters=function(){return[]},t.prototype.getChangeCommandsByState=function(){this.parameters=[],this.parameters.push(this.getWebgl1Parameters()),1<this.contextVersion&&this.parameters.push(this.getWebgl2Parameters());for(var l={},e=1;e<=this.contextVersion&&!(e>this.parameters.length);e++)if(this.parameters[e-1])for(var t=0,n=this.parameters[e-1],i;t<n.length;t++)if(i=n[t],i.changeCommands)for(var r=0,o=i.changeCommands,s;r<o.length;r++)s=o[r],l[i.constant.name]=l[i.constant.name]||[],l[i.constant.name].push(s);return l},t.prototype.readFromContext=function(){for(var a=1;a<=this.contextVersion&&!(a>this.parameters.length);a++)for(var e=0,t=this.parameters[a-1];e<t.length;e++){var n=t[e],i=this.readParameterFromContext(n),r=G.getWebGlObjectTag(i);if(r)this.currentState[n.constant.name]=r;else{var o=this.stringifyParameterValue(i,n);this.currentState[n.constant.name]=o}}},t.prototype.readParameterFromContext=function(t){return t.constant.extensionName&&!this.extensions[t.constant.extensionName]?'Extension '+t.constant.extensionName+' is unavailble.':this.context.getParameter(t.constant.value)},t.prototype.stringifyParameterValue=function(a,o){if(null===a)return'null';if(void 0===a)return'undefined';if(30===o.returnType)return a=a.toString(2),a='00000000000000000000000000000000'.substr(a.length)+a;if('number'==typeof a&&ar.isWebGlConstant(a)){if(20===o.returnType){var t=o.changeCommands&&o.changeCommands[0]||'';return a=ar.stringifyWebGlConstant(a,t)}return a}if(a.length&&'string'!=typeof a){for(var n=[],i=0;i<a.length;i++)n.push(a[i]);return n}return a},t}(Ie),Be=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ne=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Be(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.PACK_ALIGNMENT,changeCommands:['pixelStorei']},{constant:ar.UNPACK_ALIGNMENT,changeCommands:['pixelStorei']},{constant:ar.UNPACK_COLORSPACE_CONVERSION_WEBGL,returnType:20,changeCommands:['pixelStorei']},{constant:ar.UNPACK_FLIP_Y_WEBGL,changeCommands:['pixelStorei']},{constant:ar.UNPACK_PREMULTIPLY_ALPHA_WEBGL,changeCommands:['pixelStorei']}]},t.prototype.getWebgl2Parameters=function(){return[{constant:ar.PACK_ROW_LENGTH,changeCommands:['pixelStorei']},{constant:ar.PACK_SKIP_PIXELS,changeCommands:['pixelStorei']},{constant:ar.PACK_SKIP_ROWS,changeCommands:['pixelStorei']},{constant:ar.UNPACK_IMAGE_HEIGHT,changeCommands:['pixelStorei']},{constant:ar.UNPACK_SKIP_PIXELS,changeCommands:['pixelStorei']},{constant:ar.UNPACK_SKIP_ROWS,changeCommands:['pixelStorei']},{constant:ar.UNPACK_SKIP_IMAGES,changeCommands:['pixelStorei']}]},t.prototype.getConsumeCommands=function(){return['readPixels','texImage2D','texSubImage2D']},t.prototype.isValidChangeCommand=function(n,e){return p[e].value===n.commandArguments[0]},t.stateName='AlignmentState',t}(Me),Pe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Oe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Pe(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.BLEND,changeCommands:['enable','disable']},{constant:ar.BLEND_COLOR,changeCommands:['blendColor']},{constant:ar.BLEND_DST_ALPHA,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:ar.BLEND_DST_RGB,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:ar.BLEND_EQUATION_ALPHA,returnType:20,changeCommands:['blendEquation','blendEquationSeparate']},{constant:ar.BLEND_EQUATION_RGB,returnType:20,changeCommands:['blendEquation','blendEquationSeparate']},{constant:ar.BLEND_SRC_ALPHA,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']},{constant:ar.BLEND_SRC_RGB,returnType:20,changeCommands:['blendFunc','blendFuncSeparate']}]},t.prototype.isValidChangeCommand=function(t){return'enable'!==t.name&&'disable'!==t.name||t.commandArguments[0]===ar.BLEND.value},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.BLEND.value)},t.stateName='BlendState',t}(Me),ke=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ue=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ke(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.COLOR_CLEAR_VALUE,changeCommands:['clearColor']},{constant:ar.DEPTH_CLEAR_VALUE,changeCommands:['clearDepth']},{constant:ar.STENCIL_CLEAR_VALUE,changeCommands:['clearStencil']}]},t.prototype.getConsumeCommands=function(){return['clear']},t.prototype.isStateEnable=function(n,e){return n===ar.COLOR_CLEAR_VALUE.name?ar.COLOR_BUFFER_BIT.value===(e[0]&ar.COLOR_BUFFER_BIT.value):n===ar.DEPTH_CLEAR_VALUE.name?ar.DEPTH_BUFFER_BIT.value===(e[0]&ar.DEPTH_BUFFER_BIT.value):n===ar.STENCIL_CLEAR_VALUE.name&&ar.STENCIL_BUFFER_BIT.value===(e[0]&ar.STENCIL_BUFFER_BIT.value)},t.stateName='ClearState',t}(Me),Ge=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ve=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ge(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.COLOR_WRITEMASK,changeCommands:['colorMask']}]},t.prototype.getConsumeCommands=function(){return s},t.stateName='ColorState',t}(Me),He=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),We=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return He(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.SAMPLE_COVERAGE_VALUE,changeCommands:['sampleCoverage']},{constant:ar.SAMPLE_COVERAGE_INVERT,changeCommands:['sampleCoverage']}]},t.prototype.getWebgl2Parameters=function(){return[{constant:ar.SAMPLE_COVERAGE,changeCommands:['enable','disable']},{constant:ar.SAMPLE_ALPHA_TO_COVERAGE,changeCommands:['enable','disable']}]},t.prototype.isValidChangeCommand=function(n,e){return'enable'!==n.name&&'disable'!==n.name||(n.commandArguments[0]===ar.SAMPLE_COVERAGE.value?e===ar.SAMPLE_COVERAGE.name:n.commandArguments[0]===ar.SAMPLE_ALPHA_TO_COVERAGE.value&&e===ar.SAMPLE_ALPHA_TO_COVERAGE.name)},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(){return 2===this.contextVersion&&this.context.isEnabled(ar.SAMPLE_COVERAGE.value)},t.stateName='CoverageState',t}(Me),$e=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ze=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return $e(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.CULL_FACE,changeCommands:['enable','disable']},{constant:ar.CULL_FACE_MODE,returnType:20,changeCommands:['cullFace']}]},t.prototype.getConsumeCommands=function(){return s},t.prototype.isValidChangeCommand=function(t){return'enable'!==t.name&&'disable'!==t.name||t.commandArguments[0]===ar.CULL_FACE.value},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.CULL_FACE.value)},t.stateName='CullState',t}(Me),je=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Xe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return je(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.DEPTH_TEST,changeCommands:['enable','disable']},{constant:ar.DEPTH_FUNC,returnType:20,changeCommands:['depthFunc']},{constant:ar.DEPTH_RANGE,changeCommands:['depthRange']},{constant:ar.DEPTH_WRITEMASK,changeCommands:['depthMask']}]},t.prototype.getConsumeCommands=function(){return s},t.prototype.isValidChangeCommand=function(t){return'enable'!==t.name&&'disable'!==t.name||t.commandArguments[0]===ar.DEPTH_TEST.value},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.DEPTH_TEST.value)},t.stateName='DepthState',t}(Me),Ke=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ye=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ke(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.DITHER,changeCommands:['enable','disable']},{constant:ar.VIEWPORT,changeCommands:['viewPort']},{constant:ar.FRONT_FACE,returnType:20,changeCommands:['frontFace']},{constant:ar.FRAGMENT_SHADER_DERIVATIVE_HINT_OES,changeCommands:['hint']}]},t.prototype.getWebgl2Parameters=function(){return[{constant:ar.RASTERIZER_DISCARD,changeCommands:['enable','disable']},{constant:ar.FRAGMENT_SHADER_DERIVATIVE_HINT,changeCommands:['hint']}]},t.prototype.isValidChangeCommand=function(n,e){return'enable'===n.name||'disable'===n.name?n.commandArguments[0]===ar.DITHER.value?e===ar.DITHER.name:n.commandArguments[0]===ar.RASTERIZER_DISCARD.value&&e===ar.RASTERIZER_DISCARD.name:'hint'!==n.name||(n.commandArguments[0]===ar.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.value?e===ar.FRAGMENT_SHADER_DERIVATIVE_HINT_OES.name:n.commandArguments[0]===ar.FRAGMENT_SHADER_DERIVATIVE_HINT.value&&e===ar.FRAGMENT_SHADER_DERIVATIVE_HINT.name)},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(t){return t===ar.DITHER.name?this.context.isEnabled(ar.DITHER.value):t!==ar.RASTERIZER_DISCARD.name||this.context.isEnabled(ar.RASTERIZER_DISCARD.value)},t.stateName='DrawState',t}(Me),qe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ze=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return qe(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.GENERATE_MIPMAP_HINT,changeCommands:['hint']}]},t.prototype.getConsumeCommands=function(){return['generateMipmap']},t.stateName='MipmapHintState',t}(Me),Qe=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Je=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Qe(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.POLYGON_OFFSET_FILL,changeCommands:['enable','disable']},{constant:ar.POLYGON_OFFSET_FACTOR,changeCommands:['polygonOffset']},{constant:ar.POLYGON_OFFSET_UNITS,changeCommands:['polygonOffset']}]},t.prototype.isValidChangeCommand=function(t){return'enable'!==t.name&&'disable'!==t.name||t.commandArguments[0]===ar.POLYGON_OFFSET_FILL.value},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.POLYGON_OFFSET_FILL.value)},t.stateName='PolygonOffsetState',t}(Me),et=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),tt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return et(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.SCISSOR_TEST,changeCommands:['enable','disable']},{constant:ar.SCISSOR_BOX,changeCommands:['scissor']}]},t.prototype.isValidChangeCommand=function(t){return'enable'!==t.name&&'disable'!==t.name||t.commandArguments[0]===ar.SCISSOR_TEST.value},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.SCISSOR_TEST.value)},t.stateName='ScissorState',t}(Me),nt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),rt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return nt(t,n),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.STENCIL_TEST,changeCommands:['enable','disable']},{constant:ar.STENCIL_BACK_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_BACK_FUNC,returnType:20,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_BACK_PASS_DEPTH_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_BACK_PASS_DEPTH_PASS,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_BACK_REF,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_BACK_VALUE_MASK,returnType:30,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_BACK_WRITEMASK,returnType:30,changeCommands:['stencilMask','stencilMaskSeparate']},{constant:ar.STENCIL_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_FUNC,returnType:20,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_PASS_DEPTH_FAIL,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_PASS_DEPTH_PASS,returnType:20,changeCommands:['stencilOp','stencilOpSeparate']},{constant:ar.STENCIL_REF,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_VALUE_MASK,returnType:30,changeCommands:['stencilFunc','stencilFuncSeparate']},{constant:ar.STENCIL_WRITEMASK,returnType:30,changeCommands:['stencilMask','stencilMaskSeparate']}]},t.prototype.isValidChangeCommand=function(n){return'enable'===n.name||'disable'===n.name?n.commandArguments[0]===ar.STENCIL_TEST.value:'stencilOp'===n.name||'stencilOpSeparate'===n.name?0<t.stencilOpStates.indexOf(n.commandArguments[0]):'stencilFunc'===n.name||'stencilFuncSeparate'===n.name?0<t.stencilFuncStates.indexOf(n.commandArguments[0]):'stencilMask'!==n.name&&'stencilMaskSeparate'!==n.name||0<t.stencilMaskStates.indexOf(n.commandArguments[0])},t.prototype.getConsumeCommands=function(){return s},t.prototype.isStateEnable=function(){return this.context.isEnabled(ar.STENCIL_TEST.value)},t.stateName='StencilState',t.stencilOpStates=[ar.STENCIL_BACK_FAIL.value,ar.STENCIL_BACK_PASS_DEPTH_FAIL.value,ar.STENCIL_BACK_PASS_DEPTH_PASS.value,ar.STENCIL_FAIL.value,ar.STENCIL_PASS_DEPTH_FAIL.value,ar.STENCIL_PASS_DEPTH_PASS.value],t.stencilFuncStates=[ar.STENCIL_BACK_FUNC.value,ar.STENCIL_BACK_REF.value,ar.STENCIL_BACK_VALUE_MASK.value,ar.STENCIL_FUNC.value,ar.STENCIL_REF.value,ar.STENCIL_VALUE_MASK.value],t.stencilMaskStates=[ar.STENCIL_BACK_WRITEMASK.value,ar.STENCIL_WRITEMASK.value],t}(Me),at=function(){function e(){}return e.isSupportedCombination=function(r,e,t){return r=r||ar.UNSIGNED_BYTE.value,((e=e||ar.RGBA.value)===ar.RGB.value||e===ar.RGBA.value)&&(t===ar.RGB.value||t===ar.RGBA.value||t===ar.RGBA8.value||t===ar.RGBA16F.value||t===ar.RGBA32F.value||t===ar.RGB16F.value||t===ar.RGB32F.value||t===ar.R11F_G11F_B10F.value)&&this.isSupportedComponentType(r)},e.readPixels=function(d,e,t,n,i,r){d.getError();var o=4*(n*i),a;if(r===ar.UNSIGNED_BYTE.value?a=new Uint8Array(o):(r=ar.FLOAT.value,a=new Float32Array(o)),d.readPixels(e,t,n,i,d.RGBA,r,a),!d.getError()){if(r===ar.UNSIGNED_BYTE.value)return a;for(var s=new Uint8Array(4*(n*i)),c=0;c<i;c++)for(var l=0;l<n;l++)s[4*(c*n)+4*l+0]=255*b(x(a[4*(c*n)+4*l+0],0),1),s[4*(c*n)+4*l+1]=255*b(x(a[4*(c*n)+4*l+1],0),1),s[4*(c*n)+4*l+2]=255*b(x(a[4*(c*n)+4*l+2],0),1),s[4*(c*n)+4*l+3]=255*b(x(a[4*(c*n)+4*l+3],0),1);return s}},e.isSupportedComponentType=function(t){return t===ar.UNSIGNED_BYTE.value||t===ar.UNSIGNED_SHORT_4_4_4_4.value||t===ar.UNSIGNED_SHORT_5_5_5_1.value||t===ar.UNSIGNED_SHORT_5_6_5.value||t===ar.HALF_FLOAT.value||t===ar.HALF_FLOAT_OES.value||t===ar.FLOAT.value},e}(),ot=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),it=function(r){function t(e){var a=r.call(this,e)||this;return a.captureFrameBuffer=e.context.createFramebuffer(),a.workingCanvas=document.createElement('canvas'),a.workingContext2D=a.workingCanvas.getContext('2d'),a.captureCanvas=document.createElement('canvas'),a.captureContext2D=a.captureCanvas.getContext('2d'),a.captureContext2D.imageSmoothingEnabled=!0,a.captureContext2D.mozImageSmoothingEnabled=!0,a.captureContext2D.oImageSmoothingEnabled=!0,a.captureContext2D.webkitImageSmoothingEnabled=!0,a.captureContext2D.msImageSmoothingEnabled=!0,a}return ot(t,r),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),t.prototype.getConsumeCommands=function(){return['clear','clearBufferfv','clearBufferiv','clearBufferuiv','clearBufferfi'].concat(s)},t.prototype.readFromContext=function(){var d=this.context;this.currentState.Attachments=[];var e=this.context.getParameter(ar.FRAMEBUFFER_BINDING.value);if(!e)return this.currentState.FrameBuffer=null,void this.getCapture(d,'Canvas COLOR_ATTACHMENT',0,0,d.drawingBufferWidth,d.drawingBufferHeight,0,0,ar.UNSIGNED_BYTE.value);var u=d.getParameter(d.VIEWPORT),n=u[0],i=u[1],r=u[2],o=u[3];this.currentState.FrameBuffer=this.getSpectorData(e);var s=this.context.checkFramebufferStatus(ar.FRAMEBUFFER.value);if(this.currentState.FrameBufferStatus=g[s].name,s===ar.FRAMEBUFFER_COMPLETE.value)if(this.extensions[ar.MAX_DRAW_BUFFERS_WEBGL.extensionName])for(var a=this.context.getParameter(ar.MAX_DRAW_BUFFERS_WEBGL.value),c=0;c<a;c++)this.readFrameBufferAttachmentFromContext(this.context,e,p['COLOR_ATTACHMENT'+c+'_WEBGL'],n,i,r,o);else if(1<this.contextVersion)for(a=this.context.getParameter(ar.MAX_DRAW_BUFFERS.value),c=0;c<a;c++)this.readFrameBufferAttachmentFromContext(this.context,e,p['COLOR_ATTACHMENT'+c],n,i,r,o);else this.readFrameBufferAttachmentFromContext(this.context,e,p.COLOR_ATTACHMENT0,n,i,r,o)},t.prototype.readFrameBufferAttachmentFromContext=function(d,e,t,n,i,r,o){var s=ar.FRAMEBUFFER.value,a=this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(a!==ar.NONE.value){var c=this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(c){var l=1<this.contextVersion?this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value):ar.UNSIGNED_BYTE.value;a===ar.RENDERBUFFER.value?this.readFrameBufferAttachmentFromRenderBuffer(d,e,t,n,i,r,o,s,l,c):a===ar.TEXTURE.value&&this.readFrameBufferAttachmentFromTexture(d,e,t,n,i,r,o,s,l,c)}}},t.prototype.readFrameBufferAttachmentFromRenderBuffer=function(f,e,t,n,i,r,o,s,a,c){var l=0,_=0;if(c.__SPECTOR_Object_CustomData){var h=c.__SPECTOR_Object_CustomData;if(r=h.width,o=h.height,l=h.samples,_=h.internalFormat,!l&&!at.isSupportedCombination(a,ar.RGBA.value,_))return}if(l){var d=f,p=f.createRenderbuffer(),m=f.getParameter(f.RENDERBUFFER_BINDING);f.bindRenderbuffer(f.RENDERBUFFER,p),f.renderbufferStorage(f.RENDERBUFFER,_,r,o),f.bindRenderbuffer(f.RENDERBUFFER,m),f.bindFramebuffer(ar.FRAMEBUFFER.value,this.captureFrameBuffer),f.framebufferRenderbuffer(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,ar.RENDERBUFFER.value,p);var g=d.getParameter(d.READ_FRAMEBUFFER_BINDING),y=d.getParameter(d.DRAW_FRAMEBUFFER_BINDING);d.bindFramebuffer(d.READ_FRAMEBUFFER,e),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,this.captureFrameBuffer),d.blitFramebuffer(0,0,r,o,0,0,r,o,f.COLOR_BUFFER_BIT,f.NEAREST),d.bindFramebuffer(ar.FRAMEBUFFER.value,this.captureFrameBuffer),d.bindFramebuffer(d.READ_FRAMEBUFFER,g),d.bindFramebuffer(d.DRAW_FRAMEBUFFER,y),this.context.checkFramebufferStatus(ar.FRAMEBUFFER.value)===ar.FRAMEBUFFER_COMPLETE.value&&this.getCapture(f,t.name,n,i,r,o,0,0,ar.UNSIGNED_BYTE.value),f.bindFramebuffer(ar.FRAMEBUFFER.value,e),f.deleteRenderbuffer(p)}else f.bindFramebuffer(ar.FRAMEBUFFER.value,this.captureFrameBuffer),f.framebufferRenderbuffer(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,ar.RENDERBUFFER.value,c),this.context.checkFramebufferStatus(ar.FRAMEBUFFER.value)===ar.FRAMEBUFFER_COMPLETE.value&&this.getCapture(f,t.name,n,i,r,o,0,0,a),f.bindFramebuffer(ar.FRAMEBUFFER.value,e)},t.prototype.readFrameBufferAttachmentFromTexture=function(f,e,t,n,i,r,o,s,a,c){var l=0;1<this.contextVersion&&(l=this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value));var u=this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value),h=this.context.getFramebufferAttachmentParameter(s,t.value,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value),d=(0<h?g[h].name:ar.TEXTURE_2D.name,a);if(c.__SPECTOR_Object_CustomData){var p=c.__SPECTOR_Object_CustomData;if(r=p.width,o=p.height,d=p.type,!at.isSupportedCombination(p.type,p.format,p.internalFormat))return}f.bindFramebuffer(ar.FRAMEBUFFER.value,this.captureFrameBuffer),0===l?f.framebufferTexture2D(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,h||ar.TEXTURE_2D.value,c,u):f.framebufferTextureLayer(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,c,u,l),this.context.checkFramebufferStatus(ar.FRAMEBUFFER.value)===ar.FRAMEBUFFER_COMPLETE.value&&this.getCapture(f,t.name,n,i,r,o,h,l,d),f.bindFramebuffer(ar.FRAMEBUFFER.value,e)},t.prototype.getCapture=function(o,e,f,i,r,s,a,c,_){var u={attachmentName:e,src:null,textureCubeMapFace:a?g[a].name:null,textureLayer:c};if(!this.quickCapture)try{var h=at.readPixels(o,f,i,r,s,_);if(h){this.workingCanvas.width=r,this.workingCanvas.height=s;var d=this.workingContext2D.createImageData(y(r),y(s));d.data.set(h),this.workingContext2D.putImageData(d,0,0);var p=r/s;1>p?(this.captureCanvas.width=t.captureBaseSize*p,this.captureCanvas.height=t.captureBaseSize):1<p?(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize/p):(this.captureCanvas.width=t.captureBaseSize,this.captureCanvas.height=t.captureBaseSize),this.captureCanvas.width=x(this.captureCanvas.width,1),this.captureCanvas.height=x(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation='copy',this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,r,s,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation='source-over',u.src=this.captureCanvas.toDataURL()}}catch(t){rr.warn('Spector can not capture the visual state: '+t)}this.currentState.Attachments.push(u)},t.prototype.analyse=function(){},t.stateName='VisualState',t.captureBaseSize=256,t}(Ie),st=function(){function e(t){this.context=t.context,this.captureFrameBuffer=t.context.createFramebuffer(),this.workingCanvas=document.createElement('canvas'),this.workingContext2D=this.workingCanvas.getContext('2d'),this.captureCanvas=document.createElement('canvas'),this.captureContext2D=this.captureCanvas.getContext('2d'),this.captureContext2D.imageSmoothingEnabled=!0,this.captureContext2D.mozImageSmoothingEnabled=!0,this.captureContext2D.oImageSmoothingEnabled=!0,this.captureContext2D.webkitImageSmoothingEnabled=!0,this.captureContext2D.msImageSmoothingEnabled=!0}return e.prototype.appendTextureState=function(r,e,t){if(void 0===t&&(t=null),e){var n=e.__SPECTOR_Object_CustomData;n&&(n.type&&(r.textureType=this.getWebGlConstant(n.type)),n.format&&(r.format=this.getWebGlConstant(n.format)),n.internalFormat&&(r.internalFormat=this.getWebGlConstant(n.internalFormat)),r.width=n.width,r.height=n.height,n.depth&&(r.depth=n.depth),t&&(r.visual=this.getTextureVisualState(t,e,n)))}},e.prototype.getTextureVisualState=function(m,t,n){try{var i=this.context,r={};if(!at.isSupportedCombination(n.type,n.format,n.internalFormat))return r;var o=this.context.getParameter(ar.FRAMEBUFFER_BINDING.value);i.bindFramebuffer(ar.FRAMEBUFFER.value,this.captureFrameBuffer);try{var s=n.width,a=n.height;if(m===ar.TEXTURE_3D&&n.depth)for(var c=i,l=0;l<n.depth;l++)2<l&&l<n.depth-3||(c.framebufferTextureLayer(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,t,0,l),r['3D Layer '+l]=this.getCapture(i,0,0,s,a,n.type));else if(m===ar.TEXTURE_2D_ARRAY&&n.depth)for(c=i,l=0;l<n.depth;l++)2<l&&l<n.depth-3||(c.framebufferTextureLayer(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,t,0,l),r['Layer '+l]=this.getCapture(i,0,0,s,a,n.type));else if(m===ar.TEXTURE_CUBE_MAP)for(var u=0,g=e.cubeMapFaces,d;u<g.length;u++)d=g[u],i.framebufferTexture2D(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,d.value,t,0),r[d.name]=this.getCapture(i,0,0,s,a,n.type);else i.framebufferTexture2D(ar.FRAMEBUFFER.value,ar.COLOR_ATTACHMENT0.value,ar.TEXTURE_2D.value,t,0),r[ar.TEXTURE_2D.name]=this.getCapture(i,0,0,s,a,n.type)}catch(t){}return i.bindFramebuffer(ar.FRAMEBUFFER.value,o),r}catch(t){}},e.prototype.getCapture=function(l,e,t,n,i,r){try{if(this.context.checkFramebufferStatus(ar.FRAMEBUFFER.value)!==ar.FRAMEBUFFER_COMPLETE.value)return;r=r||ar.UNSIGNED_BYTE.value;var o=at.readPixels(l,e,t,n,i,r);if(!o)return;this.workingCanvas.width=n,this.workingCanvas.height=i;var d=this.workingContext2D.createImageData(n,i);d.data.set(o),this.workingContext2D.putImageData(d,0,0);var a=n/i;return 1>a?(this.captureCanvas.width=it.captureBaseSize*a,this.captureCanvas.height=it.captureBaseSize):1<a?(this.captureCanvas.width=it.captureBaseSize,this.captureCanvas.height=it.captureBaseSize/a):(this.captureCanvas.width=it.captureBaseSize,this.captureCanvas.height=it.captureBaseSize),this.captureCanvas.width=x(this.captureCanvas.width,1),this.captureCanvas.height=x(this.captureCanvas.height,1),this.captureContext2D.globalCompositeOperation='copy',this.captureContext2D.scale(1,-1),this.captureContext2D.translate(0,-this.captureCanvas.height),this.captureContext2D.drawImage(this.workingCanvas,0,0,n,i,0,0,this.captureCanvas.width,this.captureCanvas.height),this.captureContext2D.setTransform(1,0,0,1,0,0),this.captureContext2D.globalCompositeOperation='source-over',this.captureCanvas.toDataURL()}catch(t){}},e.prototype.getWebGlConstant=function(n){var e=g[n];return e?e.name:n+''},e.captureBaseSize=64,e.cubeMapFaces=[ar.TEXTURE_CUBE_MAP_POSITIVE_X,ar.TEXTURE_CUBE_MAP_POSITIVE_Y,ar.TEXTURE_CUBE_MAP_POSITIVE_Z,ar.TEXTURE_CUBE_MAP_NEGATIVE_X,ar.TEXTURE_CUBE_MAP_NEGATIVE_Y,ar.TEXTURE_CUBE_MAP_NEGATIVE_Z],e}(),lt=function(){function e(t){this.context=t.context}return e.prototype.getUboValue=function(d,t,n,i){var r=e.uboTypes[i];if(r){var o=new r.arrayBufferView(n*r.lengthMultiplier),s=this.context,a=s.getIndexedParameter(ar.UNIFORM_BUFFER_BINDING.value,d);if(a){var c=s.getParameter(ar.UNIFORM_BUFFER_BINDING.value);try{s.bindBuffer(ar.UNIFORM_BUFFER.value,a),s.getBufferSubData(ar.UNIFORM_BUFFER.value,t,o)}catch(t){return}c&&s.bindBuffer(ar.UNIFORM_BUFFER.value,c)}return Array.prototype.slice.call(o)}},e.uboTypes=((Er={})[ar.BOOL.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},Er[ar.BOOL_VEC2.value]={arrayBufferView:Uint8Array,lengthMultiplier:2},Er[ar.BOOL_VEC3.value]={arrayBufferView:Uint8Array,lengthMultiplier:3},Er[ar.BOOL_VEC4.value]={arrayBufferView:Uint8Array,lengthMultiplier:4},Er[ar.INT.value]={arrayBufferView:Int32Array,lengthMultiplier:1},Er[ar.INT_VEC2.value]={arrayBufferView:Int32Array,lengthMultiplier:2},Er[ar.INT_VEC3.value]={arrayBufferView:Int32Array,lengthMultiplier:3},Er[ar.INT_VEC4.value]={arrayBufferView:Int32Array,lengthMultiplier:4},Er[ar.UNSIGNED_INT.value]={arrayBufferView:Uint32Array,lengthMultiplier:1},Er[ar.UNSIGNED_INT_VEC2.value]={arrayBufferView:Uint32Array,lengthMultiplier:2},Er[ar.UNSIGNED_INT_VEC3.value]={arrayBufferView:Uint32Array,lengthMultiplier:3},Er[ar.UNSIGNED_INT_VEC4.value]={arrayBufferView:Uint32Array,lengthMultiplier:4},Er[ar.FLOAT.value]={arrayBufferView:Float32Array,lengthMultiplier:1},Er[ar.FLOAT_VEC2.value]={arrayBufferView:Float32Array,lengthMultiplier:2},Er[ar.FLOAT_VEC3.value]={arrayBufferView:Float32Array,lengthMultiplier:3},Er[ar.FLOAT_VEC4.value]={arrayBufferView:Float32Array,lengthMultiplier:4},Er[ar.FLOAT_MAT2.value]={arrayBufferView:Float32Array,lengthMultiplier:4},Er[ar.FLOAT_MAT2x3.value]={arrayBufferView:Float32Array,lengthMultiplier:6},Er[ar.FLOAT_MAT2x4.value]={arrayBufferView:Float32Array,lengthMultiplier:8},Er[ar.FLOAT_MAT3.value]={arrayBufferView:Float32Array,lengthMultiplier:9},Er[ar.FLOAT_MAT3x2.value]={arrayBufferView:Float32Array,lengthMultiplier:6},Er[ar.FLOAT_MAT3x4.value]={arrayBufferView:Float32Array,lengthMultiplier:12},Er[ar.FLOAT_MAT4.value]={arrayBufferView:Float32Array,lengthMultiplier:16},Er[ar.FLOAT_MAT4x2.value]={arrayBufferView:Float32Array,lengthMultiplier:8},Er[ar.FLOAT_MAT4x3.value]={arrayBufferView:Float32Array,lengthMultiplier:12},Er[ar.SAMPLER_2D.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},Er[ar.SAMPLER_CUBE.value]={arrayBufferView:Uint8Array,lengthMultiplier:1},Er),e}(),dt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),ct=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLBuffer'},enumerable:!0,configurable:!0}),t}(V),ut=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLFramebuffer'},enumerable:!0,configurable:!0}),t}(V),pt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLProgram'},enumerable:!0,configurable:!0}),t.saveInGlobalStore=function(n){var e=G.getWebGlObjectTag(n);e&&(this.store[e.id]=n)},t.getFromGlobalStore=function(t){return this.store[t]},t.updateInGlobalStore=function(r,e){if(e){var t=this.getFromGlobalStore(r);if(t){var n=G.getWebGlObjectTag(t);n&&(G.attachWebGlObjectTag(e,n),this.store[n.id]=e)}}},t.store={},t}(V),mt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLQuery'},enumerable:!0,configurable:!0}),t}(V),gt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLRenderbuffer'},enumerable:!0,configurable:!0}),t}(V),ht=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLSampler'},enumerable:!0,configurable:!0}),t}(V),ft=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLShader'},enumerable:!0,configurable:!0}),t}(V),Et=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLSync'},enumerable:!0,configurable:!0}),t}(V),_t=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLTexture'},enumerable:!0,configurable:!0}),t}(V),At=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLTransformFeedback'},enumerable:!0,configurable:!0}),t}(V),Ct=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLUniformLocation'},enumerable:!0,configurable:!0}),t}(V),yt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dt(t,n),Object.defineProperty(t.prototype,'typeName',{get:function(){return'WebGLVertexArrayObject'},enumerable:!0,configurable:!0}),t}(V),vt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),bt=function(r){function t(e){var a=r.call(this,e)||this;return a.drawCallTextureInputState=new st(e),a.drawCallUboInputState=new lt(e),a}return vt(t,r),Object.defineProperty(t.prototype,'stateName',{get:function(){return t.stateName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,'requireStartAndStopStates',{get:function(){return!1},enumerable:!0,configurable:!0}),t.prototype.getConsumeCommands=function(){return s},t.prototype.getChangeCommandsByState=function(){return{}},t.prototype.readFromContext=function(){var r=this.context.getParameter(ar.CURRENT_PROGRAM.value);if(r){this.currentState.frameBuffer=this.readFrameBufferFromContext(),this.currentState.programStatus={program:this.getSpectorData(r),DELETE_STATUS:this.context.getProgramParameter(r,ar.DELETE_STATUS.value),LINK_STATUS:this.context.getProgramParameter(r,ar.LINK_STATUS.value),VALIDATE_STATUS:this.context.getProgramParameter(r,ar.VALIDATE_STATUS.value),RECOMPILABLE:tr.isBuildableProgram(r)},this.currentState.programStatus.RECOMPILABLE&&pt.saveInGlobalStore(r);var e=this.context.getAttachedShaders(r);this.currentState.shaders=[];for(var n=0,i=e;n<i.length;n++){var o=i[n],s=this.readShaderFromContext(o);this.currentState.shaders.push(s)}var a=this.context.getProgramParameter(r,ar.ACTIVE_ATTRIBUTES.value);this.currentState.attributes=[];for(var c=0,l;c<a;c++)l=this.readAttributeFromContext(r,c),this.currentState.attributes.push(l);var u=this.context.getProgramParameter(r,ar.ACTIVE_UNIFORMS.value);this.currentState.uniforms=[];var h=[];for(c=0;c<u;c++){h.push(c);var d=this.readUniformFromContext(r,c);this.currentState.uniforms.push(d)}if(1<this.contextVersion){this.readUniformsFromContextIntoState(r,h,this.currentState.uniforms);var p=this.context.getProgramParameter(r,ar.ACTIVE_UNIFORM_BLOCKS.value);for(this.currentState.uniformBlocks=[],c=0;c<p;c++){var m=this.readUniformBlockFromContext(r,c);this.currentState.uniformBlocks.push(m)}if(this.context.getParameter(ar.TRANSFORM_FEEDBACK_ACTIVE.value)){var g=this.context.getProgramParameter(r,ar.TRANSFORM_FEEDBACK_BUFFER_MODE.value);this.currentState.transformFeedbackMode=this.getWebGlConstant(g),this.currentState.transformFeedbacks=[];var f=this.context.getProgramParameter(r,ar.TRANSFORM_FEEDBACK_VARYINGS.value);for(c=0;c<f;c++){var y=this.readTransformFeedbackFromContext(r,c);this.currentState.transformFeedbacks.push(y)}}}for(c=0;c<h.length;c++){if(null!==(d=this.currentState.uniforms[c]).value&&void 0!==d.value){var E=t.samplerTypes[d.typeValue];if(E)if(d.value.length){d.textures=[];for(var x=0;x<d.value.length;x++)d.textures.push(this.readTextureFromContext(d.value[x],E))}else d.texture=this.readTextureFromContext(d.value,E)}delete d.typeValue}}},t.prototype.readFrameBufferFromContext=function(){var a=this.context.getParameter(ar.FRAMEBUFFER_BINDING.value);if(!a)return null;var s={};if(s.frameBuffer=this.getSpectorData(a),this.readFrameBufferAttachmentFromContext(ar.DEPTH_ATTACHMENT.value)&&(s.depthAttachment=this.readFrameBufferAttachmentFromContext(ar.DEPTH_ATTACHMENT.value)),this.readFrameBufferAttachmentFromContext(ar.STENCIL_ATTACHMENT.value)&&(s.stencilAttachment=this.readFrameBufferAttachmentFromContext(ar.STENCIL_ATTACHMENT.value)),this.extensions[ar.MAX_DRAW_BUFFERS_WEBGL.extensionName]){s.colorAttachments=[];for(var t=this.context.getParameter(ar.MAX_DRAW_BUFFERS_WEBGL.value),n=0;n<t;n++)(r=this.readFrameBufferAttachmentFromContext(p['COLOR_ATTACHMENT'+n+'_WEBGL'].value))&&s.colorAttachments.push(r)}else if(1<this.contextVersion){var i=this.context;for(s.colorAttachments=[],t=i.getParameter(ar.MAX_DRAW_BUFFERS.value),n=0;n<t;n++)(r=this.readFrameBufferAttachmentFromContext(p['COLOR_ATTACHMENT'+n].value))&&s.colorAttachments.push(r)}else{var r;(r=this.readFrameBufferAttachmentFromContext(p.COLOR_ATTACHMENT0.value))&&(s.colorAttachments=[r])}return s},t.prototype.readFrameBufferAttachmentFromContext=function(a){var e=ar.FRAMEBUFFER.value,t=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE.value);if(t!==ar.NONE.value){var n={},i=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME.value);if(t===ar.RENDERBUFFER.value){if(n.type='RENDERBUFFER',n.buffer=this.getSpectorData(i),i){var r=i.__SPECTOR_Object_CustomData;r&&(r.internalFormat&&(n.internalFormat=this.getWebGlConstant(r.internalFormat)),n.width=r.width,n.height=r.height,n.msaaSamples=r.samples)}}else if(t===ar.TEXTURE.value){n.type='TEXTURE',n.texture=this.getSpectorData(i),n.textureLevel=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL.value);var o=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE.value);n.textureCubeMapFace=this.getWebGlConstant(o),this.drawCallTextureInputState.appendTextureState(n,i)}return this.extensions.EXT_sRGB&&(n.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT.value))),1<this.contextVersion&&(n.alphaSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE.value),n.blueSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_BLUE_SIZE.value),n.encoding=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING.value)),n.componentType=this.getWebGlConstant(this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE.value)),n.depthSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE.value),n.greenSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_GREEN_SIZE.value),n.redSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_RED_SIZE.value),n.stencilSize=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE.value),t===ar.TEXTURE.value&&(n.textureLayer=this.context.getFramebufferAttachmentParameter(e,a,ar.FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER.value))),n}},t.prototype.readShaderFromContext=function(r){var e=this.context.getShaderSource(r),a=this.getSpectorData(r),o=r&&r.__SPECTOR_Metadata&&r.__SPECTOR_Metadata.name?r.__SPECTOR_Metadata.name:this.readNameFromShaderSource(e);return o||(o=this.context.getShaderParameter(r,ar.SHADER_TYPE.value)===ar.FRAGMENT_SHADER.value?'Fragment':'Vertex'),{shader:a,COMPILE_STATUS:this.context.getShaderParameter(r,ar.COMPILE_STATUS.value),DELETE_STATUS:this.context.getShaderParameter(r,ar.DELETE_STATUS.value),SHADER_TYPE:this.getWebGlConstant(this.context.getShaderParameter(r,ar.SHADER_TYPE.value)),source:e,name:o}},t.prototype.readAttributeFromContext=function(a,e){var t=this.context.getActiveAttrib(a,e),n=this.context.getAttribLocation(a,t.name);if(-1===n)return{name:t.name,size:t.size,type:this.getWebGlConstant(t.type),location:-1};var l=this.context.getVertexAttrib(n,ar.CURRENT_VERTEX_ATTRIB.value),r=this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING.value),o={name:t.name,size:t.size,type:this.getWebGlConstant(t.type),location:n,offsetPointer:this.context.getVertexAttribOffset(n,ar.VERTEX_ATTRIB_ARRAY_POINTER.value),bufferBinding:this.getSpectorData(r),enabled:this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_ENABLED.value),arraySize:this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_SIZE.value),stride:this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_STRIDE.value),arrayType:this.getWebGlConstant(this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_TYPE.value)),normalized:this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_NORMALIZED.value),vertexAttrib:Array.prototype.slice.call(l)};return this.extensions[ar.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.extensionName]?o.divisor=this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE.value):1<this.contextVersion&&(o.integer=this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_INTEGER.value),o.divisor=this.context.getVertexAttrib(n,ar.VERTEX_ATTRIB_ARRAY_DIVISOR.value)),this.appendBufferCustomData(o,r),o},t.prototype.readUniformFromContext=function(l,e){var t=this.context.getActiveUniform(l,e),n=this.context.getUniformLocation(l,t.name);if(n){if(1<t.size&&t.name&&t.name.indexOf('[0]')===t.name.length-3){for(var i=[],d=0,o;d<t.size;d++)o=this.context.getUniformLocation(l,t.name.replace('[0]','['+d+']')),o&&((s=this.context.getUniform(l,o)).length&&(s=Array.prototype.slice.call(s)),i.push({value:s}));return{name:t.name.replace('[0]',''),size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type,location:this.getSpectorData(n),values:i}}var s;return(s=this.context.getUniform(l,n)).length&&(s=Array.prototype.slice.call(s)),{name:t.name,size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type,location:this.getSpectorData(n),value:s}}return{name:t.name,size:t.size,type:this.getWebGlConstant(t.type),typeValue:t.type}},t.prototype.readTextureFromContext=function(l,e){var t=this.context.getParameter(ar.ACTIVE_TEXTURE.value);this.context.activeTexture(ar.TEXTURE0.value+l);var n={magFilter:this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_MAG_FILTER.value)),minFilter:this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_MIN_FILTER.value)),wrapS:this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_WRAP_S.value)),wrapT:this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_WRAP_T.value))};if(this.extensions[ar.TEXTURE_MAX_ANISOTROPY_EXT.extensionName]&&(n.anisotropy=this.context.getTexParameter(e.value,ar.TEXTURE_MAX_ANISOTROPY_EXT.value)),1<this.contextVersion){n.baseLevel=this.context.getTexParameter(e.value,ar.TEXTURE_BASE_LEVEL.value),n.immutable=this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_FORMAT.value),n.immutableLevels=this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_LEVELS.value),n.maxLevel=this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_LEVELS.value);var i=this.context.getParameter(ar.SAMPLER_BINDING.value);if(i){n.sampler=this.getSpectorData(i);var r=this.context;n.samplerMaxLod=r.getSamplerParameter(i,ar.TEXTURE_IMMUTABLE_LEVELS.value),n.samplerMinLod=r.getSamplerParameter(i,ar.TEXTURE_IMMUTABLE_LEVELS.value),n.samplerCompareFunc=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_COMPARE_FUNC.value)),n.samplerCompareMode=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_COMPARE_MODE.value)),n.samplerWrapS=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_WRAP_S.value)),n.samplerWrapT=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_WRAP_T.value)),n.samplerWrapR=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_IMMUTABLE_LEVELS.value)),n.samplerMagFilter=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_MAG_FILTER.value)),n.samplerMinFilter=this.getWebGlConstant(r.getSamplerParameter(i,ar.TEXTURE_MIN_FILTER.value))}else n.maxLod=this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_LEVELS.value),n.minLod=this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_LEVELS.value),n.compareFunc=this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_COMPARE_FUNC.value)),n.compareMode=this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_COMPARE_MODE.value)),n.wrapR=this.getWebGlConstant(this.context.getTexParameter(e.value,ar.TEXTURE_IMMUTABLE_LEVELS.value))}var o=this.getTextureStorage(e);if(o){var s=this.quickCapture?null:e;this.drawCallTextureInputState.appendTextureState(n,o,s)}return this.context.activeTexture(t),n},t.prototype.getTextureStorage=function(t){return t===ar.TEXTURE_2D?this.context.getParameter(ar.TEXTURE_BINDING_2D.value):t===ar.TEXTURE_CUBE_MAP?this.context.getParameter(ar.TEXTURE_BINDING_CUBE_MAP.value):t===ar.TEXTURE_3D?this.context.getParameter(ar.TEXTURE_BINDING_3D.value):t===ar.TEXTURE_2D_ARRAY?this.context.getParameter(ar.TEXTURE_BINDING_2D_ARRAY.value):void 0},t.prototype.readUniformsFromContextIntoState=function(p,e,t){for(var n=this.context,i=n.getActiveUniforms(p,e,ar.UNIFORM_TYPE.value),r=n.getActiveUniforms(p,e,ar.UNIFORM_SIZE.value),o=n.getActiveUniforms(p,e,ar.UNIFORM_BLOCK_INDEX.value),s=n.getActiveUniforms(p,e,ar.UNIFORM_OFFSET.value),a=n.getActiveUniforms(p,e,ar.UNIFORM_ARRAY_STRIDE.value),c=n.getActiveUniforms(p,e,ar.UNIFORM_MATRIX_STRIDE.value),l=n.getActiveUniforms(p,e,ar.UNIFORM_IS_ROW_MAJOR.value),u=0,m;u<e.length;u++)m=t[u],m.type=this.getWebGlConstant(i[u]),m.size=r[u],m.blockIndice=o[u],-1<m.blockIndice&&(m.blockName=n.getActiveUniformBlockName(p,m.blockIndice)),m.offset=s[u],m.arrayStride=a[u],m.matrixStride=c[u],m.rowMajor=l[u],-1<m.blockIndice&&(m.value=this.drawCallUboInputState.getUboValue(o[u],m.offset,m.size,i[u]))},t.prototype.readTransformFeedbackFromContext=function(a,e){var t=this.context,n=t.getTransformFeedbackVarying(a,e),i=t.getIndexedParameter(ar.TRANSFORM_FEEDBACK_BUFFER_BINDING.value,e),r={name:n.name,size:n.size,type:this.getWebGlConstant(n.type),buffer:this.getSpectorData(i),bufferSize:t.getIndexedParameter(ar.TRANSFORM_FEEDBACK_BUFFER_SIZE.value,e),bufferStart:t.getIndexedParameter(ar.TRANSFORM_FEEDBACK_BUFFER_START.value,e)};return this.appendBufferCustomData(r,i),r},t.prototype.readUniformBlockFromContext=function(a,e){var t=this.context,n=t.getActiveUniformBlockParameter(a,e,ar.UNIFORM_BLOCK_BINDING.value),s=t.getIndexedParameter(ar.UNIFORM_BUFFER_BINDING.value,n),r={name:t.getActiveUniformBlockName(a,e),bindingPoint:n,size:t.getActiveUniformBlockParameter(a,e,ar.UNIFORM_BLOCK_DATA_SIZE.value),activeUniformCount:t.getActiveUniformBlockParameter(a,e,ar.UNIFORM_BLOCK_ACTIVE_UNIFORMS.value),vertex:t.getActiveUniformBlockParameter(a,e,ar.UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER.value),fragment:t.getActiveUniformBlockParameter(a,e,ar.UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER.value),buffer:this.getSpectorData(s)};return this.appendBufferCustomData(r,s),r},t.prototype.appendBufferCustomData=function(r,e){if(e){var t=e.__SPECTOR_Object_CustomData;t&&(t.usage&&(r.bufferUsage=this.getWebGlConstant(t.usage)),r.bufferLength=t.length,t.offset&&(r.bufferOffset=t.offset),t.sourceLength&&(r.bufferSourceLength=t.sourceLength))}},t.prototype.getWebGlConstant=function(n){var e=g[n];return e?e.name:n},t.prototype.readNameFromShaderSource=function(a){try{var e='',t=/#define[\s]+SHADER_NAME[\s]+([\S]+)(\n|$)/gi,o;if(null!==(o=t.exec(a))&&(o.index===t.lastIndex&&t.lastIndex++,e=o[1]),''===e){var n=/#define[\s]+SHADER_NAME_B64[\s]+([\S]+)(\n|$)/gi;null!==(o=n.exec(a))&&(o.index===n.lastIndex&&n.lastIndex++,e=o[1]),e&&(e=decodeURIComponent(atob(e)))}return e}catch(t){return null}},t.stateName='DrawCall',t.samplerTypes=((A={})[ar.SAMPLER_2D.value]=ar.TEXTURE_2D,A[ar.SAMPLER_CUBE.value]=ar.TEXTURE_CUBE_MAP,A[ar.SAMPLER_3D.value]=ar.TEXTURE_3D,A[ar.SAMPLER_2D_SHADOW.value]=ar.TEXTURE_2D,A[ar.SAMPLER_2D_ARRAY.value]=ar.TEXTURE_2D_ARRAY,A[ar.SAMPLER_2D_ARRAY_SHADOW.value]=ar.TEXTURE_2D_ARRAY,A[ar.SAMPLER_CUBE_SHADOW.value]=ar.TEXTURE_CUBE_MAP,A[ar.INT_SAMPLER_2D.value]=ar.TEXTURE_2D,A[ar.INT_SAMPLER_3D.value]=ar.TEXTURE_3D,A[ar.INT_SAMPLER_CUBE.value]=ar.TEXTURE_CUBE_MAP,A[ar.INT_SAMPLER_2D_ARRAY.value]=ar.TEXTURE_2D_ARRAY,A[ar.UNSIGNED_INT_SAMPLER_2D.value]=ar.TEXTURE_2D,A[ar.UNSIGNED_INT_SAMPLER_3D.value]=ar.TEXTURE_3D,A[ar.UNSIGNED_INT_SAMPLER_CUBE.value]=ar.TEXTURE_CUBE_MAP,A[ar.UNSIGNED_INT_SAMPLER_2D_ARRAY.value]=ar.TEXTURE_2D_ARRAY,A),t}(Ie),Tt=function(){function e(t){this.contextInformation=t,this.stateTrackers=[],this.onCommandCapturedCallbacks={},this.initStateTrackers()}return e.prototype.startCapture=function(a,e){for(var t=0,n=this.stateTrackers;t<n.length;t++){var i=n[t],r=i.startCapture(!0,e);i.requireStartAndStopStates&&(a.initState[i.stateName]=r)}},e.prototype.stopCapture=function(a){for(var e=0,t=this.stateTrackers;e<t.length;e++){var n=t[e],o=n.stopCapture();n.requireStartAndStopStates&&(a.endState[n.stateName]=o)}},e.prototype.captureState=function(r){var e=this.onCommandCapturedCallbacks[r.name];if(e)for(var t=0,n=e;t<n.length;t++)(0,n[t])(r)},e.prototype.initStateTrackers=function(){this.stateTrackers.push(new Ne(this.contextInformation),new Oe(this.contextInformation),new Ue(this.contextInformation),new Ve(this.contextInformation),new We(this.contextInformation),new ze(this.contextInformation),new Xe(this.contextInformation),new Ye(this.contextInformation),new Ze(this.contextInformation),new Je(this.contextInformation),new tt(this.contextInformation),new rt(this.contextInformation),new it(this.contextInformation),new bt(this.contextInformation));for(var n=0,e=this.stateTrackers;n<e.length;n++)e[n].registerCallbacks(this.onCommandCapturedCallbacks)},e}(),St=function(){function e(n){this.options=n,this.createCommandNames=this.getCreateCommandNames(),this.updateCommandNames=this.getUpdateCommandNames(),this.deleteCommandNames=this.getDeleteCommandNames(),this.startTime=o.now,this.memoryPerSecond={},this.totalMemory=0,this.frameMemory=0,this.capturing=!1,e.initializeByteSizeFormat()}return e.initializeByteSizeFormat=function(){var t;this.byteSizePerInternalFormat||(this.byteSizePerInternalFormat=((t={})[ar.R8.value]=1,t[ar.R16F.value]=2,t[ar.R32F.value]=4,t[ar.R8UI.value]=1,t[ar.RG8.value]=2,t[ar.RG16F.value]=4,t[ar.RG32F.value]=8,t[ar.ALPHA.value]=1,t[ar.RGB.value]=3,t[ar.RGBA.value]=4,t[ar.LUMINANCE.value]=1,t[ar.LUMINANCE_ALPHA.value]=2,t[ar.DEPTH_COMPONENT.value]=1,t[ar.DEPTH_STENCIL.value]=2,t[ar.SRGB_EXT.value]=3,t[ar.SRGB_ALPHA_EXT.value]=4,t[ar.RGB8.value]=3,t[ar.SRGB8.value]=3,t[ar.RGB565.value]=2,t[ar.R11F_G11F_B10F.value]=4,t[ar.RGB9_E5.value]=2,t[ar.RGB16F.value]=6,t[ar.RGB32F.value]=12,t[ar.RGB8UI.value]=3,t[ar.RGBA8.value]=4,t[ar.RGB5_A1.value]=2,t[ar.RGBA16F.value]=8,t[ar.RGBA32F.value]=16,t[ar.RGBA8UI.value]=4,t[ar.COMPRESSED_R11_EAC.value]=4,t[ar.COMPRESSED_SIGNED_R11_EAC.value]=4,t[ar.COMPRESSED_RG11_EAC.value]=4,t[ar.COMPRESSED_SIGNED_RG11_EAC.value]=4,t[ar.COMPRESSED_RGB8_ETC2.value]=4,t[ar.COMPRESSED_RGBA8_ETC2_EAC.value]=4,t[ar.COMPRESSED_SRGB8_ETC2.value]=4,t[ar.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC.value]=4,t[ar.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,t[ar.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2.value]=4,t))},e.prototype.registerCallbacks=function(l){for(var e=0,t=this.createCommandNames;e<t.length;e++)l[s=t[e]]=l[s]||[],l[s].push(this.createWithoutSideEffects.bind(this));for(var n=0,i=this.updateCommandNames;n<i.length;n++)l[s=i[n]]=l[s]||[],l[s].push(this.updateWithoutSideEffects.bind(this));for(var r=0,o=this.deleteCommandNames;r<o.length;r++){var s;l[s=o[r]]=l[s]||[],l[s].push(this.deleteWithoutSideEffects.bind(this))}},e.prototype.startCapture=function(){this.frameMemory=0,this.capturing=!0},e.prototype.stopCapture=function(){this.frameMemory=0,this.capturing=!1},e.prototype.appendRecordedInformation=function(t){t.frameMemory[this.objectName]=this.frameMemory,t.memory[this.objectName]=this.memoryPerSecond},e.prototype.create=function(){},e.prototype.createWithoutSideEffects=function(t){this.options.toggleCapture(!1),this.create(t),this.options.toggleCapture(!0)},e.prototype.updateWithoutSideEffects=function(a){if(a&&0!==a.arguments.length){this.options.toggleCapture(!1);var e=a.arguments[0],t=this.getBoundInstance(e);if(!t)this.options.toggleCapture(!0);else if(G.getWebGlObjectTag(t)){var o=this.getWebGlConstant(e),i=this.update(a,o,t);this.changeMemorySize(i),this.options.toggleCapture(!0)}else this.options.toggleCapture(!0)}},e.prototype.deleteWithoutSideEffects=function(r){if(r&&r.arguments&&!(1>r.arguments.length)){var e=r.arguments[0];if(e){this.options.toggleCapture(!1);var t=this.delete(e);this.changeMemorySize(-t),this.options.toggleCapture(!0)}}},e.prototype.changeMemorySize=function(r){this.totalMemory+=r,this.capturing&&(this.frameMemory+=r);var e=o.now-this.startTime,t=S(e/1e3);this.memoryPerSecond[t]=this.totalMemory},e.prototype.getWebGlConstant=function(n){var e=g[n];return e?e.name:n+''},e.prototype.getByteSizeForInternalFormat=function(n){return e.byteSizePerInternalFormat[n]||4},e}(),xt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Rt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return xt(t,n),Object.defineProperty(t.prototype,'objectName',{get:function(){return'Buffer'},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return['createBuffer']},t.prototype.getUpdateCommandNames=function(){return['bufferData']},t.prototype.getDeleteCommandNames=function(){return['deleteBuffer']},t.prototype.getBoundInstance=function(n){var e=this.options.context;return n===ar.ARRAY_BUFFER.value?e.getParameter(ar.ARRAY_BUFFER_BINDING.value):n===ar.ELEMENT_ARRAY_BUFFER.value?e.getParameter(ar.ELEMENT_ARRAY_BUFFER_BINDING.value):n===ar.COPY_READ_BUFFER.value?e.getParameter(ar.COPY_READ_BUFFER_BINDING.value):n===ar.COPY_WRITE_BUFFER.value?e.getParameter(ar.COPY_WRITE_BUFFER_BINDING.value):n===ar.TRANSFORM_FEEDBACK_BUFFER.value?e.getParameter(ar.TRANSFORM_FEEDBACK_BUFFER_BINDING.value):n===ar.UNIFORM_BUFFER.value?e.getParameter(ar.UNIFORM_BUFFER_BINDING.value):n===ar.PIXEL_PACK_BUFFER.value?e.getParameter(ar.PIXEL_PACK_BUFFER_BINDING.value):n===ar.PIXEL_UNPACK_BUFFER.value?e.getParameter(ar.PIXEL_UNPACK_BUFFER_BINDING.value):void 0},t.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.length:0},t.prototype.update=function(a,e,t){var n=this.getCustomData(e,a);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return t.__SPECTOR_Object_CustomData=n,n.length-o},t.prototype.getCustomData=function(r,a){var t=this.getLength(a);return 4<=a.arguments.length?{target:r,length:t,usage:a.arguments[2],offset:a.arguments[3],sourceLength:a.arguments[1]?a.arguments[1].length:-1}:3===a.arguments.length?{target:r,length:t,usage:a.arguments[2]}:void 0},t.prototype.getLength=function(r){var e=-1,t=0;return 5===r.arguments.length&&(e=r.arguments[4],t=r.arguments[3]),0>=e&&(e='number'==typeof r.arguments[1]?r.arguments[1]:r.arguments[1]&&(r.arguments[1].byteLength||r.arguments[1].length)||0),e-t},t}(St),Ft=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),wt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Ft(t,n),Object.defineProperty(t.prototype,'objectName',{get:function(){return'Renderbuffer'},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return['createRenderbuffer']},t.prototype.getUpdateCommandNames=function(){return['renderbufferStorage','renderbufferStorageMultisample']},t.prototype.getDeleteCommandNames=function(){return['deleteRenderbuffer']},t.prototype.getBoundInstance=function(n){var e=this.options.context;if(n===ar.RENDERBUFFER.value)return e.getParameter(ar.RENDERBUFFER_BINDING.value)},t.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.length:0},t.prototype.update=function(a,e,t){var n=this.getCustomData(a,e);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return n.length=n.width*n.height*this.getByteSizeForInternalFormat(n.internalFormat),t.__SPECTOR_Object_CustomData=n,n.length-o},t.prototype.getCustomData=function(n,e){return 4===n.arguments.length?{target:e,internalFormat:n.arguments[1],width:n.arguments[2],height:n.arguments[3],length:0,samples:0}:{target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0,samples:n.arguments[1]}},t}(St),Lt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),It=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Lt(t,n),Object.defineProperty(t.prototype,'objectName',{get:function(){return'Texture2d'},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return['createTexture']},t.prototype.getUpdateCommandNames=function(){return['texImage2D','compressedTexImage2D','texStorage2D']},t.prototype.getDeleteCommandNames=function(){return['deleteTexture']},t.prototype.getBoundInstance=function(n){var e=this.options.context;return n===ar.TEXTURE_2D.value?e.getParameter(ar.TEXTURE_BINDING_2D.value):n===ar.TEXTURE_CUBE_MAP_POSITIVE_X.value||n===ar.TEXTURE_CUBE_MAP_POSITIVE_Y.value||n===ar.TEXTURE_CUBE_MAP_POSITIVE_Z.value||n===ar.TEXTURE_CUBE_MAP_NEGATIVE_X.value||n===ar.TEXTURE_CUBE_MAP_NEGATIVE_Y.value||n===ar.TEXTURE_CUBE_MAP_NEGATIVE_Z.value?e.getParameter(ar.TEXTURE_BINDING_CUBE_MAP.value):void 0},t.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.target===ar.TEXTURE_2D_ARRAY.name||e.target===ar.TEXTURE_3D.name?0:e.length:0},t.prototype.update=function(a,e,t){if(2<=a.arguments.length&&0!==a.arguments[1])return 0;var n=this.getCustomData(a,e,t);if(!n)return 0;var s=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0,r='TEXTURE_2D'===e?1:6;return n.length=n.width*n.height*r*this.getByteSizeForInternalFormat(n.internalFormat),t.__SPECTOR_Object_CustomData=n,n.length-s},t.prototype.getCustomData=function(r,e,t){return'texImage2D'===r.name?this.getTexImage2DCustomData(r,e,t):'compressedTexImage2D'===r.name?this.getCompressedTexImage2DCustomData(r,e,t):'texStorage2D'===r.name?this.getTexStorage2DCustomData(r,e,t):void 0},t.prototype.getTexStorage2DCustomData=function(n,e){var r;return 5===n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0}),r},t.prototype.getCompressedTexImage2DCustomData=function(n,e){var r;if(0===n.arguments[1])return 7<=n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],length:0}),r},t.prototype.getTexImage2DCustomData=function(n,e){var r;if(0===n.arguments[1])return 8<=n.arguments.length?r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],format:n.arguments[6],type:n.arguments[7],length:0}:6===n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[5].width,height:n.arguments[5].height,format:n.arguments[3],type:n.arguments[4],length:0}),r},t}(St),Dt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Mt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Dt(t,n),Object.defineProperty(t.prototype,'objectName',{get:function(){return'Texture3d'},enumerable:!0,configurable:!0}),t.prototype.getCreateCommandNames=function(){return['createTexture']},t.prototype.getUpdateCommandNames=function(){return['texImage3D','compressedTexImage3D','texStorage3D']},t.prototype.getDeleteCommandNames=function(){return['deleteTexture']},t.prototype.getBoundInstance=function(n){var e=this.options.context;return n===ar.TEXTURE_2D_ARRAY.value?e.getParameter(ar.TEXTURE_BINDING_2D_ARRAY.value):n===ar.TEXTURE_3D.value?e.getParameter(ar.TEXTURE_BINDING_3D.value):void 0},t.prototype.delete=function(n){var e=n.__SPECTOR_Object_CustomData;return e?e.target!==ar.TEXTURE_2D_ARRAY.name&&e.target!==ar.TEXTURE_3D.name?0:e.length:0},t.prototype.update=function(a,e,t){if(2<=a.arguments.length&&0!==a.arguments[1])return 0;var n=this.getCustomData(a,e,t);if(!n)return 0;var o=t.__SPECTOR_Object_CustomData?t.__SPECTOR_Object_CustomData.length:0;return n.length=n.width*n.height*n.depth*this.getByteSizeForInternalFormat(n.internalFormat),n&&(t.__SPECTOR_Object_CustomData=n),n.length-o},t.prototype.getCustomData=function(r,e,t){return'texImage3D'===r.name?this.getTexImage3DCustomData(r,e,t):'compressedTexImage3D'===r.name?this.getCompressedTexImage3DCustomData(r,e,t):'texStorage3D'===r.name?this.getTexStorage3DCustomData(r,e,t):void 0},t.prototype.getTexStorage3DCustomData=function(n,e){var r;return 6===n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],length:0}),r},t.prototype.getCompressedTexImage3DCustomData=function(n,e){var r;if(0===n.arguments[1])return 8<=n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],length:0}),r},t.prototype.getTexImage3DCustomData=function(n,e){var r;if(0===n.arguments[1])return 9<=n.arguments.length&&(r={target:e,internalFormat:n.arguments[2],width:n.arguments[3],height:n.arguments[4],depth:n.arguments[5],format:n.arguments[7],type:n.arguments[8],length:0}),r},t}(St),Bt=function(){function e(t){this.contextInformation=t,this.onCommandCallbacks={},this.recorders=[],this.initRecorders()}return e.prototype.recordCommand=function(r){var e=this.onCommandCallbacks[r.name];if(e)for(var t=0,n=e;t<n.length;t++)(0,n[t])(r)},e.prototype.startCapture=function(){for(var n=0,e=this.recorders;n<e.length;n++)e[n].startCapture()},e.prototype.stopCapture=function(){for(var n=0,e=this.recorders;n<e.length;n++)e[n].stopCapture()},e.prototype.appendRecordedInformation=function(r){for(var e=0,t=this.recorders;e<t.length;e++)t[e].appendRecordedInformation(r)},e.prototype.initRecorders=function(){this.recorders.push(new Rt(this.contextInformation),new wt(this.contextInformation),new It(this.contextInformation),new Mt(this.contextInformation));for(var n=0,e=this.recorders;n<e.length;n++)e[n].registerCallbacks(this.onCommandCallbacks)},e}(),Nt=function(){function e(t){this.contextInformation=t,this.webGlObjects=[],this.initWebglObjects()}return e.prototype.tagWebGlObjects=function(a){for(var e=0,t=this.webGlObjects;e<t.length;e++){for(var n=t[e],i=0,r;i<a.arguments.length&&(r=a.arguments[i],!n.tagWebGlObject(r));i++);if(n.tagWebGlObject(a.result))break}},e.prototype.tagWebGlObject=function(r){for(var e=0,t=this.webGlObjects,n;e<t.length;e++)if(n=t[e].tagWebGlObject(r),n)return n},e.prototype.initWebglObjects=function(){this.webGlObjects.push(new ct,new ut,new pt,new mt,new gt,new ht,new Et,new _t,new At,new Ct,new yt,new ft)},e}(),Pt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ot=function(r){function t(e){var a=r.call(this,e)||this;return a.extensionDefinition=[[{name:'ANGLE_instanced_arrays',description:''},{name:'EXT_blend_minmax',description:''},{name:'EXT_color_buffer_float',description:''},{name:'EXT_color_buffer_half_float',description:''},{name:'EXT_disjoint_timer_query',description:''},{name:'EXT_frag_depth',description:''},{name:'EXT_sRGB',description:''},{name:'EXT_shader_texture_lod',description:''},{name:'EXT_texture_filter_anisotropic',description:''},{name:'OES_element_index_uint',description:''},{name:'OES_standard_derivatives',description:''},{name:'OES_texture_float',description:''},{name:'OES_texture_float_linear',description:''},{name:'OES_texture_half_float',description:''},{name:'OES_texture_half_float_linear',description:''},{name:'OES_vertex_array_object',description:''},{name:'WEBGL_color_buffer_float',description:''},{name:'WEBGL_compressed_texture_astc',description:''},{name:'WEBGL_compressed_texture_atc',description:''},{name:'WEBGL_compressed_texture_etc',description:''},{name:'WEBGL_compressed_texture_etc1',description:''},{name:'WEBGL_compressed_texture_pvrtc',description:''},{name:'WEBGL_compressed_texture_s3tc',description:''},{name:'WEBGL_depth_texture',description:''},{name:'WEBGL_draw_buffers',description:''}],[{name:'EXT_color_buffer_float',description:''},{name:'EXT_disjoint_timer_query',description:''},{name:'EXT_disjoint_timer_query_webgl2',description:''},{name:'EXT_texture_filter_anisotropic',description:''},{name:'OES_texture_float_linear',description:''},{name:'WEBGL_compressed_texture_astc',description:''},{name:'WEBGL_compressed_texture_atc',description:''},{name:'WEBGL_compressed_texture_etc',description:''},{name:'WEBGL_compressed_texture_etc1',description:''},{name:'WEBGL_compressed_texture_pvrtc',description:''},{name:'WEBGL_compressed_texture_s3tc',description:''}]],a.currentState=a.startCapture(!0,a.quickCapture),a}return Pt(t,r),Object.defineProperty(t.prototype,'stateName',{get:function(){return'Extensions'},enumerable:!0,configurable:!0}),t.prototype.getExtensions=function(){return this.extensions},t.prototype.readFromContext=function(){for(var r=0,e=1===this.contextVersion?this.extensionDefinition[0]:this.extensionDefinition[1];r<e.length;r++){var t=e[r],n=this.context.getExtension(t.name);n?(this.currentState[t.name]=!0,this.extensions[t.name]=n):this.currentState[t.name]=!1}},t}(Ie),kt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ut=function(r){function t(e){var a=r.call(this,e)||this;return a.currentState=a.startCapture(!0,a.quickCapture),a}return kt(t,r),Object.defineProperty(t.prototype,'stateName',{get:function(){return'CompressedTextures'},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.COMPRESSED_TEXTURE_FORMATS}]},t.prototype.stringifyParameterValue=function(t){for(var e=[],n=0,a=t,r;n<a.length;n++)r=a[n],e.push(ar.stringifyWebGlConstant(r,'getParameter'));return e},t}(Me),Gt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Vt=function(r){function t(e){var a=r.call(this,e)||this;return a.currentState=a.startCapture(!0,a.quickCapture),a}return Gt(t,r),Object.defineProperty(t.prototype,'stateName',{get:function(){return'Capabilities'},enumerable:!0,configurable:!0}),t.prototype.getWebgl1Parameters=function(){return[{constant:ar.RENDERER},{constant:ar.VENDOR},{constant:ar.VERSION},{constant:ar.SHADING_LANGUAGE_VERSION},{constant:ar.SAMPLES},{constant:ar.SAMPLE_BUFFERS},{constant:ar.RED_BITS},{constant:ar.GREEN_BITS},{constant:ar.BLUE_BITS},{constant:ar.ALPHA_BITS},{constant:ar.DEPTH_BITS},{constant:ar.STENCIL_BITS},{constant:ar.SUBPIXEL_BITS},{constant:ar.LINE_WIDTH},{constant:ar.ALIASED_LINE_WIDTH_RANGE},{constant:ar.ALIASED_POINT_SIZE_RANGE},{constant:ar.IMPLEMENTATION_COLOR_READ_FORMAT,returnType:20},{constant:ar.IMPLEMENTATION_COLOR_READ_TYPE,returnType:20},{constant:ar.MAX_COMBINED_TEXTURE_IMAGE_UNITS},{constant:ar.MAX_CUBE_MAP_TEXTURE_SIZE},{constant:ar.MAX_FRAGMENT_UNIFORM_VECTORS},{constant:ar.MAX_RENDERBUFFER_SIZE},{constant:ar.MAX_TEXTURE_IMAGE_UNITS},{constant:ar.MAX_TEXTURE_SIZE},{constant:ar.MAX_VARYING_VECTORS},{constant:ar.MAX_VERTEX_ATTRIBS},{constant:ar.MAX_VERTEX_TEXTURE_IMAGE_UNITS},{constant:ar.MAX_VERTEX_UNIFORM_VECTORS},{constant:ar.MAX_VIEWPORT_DIMS},{constant:ar.MAX_TEXTURE_MAX_ANISOTROPY_EXT},{constant:ar.MAX_COLOR_ATTACHMENTS_WEBGL},{constant:ar.MAX_DRAW_BUFFERS_WEBGL}]},t.prototype.getWebgl2Parameters=function(){return[{constant:ar.MAX_3D_TEXTURE_SIZE},{constant:ar.MAX_ARRAY_TEXTURE_LAYERS},{constant:ar.MAX_CLIENT_WAIT_TIMEOUT_WEBGL},{constant:ar.MAX_COLOR_ATTACHMENTS},{constant:ar.MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS},{constant:ar.MAX_COMBINED_UNIFORM_BLOCKS},{constant:ar.MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS},{constant:ar.MAX_DRAW_BUFFERS},{constant:ar.MAX_ELEMENT_INDEX},{constant:ar.MAX_ELEMENTS_INDICES},{constant:ar.MAX_ELEMENTS_VERTICES},{constant:ar.MAX_FRAGMENT_INPUT_COMPONENTS},{constant:ar.MAX_FRAGMENT_UNIFORM_BLOCKS},{constant:ar.MAX_FRAGMENT_UNIFORM_COMPONENTS},{constant:ar.MAX_PROGRAM_TEXEL_OFFSET},{constant:ar.MAX_SAMPLES},{constant:ar.MAX_SERVER_WAIT_TIMEOUT},{constant:ar.MAX_TEXTURE_LOD_BIAS},{constant:ar.MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS},{constant:ar.MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS},{constant:ar.MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS},{constant:ar.MAX_UNIFORM_BLOCK_SIZE},{constant:ar.MAX_UNIFORM_BUFFER_BINDINGS},{constant:ar.MAX_VARYING_COMPONENTS},{constant:ar.MAX_VERTEX_OUTPUT_COMPONENTS},{constant:ar.MAX_VERTEX_UNIFORM_BLOCKS},{constant:ar.MAX_VERTEX_UNIFORM_COMPONENTS},{constant:ar.MIN_PROGRAM_TEXEL_OFFSET}]},t}(Me),Ht=function(){function e(t){this.options=t,this.commandId=0,this.context=t.context,this.version=t.version,this.onMaxCommand=new r,this.capturing=!1,this.globalCapturing=!0,this.contextInformation={context:this.context,contextVersion:this.version,toggleCapture:this.toggleGlobalCapturing.bind(this),tagWebGlObject:this.tagWebGlObject.bind(this),extensions:{}},this.commandSpies={},this.stateSpy=new Tt(this.contextInformation),this.recorderSpy=new Bt(this.contextInformation),this.webGlObjectSpy=new Nt(this.contextInformation),this.analyser=new f(this.contextInformation),this.initStaticCapture(),t.recordAlways&&this.spy()}return e.prototype.spy=function(){this.spyContext(this.context);var n=this.contextInformation.extensions;for(var e in n)n.hasOwnProperty(e)&&this.spyContext(n[e])},e.prototype.unSpy=function(){for(var t in this.commandSpies)this.commandSpies.hasOwnProperty(t)&&this.commandSpies[t].unSpy()},e.prototype.startCapture=function(r,e){void 0===r&&(r=0),void 0===e&&(e=!1);var t=o.now;this.maxCommands=r,this.options.recordAlways||this.spy(),this.capturing=!0,this.commandId=0,this.currentCapture={canvas:this.canvasCapture,context:this.contextCapture,commands:[],initState:{},endState:{},startTime:t,listenCommandsStartTime:0,listenCommandsEndTime:0,endTime:0,analyses:[],frameMemory:{},memory:{}},this.currentCapture.canvas.width=this.context.canvas.width,this.currentCapture.canvas.height=this.context.canvas.height,this.currentCapture.canvas.clientWidth=this.context.canvas.clientWidth,this.currentCapture.canvas.clientHeight=this.context.canvas.clientHeight,this.stateSpy.startCapture(this.currentCapture,e),this.recorderSpy.startCapture(),this.currentCapture.listenCommandsStartTime=o.now},e.prototype.stopCapture=function(){var t=o.now;return this.options.recordAlways||this.unSpy(),this.capturing=!1,this.stateSpy.stopCapture(this.currentCapture),this.recorderSpy.stopCapture(),this.currentCapture.listenCommandsEndTime=t,this.currentCapture.endTime=o.now,this.recorderSpy.appendRecordedInformation(this.currentCapture),this.analyser.appendAnalyses(this.currentCapture),this.currentCapture},e.prototype.isCapturing=function(){return this.globalCapturing&&this.capturing},e.prototype.setMarker=function(t){this.marker=t},e.prototype.clearMarker=function(){this.marker=null},e.prototype.getNextCommandCaptureId=function(){return this.commandId++},e.prototype.onCommand=function(r,e){if(this.globalCapturing&&(this.webGlObjectSpy.tagWebGlObjects(e),this.recorderSpy.recordCommand(e),this.isCapturing())){var t=r.createCapture(e,this.getNextCommandCaptureId(),this.marker);this.stateSpy.captureState(t),this.currentCapture.commands.push(t),t.endTime=o.now,0<this.maxCommands&&this.currentCapture.commands.length===this.maxCommands&&this.onMaxCommand.trigger(this)}},e.prototype.spyContext=function(a){var t=[];for(var n in a)n&&t.push(n);for(var o=0;o<t.length;o++)if(n=t[o],!~e.unSpyableMembers.indexOf(n))try{'number'!=typeof a[n]&&this.spyFunction(n,a)}catch(t){rr.error('Cant Spy member: '+n),rr.error(t)}},e.prototype.initStaticCapture=function(){var a=new Ot(this.contextInformation),e=a.getExtensions();for(var t in e)e.hasOwnProperty(t)&&(this.contextInformation.extensions[t]=e[t]);var n=new Vt(this.contextInformation),o=new Ut(this.contextInformation);this.contextCapture={version:this.version,contextAttributes:this.context.getContextAttributes(),capabilities:n.getStateData(),extensions:a.getStateData(),compressedTextures:o.getStateData()},this.canvasCapture={width:this.context.canvas.width,height:this.context.canvas.height,clientWidth:this.context.canvas.clientWidth,clientHeight:this.context.canvas.clientHeight,browserAgent:navigator?navigator.userAgent:''}},e.prototype.spyFunction=function(r,a){if(0!==r.indexOf('__SPECTOR_Origin_')){if(!this.commandSpies[r]){var o=function(r,e){var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t}(this.contextInformation,{spiedCommandName:r,spiedCommandRunningContext:a,callback:this.onCommand.bind(this)});this.commandSpies[r]=new Le(o)}this.commandSpies[r].spy()}},e.prototype.toggleGlobalCapturing=function(t){this.globalCapturing=t},e.prototype.tagWebGlObject=function(t){return this.webGlObjectSpy.tagWebGlObject(t)},e.unSpyableMembers=['canvas','drawingBufferWidth','drawingBufferHeight','glp'],e}(),Wt=function(){function e(a){this.spiedWindow=a||window,this.lastFrame=0,this.speedRatio=1,this.willPlayNextFrame=!1,this.onFrameStart=new r,this.onFrameEnd=new r,this.onError=new r,this.lastSixtyFramesDuration=[],this.lastSixtyFramesCurrentIndex=0,this.lastSixtyFramesPreviousStart=0;for(var t=0;t<e.fpsWindowSize;t++)this.lastSixtyFramesDuration[t]=0;this.init()}return e.prototype.playNextFrame=function(){this.willPlayNextFrame=!0},e.prototype.changeSpeedRatio=function(t){this.speedRatio=t},e.prototype.getFps=function(){for(var r=0,t=0;t<e.fpsWindowSize;t++)r+=this.lastSixtyFramesDuration[t];return 0===r?0:6e4/r},e.prototype.init=function(){for(var a=this,t=0,n=e.requestAnimationFrameFunctions,i;t<n.length;t++)i=n[t],this.spyRequestAnimationFrame(i,this.spiedWindow);for(var r=0,o=e.setTimerFunctions;r<o.length;r++)i=o[r],this.spySetTimer(i);this.spiedWindow.VRDisplay&&this.spiedWindow.addEventListener('vrdisplaypresentchange',function(t){a.spyRequestAnimationFrame('requestAnimationFrame',t.display)})},e.prototype.spyRequestAnimationFrame=function(a,e){var t=this;E.storeOriginFunction(e,a),e[a]=function(){var n=arguments[0],o=t.getCallback(t,n,function(){t.spiedWindow[a](n)});return E.executeOriginFunction(e,a,[o])}},e.prototype.spySetTimer=function(r){var t=this,n=this.spiedWindow;E.storeOriginFunction(n,r),n[r]=function(){var i=arguments[0],o=arguments[1],s=Array.prototype.slice.call(arguments);return-1<e.setTimerCommonValues.indexOf(o)&&(s[0]=t.getCallback(t,i,'setTimeout'===r?function(){n[r](i)}:null)),E.executeOriginFunction(n,r,s)}},e.prototype.getCallback=function(a,t,n){return void 0===n&&(n=null),function(){var i=o.now;if(a.lastFrame=++a.lastFrame%a.speedRatio,a.willPlayNextFrame||a.speedRatio&&!a.lastFrame){a.onFrameStart.trigger(a);try{t.apply(a.spiedWindow,arguments)}catch(t){a.onError.trigger(t)}a.lastSixtyFramesCurrentIndex=(a.lastSixtyFramesCurrentIndex+1)%e.fpsWindowSize,a.lastSixtyFramesDuration[a.lastSixtyFramesCurrentIndex]=i-a.lastSixtyFramesPreviousStart,a.onFrameEnd.trigger(a),a.willPlayNextFrame=!1}else n&&n();a.lastSixtyFramesPreviousStart=i}},e.requestAnimationFrameFunctions=['requestAnimationFrame','msRequestAnimationFrame','webkitRequestAnimationFrame','mozRequestAnimationFrame','oRequestAnimationFrame'],e.setTimerFunctions=['setTimeout','setInterval'],e.setTimerCommonValues=[0,15,16,33,32,40],e.fpsWindowSize=60,e}(),$t=function(){function e(t){this.canvas=t,this.onContextRequested=new r,this.init()}return e.prototype.init=function(){var r=this,e=function(){var e=r.canvas?E.executeOriginFunction(this,'getContext',arguments):E.executePrototypeOriginFunction(this,HTMLCanvasElement,'getContext',arguments);if(0<arguments.length&&'2d'===arguments[0])return e;if(e){var a=Array.prototype.slice.call(arguments),n='webgl2'===a[0]||'experimental-webgl2'===a[0]?2:1;r.onContextRequested.trigger({context:e,contextVersion:n})}return e};this.canvas?(E.storeOriginFunction(this.canvas,'getContext'),this.canvas.getContext=e):(E.storePrototypeOriginFunction(HTMLCanvasElement,'getContext'),HTMLCanvasElement.prototype.getContext=e)},e}(),zt=(t(10),function(){function e(n,r){this.placeHolder=n,this.stateStore=r}return e.prototype.compose=function(l){var e=this.stateStore.getStatesToProcess(),t=!1;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n],r=this.stateStore.getLastOperation(i),o=this.stateStore.getComponentInstance(i),s=this.stateStore.getData(i);o.render(s,i,r),t=!0}if(t){var a=this.stateStore.getLastOperation(l);this.composeInContainer(this.placeHolder,Number.MAX_VALUE,l,a)}},e.prototype.composeChildren=function(a,e){if(e)for(var t=this.stateStore.getChildrenIds(a),n=0,i=0;i<t.length;i++){var r=t[i],o=this.stateStore.getLastOperation(r);this.composeInContainer(e,n,r,o),50!==o&&n++}},e.prototype.composeInContainer=function(a,e,t,n){var o=this.stateStore.getComponentInstance(t).composeInContainer(a,e,n);this.composeChildren(t,o)},e}()),jt=function(){function e(){this.store={},this.idGenerator=0,this.pendingOperation={}}return e.prototype.getLastOperation=function(t){return this.store[t].lastOperation},e.prototype.getData=function(t){return this.store[t].data},e.prototype.getComponentInstance=function(t){return this.store[t].componentInstance},e.prototype.getParentId=function(t){return this.store[t].parent?this.store[t].parent.id:-1},e.prototype.getChildrenIds=function(a){for(var e=[],t=0,n=this.store[a].children,o;t<n.length;t++)o=n[t],e.push(o.id);return e},e.prototype.hasChildren=function(t){return 0<this.store[t].children.length},e.prototype.add=function(r,a){var o=this.getNewId();return this.pendingOperation[o]=o,this.store[o]={data:r,id:o,parent:null,children:[],componentInstance:a,lastOperation:20},o},e.prototype.update=function(n,e){this.store[n],this.pendingOperation[n]=n,this.store[n].data=e,this.store[n].lastOperation=40},e.prototype.addChild=function(a,e,t){var n=this.store[a],i=this.add(e,t);this.pendingOperation[i]=i;var r=this.store[i];return r.parent=n,n.children.push(r),i},e.prototype.insertChildAt=function(a,e,t,n){var i=this.store[a],r=this.add(t,n);this.pendingOperation[r]=r;var o=this.store[r];return o.parent=i,e>=i.children.length?i.children.push(o):0<=e?i.children.splice(e,0,o):i.children.unshift(o),r},e.prototype.removeChildById=function(r,e){for(var t=this.store[r],n=t.children.length-1;0<=n;n--)if(t.children[n].id===e){this.removeChildAt(r,n);break}},e.prototype.removeChildAt=function(r,e){var t=this.store[r],a;e>t.children.length-1?(a=t.children[t.children.length-1],t.children[t.children.length-1].parent=null,t.children.splice(t.children.length-1,1)):0<=e?(a=t.children[e],t.children[e].parent=null,t.children.splice(e,1)):(a=t.children[0],t.children[0].parent=null,t.children.splice(0,1)),a.parent=null,this.remove(a.id)},e.prototype.remove=function(n){var e=this.store[n];e.parent?(this.store[e.parent.id],this.removeChildById(e.parent.id,n)):(this.removeChildren(n),this.store[n].lastOperation=50,this.pendingOperation[n]=n)},e.prototype.removeChildren=function(n){for(var e=this.store[n];e.children.length;)this.remove(e.children[0].id)},e.prototype.getStatesToProcess=function(){return this.pendingOperation},e.prototype.flushPendingOperations=function(){for(var t in this.pendingOperation)this.pendingOperation[t]&&(50===this.store[t].lastOperation?delete this.store[t]:this.store[t].lastOperation=0);this.pendingOperation={}},e.prototype.getNewId=function(){return++this.idGenerator},e}(),Xt=function(){function e(t){this.component=t}return e.prototype.render=function(r,e,t){0!==t&&(50===t?this.removeNode():this.domNode=this.component.render(r,e))},e.prototype.composeInContainer=function(l,e,t){if(50===t)return this.removeNode(),null;var n=this.cachedCurrentChildrenContainer;if(0===t)return n;var i=this.domNode,r=i.getAttribute('childrencontainer')?i:i.querySelector('[childrenContainer]');if(r&&n)for(var o=n.children;0<o.length;)r.appendChild(o[0]);if(this.cachedCurrentChildrenContainer=r,e>=l.children.length)l.appendChild(i),this.cachedCurrentDomNode&&40===t&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode));else{var s=l.children[e];l.insertBefore(i,s),40===t&&l.removeChild(s)}return this.cachedCurrentDomNode=this.domNode,r},e.prototype.removeNode=function(){this.domNode&&this.domNode.parentElement&&(this.domNode.remove?this.domNode.remove():this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode)),this.cachedCurrentDomNode&&this.cachedCurrentDomNode.parentElement&&(this.cachedCurrentDomNode.remove?this.cachedCurrentDomNode.remove():this.cachedCurrentDomNode.parentNode&&this.cachedCurrentDomNode.parentNode.removeChild(this.cachedCurrentDomNode))},e.idGenerator=0,e}(),Kt=function(){function e(t){this.stateStore=new jt,this.compositor=new zt(t,this.stateStore),this.willRender=!1,this.rootStateId=-1}return e.prototype.addRootState=function(a,e,t){void 0===t&&(t=!1);var n=new Xt(e),o=this.stateStore.add(a,n);return this.rootStateId=o,this.setForRender(t),o},e.prototype.addChildState=function(a,e,t,n){void 0===n&&(n=!1);var o=this.insertChildState(a,e,Number.MAX_VALUE,t);return this.setForRender(n),o},e.prototype.insertChildState=function(a,e,t,n,i){void 0===i&&(i=!1);var r=new Xt(n),o=this.stateStore.insertChildAt(a,t,e,r);return this.setForRender(i),o},e.prototype.updateState=function(r,e,t){void 0===t&&(t=!1),this.stateStore.update(r,e),this.setForRender(t)},e.prototype.removeState=function(n,e){void 0===e&&(e=!1),this.stateStore.remove(n),this.setForRender(e)},e.prototype.removeChildrenStates=function(n,e){void 0===e&&(e=!1),this.stateStore.removeChildren(n),this.setForRender(e)},e.prototype.getState=function(t){return this.stateStore.getData(t)},e.prototype.getGenericState=function(t){return this.getState(t)},e.prototype.getChildrenState=function(n){var e=this;return this.stateStore.getChildrenIds(n).map(function(){return e.stateStore.getData(n)})},e.prototype.getChildrenGenericState=function(t){return this.getChildrenState(t)},e.prototype.hasChildren=function(t){return this.stateStore.hasChildren(t)},e.prototype.updateAllChildrenState=function(a,e){for(var t=0,n=this.stateStore.getChildrenIds(a);t<n.length;t++){var i=n[t],r=this.getGenericState(i);e(r),this.updateState(i,r)}},e.prototype.updateAllChildrenGenericState=function(n,e){this.updateAllChildrenState(n,e)},e.prototype.setForRender=function(n){this.willRender||(this.willRender=!0,n?this.compose():setTimeout(this.compose.bind(this),e.REFRESHRATEINMILLISECONDS))},e.prototype.compose=function(){this.willRender=!1,this.compositor.compose(this.rootStateId),this.stateStore.flushPendingOperations()},e.REFRESHRATEINMILLISECONDS=100,e}(),Yt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),qt=function(n){function t(){var e=n.call(this)||this;return e.events={},e}return Yt(t,n),t.prototype.addEventListener=function(r,e,t){return void 0===t&&(t=null),this.events[r]?this.events[r].add(e,t):-1},t.prototype.removeEventListener=function(n,e){this.events[n]&&this.events[n].remove(e)},t.prototype.renderElementFromTemplate=function(r,e,t){var n=this.createFromHtml(r);return this.bindCommands(n,e,t),n},t.prototype.bindCommands=function(a,e,t){a.getAttribute('commandname')&&this.bindCommand(a,e,t);for(var n=a.querySelectorAll('[commandName]'),i=0,r;i<n.length;i++)r=n[i],this.bindCommand(r,e,t)},t.prototype.bindCommand=function(a,e,t){var n=a.getAttribute('commandname'),i=a.getAttribute('commandeventbinding')||'';0===i.length&&(i='click');var r='true'===a.getAttribute('usecapture');this.createEvent(n),this.mapEventListener(a,i,n,e,t,r)},t.prototype.mapEventListener=function(l,e,t,n,i,r,o){void 0===r&&(r=!1),void 0===o&&(o=!1);var s=this;o?l.addEventListener(e,function(r){r.stopPropagation(),r.preventDefault(),s.triggerEvent(t,this,n,i)},r):l.addEventListener(e,function(){s.triggerEvent(t,this,n,i)},r)},t.prototype.createEvent=function(n){if(!this.events[n]){var e=new r;this.events[n]=e}return this.events[n]},t.prototype.triggerEvent=function(r,e,a,o){this.events[r].trigger({sender:e,stateId:o,state:a})},t}(function(){function e(){this.dummyTextGeneratorElement=document.createElement('div')}return e.prototype.createFromHtml=function(n){var e=document.createElement('div');return e.innerHTML=n,e.firstElementChild},e.prototype.htmlTemplate=function(a){for(var s=this,e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var l=a.raw,r='';return e.forEach(function(t,e){var n=l[e];Array.isArray(t)&&(t=t.join('')),n&&0<n.length&&'$'===n[n.length-1]?n=n.slice(0,-1):t=s.htmlEscape(t),r+=n,r+=t}),r+=l[l.length-1]},e.prototype.htmlEscape=function(t){return null==t||0===t.length?t:(this.dummyTextGeneratorElement.innerText=t,this.dummyTextGeneratorElement.innerHTML)},e}()),Zt=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Qt=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Jt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Zt(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(C||(C=Qt(['<div>\n            <div childrenContainer="true" class="captureMenuComponent ','">\n            </div>\n            <div class="captureMenuLogComponent ','">\n                <span class="','">','<span>\n            </div>\n        </div>'],['<div>\n            <div childrenContainer="true" class="captureMenuComponent ','">\n            </div>\n            <div class="captureMenuLogComponent ','">\n                <span class="','">','<span>\n            </div>\n        </div>'])),r?'active':'',r.logVisible?'active':'',r.logLevel===nr.error?'error':'',r.logText);return this.renderElementFromTemplate(t,r,e)},t}(qt),en=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),tn=function(n){function t(){var e=n.call(this)||this;return e.onCanvasSelected=e.createEvent('onCanvasSelected'),e}return en(t,n),t.prototype.render=function(r,e){var t=document.createElement('li'),n=document.createElement('span');return n.innerText='Id: '+r.id+' - Size: '+r.width+'*'+r.height,t.appendChild(n),this.mapEventListener(t,'click','onCanvasSelected',r,e),t},t}(qt),nn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),rn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},an=function(n){function t(){var e=n.call(this)||this;return e.onCaptureRequested=e.createEvent('onCaptureRequested'),e.onPlayRequested=e.createEvent('onPlayRequested'),e.onPauseRequested=e.createEvent('onPauseRequested'),e.onPlayNextFrameRequested=e.createEvent('onPlayNextFrameRequested'),e}return nn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(v||(v=rn(['\n        <div class="captureMenuActionsComponent">\n            <div commandName="onCaptureRequested">\n            </div>\n            $','\n        </div>'],['\n        <div class="captureMenuActionsComponent">\n            <div commandName="onCaptureRequested">\n            </div>\n            $','\n        </div>'])),r?'<div commandName="onPauseRequested">\n                </div>':'<div commandName="onPlayRequested">\n                </div>\n                <div commandName="onPlayNextFrameRequested">\n                </div>');return this.renderElementFromTemplate(t,r,e)},t}(qt),on=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),sn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},ln=function(n){function t(){var e=n.call(this)||this;return e.onCanvasSelection=e.createEvent('onCanvasSelection'),e}return on(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(_||(_=sn(['\n        <div class="canvasListComponent">\n            <span commandName="onCanvasSelection">\n                ','\n            </span>\n            <ul childrenContainer="true" style="','"></ul>\n        </div>'],['\n        <div class="canvasListComponent">\n            <span commandName="onCanvasSelection">\n                ','\n            </span>\n            <ul childrenContainer="true" style="','"></ul>\n        </div>'])),r.currentCanvasInformation?r.currentCanvasInformation.id+' ('+r.currentCanvasInformation.width+'*'+r.currentCanvasInformation.height+')':'Choose Canvas...',r.showList?'display:block;visibility:visible':'display:none;visibility:hidden');return this.renderElementFromTemplate(t,r,e)},t}(qt),dn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),cn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return dn(t,n),t.prototype.render=function(t){var e=document.createElement('span');return e.className='fpsCounterComponent',e.innerText=t.toFixed(2)+' Fps',e},t}(qt),un=function(){function e(a){void 0===a&&(a={});var o=this;this.options=a,this.rootPlaceHolder=a.rootPlaceHolder||document.body,this.mvx=new Kt(this.rootPlaceHolder),this.isTrackingCanvas=!1,this.onCanvasSelected=new r,this.onCaptureRequested=new r,this.onPauseRequested=new r,this.onPlayRequested=new r,this.onPlayNextFrameRequested=new r,this.captureMenuComponent=new Jt,this.canvasListComponent=new ln,this.canvasListItemComponent=new tn,this.actionsComponent=new an,this.fpsCounterComponent=new cn,this.rootStateId=this.mvx.addRootState({visible:!0,logLevel:nr.info,logText:e.SelectCanvasHelpText,logVisible:!this.options.hideLog},this.captureMenuComponent),this.canvasListStateId=this.mvx.addChildState(this.rootStateId,{currentCanvasInformation:null,showList:!1},this.canvasListComponent),this.actionsStateId=this.mvx.addChildState(this.rootStateId,!0,this.actionsComponent),this.fpsStateId=this.mvx.addChildState(this.rootStateId,0,this.fpsCounterComponent),this.actionsComponent.onCaptureRequested.add(function(){var n=o.getSelectedCanvasInformation();n&&o.updateMenuStateLog(nr.info,e.PleaseWaitHelpText,!0),setTimeout(function(){o.onCaptureRequested.trigger(n)},200)}),this.actionsComponent.onPauseRequested.add(function(){o.onPauseRequested.trigger(o.getSelectedCanvasInformation()),o.mvx.updateState(o.actionsStateId,!1)}),this.actionsComponent.onPlayRequested.add(function(){o.onPlayRequested.trigger(o.getSelectedCanvasInformation()),o.mvx.updateState(o.actionsStateId,!0)}),this.actionsComponent.onPlayNextFrameRequested.add(function(){o.onPlayNextFrameRequested.trigger(o.getSelectedCanvasInformation())}),this.canvasListComponent.onCanvasSelection.add(function(n){o.mvx.updateState(o.canvasListStateId,{currentCanvasInformation:null,showList:!n.state.showList}),o.updateMenuStateLog(nr.info,e.SelectCanvasHelpText),o.onCanvasSelected.trigger(null),o.isTrackingCanvas&&o.trackPageCanvases(),n.state.showList?o.showMenuStateLog():o.hideMenuStateLog()}),this.canvasListItemComponent.onCanvasSelected.add(function(n){o.mvx.updateState(o.canvasListStateId,{currentCanvasInformation:n.state,showList:!1}),o.onCanvasSelected.trigger(n.state),o.updateMenuStateLog(nr.info,e.ActionsHelpText),o.showMenuStateLog()})}return e.prototype.getSelectedCanvasInformation=function(){return this.mvx.getGenericState(this.canvasListStateId).currentCanvasInformation},e.prototype.trackPageCanvases=function(){if(this.isTrackingCanvas=!0,document.body){var t=document.body.querySelectorAll('canvas');this.updateCanvasesList(t)}},e.prototype.updateCanvasesList=function(t){this.updateCanvasesListInformationInternal(t,function(t){return{id:t.id,width:t.width,height:t.height,ref:t}})},e.prototype.updateCanvasesListInformation=function(t){this.updateCanvasesListInformationInternal(t,function(t){return{id:t.id,width:t.width,height:t.height,ref:t.ref}})},e.prototype.display=function(){this.updateMenuStateVisibility(!0)},e.prototype.hide=function(){this.updateMenuStateVisibility(!1)},e.prototype.captureComplete=function(n){n?this.updateMenuStateLog(nr.error,n):this.updateMenuStateLog(nr.info,e.ActionsHelpText)},e.prototype.setFPS=function(t){this.mvx.updateState(this.fpsStateId,t)},e.prototype.updateCanvasesListInformationInternal=function(i,t){this.mvx.removeChildrenStates(this.canvasListStateId);for(var n=[],r=0,o;r<i.length;r++)o=t(i[r]),n.push(o),this.mvx.addChildState(this.canvasListStateId,o,this.canvasListItemComponent);var s=n.length,a=this.mvx.getGenericState(this.canvasListStateId).showList;if(!a)if(1===s){var d=n[0];this.mvx.updateState(this.canvasListStateId,{currentCanvasInformation:d,showList:a}),this.updateMenuStateLog(nr.info,e.ActionsHelpText),this.onCanvasSelected.trigger(d)}else this.updateMenuStateLog(nr.info,e.SelectCanvasHelpText),this.onCanvasSelected.trigger(null)},e.prototype.hideMenuStateLog=function(){var t=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:t.visible,logLevel:t.logLevel,logText:t.logText,logVisible:!1})},e.prototype.showMenuStateLog=function(){var t=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:t.visible,logLevel:t.logLevel,logText:t.logText,logVisible:!this.options.hideLog})},e.prototype.updateMenuStateLog=function(r,a,o){void 0===o&&(o=!1);var n=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:n.visible,logLevel:r,logText:a,logVisible:!this.options.hideLog},o)},e.prototype.updateMenuStateVisibility=function(n){var r=this.mvx.getGenericState(this.rootStateId);this.mvx.updateState(this.rootStateId,{visible:n,logLevel:r.logLevel,logText:r.logText,logVisible:r.logVisible})},e.SelectCanvasHelpText='Please, select a canvas in the list above.',e.ActionsHelpText='Record with the red button, you can also pause or continue playing the current scene.',e.PleaseWaitHelpText='Capturing, be patient (this can take up to 3 minutes)...',e}(),pn=(t(12),function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}()),mn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},gn=function(n){function t(){var e=n.call(this)||this;return e.onCaptureLoaded=new r,e}return pn(t,n),t.prototype.render=function(a,e){var t=this,n=this.htmlTemplate(F||(F=mn(['\n        <div class="captureListComponent ','">\n            <div class="openCaptureFile">\n                <Span>Drag files here to open a previously saved capture.</span>\n            </div>\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="captureListComponent ','">\n            <div class="openCaptureFile">\n                <Span>Drag files here to open a previously saved capture.</span>\n            </div>\n            <ul childrenContainer="true"></ul>\n        </div>'])),a?'active':''),i=this.renderElementFromTemplate(n,a,e),r=i.querySelector('.openCaptureFile');return r.addEventListener('dragenter',function(n){return t.drag(n),!1},!1),r.addEventListener('dragover',function(n){return t.drag(n),!1},!1),r.addEventListener('drop',function(n){t.drop(n)},!1),i},t.prototype.drag=function(t){t.stopPropagation(),t.preventDefault()},t.prototype.drop=function(t){t.stopPropagation(),t.preventDefault(),this.loadFiles(t)},t.prototype.loadFiles=function(a){var o=this,t=null;if(a&&a.dataTransfer&&a.dataTransfer.files&&(t=a.dataTransfer.files),a&&a.target&&a.target.files&&(t=a.target.files),t&&0<t.length)for(var e=function(n){var e=t[n].name.toLowerCase().split('.').pop();if(t[n].type,'json'===e){var a=t[n],r=new FileReader;r.onerror=function(t){rr.error('Error while reading file: '+a.name+t)},r.onload=function(t){try{var e=JSON.parse(t.target.result);o.onCaptureLoaded.trigger(e)}catch(t){rr.error('Error while reading file: '+a.name+t)}},r.readAsText(a)}},n=0;n<t.length;n++)e(n)},t}(qt),hn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),En=function(n){function t(){var e=n.call(this)||this;return e.onCaptureSelected=e.createEvent('onCaptureSelected'),e.onSaveRequested=e.createEvent('onSaveRequested'),e}return hn(t,n),t.prototype.render=function(d,e){var t=document.createElement('li');if(d.active&&(t.className='active'),d.capture.endState.VisualState.Attachments)for(var n=0,i=d.capture.endState.VisualState.Attachments;n<i.length;n++){var r=i[n],o=document.createElement('img');o.src=encodeURI(r.src),t.appendChild(o)}else{var s=document.createElement('span');s.innerText=d.capture.endState.VisualState.FrameBufferStatus,t.appendChild(s)}var a=document.createElement('span');a.innerText=new Date(d.capture.startTime).toTimeString().split(' ')[0],t.appendChild(a);var c=document.createElement('a');return c.href='#',c.className='captureListItemSave',this.mapEventListener(c,'click','onSaveRequested',d,e,!1,!0),a.appendChild(c),this.mapEventListener(t,'click','onCaptureSelected',d,e),t},t}(qt),An=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),_n=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Cn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return An(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(xr||(xr=_n(['\n        <div class="visualStateListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="visualStateListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'])));return this.renderElementFromTemplate(t,r,e)},t}(qt),vn=function(){function e(){}return e.scrollIntoView=function(r){for(var e=r.getBoundingClientRect(),t=r.parentElement;t&&t.clientHeight===t.offsetHeight;)t=t.parentElement;if(t){var n=t.getBoundingClientRect();e.top<n.top?r.scrollIntoView(!0):e.bottom>n.bottom&&r.scrollIntoView(!1)}},e}(),yn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Sn=function(n){function t(){var e=n.call(this)||this;return e.onVisualStateSelected=e.createEvent('onVisualStateSelected'),e}return yn(t,n),t.prototype.render=function(d,e){var t=document.createElement('li');if(d.active&&(t.className='active',setTimeout(function(){vn.scrollIntoView(t)},1)),d.VisualState.Attachments){for(var n=0,i=d.VisualState.Attachments,r;n<i.length;n++)if(r=i[n],r.src){var o=document.createElement('img');if(o.src=encodeURI(r.src),t.appendChild(o),1<d.VisualState.Attachments.length){var s=document.createElement('span');s.innerText=r.attachmentName,t.appendChild(s)}if(r.textureLayer){var a=document.createElement('span');a.innerText='Layer: '+r.textureLayer,t.appendChild(a)}if(r.textureCubeMapFace){var c=document.createElement('span');c.innerText=r.textureCubeMapFace,t.appendChild(c)}}}else{var l=document.createElement('span');l.innerText=d.VisualState.FrameBufferStatus,t.appendChild(l)}var u=document.createElement('span');return u.innerText=d.VisualState.FrameBuffer?'Frame buffer: '+d.VisualState.FrameBuffer.__SPECTOR_Object_TAG.id:'Canvas frame buffer',t.appendChild(u),this.mapEventListener(t,'click','onVisualStateSelected',d,e),t},t}(qt),bn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Tn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Rn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return bn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(Ar||(Ar=Tn(['\n        <div class="commandListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="commandListComponent">\n            <ul childrenContainer="true"></ul>\n        </div>'])));return this.renderElementFromTemplate(t,r,e)},t}(qt),xn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Fn=function(n){function t(){var e=n.call(this)||this;return e.onCommandSelected=e.createEvent('onCommandSelected'),e.onVertexSelected=e.createEvent('onVertexSelected'),e.onFragmentSelected=e.createEvent('onFragmentSelected'),e}return xn(t,n),t.prototype.render=function(d,e){var t=document.createElement('li'),n='unknown';switch(d.capture.status){case 50:n='deprecated';break;case 10:n='unused';break;case 20:n='disabled';break;case 30:n='redundant';break;case 40:n='valid';}if(d.capture.VisualState&&(t.className=' drawCall'),d.active&&(t.className=' active',setTimeout(function(){vn.scrollIntoView(t)},1)),d.capture.marker){var i=document.createElement('span');i.className=n+' marker important',i.innerText=d.capture.marker+' ',i.style.fontWeight='1000',t.appendChild(i)}var r=document.createElement('span'),o=d.capture.text;if(o=o.replace(d.capture.name,'<span class=" '+n+' important">'+d.capture.name+'</span>'),r.innerHTML=o,t.appendChild(r),d.capture.VisualState&&'clear'!==d.capture.name)try{var s=d.capture.DrawCall.shaders[0],a=d.capture.DrawCall.shaders[1],c=document.createElement('a');c.innerText=s.name,c.href='#',t.appendChild(c),this.mapEventListener(c,'click','onVertexSelected',d,e);var l=document.createElement('a');l.innerText=a.name,l.href='#',t.appendChild(l),this.mapEventListener(l,'click','onFragmentSelected',d,e)}catch(t){}return this.mapEventListener(t,'click','onCommandSelected',d,e),t},t}(qt),wn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Ln=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},In=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return wn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(R||(R=Ln(['\n        <div class="commandDetailComponent" childrenContainer="true">\n        </div>'],['\n        <div class="commandDetailComponent" childrenContainer="true">\n        </div>'])));return this.renderElementFromTemplate(t,r,e)},t}(qt),Dn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Bn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Mn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Dn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(br||(br=Bn(['\n        <div class="jsonContentComponent" childrenContainer="true">\n        </div>'],['\n        <div class="jsonContentComponent" childrenContainer="true">\n        </div>'])));return this.renderElementFromTemplate(t,r,e)},t}(qt),Nn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Pn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},On=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Nn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(Tr||(Tr=Pn(['\n        <div class="jsonGroupComponent">\n            <div class="jsonGroupComponentTitle">','</div>\n            <ul childrenContainer="true"></ul>\n        </div>'],['\n        <div class="jsonGroupComponent">\n            <div class="jsonGroupComponentTitle">','</div>\n            <ul childrenContainer="true"></ul>\n        </div>'])),r?r.replace(/([A-Z])/g,' $1').trim():'');return this.renderElementFromTemplate(t,r,e)},t}(qt),kn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Un=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Gn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return kn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(w||(w=Un(['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">','</span><li>'],['\n            <li><span class="jsonItemComponentKey">',': </span><span class="jsonItemComponentValue">','</span><li>'])),r.key,r.value);return this.renderElementFromTemplate(t,r,e)},t}(qt),Vn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Hn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Wn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Vn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(Cr||(Cr=Hn(['\n        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>','</span></div></li>'],['\n        <li class="jsonItemImageHolder"><div class="jsonItemImage"><img src="','"/><span>','</span></div></li>'])),r.value,r.key);return this.renderElementFromTemplate(t,r,e)},t}(qt),$n=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),jn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},zn=function(n){function t(){var e=n.call(this)||this;return e.onOpenSourceClicked=e.createEvent('onOpenSourceClicked'),e}return $n(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(B||(B=jn(['\n        <li commandName="onOpenSourceClicked"><span class="jsonItemComponentKey">',': </span><span class="jsonSourceItemComponentOpen">Click to Open.</span><li>'],['\n        <li commandName="onOpenSourceClicked"><span class="jsonItemComponentKey">',': </span><span class="jsonSourceItemComponentOpen">Click to Open.</span><li>'])),r.key);return this.renderElementFromTemplate(t,r,e)},t}(qt),Xn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Kn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},Yn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return Xn(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(D||(D=Kn(['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'],['\n            <li><span class="jsonItemComponentKey">',': </span>\n                <span class="jsonItemComponentValue">',' (<a href="','" target="_blank" class="jsonSourceItemComponentOpen">Open help page</a>)\n                </span>\n            <li>'])),r.key,r.value,r.help);return this.renderElementFromTemplate(t,r,e)},t}(qt),qn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Zn=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return qn(t,n),t.prototype.render=function(t){var e=document.createElement('div');if(e.className='jsonVisualStateItemComponent',t.Attachments){for(var n=0,i=t.Attachments,r;n<i.length;n++)if(r=i[n],r.src){var o=document.createElement('img');if(o.src=encodeURI(r.src),e.appendChild(o),1<t.Attachments.length){var s=document.createElement('span');s.innerText=r.attachmentName,e.appendChild(s)}}}else{var a=document.createElement('span');a.innerText=t.FrameBufferStatus,e.appendChild(a)}var d=document.createElement('span');return d.innerText=t.FrameBuffer?t.FrameBuffer.__SPECTOR_Object_TAG.displayText:'Canvas frame buffer',e.appendChild(d),e},t}(qt),Qn=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),Jn=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},or=function(n){function t(){var e=n.call(this)||this;return e.onCapturesClicked=e.createEvent('onCapturesClicked'),e.onCommandsClicked=e.createEvent('onCommandsClicked'),e.onInformationClicked=e.createEvent('onInformationClicked'),e.onInitStateClicked=e.createEvent('onInitStateClicked'),e.onEndStateClicked=e.createEvent('onEndStateClicked'),e.onCloseClicked=e.createEvent('onCloseClicked'),e.onSearchTextChanged=e.createEvent('onSearchTextChanged'),e.onSearchTextCleared=e.createEvent('onSearchTextCleared'),e}return Qn(t,n),t.prototype.render=function(a,e){var t=this.htmlTemplate(L||(L=Jn(['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" href="#" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a href="#" role="button" commandName="onCloseClicked">Close</a></li>\n            </ul>'],['<ul class="resultViewMenuComponent">\n                <li class="resultViewMenuOpen resultViewMenuSmall"><a href="#" role="button">Menu</a></li>\n\n                <li class="searchContainer">\n                    <input type="text" placeHolder="Search..." value="','" commandName="onSearchTextChanged" commandEventBinding="change">\n                    <a class="clearSearch" href="#" CommandName="onSearchTextCleared">X</a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onCapturesClicked">Captures</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInformationClicked">Information</a></li>\n                <li><a class="',' href="#" role="button" commandName="onInitStateClicked">Init State</a></li>\n                <li>\n                    <a class="',' href="#" role="button" commandName="onCommandsClicked">\n                        Commands','\n                    </a>\n                </li>\n                <li><a class="',' href="#" role="button" commandName="onEndStateClicked">End State</a></li>\n                <li><a href="#" role="button" commandName="onCloseClicked">Close</a></li>\n            </ul>'])),a.searchText,0===a.status?'active':'',10===a.status?'active':'',20===a.status?'active':'',40===a.status?'active':'',0<a.commandCount?' ('+a.commandCount+')':'',30===a.status?'active':''),n=this.renderElementFromTemplate(t,a,e),i=n.querySelector('.resultViewMenuOpen'),r=n.querySelectorAll('li:not(.resultViewMenuSmall)');return i.addEventListener('click',function(){if('true'===i.getAttribute('open')){i.setAttribute('open','false');for(var e=0;e<r.length;e++)r[e].style.display='none',r[e].style.visibility='hidden'}else for(i.setAttribute('open','true'),e=0;e<r.length;e++)r[e].style.display='block',r[e].style.visibility='visible'}),n},t}(qt),ir=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),sr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return ir(t,n),t.prototype.render=function(n,e){return this.renderElementFromTemplate('<div childrenContainer="true" class="resultViewContentComponent"></div>',n,e)},t}(qt),lr=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),dr=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},cr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return lr(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(I||(I=dr(['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'],['\n            <div childrenContainer="true" class="resultViewComponent ','">\n            </div>'])),r?'active':'');return this.renderElementFromTemplate(t,r,e)},t}(qt),ur=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),pr=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},mr=function(n){function t(){var e=n.call(this)||this;return e.onVertexSourceClicked=e.createEvent('onVertexSourceClicked'),e.onFragmentSourceClicked=e.createEvent('onFragmentSourceClicked'),e.onSourceCodeCloseClicked=e.createEvent('onSourceCodeCloseClicked'),e.onSourceCodeChanged=e.createEvent('onSourceCodeChanged'),e}return ur(t,n),t.prototype.showError=function(r){if(this.editor){var e=[];if(r=r||'')for(var t=/^.*ERROR:\W([0-9]+):([0-9]+):(.*)$/gm,n=t.exec(r);null!=n;)e.push({row:+n[2]-1,column:n[1],text:n[3]||'Error',type:'error'}),n=t.exec(r);this.editor.getSession().setAnnotations(e)}},t.prototype.render=function(l,e){var t=this,n=l.fragment?l.sourceFragment:l.sourceVertex,i=n?this._indentIfdef(this._beautify(n)):'',r=this.htmlTemplate(M||(M=pr(['\n        <div class="sourceCodeComponentContainer">\n            <div class="sourceCodeMenuComponentContainer">\n                <ul class="sourceCodeMenuComponent">\n                    <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                    <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                </ul>\n            </div>\n            $','\n        </div>'],['\n        <div class="sourceCodeComponentContainer">\n            <div class="sourceCodeMenuComponentContainer">\n                <ul class="sourceCodeMenuComponent">\n                    <li><a class="','" href="#" role="button" commandName="onVertexSourceClicked">Vertex</a></li>\n                    <li><a class="','" href="#" role="button" commandName="onFragmentSourceClicked">Fragment</a></li>\n                    <li><a href="#" role="button" commandName="onSourceCodeCloseClicked">Close</a></li>\n                </ul>\n            </div>\n            $','\n        </div>'])),l.fragment?'':'active',l.fragment?'active':'',l.editable?this.htmlTemplate(O||(O=pr(['<div class="sourceCodeComponentEditable">','</div>'],['<div class="sourceCodeComponentEditable">','</div>'])),i):this.htmlTemplate(N||(N=pr(['<div class="sourceCodeComponent">\n                    <pre class="language-glsl"><code>','</code></pre>\n                </div>'],['<div class="sourceCodeComponent">\n                    <pre class="language-glsl"><code>','</code></pre>\n                </div>'])),i)),o=this.renderElementFromTemplate(r.replace(/<br>/g,'\n'),l,e);if(l.editable){this.editor=ace.edit(o.querySelector('.sourceCodeComponentEditable')),this.editor.setTheme('ace/theme/monokai'),this.editor.getSession().setMode('ace/mode/glsl'),this.editor.setShowPrintMargin(!1);var s=-1;this.editor.getSession().on('change',function(){-1!==s&&clearTimeout(s),s=setTimeout(function(){t._triggerCompilation(t.editor,l,o,e)},1500)})}else Prism.highlightElement(o.querySelector('pre'));return o},t.prototype._triggerCompilation=function(r,e,t,n){e.fragment?e.sourceFragment=r.getValue():e.sourceVertex=r.getValue(),this.triggerEvent('onSourceCodeChanged',t,e,n)},t.prototype._beautify=function(p,e){void 0===e&&(e=0),p=p.trim(),p=this._adaptComments(p);for(var n=this._getBracket(p),r=n.firstIteration,o=n.lastIteration,s='',a=0,c;a<e;a++)s+='    ';if(-1===r)c=p=(p=(p=(p=(p=(p=(p=(p=s+p).replace(/;(?![^\(]*\))\s*(\/\/.*)?/g,function(t){return t.trim()+'\n'})).replace(/\s*([*+-\/=><\s]*=)\s*/g,function(t){return' '+t.trim()+' '})).replace(/\s*(,)\s*/g,function(t){return t.trim()+' '})).replace(/\n[ \t]+/g,'\n')).replace(/\n/g,'\n'+s)).replace(/\s+$/g,'')).replace(/\n+$/g,'');else{var i=p.substr(0,r),l=p.substr(o+1,p.length),u=p.substr(r+1,o-r-1).trim(),m=this._beautify(u,e+1);c=(c=(c=this._beautify(i,e)+' {\n'+m+'\n'+s+'}\n'+this._beautify(l,e)).replace(/\s*\n+\s*;/g,';')).replace(/#endif[\t \f\v]*{/g,'\n {')}return c=(c=(c=c.replace(t.semicolonReplacementKeyRegex,';')).replace(t.openCurlyReplacementKeyRegex,'{')).replace(t.closeCurlyReplacementKeyRegex,'}')},t.prototype._adaptComments=function(a){for(var e=!1,n=!1,i=0,r;i<a.length;i++)r=a[i],'/'===r?'*'===a[i-1]?n=!1:'*'===a[i+1]?e||(n=!0,i++):'/'===a[i+1]&&(n||(e=!0,i++)):'\n'===r?e=!1:';'===r?(e||n)&&(a=a.substr(0,i)+t.semicolonReplacementKey+a.substr(i+1)):'{'===r?(e||n)&&(a=a.substr(0,i)+t.openCurlyReplacementKey+a.substr(i+1)):'}'===r&&(e||n)&&(a=a.substr(0,i)+t.closeCurlyReplacementKey+a.substr(i+1));return a},t.prototype._getBracket=function(l,e){void 0===e&&(e=-1);for(var t=l.indexOf('{',e),d=1,i=t,r=0,u=0,s=l.substr(t+1).split(''),a;u<s.length;u++)if(a=s[u],i++,'{'===a&&d++,'}'===a&&d--,0==d){r=i;break}return-1<t&&0===r?this._getBracket(l,t+1):{firstIteration:t,lastIteration:r}},t.prototype._indentIfdef=function(a){for(var e=0,t=a.split('\n'),n=0,i;n<t.length;n++){i=t[n],-1!==i.indexOf('#endif')&&e--,-1!==i.indexOf('#else')&&e--;for(var r='',o=0;o<e;o++)r+='    ';t[n]=r+i,-1===i.indexOf('#if')&&-1===i.indexOf('#else')||e++}return t.join('\n')},t.semicolonReplacementKey='[[[semicolonReplacementKey]]]',t.semicolonReplacementKeyRegex=/\[\[\[semicolonReplacementKey\]\]\]/g,t.openCurlyReplacementKey='[[[openCurlyReplacementKey]]]',t.openCurlyReplacementKeyRegex=/\[\[\[openCurlyReplacementKey\]\]\]/g,t.closeCurlyReplacementKey='[[[closeCurlyReplacementKey]]]',t.closeCurlyReplacementKeyRegex=/\[\[\[closeCurlyReplacementKey\]\]\]/g,t}(qt),gr=function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,e){n.__proto__=e}||function(r,e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])})(e,t)};return function(e,t){function i(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}}(),hr=function(n,e){return Object.defineProperty?Object.defineProperty(n,'raw',{value:e}):n.raw=e,n},fr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gr(t,n),t.prototype.render=function(r,e){var t=this.htmlTemplate(k||(k=hr(['\n                <div childrenContainer="true" class="','"></div>'],['\n                <div childrenContainer="true" class="','"></div>'])),r?'informationColumnLeftComponent':'informationColumnRightComponent');return this.renderElementFromTemplate(t,r,e)},t}(qt),_r=function(){function e(){}return e.getMDNLink=function(r){var t=e.WebGL2Functions[r];if(t)return e.WebGL2RootUrl+t;var n=e.WebGLFunctions[r];return n?e.WebGLRootUrl+n:e.WebGLRootUrl+r},e.WebGL2RootUrl='https://developer.mozilla.org/en-US/docs/Web/API/WebGL2RenderingContext/',e.WebGLRootUrl='https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/',e.WebGL2Functions={beginQuery:'beginQuery',beginTransformFeedback:'beginTransformFeedback',bindBufferBase:'bindBufferBase',bindBufferRange:'bindBufferRange',bindSampler:'bindSampler',bindTransformFeedback:'bindTransformFeedback',bindVertexArray:'bindVertexArray',blitFramebuffer:'blitFramebuffer',clearBufferfv:'clearBuffer',clearBufferiv:'clearBuffer',clearBufferuiv:'clearBuffer',clearBufferfi:'clearBuffer',clientWaitSync:'clientWaitSync',compressedTexImage3D:'compressedTexImage3D',compressedTexSubImage3D:'compressedTexSubImage3D',copyBufferSubData:'copyBufferSubData',copyTexSubImage3D:'copyTexSubImage3D',createQuery:'createQuery',createSampler:'createSampler',createTransformFeedback:'createTransformFeedback',createVertexArray:'createVertexArray',deleteQuery:'deleteQuery',deleteSampler:'deleteSampler',deleteSync:'deleteSync',deleteTransformFeedback:'deleteTransformFeedback',deleteVertexArray:'deleteVertexArray',drawArraysInstanced:'drawArraysInstanced',drawBuffers:'drawBuffers',drawElementsInstanced:'drawElementsInstanced',drawRangeElements:'drawRangeElements',endQuery:'endQuery',endTransformFeedback:'endTransformFeedback',fenceSync:'fenceSync',framebufferTextureLayer:'framebufferTextureLayer',getActiveUniformBlockName:'getActiveUniformBlockName',getActiveUniformBlockParameter:'getActiveUniformBlockParameter',getActiveUniforms:'getActiveUniforms',getBufferSubData:'getBufferSubData',getFragDataLocation:'getFragDataLocation',getIndexedParameter:'getIndexedParameter',getInternalformatParameter:'getInternalformatParameter',getQuery:'getQuery',getQueryParameter:'getQueryParameter',getSamplerParameter:'getSamplerParameter',getSyncParameter:'getSyncParameter',getTransformFeedbackVarying:'getTransformFeedbackVarying',getUniformBlockIndex:'getUniformBlockIndex',getUniformIndices:'getUniformIndices',invalidateFramebuffer:'invalidateFramebuffer',invalidateSubFramebuffer:'invalidateSubFramebuffer',isQuery:'isQuery',isSampler:'isSampler',isSync:'isSync',isTransformFeedback:'isTransformFeedback',isVertexArray:'isVertexArray',pauseTransformFeedback:'pauseTransformFeedback',readBuffer:'readBuffer',renderbufferStorageMultisample:'renderbufferStorageMultisample',resumeTransformFeedback:'resumeTransformFeedback',samplerParameteri:'samplerParameter',samplerParameterf:'samplerParameter',texImage3D:'texImage3D',texStorage2D:'texStorage2D',texStorage3D:'texStorage3D',texSubImage3D:'texSubImage3D',transformFeedbackVaryings:'transformFeedbackVaryings',uniform1ui:'uniform',uniform2ui:'uniform',uniform3ui:'uniform',uniform4ui:'uniform',uniform1fv:'uniform',uniform2fv:'uniform',uniform3fv:'uniform',uniform4fv:'uniform',uniform1iv:'uniform',uniform2iv:'uniform',uniform3iv:'uniform',uniform4iv:'uniform',uniform1uiv:'uniform',uniform2uiv:'uniform',uniform3uiv:'uniform',uniform4uiv:'uniform',uniformBlockBinding:'uniformBlockBinding',uniformMatrix2fv:'uniformMatrix',uniformMatrix3x2fv:'uniformMatrix',uniformMatrix4x2fv:'uniformMatrix',uniformMatrix2x3fv:'uniformMatrix',uniformMatrix3fv:'uniformMatrix',uniformMatrix4x3fv:'uniformMatrix',uniformMatrix2x4fv:'uniformMatrix',uniformMatrix3x4fv:'uniformMatrix',uniformMatrix4fv:'uniformMatrix',vertexAttribDivisor:'vertexAttribDivisor',vertexAttribI4i:'vertexAttribI',vertexAttribI4ui:'vertexAttribI',vertexAttribI4iv:'vertexAttribI',vertexAttribI4uiv:'vertexAttribI',vertexAttribIPointer:'vertexAttribIPointer',waitSync:'waitSync'},e.WebGLFunctions={uniform1f:'uniform',uniform1fv:'uniform',uniform1i:'uniform',uniform1iv:'uniform',uniform2f:'uniform',uniform2fv:'uniform',uniform2i:'uniform',uniform2iv:'uniform',uniform3f:'uniform',uniform3i:'uniform',uniform3iv:'uniform',uniform4f:'uniform',uniform4fv:'uniform',uniform4i:'uniform',uniform4iv:'uniform',uniformMatrix2fv:'uniformMatrix',uniformMatrix3fv:'uniformMatrix',uniformMatrix4fv:'uniformMatrix',vertexAttrib1f:'vertexAttrib',vertexAttrib2f:'vertexAttrib',vertexAttrib3f:'vertexAttrib',vertexAttrib4f:'vertexAttrib',vertexAttrib1fv:'vertexAttrib',vertexAttrib2fv:'vertexAttrib',vertexAttrib3fv:'vertexAttrib',vertexAttrib4fv:'vertexAttrib'},e}(),yr=function(){function e(n){void 0===n&&(n=null);var a=this;this.rootPlaceHolder=n,this.onSourceCodeChanged=new r,this.rootPlaceHolder=this.rootPlaceHolder||document.body,this.mvx=new Kt(this.rootPlaceHolder),this.searchText='',this.currentCommandId=-1,this.visible=!1,this.commandCount=0,this.commandListStateId=-1,this.commandDetailStateId=-1,this.currentCaptureStateId=-1,this.currentCommandStateId=-1,this.currentVisualStateId=-1,this.visualStateListStateId=-1,this.initVisualStateId=-1,this.sourceCodeComponentStateId=-1,this.captureListComponent=new gn,this.captureListItemComponent=new En,this.visualStateListComponent=new Cn,this.visualStateListItemComponent=new Sn,this.commandListComponent=new Rn,this.commandListItemComponent=new Fn,this.commandDetailComponent=new In,this.jsonContentComponent=new Mn,this.jsonGroupComponent=new On,this.jsonItemComponent=new Gn,this.jsonImageItemComponent=new Wn,this.jsonSourceItemComponent=new zn,this.jsonHelpItemComponent=new Yn,this.jsonVisualStateItemComponent=new Zn,this.resultViewMenuComponent=new or,this.resultViewContentComponent=new sr,this.resultViewComponent=new cr,this.sourceCodeComponent=new mr,this.informationColumnComponent=new fr,this.rootStateId=this.mvx.addRootState(null,this.resultViewComponent),this.menuStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewMenuComponent),this.contentStateId=this.mvx.addChildState(this.rootStateId,null,this.resultViewContentComponent),this.captureListStateId=this.mvx.addChildState(this.rootStateId,!1,this.captureListComponent),this.initKeyboardEvents(),this.initMenuComponent(),this.captureListComponent.onCaptureLoaded.add(function(t){a.addCapture(t)}),this.captureListItemComponent.onCaptureSelected.add(function(t){a.selectCapture(t.stateId)}),this.captureListItemComponent.onSaveRequested.add(function(t){a.saveCapture(t.state.capture)}),this.visualStateListItemComponent.onVisualStateSelected.add(function(t){a.selectVisualState(t.stateId)}),this.commandListItemComponent.onCommandSelected.add(function(t){a.selectCommand(t.stateId)}),this.commandListItemComponent.onVertexSelected.add(function(t){a.selectCommand(t.stateId),a.openShader(!1)}),this.commandListItemComponent.onFragmentSelected.add(function(t){a.selectCommand(t.stateId),a.openShader(!0)}),this.sourceCodeComponent.onSourceCodeCloseClicked.add(function(){a.displayCurrentCapture()}),this.sourceCodeComponent.onVertexSourceClicked.add(function(){var e=a.mvx.getGenericState(a.sourceCodeComponentStateId);e.fragment=!1,a.mvx.updateState(a.sourceCodeComponentStateId,e)}),this.sourceCodeComponent.onFragmentSourceClicked.add(function(){var e=a.mvx.getGenericState(a.sourceCodeComponentStateId);e.fragment=!0,a.mvx.updateState(a.sourceCodeComponentStateId,e)}),this.sourceCodeComponent.onSourceCodeChanged.add(function(t){a.onSourceCodeChanged.trigger({programId:t.state.programId,sourceFragment:t.state.sourceFragment,sourceVertex:t.state.sourceVertex})}),this.jsonSourceItemComponent.onOpenSourceClicked.add(function(t){a.openShader('FRAGMENT_SHADER'===t.state.value)}),this.updateViewState()}var t=Number.MIN_VALUE;return e.prototype.saveCapture=function(a){var e=JSON.stringify(a,null,4),t=new Blob([e],{type:'octet/stream'}),n='capture '+new Date(a.startTime).toTimeString().split(' ')[0]+'.json';if(navigator.msSaveBlob)navigator.msSaveBlob(t,n);else{var i=document.createElement('a'),r=window.URL.createObjectURL(t);i.setAttribute('href',r),i.setAttribute('download',n),i.click()}},e.prototype.selectCapture=function(t){this.currentCommandId=-1,this.currentCaptureStateId=t,this.displayCurrentCapture()},e.prototype.selectCommand=function(t){this.currentCommandStateId=t,this.currentVisualStateId=this.displayCurrentCommand(),this.displayCurrentVisualState()},e.prototype.selectVisualState=function(t){this.currentVisualStateId=t,this.currentCommandStateId=this.displayCurrentVisualState(),this.displayCurrentCommand()},e.prototype.display=function(){this.visible=!0,this.updateViewState()},e.prototype.hide=function(){this.visible=!1,this.updateViewState()},e.prototype.addCapture=function(n){var r=this.mvx.insertChildState(this.captureListStateId,{capture:n,active:!1},0,this.captureListItemComponent);return this.selectCapture(r),r},e.prototype.showSourceCodeError=function(t){this.sourceCodeComponent.showError(t)},e.prototype.initKeyboardEvents=function(){var n=this;this.rootPlaceHolder.addEventListener('keydown',function(e){40===n.mvx.getGenericState(n.menuStateId).status&&(38===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectPreviousCommand()):40===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectNextCommand()):33===e.keyCode?(e.preventDefault(),e.stopPropagation(),n.selectPreviousVisualState()):34===e.keyCode&&(e.preventDefault(),e.stopPropagation(),n.selectNextVisualState()))})},e.prototype.openShader=function(n){this.mvx.removeChildrenStates(this.contentStateId);var r=this.mvx.getGenericState(this.currentCommandStateId);this.sourceCodeComponentStateId=this.mvx.addChildState(this.contentStateId,{programId:r.capture.DrawCall.programStatus.program.__SPECTOR_Object_TAG.id,nameVertex:r.capture.DrawCall.shaders[0].name,nameFragment:r.capture.DrawCall.shaders[1].name,sourceVertex:r.capture.DrawCall.shaders[0].source,sourceFragment:r.capture.DrawCall.shaders[1].source,fragment:n,editable:r.capture.DrawCall.programStatus.RECOMPILABLE},this.sourceCodeComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.displayCurrentCommandDetail(r)},e.prototype.selectPreviousCommand=function(){var t=this.mvx.getGenericState(this.currentCommandStateId);0>t.previousCommandStateId||this.selectCommand(t.previousCommandStateId)},e.prototype.selectNextCommand=function(){var t=this.mvx.getGenericState(this.currentCommandStateId);0>t.nextCommandStateId||this.selectCommand(t.nextCommandStateId)},e.prototype.selectPreviousVisualState=function(){var t=this.mvx.getGenericState(this.currentVisualStateId);0>t.previousVisualStateId||this.selectVisualState(t.previousVisualStateId)},e.prototype.selectNextVisualState=function(){var t=this.mvx.getGenericState(this.currentVisualStateId);0>t.nextVisualStateId||this.selectVisualState(t.nextVisualStateId)},e.prototype.initMenuComponent=function(){var n=this;this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:0}),this.resultViewMenuComponent.onCloseClicked.add(function(){n.hide()}),this.resultViewMenuComponent.onCapturesClicked.add(function(){n.displayCaptures()}),this.resultViewMenuComponent.onCommandsClicked.add(function(){n.displayCurrentCapture()}),this.resultViewMenuComponent.onInformationClicked.add(function(){n.displayInformation()}),this.resultViewMenuComponent.onInitStateClicked.add(function(){n.displayInitState()}),this.resultViewMenuComponent.onEndStateClicked.add(function(){n.displayEndState()}),this.resultViewMenuComponent.onSearchTextChanged.add(function(e){n.search(e.sender.value)}),this.resultViewMenuComponent.onSearchTextCleared.add(function(e){n.mvx.updateState(n.menuStateId,{status:e.state.status,searchText:'',commandCount:e.state.commandCount}),n.search('')})},e.prototype.onCaptureRelatedAction=function(n){var r=this.mvx.getGenericState(this.currentCaptureStateId);return this.commandCount=r.capture.commands.length,this.mvx.removeChildrenStates(this.contentStateId),this.mvx.updateState(this.menuStateId,{status:n,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.getGenericState(this.captureListStateId)&&this.mvx.updateState(this.captureListStateId,!1),r.capture},e.prototype.displayCaptures=function(){this.mvx.updateState(this.menuStateId,{status:0,searchText:this.searchText,commandCount:this.commandCount}),this.mvx.updateState(this.captureListStateId,!0)},e.prototype.displayInformation=function(){var l=this.onCaptureRelatedAction(10),e=this.mvx.addChildState(this.contentStateId,!0,this.informationColumnComponent),t=this.mvx.addChildState(this.contentStateId,!1,this.informationColumnComponent),n=this.mvx.addChildState(e,null,this.jsonContentComponent);this.displayJSONGroup(n,'Canvas',l.canvas),this.displayJSONGroup(n,'Context',l.context);for(var i=this.mvx.addChildState(t,null,this.jsonContentComponent),r=0,o=l.analyses,s;r<o.length;r++)s=o[r],this.displayJSONGroup(i,s.analyserName,s);this.displayJSONGroup(i,'Frame Memory Changes',l.frameMemory),this.displayJSONGroup(i,'Total Memory (seconds since application start: bytes)',l.memory)},e.prototype.displayJSON=function(a,e){for(var t in e.VisualState&&this.mvx.addChildState(a,e.VisualState,this.jsonVisualStateItemComponent),e)if('VisualState'!==t&&'analyserName'!==t){var s=e[t];if('source'===t)this.mvx.addChildState(a,{key:t,value:e.SHADER_TYPE},this.jsonSourceItemComponent);else if('visual'===t)for(var i in s)s.hasOwnProperty(i)&&s[i]&&this.mvx.addChildState(a,{key:i,value:s[i]},this.jsonImageItemComponent);else{var l=this.getJSONAsString(a,t,s);if(null==l)continue;if(this.toFilter(t)&&this.toFilter(s))continue;this.mvx.addChildState(a,{key:t,value:l},this.jsonItemComponent)}s&&s.__SPECTOR_Metadata&&this.displayJSONGroup(a,'Metadata',s.__SPECTOR_Metadata)}},e.prototype.getJSONAsString=function(a,e,s){if(null===s)return'null';if(void 0===s)return'undefined';if('number'==typeof s)return T(s)===s?s.toFixed(0):s.toFixed(4);if('string'==typeof s)return s;if('boolean'==typeof s)return s?'true':'false';if(0===s.length)return'Empty Array';if(s.length){for(var l=[],i=0,r;i<s.length;i++)r=this.getJSONAsString(a,e+'('+i.toFixed(0)+')',s[i]),null!==r&&l.push(r);return 0===l.length?null:l.join(', ')}return s.help?(this.mvx.addChildState(a,{key:e,value:s.name,help:s.help},this.jsonHelpItemComponent),null):s.__SPECTOR_Object_TAG?s.__SPECTOR_Object_TAG.displayText:s.displayText?s.displayText:('object'==typeof s&&this.displayJSONGroup(a,e,s),null)},e.prototype.displayJSONGroup=function(r,e,t){if(t){var n=this.mvx.addChildState(r,e,this.jsonGroupComponent);this.displayJSON(n,t),this.mvx.hasChildren(n)||this.mvx.removeState(n)}},e.prototype.displayInitState=function(){var n=this.onCaptureRelatedAction(20),e=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(e,n.initState)},e.prototype.displayEndState=function(){var n=this.onCaptureRelatedAction(30),e=this.mvx.addChildState(this.contentStateId,null,this.jsonContentComponent);this.displayJSON(e,n.endState)},e.prototype.displayCurrentCapture=function(){var t=this.onCaptureRelatedAction(40);this.mvx.updateAllChildrenGenericState(this.captureListStateId,function(t){return t.active=!1,t}),this.mvx.updateState(this.currentCaptureStateId,{capture:t,active:!0}),this.createVisualStates(t),this.commandListStateId=this.mvx.addChildState(this.contentStateId,null,this.commandListComponent),this.commandDetailStateId=this.mvx.addChildState(this.contentStateId,null,this.commandDetailComponent),this.createCommands(t)},e.prototype.displayCurrentCommand=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return-1;var n=this.mvx.getGenericState(this.currentCommandStateId),e=n.capture;return this.currentCommandId=e.id,this.mvx.updateAllChildrenGenericState(this.commandListStateId,function(t){return t.active=!1,t}),this.mvx.updateState(this.currentCommandStateId,{capture:e,visualStateId:n.visualStateId,previousCommandStateId:n.previousCommandStateId,nextCommandStateId:n.nextCommandStateId,active:!0}),this.displayCurrentCommandDetail(n)},e.prototype.displayCurrentCommandDetail=function(a){var e=a.capture;this.mvx.removeChildrenStates(this.commandDetailStateId);var t=this.mvx.getGenericState(a.visualStateId);this.mvx.addChildState(this.commandDetailStateId,t.VisualState,this.jsonVisualStateItemComponent);var n='Unknown';switch(e.status){case 50:n='Deprecated';break;case 10:n='Unused';break;case 20:n='Disabled';break;case 30:n='Redundant';break;case 40:n='Valid';}var s=_r.getMDNLink(e.name);for(var l in e.result?this.displayJSONGroup(this.commandDetailStateId,'Global',{name:{help:s,name:e.name},duration:e.commandEndTime-e.startTime,result:e.result,status:n}):this.displayJSONGroup(this.commandDetailStateId,'Global',{name:{help:s,name:e.name},duration:e.commandEndTime-e.startTime,status:n}),e)'VisualState'!==l&&'result'!==l&&'object'==typeof e[l]&&this.displayJSONGroup(this.commandDetailStateId,l,e[l]);return a.visualStateId},e.prototype.displayCurrentVisualState=function(){if(40!==this.mvx.getGenericState(this.menuStateId).status)return null;var n=this.mvx.getGenericState(this.currentVisualStateId);return n.commandStateId===t?this.displayInitState():n.commandStateId===d&&this.displayEndState(),this.mvx.updateAllChildrenGenericState(this.visualStateListStateId,function(t){return t.active=!1,t}),n.active=!0,this.mvx.updateState(this.currentVisualStateId,n),n.commandStateId},e.prototype.createVisualStates=function(n){this.visualStateListStateId=this.mvx.addChildState(this.contentStateId,null,this.visualStateListComponent),this.mvx.removeChildrenStates(this.visualStateListStateId),this.initVisualStateId=this.mvx.addChildState(this.visualStateListStateId,{VisualState:n.initState.VisualState,time:n.startTime,commandStateId:t,active:!1},this.visualStateListItemComponent)},e.prototype.createCommands=function(p){this.mvx.removeChildrenStates(this.commandListStateId);for(var e=this.initVisualStateId,t=!1,m=null,i=-1,g=null,o=-1,f=0,a;f<p.commands.length;f++)if(a=p.commands[f],!this.toFilter(a.marker)||!this.toFilter(a.name)||a.id===this.currentCommandId){var _={capture:a,previousCommandStateId:i,nextCommandStateId:-1,visualStateId:void 0,active:!1},l=this.mvx.addChildState(this.commandListStateId,_,this.commandListItemComponent);if(m&&((m=this.mvx.getGenericState(i)).nextCommandStateId=l,this.mvx.updateState(i,m)),i=l,m=_,a.VisualState){var y={VisualState:a.VisualState,time:a.endTime,commandStateId:l,active:!1,previousVisualStateId:o,nextVisualStateId:-1};e=this.mvx.addChildState(this.visualStateListStateId,y,this.visualStateListItemComponent),g&&((g=this.mvx.getGenericState(o)).nextVisualStateId=e,this.mvx.updateState(o,g)),g=y,o=e,t=!0}else if(!t){var h=this.mvx.getGenericState(this.initVisualStateId);h.commandStateId=l,h.previousVisualStateId=-1,h.nextVisualStateId=-1,this.mvx.updateState(this.initVisualStateId,h),g=h,o=e,t=!0}_.visualStateId=e,this.mvx.updateState(l,_),(-1===this.currentCommandId&&0===f||this.currentCommandId===a.id)&&(this.currentCommandStateId=l,this.displayCurrentCommand(),this.currentVisualStateId=e,this.displayCurrentVisualState())}},e.prototype.updateViewState=function(){this.mvx.updateState(this.rootStateId,this.visible)},e.prototype.toFilter=function(t){return t=(t+='').toLowerCase(),!!(this.searchText&&2<this.searchText.length&&-1===t.indexOf(this.searchText.toLowerCase()))},e.prototype.search=function(t){switch(this.searchText=t,this.mvx.getGenericState(this.menuStateId).status){case 0:case 40:this.displayCurrentCapture();break;case 30:this.displayEndState();break;case 10:this.displayInformation();break;case 20:this.displayInitState();}this.searchText=''},e}(),Er,A,C,v,_,F,xr,Ar,R,br,Tr,w,Cr,B,D,L,I,O,N,M,k;t.d(e,'EmbeddedFrontend',function(){return P}),t.d(e,'Spector',function(){return vr});var P={CaptureMenu:un,ResultView:yr},vr=function(){function e(){this.noFrameTimeout=-1,this.captureNextFrames=0,this.captureNextCommands=0,this.quickCapture=!1,this.retry=0,this.contexts=[],this.timeSpy=new Wt,this.onCaptureStarted=new r,this.onCapture=new r,this.onError=new r,this.timeSpy.onFrameStart.add(this.onFrameStart,this),this.timeSpy.onFrameEnd.add(this.onFrameEnd,this),this.timeSpy.onError.add(this.onErrorInternal,this)}return e.getFirstAvailable3dContext=function(t){return this.tryGetContextFromHelperField(t)||this.tryGetContextFromCanvas(t,'webgl')||this.tryGetContextFromCanvas(t,'experimental-webgl')||this.tryGetContextFromCanvas(t,'webgl2')||this.tryGetContextFromCanvas(t,'experimental-webgl2')},e.tryGetContextFromHelperField=function(n){var e=n.getAttribute('__spector_context_type');if(e)return this.tryGetContextFromCanvas(n,e)},e.tryGetContextFromCanvas=function(r,e){var t;try{t=r.getContext(e)}catch(t){}return t},e.prototype.displayUI=function(){var n=this;this.captureMenu||(this.getCaptureUI(),this.captureMenu.onPauseRequested.add(this.pause,this),this.captureMenu.onPlayRequested.add(this.play,this),this.captureMenu.onPlayNextFrameRequested.add(this.playNextFrame,this),this.captureMenu.onCaptureRequested.add(function(e){e&&n.captureCanvas(e.ref)},this),setInterval(function(){n.captureMenu.setFPS(n.getFps())},1e3),this.captureMenu.trackPageCanvases(),this.captureMenu.display()),this.resultView||(this.getResultUI(),this.onCapture.add(function(e){n.resultView.display(),n.resultView.addCapture(e)}))},e.prototype.getResultUI=function(){var r=this;return this.resultView||(this.resultView=new yr,this.resultView.onSourceCodeChanged.add(function(e){r.rebuildProgramFromProgramId(e.programId,e.sourceVertex,e.sourceFragment,function(t){r.referenceNewProgram(e.programId,t),r.resultView.showSourceCodeError(null)},function(e){r.resultView.showSourceCodeError(e)})})),this.resultView},e.prototype.getCaptureUI=function(){return this.captureMenu||(this.captureMenu=new un),this.captureMenu},e.prototype.rebuildProgramFromProgramId=function(a,e,t,n,i){var r=pt.getFromGlobalStore(a);this.rebuildProgram(r,e,t,n,i)},e.prototype.rebuildProgram=function(r,e,t,n,a){tr.rebuildProgram(r,e,t,n,a)},e.prototype.referenceNewProgram=function(n,e){pt.updateInGlobalStore(n,e)},e.prototype.pause=function(){this.timeSpy.changeSpeedRatio(0)},e.prototype.play=function(){this.timeSpy.changeSpeedRatio(1)},e.prototype.playNextFrame=function(){this.timeSpy.playNextFrame()},e.prototype.drawOnlyEveryXFrame=function(t){this.timeSpy.changeSpeedRatio(t)},e.prototype.getFps=function(){return this.timeSpy.getFps()},e.prototype.spyCanvases=function(){this.canvasSpy?this.onErrorInternal('Already spying canvas.'):(this.canvasSpy=new $t,this.canvasSpy.onContextRequested.add(this.spyContext,this))},e.prototype.spyCanvas=function(t){this.canvasSpy?this.onErrorInternal('Already spying canvas.'):(this.canvasSpy=new $t(t),this.canvasSpy.onContextRequested.add(this.spyContext,this))},e.prototype.getAvailableContexts=function(){return this.getAvailableContexts()},e.prototype.captureCanvas=function(a,t,n){void 0===t&&(t=0),void 0===n&&(n=!1);var o=this.getAvailableContextSpyByCanvas(a);if(o)this.captureContextSpy(o,t,n);else{var r=e.getFirstAvailable3dContext(a);r?this.captureContext(r,t,n):rr.error('No webgl context available on the chosen canvas.')}},e.prototype.captureContext=function(r,a,t){void 0===a&&(a=0),void 0===t&&(t=!1);var n=this.getAvailableContextSpyByCanvas(r.canvas);n||((n=r.getIndexedParameter?new Ht({context:r,version:2,recordAlways:!1}):new Ht({context:r,version:1,recordAlways:!1})).onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:n.context.canvas,contextSpy:n})),n&&this.captureContextSpy(n,a,t)},e.prototype.captureContextSpy=function(r,e,t){var n=this;void 0===e&&(e=0),void 0===t&&(t=!1),this.quickCapture=t,this.capturingContext?this.onErrorInternal('Already capturing a context.'):(this.retry=0,this.capturingContext=r,this.capturingContext.setMarker(this.marker),0<(e=b(e,5e3))?this.captureCommands(e):this.captureFrames(1),this.noFrameTimeout=setTimeout(function(){0<e?n.stopCapture():n.capturingContext&&1<n.retry?n.onErrorInternal('No frames with gl commands detected. Try moving the camera.'):n.onErrorInternal('No frames detected. Try moving the camera or implementing requestAnimationFrame.')},1e4))},e.prototype.captureNextFrame=function(n,e){void 0===e&&(e=!1),n instanceof HTMLCanvasElement?this.captureCanvas(n,0,e):this.captureContext(n,0,e)},e.prototype.startCapture=function(r,e,t){void 0===t&&(t=!1),r instanceof HTMLCanvasElement?this.captureCanvas(r,e,t):this.captureContext(r,e,t)},e.prototype.stopCapture=function(){if(this.capturingContext){var t=this.capturingContext.stopCapture();if(0<t.commands.length)return-1<this.noFrameTimeout&&clearTimeout(this.noFrameTimeout),this.triggerCapture(t),this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,t;0===this.captureNextCommands&&(this.retry++,this.captureFrames(1))}},e.prototype.setMarker=function(t){this.marker=t,this.capturingContext&&this.capturingContext.setMarker(t)},e.prototype.clearMarker=function(){this.marker=null,this.capturingContext&&this.capturingContext.clearMarker()},e.prototype.captureFrames=function(t){this.captureNextFrames=t,this.captureNextCommands=0,this.playNextFrame()},e.prototype.captureCommands=function(t){this.captureNextFrames=0,this.captureNextCommands=t,this.play(),this.capturingContext?(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(t,this.quickCapture)):(this.onErrorInternal('No context to capture from.'),this.captureNextCommands=0)},e.prototype.spyContext=function(n){var e=this.getAvailableContextSpyByCanvas(n.context.canvas);e||((e=new Ht({context:n.context,version:n.contextVersion,recordAlways:!0})).onMaxCommand.add(this.stopCapture,this),this.contexts.push({canvas:e.context.canvas,contextSpy:e})),e.spy()},e.prototype.getAvailableContextSpyByCanvas=function(r){for(var e=0,t=this.contexts,n;e<t.length;e++)if(n=t[e],n.canvas===r)return n.contextSpy},e.prototype.onFrameStart=function(){0<this.captureNextCommands||(0<this.captureNextFrames?(this.capturingContext&&(this.onCaptureStarted.trigger(void 0),this.capturingContext.startCapture(0,this.quickCapture)),this.captureNextFrames--):this.capturingContext=void 0)},e.prototype.onFrameEnd=function(){0<this.captureNextCommands||0===this.captureNextFrames&&this.stopCapture()},e.prototype.triggerCapture=function(t){this.captureMenu&&this.captureMenu.captureComplete(null),this.onCapture.trigger(t)},e.prototype.onErrorInternal=function(t){if(rr.error(t),-1<this.noFrameTimeout&&clearTimeout(this.noFrameTimeout),!this.capturingContext)throw t;this.capturingContext=void 0,this.captureNextFrames=0,this.captureNextCommands=0,this.retry=0,this.captureMenu&&this.captureMenu.captureComplete(t),this.onError.trigger(t)},e}()}])})},"./node_modules/stats-js/build/stats.min.js":/*!**************************************************!*\
  !*** ./node_modules/stats-js/build/stats.min.js ***!
  \**************************************************//*! no static exports found */function(n){!function(r,e){n.exports=e()}(this,function(){'use strict';var s=function(){function e(t){return n.appendChild(t.dom),t}function t(r){for(var e=0;e<n.children.length;e++)n.children[e].style.display=e===r?'block':'none';c=r}var c=0,n=document.createElement('div');n.style.cssText='position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000',n.addEventListener('click',function(r){r.preventDefault(),t(++c%n.children.length)},!1);var u=(performance||Date).now(),i=u,a=0,o=e(new s.Panel('FPS','#0ff','#002')),p=e(new s.Panel('MS','#0f0','#020'));if(self.performance&&self.performance.memory)var r=e(new s.Panel('MB','#f08','#201'));return t(0),{REVISION:16,dom:n,addPanel:e,showPanel:t,begin:function(){u=(performance||Date).now()},end:function(){a++;var n=(performance||Date).now();if(p.update(n-u,200),i+1e3<=n&&(o.update(1e3*a/(n-i),100),i=n,a=0,r)){var e=performance.memory;r.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return n},update:function(){u=this.end()},domElement:n,setMode:t}};return s.Panel=function(g,n,l){var i=1/0,a=0,o=Math.round,f=o(window.devicePixelRatio||1),r=80*f,t=48*f,d=3*f,c=2*f,p=3*f,u=15*f,s=74*f,m=30*f,h=document.createElement('canvas');h.width=r,h.height=t,h.style.cssText='width:80px;height:48px';var _=h.getContext('2d');return _.font='bold '+9*f+'px Helvetica,Arial,sans-serif',_.textBaseline='top',_.fillStyle=l,_.fillRect(0,0,r,t),_.fillStyle=n,_.fillText(g,d,c),_.fillRect(p,u,s,m),_.fillStyle=l,_.globalAlpha=.9,_.fillRect(p,u,s,m),{dom:h,update:function(y,e){i=Math.min(i,y),a=Math.max(a,y),_.fillStyle=l,_.globalAlpha=1,_.fillRect(0,0,r,u),_.fillStyle=n,_.fillText(o(y)+' '+g+' ('+o(i)+'-'+o(a)+')',d,c),_.drawImage(h,p+f,u,s-f,m,p,u,s-f,m),_.fillRect(p+s-f,u,f,m),_.fillStyle=l,_.globalAlpha=.9,_.fillRect(p+s-f,u,f,o((1-y/e)*m))}}},s})},"./node_modules/three-orbitcontrols/OrbitControls.js":/*!***********************************************************!*\
  !*** ./node_modules/three-orbitcontrols/OrbitControls.js ***!
  \***********************************************************//*! no static exports found */function(e,t,n){function OrbitControls(e,t){function getAutoRotationAngle(){return 2*a/60/60*n.autoRotateSpeed}function getZoomScale(){return Math.pow(.95,n.zoomSpeed)}function rotateLeft(e){h.theta-=e}function rotateUp(e){h.phi-=e}function dollyIn(e){n.object instanceof s.PerspectiveCamera?f/=e:n.object instanceof s.OrthographicCamera?(n.object.zoom=o(n.minZoom,i(n.maxZoom,n.object.zoom*e)),n.object.updateProjectionMatrix(),y=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),n.enableZoom=!1)}function dollyOut(e){n.object instanceof s.PerspectiveCamera?f*=e:n.object instanceof s.OrthographicCamera?(n.object.zoom=o(n.minZoom,i(n.maxZoom,n.object.zoom/e)),n.object.updateProjectionMatrix(),y=!0):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.'),n.enableZoom=!1)}function handleMouseDownRotate(e){E.set(e.clientX,e.clientY)}function handleMouseDownDolly(e){v.set(e.clientX,e.clientY)}function handleMouseDownPan(e){b.set(e.clientX,e.clientY)}function handleMouseMoveRotate(e){x.set(e.clientX,e.clientY),A.subVectors(x,E);var t=n.domElement===document?n.domElement.body:n.domElement;rotateLeft(2*a*A.x/t.clientWidth*n.rotateSpeed),rotateUp(2*a*A.y/t.clientHeight*n.rotateSpeed),E.copy(x),n.update()}function handleMouseMoveDolly(e){S.set(e.clientX,e.clientY),R.subVectors(S,v),0<R.y?dollyIn(getZoomScale()):0>R.y&&dollyOut(getZoomScale()),v.copy(S),n.update()}function handleMouseMovePan(e){T.set(e.clientX,e.clientY),C.subVectors(T,b),L(C.x,C.y),b.copy(T),n.update()}function handleMouseUp(){}function handleMouseWheel(e){0>e.deltaY?dollyOut(getZoomScale()):0<e.deltaY&&dollyIn(getZoomScale()),n.update()}function handleKeyDown(e){switch(e.keyCode){case n.keys.UP:L(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:L(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:L(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:L(-n.keyPanSpeed,0),n.update();}}function handleTouchStartRotate(e){E.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchStartDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,a=r(t*t+n*n);v.set(0,a)}function handleTouchStartPan(e){b.set(e.touches[0].pageX,e.touches[0].pageY)}function handleTouchMoveRotate(e){x.set(e.touches[0].pageX,e.touches[0].pageY),A.subVectors(x,E);var t=n.domElement===document?n.domElement.body:n.domElement;rotateLeft(2*a*A.x/t.clientWidth*n.rotateSpeed),rotateUp(2*a*A.y/t.clientHeight*n.rotateSpeed),E.copy(x),n.update()}function handleTouchMoveDolly(e){var t=e.touches[0].pageX-e.touches[1].pageX,a=e.touches[0].pageY-e.touches[1].pageY,o=r(t*t+a*a);S.set(0,o),R.subVectors(S,v),0<R.y?dollyOut(getZoomScale()):0>R.y&&dollyIn(getZoomScale()),v.copy(S),n.update()}function handleTouchMovePan(e){T.set(e.touches[0].pageX,e.touches[0].pageY),C.subVectors(T,b),L(C.x,C.y),b.copy(T),n.update()}function handleTouchEnd(){}function onMouseDown(e){if(!1!==n.enabled){switch(e.preventDefault(),e.button){case n.mouseButtons.ORBIT:if(!1===n.enableRotate)return;handleMouseDownRotate(e),p=u.ROTATE;break;case n.mouseButtons.ZOOM:if(!1===n.enableZoom)return;handleMouseDownDolly(e),p=u.DOLLY;break;case n.mouseButtons.PAN:if(!1===n.enablePan)return;handleMouseDownPan(e),p=u.PAN;}p!==u.NONE&&(document.addEventListener('mousemove',onMouseMove,!1),document.addEventListener('mouseup',onMouseUp,!1),n.dispatchEvent(d))}}function onMouseMove(e){if(!1!==n.enabled)switch(e.preventDefault(),p){case u.ROTATE:if(!1===n.enableRotate)return;handleMouseMoveRotate(e);break;case u.DOLLY:if(!1===n.enableZoom)return;handleMouseMoveDolly(e);break;case u.PAN:if(!1===n.enablePan)return;handleMouseMovePan(e);}}function onMouseUp(e){!1===n.enabled||(handleMouseUp(e),document.removeEventListener('mousemove',onMouseMove,!1),document.removeEventListener('mouseup',onMouseUp,!1),n.dispatchEvent(c),p=u.NONE)}function onMouseWheel(e){!1===n.enabled||!1===n.enableZoom||p!==u.NONE&&p!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),handleMouseWheel(e),n.dispatchEvent(d),n.dispatchEvent(c))}function onKeyDown(e){!1===n.enabled||!1===n.enableKeys||!1===n.enablePan||handleKeyDown(e)}function onTouchStart(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!1===n.enableRotate)return;handleTouchStartRotate(e),p=u.TOUCH_ROTATE;break;case 2:if(!1===n.enableZoom)return;handleTouchStartDolly(e),p=u.TOUCH_DOLLY;break;case 3:if(!1===n.enablePan)return;handleTouchStartPan(e),p=u.TOUCH_PAN;break;default:p=u.NONE;}p!==u.NONE&&n.dispatchEvent(d)}}function onTouchMove(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===n.enableRotate)return;if(p!==u.TOUCH_ROTATE)return;handleTouchMoveRotate(e);break;case 2:if(!1===n.enableZoom)return;if(p!==u.TOUCH_DOLLY)return;handleTouchMoveDolly(e);break;case 3:if(!1===n.enablePan)return;if(p!==u.TOUCH_PAN)return;handleTouchMovePan(e);break;default:p=u.NONE;}}function onTouchEnd(e){!1===n.enabled||(handleTouchEnd(e),n.dispatchEvent(c),p=u.NONE)}function onContextMenu(e){!1===n.enabled||e.preventDefault()}this.object=e,this.domElement=void 0===t?document:t,this.enabled=!0,this.target=new s.Vector3,this.minDistance=0,this.maxDistance=Infinity,this.minZoom=0,this.maxZoom=Infinity,this.minPolarAngle=0,this.maxPolarAngle=a,this.minAzimuthAngle=-Infinity,this.maxAzimuthAngle=Infinity,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:s.MOUSE.LEFT,ZOOM:s.MOUSE.MIDDLE,PAN:s.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(l),n.update(),p=u.NONE},this.update=function(){var t=new s.Vector3,r=new s.Quaternion().setFromUnitVectors(e.up,new s.Vector3(0,1,0)),a=r.clone().inverse(),d=new s.Vector3,c=new s.Quaternion;return function update(){var e=n.object.position;return t.copy(e).sub(n.target),t.applyQuaternion(r),g.setFromVector3(t),n.autoRotate&&p===u.NONE&&rotateLeft(getAutoRotationAngle()),g.theta+=h.theta,g.phi+=h.phi,g.theta=o(n.minAzimuthAngle,i(n.maxAzimuthAngle,g.theta)),g.phi=o(n.minPolarAngle,i(n.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=f,g.radius=o(n.minDistance,i(n.maxDistance,g.radius)),n.target.add(_),t.setFromSpherical(g),t.applyQuaternion(a),e.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(h.theta*=1-n.dampingFactor,h.phi*=1-n.dampingFactor):h.set(0,0,0),f=1,_.set(0,0,0),!!(y||d.distanceToSquared(n.object.position)>m||8*(1-c.dot(n.object.quaternion))>m)&&(n.dispatchEvent(l),d.copy(n.object.position),c.copy(n.object.quaternion),y=!1,!0)}}(),this.dispose=function(){n.domElement.removeEventListener('contextmenu',onContextMenu,!1),n.domElement.removeEventListener('mousedown',onMouseDown,!1),n.domElement.removeEventListener('wheel',onMouseWheel,!1),n.domElement.removeEventListener('touchstart',onTouchStart,!1),n.domElement.removeEventListener('touchend',onTouchEnd,!1),n.domElement.removeEventListener('touchmove',onTouchMove,!1),document.removeEventListener('mousemove',onMouseMove,!1),document.removeEventListener('mouseup',onMouseUp,!1),window.removeEventListener('keydown',onKeyDown,!1)};var n=this,l={type:'change'},d={type:'start'},c={type:'end'},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},p=u.NONE,m=1e-6,g=new s.Spherical,h=new s.Spherical,f=1,_=new s.Vector3,y=!1,E=new s.Vector2,x=new s.Vector2,A=new s.Vector2,b=new s.Vector2,T=new s.Vector2,C=new s.Vector2,v=new s.Vector2,S=new s.Vector2,R=new s.Vector2,F=function(){var e=new s.Vector3;return function panLeft(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),_.add(e)}}(),w=function(){var e=new s.Vector3;return function panUp(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),_.add(e)}}(),L=function(){var e=new s.Vector3;return function pan(t,r){var o=n.domElement===document?n.domElement.body:n.domElement;if(n.object instanceof s.PerspectiveCamera){var i=n.object.position;e.copy(i).sub(n.target);var l=e.length();l*=Math.tan(n.object.fov/2*a/180),F(2*t*l/o.clientHeight,n.object.matrix),w(2*r*l/o.clientHeight,n.object.matrix)}else n.object instanceof s.OrthographicCamera?(F(t*(n.object.right-n.object.left)/n.object.zoom/o.clientWidth,n.object.matrix),w(r*(n.object.top-n.object.bottom)/n.object.zoom/o.clientHeight,n.object.matrix)):(console.warn('WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.'),n.enablePan=!1)}}();n.domElement.addEventListener('contextmenu',onContextMenu,!1),n.domElement.addEventListener('mousedown',onMouseDown,!1),n.domElement.addEventListener('wheel',onMouseWheel,!1),n.domElement.addEventListener('touchstart',onTouchStart,!1),n.domElement.addEventListener('touchend',onTouchEnd,!1),n.domElement.addEventListener('touchmove',onTouchMove,!1),window.addEventListener('keydown',onKeyDown,!1),this.update()}var r=Math.sqrt,a=Math.PI,o=Math.max,i=Math.min,s=n(/*! three */'./node_modules/three/build/three.module.js');OrbitControls.prototype=Object.create(s.EventDispatcher.prototype),OrbitControls.prototype.constructor=OrbitControls,Object.defineProperties(OrbitControls.prototype,{center:{get:function(){return console.warn('THREE.OrbitControls: .center has been renamed to .target'),this.target}},noZoom:{get:function(){return console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),!this.enableZoom},set:function(e){console.warn('THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.'),this.enableZoom=!e}},noRotate:{get:function(){return console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),!this.enableRotate},set:function(e){console.warn('THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.'),this.enableRotate=!e}},noPan:{get:function(){return console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),!this.enablePan},set:function(e){console.warn('THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead.'),this.enablePan=!e}},noKeys:{get:function(){return console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),!this.enableKeys},set:function(e){console.warn('THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.'),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),!this.enableDamping},set:function(e){console.warn('THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.'),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor},set:function(e){console.warn('THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.'),this.dampingFactor=e}}}),e.exports=OrbitControls},"./node_modules/three/build/three.module.js":/*!**************************************************!*\
  !*** ./node_modules/three/build/three.module.js ***!
  \**************************************************//*! exports provided: WebGLRenderTargetCube, WebGLRenderTarget, WebGLRenderer, ShaderLib, UniformsLib, UniformsUtils, ShaderChunk, FogExp2, Fog, Scene, LensFlare, Sprite, LOD, SkinnedMesh, Skeleton, Bone, Mesh, LineSegments, LineLoop, Line, Points, Group, VideoTexture, DataTexture, CompressedTexture, CubeTexture, CanvasTexture, DepthTexture, Texture, CompressedTextureLoader, DataTextureLoader, CubeTextureLoader, TextureLoader, ObjectLoader, MaterialLoader, BufferGeometryLoader, DefaultLoadingManager, LoadingManager, JSONLoader, ImageLoader, FontLoader, FileLoader, Loader, Cache, AudioLoader, SpotLightShadow, SpotLight, PointLight, RectAreaLight, HemisphereLight, DirectionalLightShadow, DirectionalLight, AmbientLight, LightShadow, Light, StereoCamera, PerspectiveCamera, OrthographicCamera, CubeCamera, ArrayCamera, Camera, AudioListener, PositionalAudio, AudioContext, AudioAnalyser, Audio, VectorKeyframeTrack, StringKeyframeTrack, QuaternionKeyframeTrack, NumberKeyframeTrack, ColorKeyframeTrack, BooleanKeyframeTrack, PropertyMixer, PropertyBinding, KeyframeTrack, AnimationUtils, AnimationObjectGroup, AnimationMixer, AnimationClip, Uniform, InstancedBufferGeometry, BufferGeometry, GeometryIdCount, Geometry, InterleavedBufferAttribute, InstancedInterleavedBuffer, InterleavedBuffer, InstancedBufferAttribute, Face3, Object3D, Raycaster, Layers, EventDispatcher, Clock, QuaternionLinearInterpolant, LinearInterpolant, DiscreteInterpolant, CubicInterpolant, Interpolant, Triangle, Math, Spherical, Cylindrical, Plane, Frustum, Sphere, Ray, Matrix4, Matrix3, Box3, Box2, Line3, Euler, Vector4, Vector3, Vector2, Quaternion, Color, ImmediateRenderObject, VertexNormalsHelper, SpotLightHelper, SkeletonHelper, PointLightHelper, RectAreaLightHelper, HemisphereLightHelper, GridHelper, PolarGridHelper, FaceNormalsHelper, DirectionalLightHelper, CameraHelper, BoxHelper, Box3Helper, PlaneHelper, ArrowHelper, AxisHelper, CatmullRomCurve3, CubicBezierCurve3, QuadraticBezierCurve3, LineCurve3, ArcCurve, EllipseCurve, SplineCurve, CubicBezierCurve, QuadraticBezierCurve, LineCurve, Shape, Path, ShapePath, Font, CurvePath, Curve, ShapeUtils, SceneUtils, WebGLUtils, WireframeGeometry, ParametricGeometry, ParametricBufferGeometry, TetrahedronGeometry, TetrahedronBufferGeometry, OctahedronGeometry, OctahedronBufferGeometry, IcosahedronGeometry, IcosahedronBufferGeometry, DodecahedronGeometry, DodecahedronBufferGeometry, PolyhedronGeometry, PolyhedronBufferGeometry, TubeGeometry, TubeBufferGeometry, TorusKnotGeometry, TorusKnotBufferGeometry, TorusGeometry, TorusBufferGeometry, TextGeometry, TextBufferGeometry, SphereGeometry, SphereBufferGeometry, RingGeometry, RingBufferGeometry, PlaneGeometry, PlaneBufferGeometry, LatheGeometry, LatheBufferGeometry, ShapeGeometry, ShapeBufferGeometry, ExtrudeGeometry, ExtrudeBufferGeometry, EdgesGeometry, ConeGeometry, ConeBufferGeometry, CylinderGeometry, CylinderBufferGeometry, CircleGeometry, CircleBufferGeometry, BoxGeometry, BoxBufferGeometry, ShadowMaterial, SpriteMaterial, RawShaderMaterial, ShaderMaterial, PointsMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshPhongMaterial, MeshToonMaterial, MeshNormalMaterial, MeshLambertMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshBasicMaterial, LineDashedMaterial, LineBasicMaterial, Material, Float64BufferAttribute, Float32BufferAttribute, Uint32BufferAttribute, Int32BufferAttribute, Uint16BufferAttribute, Int16BufferAttribute, Uint8ClampedBufferAttribute, Uint8BufferAttribute, Int8BufferAttribute, BufferAttribute, REVISION, MOUSE, CullFaceNone, CullFaceBack, CullFaceFront, CullFaceFrontBack, FrontFaceDirectionCW, FrontFaceDirectionCCW, BasicShadowMap, PCFShadowMap, PCFSoftShadowMap, FrontSide, BackSide, DoubleSide, FlatShading, SmoothShading, NoColors, FaceColors, VertexColors, NoBlending, NormalBlending, AdditiveBlending, SubtractiveBlending, MultiplyBlending, CustomBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, OneMinusSrcColorFactor, SrcAlphaFactor, OneMinusSrcAlphaFactor, DstAlphaFactor, OneMinusDstAlphaFactor, DstColorFactor, OneMinusDstColorFactor, SrcAlphaSaturateFactor, NeverDepth, AlwaysDepth, LessDepth, LessEqualDepth, EqualDepth, GreaterEqualDepth, GreaterDepth, NotEqualDepth, MultiplyOperation, MixOperation, AddOperation, NoToneMapping, LinearToneMapping, ReinhardToneMapping, Uncharted2ToneMapping, CineonToneMapping, UVMapping, CubeReflectionMapping, CubeRefractionMapping, EquirectangularReflectionMapping, EquirectangularRefractionMapping, SphericalReflectionMapping, CubeUVReflectionMapping, CubeUVRefractionMapping, RepeatWrapping, ClampToEdgeWrapping, MirroredRepeatWrapping, NearestFilter, NearestMipMapNearestFilter, NearestMipMapLinearFilter, LinearFilter, LinearMipMapNearestFilter, LinearMipMapLinearFilter, UnsignedByteType, ByteType, ShortType, UnsignedShortType, IntType, UnsignedIntType, FloatType, HalfFloatType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedInt248Type, AlphaFormat, RGBFormat, RGBAFormat, LuminanceFormat, LuminanceAlphaFormat, RGBEFormat, DepthFormat, DepthStencilFormat, RGB_S3TC_DXT1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGB_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_PVRTC_2BPPV1_Format, RGB_ETC1_Format, LoopOnce, LoopRepeat, LoopPingPong, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, ZeroCurvatureEnding, ZeroSlopeEnding, WrapAroundEnding, TrianglesDrawMode, TriangleStripDrawMode, TriangleFanDrawMode, LinearEncoding, sRGBEncoding, GammaEncoding, RGBEEncoding, LogLuvEncoding, RGBM7Encoding, RGBM16Encoding, RGBDEncoding, BasicDepthPacking, RGBADepthPacking, CubeGeometry, Face4, LineStrip, LinePieces, MeshFaceMaterial, MultiMaterial, PointCloud, Particle, ParticleSystem, PointCloudMaterial, ParticleBasicMaterial, ParticleSystemMaterial, Vertex, DynamicBufferAttribute, Int8Attribute, Uint8Attribute, Uint8ClampedAttribute, Int16Attribute, Uint16Attribute, Int32Attribute, Uint32Attribute, Float32Attribute, Float64Attribute, ClosedSplineCurve3, SplineCurve3, Spline, BoundingBoxHelper, EdgesHelper, WireframeHelper, XHRLoader, BinaryTextureLoader, GeometryUtils, ImageUtils, Projector, CanvasRenderer */function(e,t,n){'use strict';function EventDispatcher(){}function Vector2(e,t){this.x=e||0,this.y=t||0}function Texture(e,t,n,r,a,o,i,s,l,d){Object.defineProperty(this,'id',{value:Vt++}),this.uuid=Gt.generateUUID(),this.name='',this.image=void 0===e?Texture.DEFAULT_IMAGE:e,this.mipmaps=[],this.mapping=void 0===t?Texture.DEFAULT_MAPPING:t,this.wrapS=void 0===n?Ne:n,this.wrapT=void 0===r?Ne:r,this.magFilter=void 0===a?Ge:a,this.minFilter=void 0===o?He:o,this.anisotropy=void 0===l?1:l,this.format=void 0===i?rt:i,this.type=void 0===s?ze:s,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===d?Lt:d,this.version=0,this.onUpdate=null}function Vector4(e,t,n,r){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0===r?1:r}function WebGLRenderTarget(e,t,n){this.uuid=Gt.generateUUID(),this.width=e,this.height=t,this.scissor=new Vector4(0,0,e,t),this.scissorTest=!1,this.viewport=new Vector4(0,0,e,t),n=n||{},void 0===n.minFilter&&(n.minFilter=Ge),this.texture=new Texture(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0===n.depthTexture?null:n.depthTexture}function WebGLRenderTargetCube(e,t,n){WebGLRenderTarget.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function Quaternion(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0===r?1:r}function Vector3(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Matrix4(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.')}function DataTexture(e,t,n,r,a,o,i,s,l,d,c,u){Texture.call(this,null,o,i,s,l,d,r,a,c,u),this.image={data:e,width:t,height:n},this.magFilter=void 0===l?Oe:l,this.minFilter=void 0===d?Oe:d,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function CubeTexture(e,t,n,r,a,o,i,s,l,d){e=void 0===e?[]:e,t=void 0===t?Re:t,Texture.call(this,e,t,n,r,a,o,i,s,l,d),this.flipY=!1}function UniformContainer(){this.seq=[],this.map={}}function flatten(e,t,a){var o=e[0];if(0>=o||0<o)return e;var s=t*a,n=Wt[s];if(void 0===n&&(n=new Float32Array(s),Wt[s]=n),0!==t){o.toArray(n,0);for(var r=1,i=0;r!==t;++r)i+=a,e[r].toArray(n,i)}return n}function allocTexUnits(e,t){var n=$t[t];void 0===n&&(n=new Int32Array(t),$t[t]=n);for(var r=0;r!==t;++r)n[r]=e.allocTextureUnit();return n}function setValue1f(e,t){e.uniform1f(this.addr,t)}function setValue1i(e,t){e.uniform1i(this.addr,t)}function setValue2fv(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function setValue3fv(e,t){void 0===t.x?void 0===t.r?e.uniform3fv(this.addr,t):e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3f(this.addr,t.x,t.y,t.z)}function setValue4fv(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function setValue2fm(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function setValue3fm(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Xt.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Xt))}function setValue4fm(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(jt.set(t.elements),e.uniformMatrix4fv(this.addr,!1,jt))}function setValueT1(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTexture2D(t||Ht,r)}function setValueT6(e,t,n){var r=n.allocTextureUnit();e.uniform1i(this.addr,r),n.setTextureCube(t||zt,r)}function setValue2iv(e,t){e.uniform2iv(this.addr,t)}function setValue3iv(e,t){e.uniform3iv(this.addr,t)}function setValue4iv(e,t){e.uniform4iv(this.addr,t)}function getSingularSetter(e){return 5126===e?setValue1f:35664===e?setValue2fv:35665===e?setValue3fv:35666===e?setValue4fv:35674===e?setValue2fm:35675===e?setValue3fm:35676===e?setValue4fm:35678===e||36198===e?setValueT1:35680===e?setValueT6:5124===e||35670===e?setValue1i:35667===e||35671===e?setValue2iv:35668===e||35672===e?setValue3iv:35669===e||35673===e?setValue4iv:void 0}function setValue1fv(e,t){e.uniform1fv(this.addr,t)}function setValue1iv(e,t){e.uniform1iv(this.addr,t)}function setValueV2a(e,t){e.uniform2fv(this.addr,flatten(t,this.size,2))}function setValueV3a(e,t){e.uniform3fv(this.addr,flatten(t,this.size,3))}function setValueV4a(e,t){e.uniform4fv(this.addr,flatten(t,this.size,4))}function setValueM2a(e,t){e.uniformMatrix2fv(this.addr,!1,flatten(t,this.size,4))}function setValueM3a(e,t){e.uniformMatrix3fv(this.addr,!1,flatten(t,this.size,9))}function setValueM4a(e,t){e.uniformMatrix4fv(this.addr,!1,flatten(t,this.size,16))}function setValueT1a(e,t,r){var a=t.length,n=allocTexUnits(r,a);e.uniform1iv(this.addr,n);for(var o=0;o!==a;++o)r.setTexture2D(t[o]||Ht,n[o])}function setValueT6a(e,t,r){var a=t.length,n=allocTexUnits(r,a);e.uniform1iv(this.addr,n);for(var o=0;o!==a;++o)r.setTextureCube(t[o]||zt,n[o])}function getPureArraySetter(e){return 5126===e?setValue1fv:35664===e?setValueV2a:35665===e?setValueV3a:35666===e?setValueV4a:35674===e?setValueM2a:35675===e?setValueM3a:35676===e?setValueM4a:35678===e?setValueT1a:35680===e?setValueT6a:5124===e||35670===e?setValue1iv:35667===e||35671===e?setValue2iv:35668===e||35672===e?setValue3iv:35669===e||35673===e?setValue4iv:void 0}function SingleUniform(e,t,n){this.id=e,this.addr=n,this.setValue=getSingularSetter(t.type)}function PureArrayUniform(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=getPureArraySetter(t.type)}function StructuredUniform(e){this.id=e,UniformContainer.call(this)}function addUniform(e,t){e.seq.push(t),e.map[t.id]=t}function parseUniform(e,t,n){var r=e.name,a=r.length;for(Kt.lastIndex=0;;){var o=Kt.exec(r),i=Kt.lastIndex,s=o[1],l=']'===o[2],d=o[3];if(l&&(s|=0),void 0===d||'['===d&&i+2===a){addUniform(n,void 0===d?new SingleUniform(s,e,t):new PureArrayUniform(s,e,t));break}else{var c=n.map,u=c[s];void 0===u&&(u=new StructuredUniform(s),addUniform(n,u)),n=u}}}function WebGLUniforms(e,t,r){UniformContainer.call(this),this.renderer=r;for(var a=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<a;++n){var o=e.getActiveUniform(t,n),i=o.name,s=e.getUniformLocation(t,i);parseUniform(o,s,this)}}function Color(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}function Box2(e,t){this.min=void 0===e?new Vector2(+Infinity,+Infinity):e,this.max=void 0===t?new Vector2(-Infinity,-Infinity):t}function WebGLFlareRenderer(e,t,n,r,a){function init(){var e=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),r=new Uint16Array([0,1,2,0,2,3]);o=t.createBuffer(),s=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),t.bufferData(t.ELEMENT_ARRAY_BUFFER,r,t.STATIC_DRAW),l=t.createTexture(),p=t.createTexture(),n.bindTexture(t.TEXTURE_2D,l),t.texImage2D(t.TEXTURE_2D,0,t.RGB,16,16,0,t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),n.bindTexture(t.TEXTURE_2D,p),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,16,16,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),i={vertexShader:'uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}',fragmentShader:'uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}'},d=createProgram(i),c={vertex:t.getAttribLocation(d,'position'),uv:t.getAttribLocation(d,'uv')},u={renderType:t.getUniformLocation(d,'renderType'),map:t.getUniformLocation(d,'map'),occlusionMap:t.getUniformLocation(d,'occlusionMap'),opacity:t.getUniformLocation(d,'opacity'),color:t.getUniformLocation(d,'color'),scale:t.getUniformLocation(d,'scale'),rotation:t.getUniformLocation(d,'rotation'),screenPosition:t.getUniformLocation(d,'screenPosition')}}function createProgram(e){var n=t.createProgram(),r=t.createShader(t.FRAGMENT_SHADER),o=t.createShader(t.VERTEX_SHADER),i='precision '+a.precision+' float;\n';return t.shaderSource(r,i+e.fragmentShader),t.shaderSource(o,i+e.vertexShader),t.compileShader(r),t.compileShader(o),t.attachShader(n,r),t.attachShader(n,o),t.linkProgram(n),n}var o,s,i,d,c,u,l,p;this.render=function(e,a,m,g){if(0!==e.length){var h=new Vector3,f=g.w/g.z,_=.5*g.z,y=.5*g.w,E=16/g.w,x=new Vector2(E*f,E),A=new Vector3(1,1,0),b=new Vector2(1,1),T=new Box2;T.min.set(g.x,g.y),T.max.set(g.x+(g.z-16),g.y+(g.w-16)),void 0===d&&init(),n.useProgram(d),n.initAttributes(),n.enableAttribute(c.vertex),n.enableAttribute(c.uv),n.disableUnusedAttributes(),t.uniform1i(u.occlusionMap,0),t.uniform1i(u.map,1),t.bindBuffer(t.ARRAY_BUFFER,o),t.vertexAttribPointer(c.vertex,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s),n.disable(t.CULL_FACE),n.buffers.depth.setMask(!1);for(var C=0,i=e.length;C<i;C++){E=16/g.w,x.set(E*f,E);var v=e[C];if(h.set(v.matrixWorld.elements[12],v.matrixWorld.elements[13],v.matrixWorld.elements[14]),h.applyMatrix4(m.matrixWorldInverse),h.applyMatrix4(m.projectionMatrix),A.copy(h),b.x=g.x+A.x*_+_-8,b.y=g.y+A.y*y+y-8,!0===T.containsPoint(b)){n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,null),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGB,b.x,b.y,16,16,0),t.uniform1i(u.renderType,0),t.uniform2f(u.scale,x.x,x.y),t.uniform3f(u.screenPosition,A.x,A.y,A.z),n.disable(t.BLEND),n.enable(t.DEPTH_TEST),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),n.activeTexture(t.TEXTURE0),n.bindTexture(t.TEXTURE_2D,p),t.copyTexImage2D(t.TEXTURE_2D,0,t.RGBA,b.x,b.y,16,16,0),t.uniform1i(u.renderType,1),n.disable(t.DEPTH_TEST),n.activeTexture(t.TEXTURE1),n.bindTexture(t.TEXTURE_2D,l),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),v.positionScreen.copy(A),v.customUpdateCallback?v.customUpdateCallback(v):v.updateLensFlares(),t.uniform1i(u.renderType,2),n.enable(t.BLEND);for(var S=0,R=v.lensFlares.length,F;S<R;S++)F=v.lensFlares[S],.001<F.opacity&&.001<F.scale&&(A.x=F.x,A.y=F.y,A.z=F.z,E=F.size*F.scale/g.w,x.x=E*f,x.y=E,t.uniform3f(u.screenPosition,A.x,A.y,A.z),t.uniform2f(u.scale,x.x,x.y),t.uniform1f(u.rotation,F.rotation),t.uniform1f(u.opacity,F.opacity),t.uniform3f(u.color,F.color.r,F.color.g,F.color.b),n.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst),r.setTexture2D(F.texture,1),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0))}}n.enable(t.CULL_FACE),n.enable(t.DEPTH_TEST),n.buffers.depth.setMask(!0),n.reset()}}}function CanvasTexture(e,t,n,r,a,o,i,s,l){Texture.call(this,e,t,n,r,a,o,i,s,l),this.needsUpdate=!0}function WebGLSpriteRenderer(e,t,n,r,a){function init(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);d=t.createBuffer(),c=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),u=createProgram(),p={position:t.getAttribLocation(u,'position'),uv:t.getAttribLocation(u,'uv')},m={uvOffset:t.getUniformLocation(u,'uvOffset'),uvScale:t.getUniformLocation(u,'uvScale'),rotation:t.getUniformLocation(u,'rotation'),scale:t.getUniformLocation(u,'scale'),color:t.getUniformLocation(u,'color'),map:t.getUniformLocation(u,'map'),opacity:t.getUniformLocation(u,'opacity'),modelViewMatrix:t.getUniformLocation(u,'modelViewMatrix'),projectionMatrix:t.getUniformLocation(u,'projectionMatrix'),fogType:t.getUniformLocation(u,'fogType'),fogDensity:t.getUniformLocation(u,'fogDensity'),fogNear:t.getUniformLocation(u,'fogNear'),fogFar:t.getUniformLocation(u,'fogFar'),fogColor:t.getUniformLocation(u,'fogColor'),alphaTest:t.getUniformLocation(u,'alphaTest')};var r=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');r.width=8,r.height=8;var a=r.getContext('2d');a.fillStyle='white',a.fillRect(0,0,8,8),l=new CanvasTexture(r)}function createProgram(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),r=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,['precision '+a.precision+' float;','#define SHADER_NAME SpriteMaterial','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform float rotation;','uniform vec2 scale;','uniform vec2 uvOffset;','uniform vec2 uvScale;','attribute vec2 position;','attribute vec2 uv;','varying vec2 vUV;','void main() {','vUV = uvOffset + uv * uvScale;','vec2 alignedPosition = position * scale;','vec2 rotatedPosition;','rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;','rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;','vec4 finalPosition;','finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );','finalPosition.xy += rotatedPosition;','finalPosition = projectionMatrix * finalPosition;','gl_Position = finalPosition;','}'].join('\n')),t.shaderSource(r,['precision '+a.precision+' float;','#define SHADER_NAME SpriteMaterial','uniform vec3 color;','uniform sampler2D map;','uniform float opacity;','uniform int fogType;','uniform vec3 fogColor;','uniform float fogDensity;','uniform float fogNear;','uniform float fogFar;','uniform float alphaTest;','varying vec2 vUV;','void main() {','vec4 texture = texture2D( map, vUV );','if ( texture.a < alphaTest ) discard;','gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );','if ( fogType > 0 ) {','float depth = gl_FragCoord.z / gl_FragCoord.w;','float fogFactor = 0.0;','if ( fogType == 1 ) {','fogFactor = smoothstep( fogNear, fogFar, depth );','} else {','const float LOG2 = 1.442695;','fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );','fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );','}','gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );','}','}'].join('\n')),t.compileShader(n),t.compileShader(r),t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),e}function painterSortStable(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?t.id-e.id:t.z-e.z:e.renderOrder-t.renderOrder}var o=new Vector3,i=new Quaternion,s=new Vector3,d,c,u,p,m,l;this.render=function(a,g,h){if(0!==a.length){void 0===u&&init(),n.useProgram(u),n.initAttributes(),n.enableAttribute(p.position),n.enableAttribute(p.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,d),t.vertexAttribPointer(p.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(p.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.uniformMatrix4fv(m.projectionMatrix,!1,h.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(m.map,0);var f=0,_=0,y=g.fog;y?(t.uniform3f(m.fogColor,y.color.r,y.color.g,y.color.b),y.isFog?(t.uniform1f(m.fogNear,y.near),t.uniform1f(m.fogFar,y.far),t.uniform1i(m.fogType,1),f=1,_=1):y.isFogExp2&&(t.uniform1f(m.fogDensity,y.density),t.uniform1i(m.fogType,2),f=2,_=2)):(t.uniform1i(m.fogType,0),f=0,_=0);for(var E=0,x=a.length,A;E<x;E++)A=a[E],A.modelViewMatrix.multiplyMatrices(h.matrixWorldInverse,A.matrixWorld),A.z=-A.modelViewMatrix.elements[14];a.sort(painterSortStable);for(var b=[],E=0,x=a.length;E<x;E++){var A=a[E],T=A.material;if(!1!==T.visible){A.onBeforeRender(e,g,h,void 0,T,void 0),t.uniform1f(m.alphaTest,T.alphaTest),t.uniformMatrix4fv(m.modelViewMatrix,!1,A.modelViewMatrix.elements),A.matrixWorld.decompose(o,i,s),b[0]=s.x,b[1]=s.y;var C=0;g.fog&&T.fog&&(C=_),f!=C&&(t.uniform1i(m.fogType,C),f=C),null===T.map?(t.uniform2f(m.uvOffset,0,0),t.uniform2f(m.uvScale,1,1)):(t.uniform2f(m.uvOffset,T.map.offset.x,T.map.offset.y),t.uniform2f(m.uvScale,T.map.repeat.x,T.map.repeat.y)),t.uniform1f(m.opacity,T.opacity),t.uniform3f(m.color,T.color.r,T.color.g,T.color.b),t.uniform1f(m.rotation,T.rotation),t.uniform2fv(m.scale,b),n.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),n.buffers.depth.setTest(T.depthTest),n.buffers.depth.setMask(T.depthWrite),r.setTexture2D(T.map||l,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),A.onAfterRender(e,g,h,void 0,T,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Material(){Object.defineProperty(this,'id',{value:en++}),this.uuid=Gt.generateUUID(),this.name='',this.type='Material',this.fog=!0,this.lights=!0,this.blending=z,this.side=B,this.flatShading=!1,this.vertexColors=U,this.opacity=1,this.transparent=!1,this.blendSrc=re,this.blendDst=ae,this.blendEquation=K,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=me,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ShaderMaterial(e){Material.call(this),this.type='ShaderMaterial',this.defines={},this.uniforms={},this.vertexShader='void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}',this.fragmentShader='void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}',this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error('THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.'),this.setValues(e))}function MeshDepthMaterial(e){Material.call(this),this.type='MeshDepthMaterial',this.depthPacking=kt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function MeshDistanceMaterial(e){Material.call(this),this.type='MeshDistanceMaterial',this.referencePosition=new Vector3,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Box3(e,t){this.min=void 0===e?new Vector3(+Infinity,+Infinity,+Infinity):e,this.max=void 0===t?new Vector3(-Infinity,-Infinity,-Infinity):t}function Sphere(e,t){this.center=void 0===e?new Vector3:e,this.radius=void 0===t?0:t}function Matrix3(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error('THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.')}function Plane(e,t){this.normal=void 0===e?new Vector3(1,0,0):e,this.constant=void 0===t?0:t}function Frustum(e,t,n,r,a,o){this.planes=[void 0===e?new Plane:e,void 0===t?new Plane:t,void 0===n?new Plane:n,void 0===r?new Plane:r,void 0===a?new Plane:a,void 0===o?new Plane:o]}function WebGLShadowMap(e,t,n){function getDepthMaterial(t,n,r,a,o,i){var s=t.geometry,l=null,d=p,h=t.customDepthMaterial;if(r&&(d=m,h=t.customDistanceMaterial),!h){var f=!1;n.morphTargets&&(s&&s.isBufferGeometry?f=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(f=s.morphTargets&&0<s.morphTargets.length)),t.isSkinnedMesh&&!1===n.skinning&&console.warn('THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:',t);var _=t.isSkinnedMesh&&n.skinning,y=0;f&&(y|=c),_&&(y|=u),l=d[y]}else l=h;if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var E=l.uuid,x=n.uuid,A=g[E];void 0===A&&(A={},g[E]=A);var T=A[x];void 0===T&&(T=l.clone(),A[x]=T),l=T}l.visible=n.visible,l.wireframe=n.wireframe;var C=n.side;return b.renderSingleSided&&C==P&&(C=B),b.renderReverseSided&&(C===B?C=N:C===N&&(C=B)),l.side=C,l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,r&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(a),l.nearDistance=o,l.farDistance=i),l}function renderObject(n,a,o,s){if(!1!==n.visible){var c=n.layers.test(a.layers);if(c&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=t.update(n),p=n.material;if(Array.isArray(p))for(var m=u.groups,g=0,h=m.length;g<h;g++){var f=m[g],_=p[f.materialIndex];if(_&&_.visible){var y=getDepthMaterial(n,_,s,d,o.near,o.far);e.renderBufferDirect(o,null,u,y,n,f)}}else if(p.visible){var y=getDepthMaterial(n,p,s,d,o.near,o.far);e.renderBufferDirect(o,null,u,y,n,null)}}for(var E=n.children,x=0,i=E.length;x<i;x++)renderObject(E[x],a,o,s)}}for(var r=new Frustum,a=new Matrix4,o=new Vector2,s=new Vector2(n,n),l=new Vector3,d=new Vector3,c=1,u=2,p=[,,,,],m=[,,,,],g={},h=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],f=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)],_=[new Vector4,new Vector4,new Vector4,new Vector4,new Vector4,new Vector4],y=0;y!==(c|u)+1;++y){var i=0!=(y&c),E=0!=(y&u),x=new MeshDepthMaterial({depthPacking:Ut,morphTargets:i,skinning:E});p[y]=x;var A=new MeshDistanceMaterial({morphTargets:i,skinning:E});m[y]=A}var b=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=I,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,n,c){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==t.length){var u=e.context,p=e.state;p.disable(u.BLEND),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);for(var m=0,i=t.length,g;m<i;m++){var y=t[m],E=y.shadow,x=y&&y.isPointLight;if(void 0===E){console.warn('THREE.WebGLShadowMap:',y,'has no shadow.');continue}var A=E.camera;if(o.copy(E.mapSize),o.min(s),x){var T=o.x,C=o.y;_[0].set(2*T,C,T,C),_[1].set(0,C,T,C),_[2].set(3*T,C,T,C),_[3].set(T,C,T,C),_[4].set(3*T,0,T,C),_[5].set(T,0,T,C),o.x*=4,o.y*=2}if(null===E.map){E.map=new WebGLRenderTarget(o.x,o.y,{minFilter:Oe,magFilter:Oe,format:rt}),E.map.texture.name=y.name+'.shadowMap',A.updateProjectionMatrix()}E.isSpotLightShadow&&E.update(y);var v=E.map,S=E.matrix;d.setFromMatrixPosition(y.matrixWorld),A.position.copy(d),x?(g=6,S.makeTranslation(-d.x,-d.y,-d.z)):(g=1,l.setFromMatrixPosition(y.target.matrixWorld),A.lookAt(l),A.updateMatrixWorld(),S.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),S.multiply(A.projectionMatrix),S.multiply(A.matrixWorldInverse)),e.setRenderTarget(v),e.clear();for(var R=0;R<g;R++){if(x){l.copy(A.position),l.add(h[R]),A.up.copy(f[R]),A.lookAt(l),A.updateMatrixWorld();var F=_[R];p.viewport(F)}a.multiplyMatrices(A.projectionMatrix,A.matrixWorldInverse),r.setFromMatrix(a),renderObject(n,c,A,x)}}b.needsUpdate=!1}}}function WebGLAttributes(e){function createBuffer(t,n){var r=t.array,a=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();e.bindBuffer(n,o),e.bufferData(n,r,a),t.onUploadCallback();var i=e.FLOAT;return r instanceof Float32Array?i=e.FLOAT:r instanceof Float64Array?console.warn('THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.'):r instanceof Uint16Array?i=e.UNSIGNED_SHORT:r instanceof Int16Array?i=e.SHORT:r instanceof Uint32Array?i=e.UNSIGNED_INT:r instanceof Int32Array?i=e.INT:r instanceof Int8Array?i=e.BYTE:r instanceof Uint8Array&&(i=e.UNSIGNED_BYTE),{buffer:o,type:i,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}function updateBuffer(t,n,r){var a=n.array,o=n.updateRange;e.bindBuffer(r,t),!1===n.dynamic?e.bufferData(r,a,e.STATIC_DRAW):-1===o.count?e.bufferSubData(r,0,a):0===o.count?console.error('THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually.'):(e.bufferSubData(r,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}var t={};return{get:function get(e){return e.isInterleavedBufferAttribute&&(e=e.data),t[e.uuid]},remove:function remove(n){n.isInterleavedBufferAttribute&&(n=n.data);var r=t[n.uuid];r&&(e.deleteBuffer(r.buffer),delete t[n.uuid])},update:function update(e,n){e.isInterleavedBufferAttribute&&(e=e.data);var r=t[e.uuid];void 0===r?t[e.uuid]=createBuffer(e,n):r.version<e.version&&(updateBuffer(r.buffer,e,n),r.version=e.version)}}}function Euler(e,t,n,r){this._x=e||0,this._y=t||0,this._z=n||0,this._order=r||Euler.DefaultOrder}function Layers(){this.mask=1}function Object3D(){Object.defineProperty(this,'id',{value:tn++}),this.uuid=Gt.generateUUID(),this.name='',this.type='Object3D',this.parent=null,this.children=[],this.up=Object3D.DefaultUp.clone();var e=new Vector3,t=new Euler,n=new Quaternion,r=new Vector3(1,1,1);t.onChange(function onRotationChange(){n.setFromEuler(t,!1)}),n.onChange(function onQuaternionChange(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:r},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Camera(){Object3D.call(this),this.type='Camera',this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4}function OrthographicCamera(e,t,n,r,a,o){Camera.call(this),this.type='OrthographicCamera',this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0===a?.1:a,this.far=void 0===o?2e3:o,this.updateProjectionMatrix()}function PerspectiveCamera(e,t,n,r){Camera.call(this),this.type='PerspectiveCamera',this.fov=void 0===e?50:e,this.zoom=1,this.near=void 0===n?.1:n,this.far=void 0===r?2e3:r,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Face3(e,t,n,r,a,o){this.a=e,this.b=t,this.c=n,this.normal=r&&r.isVector3?r:new Vector3,this.vertexNormals=Array.isArray(r)?r:[],this.color=a&&a.isColor?a:new Color,this.vertexColors=Array.isArray(a)?a:[],this.materialIndex=void 0===o?0:o}function GeometryIdCount(){return nn++}function Geometry(){Object.defineProperty(this,'id',{value:GeometryIdCount()}),this.uuid=Gt.generateUUID(),this.name='',this.type='Geometry',this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function BufferAttribute(e,t,n){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.uuid=Gt.generateUUID(),this.name='',this.array=e,this.itemSize=t,this.count=void 0===e?0:e.length/t,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Int8BufferAttribute(e,t){BufferAttribute.call(this,new Int8Array(e),t)}function Uint8BufferAttribute(e,t){BufferAttribute.call(this,new Uint8Array(e),t)}function Uint8ClampedBufferAttribute(e,t){BufferAttribute.call(this,new Uint8ClampedArray(e),t)}function Int16BufferAttribute(e,t){BufferAttribute.call(this,new Int16Array(e),t)}function Uint16BufferAttribute(e,t){BufferAttribute.call(this,new Uint16Array(e),t)}function Int32BufferAttribute(e,t){BufferAttribute.call(this,new Int32Array(e),t)}function Uint32BufferAttribute(e,t){BufferAttribute.call(this,new Uint32Array(e),t)}function Float32BufferAttribute(e,t){BufferAttribute.call(this,new Float32Array(e),t)}function Float64BufferAttribute(e,t){BufferAttribute.call(this,new Float64Array(e),t)}function DirectGeometry(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function arrayMax(e){if(0===e.length)return-Infinity;for(var t=e[0],n=1,r=e.length;n<r;++n)e[n]>t&&(t=e[n]);return t}function BufferGeometry(){Object.defineProperty(this,'id',{value:GeometryIdCount()}),this.uuid=Gt.generateUUID(),this.name='',this.type='BufferGeometry',this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:Infinity}}function BoxGeometry(e,t,n,r,a,o){Geometry.call(this),this.type='BoxGeometry',this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new BoxBufferGeometry(e,t,n,r,a,o)),this.mergeVertices()}function BoxBufferGeometry(e,t,n,r,a,o){function buildPlane(e,t,n,r,o,u,g,h,f,_,E){var A=f+1,T=0,C=0,v=new Vector3,S,R;for(R=0;R<_+1;R++){var F=R*(g/_)-g/2;for(S=0;S<A;S++){var y=S*(u/f)-u/2;v[e]=y*r,v[t]=F*o,v[n]=h/2,l.push(v.x,v.y,v.z),v[e]=0,v[t]=0,v[n]=0<h?1:-1,d.push(v.x,v.y,v.z),c.push(S/f),c.push(1-R/_),T+=1}}for(R=0;R<_;R++)for(S=0;S<f;S++){var x=p+S+A*R,a=p+S+A*(R+1),b=p+(S+1)+A*(R+1),w=p+(S+1)+A*R;s.push(x,a,w),s.push(a,b,w),C+=6}i.addGroup(m,C,E),m+=C,p+=T}BufferGeometry.call(this),this.type='BoxBufferGeometry',this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:o};var i=this;r=A(r)||1,a=A(a)||1,o=A(o)||1;var s=[],l=[],d=[],c=[],p=0,m=0;buildPlane('z','y','x',-1,-1,n,t,e,o,a,0),buildPlane('z','y','x',1,-1,n,t,-e,o,a,1),buildPlane('x','z','y',1,1,e,n,t,r,o,2),buildPlane('x','z','y',1,-1,e,n,-t,r,o,3),buildPlane('x','y','z',1,-1,e,t,n,r,a,4),buildPlane('x','y','z',-1,-1,e,t,-n,r,a,5),this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('normal',new Float32BufferAttribute(d,3)),this.addAttribute('uv',new Float32BufferAttribute(c,2))}function PlaneGeometry(e,t,n,r){Geometry.call(this),this.type='PlaneGeometry',this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new PlaneBufferGeometry(e,t,n,r)),this.mergeVertices()}function PlaneBufferGeometry(e,t,n,r){BufferGeometry.call(this),this.type='PlaneBufferGeometry',this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};var o=A(n)||1,i=A(r)||1,s=o+1,l=[],u=[],p=[],m=[],g,h;for(h=0;h<i+1;h++){var f=h*(t/i)-t/2;for(g=0;g<s;g++){var _=g*(e/o)-e/2;u.push(_,-f,0),p.push(0,0,1),m.push(g/o),m.push(1-h/i)}}for(h=0;h<i;h++)for(g=0;g<o;g++){var E=g+s*h,a=g+s*(h+1),x=g+1+s*(h+1),c=g+1+s*h;l.push(E,a,c),l.push(a,x,c)}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(u,3)),this.addAttribute('normal',new Float32BufferAttribute(p,3)),this.addAttribute('uv',new Float32BufferAttribute(m,2))}function MeshBasicMaterial(e){Material.call(this),this.type='MeshBasicMaterial',this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function Ray(e,t){this.origin=void 0===e?new Vector3:e,this.direction=void 0===t?new Vector3:t}function Line3(e,t){this.start=void 0===e?new Vector3:e,this.end=void 0===t?new Vector3:t}function Triangle(e,t,n){this.a=void 0===e?new Vector3:e,this.b=void 0===t?new Vector3:t,this.c=void 0===n?new Vector3:n}function Mesh(e,t){Object3D.call(this),this.type='Mesh',this.geometry=void 0===e?new BufferGeometry:e,this.material=void 0===t?new MeshBasicMaterial({color:16777215*Math.random()}):t,this.drawMode=Rt,this.updateMorphTargets()}function WebGLBackground(e,t,n,r){function render(t,r,d,c){var u=r.background;null===u?setClear(a,o):u&&u.isColor&&(setClear(u,1),c=!0),(e.autoClear||c)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),u&&u.isCubeTexture?(void 0===l&&(l=new Mesh(new BoxBufferGeometry(1,1,1),new ShaderMaterial({uniforms:Jt.cube.uniforms,vertexShader:Jt.cube.vertexShader,fragmentShader:Jt.cube.fragmentShader,side:N,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),l.geometry.removeAttribute('normal'),l.geometry.removeAttribute('uv'),l.onBeforeRender=function(e,t,n){var r=n.far;this.matrixWorld.makeScale(r,r,r),this.matrixWorld.copyPosition(n.matrixWorld),this.material.polygonOffsetUnits=10*r},n.update(l.geometry)),l.material.uniforms.tCube.value=u,t.push(l,l.geometry,l.material,0,null)):u&&u.isTexture&&(void 0===i&&(i=new OrthographicCamera(-1,1,1,-1,0,1),s=new Mesh(new PlaneBufferGeometry(2,2),new MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1})),n.update(s.geometry)),s.material.map=u,e.renderBufferDirect(i,null,s.geometry,s.material,s,null))}function setClear(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,r)}var a=new Color(0),o=0,i,s,l;return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),o=void 0===t?1:t,setClear(a,o)},getClearAlpha:function(){return o},setClearAlpha:function(e){o=e,setClear(a,o)},render:render}}function painterSortStable(e,t){return e.renderOrder===t.renderOrder?e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id===t.material.id?e.z===t.z?e.id-t.id:e.z-t.z:e.material.id-t.material.id:e.renderOrder-t.renderOrder}function reversePainterSortStable(e,t){return e.renderOrder===t.renderOrder?e.z===t.z?e.id-t.id:t.z-e.z:e.renderOrder-t.renderOrder}function WebGLRenderList(){function push(a,o,i,s,l){var d=e[t];void 0===d?(d={id:a.id,object:a,geometry:o,material:i,program:i.program,renderOrder:a.renderOrder,z:s,group:l},e[t]=d):(d.id=a.id,d.object=a,d.geometry=o,d.material=i,d.program=i.program,d.renderOrder=a.renderOrder,d.z=s,d.group=l),(!0===i.transparent?r:n).push(d),t++}var e=[],t=0,n=[],r=[];return{opaque:n,transparent:r,init:function init(){t=0,n.length=0,r.length=0},push:push,sort:function sort(){1<n.length&&n.sort(painterSortStable),1<r.length&&r.sort(reversePainterSortStable)}}}function WebGLRenderLists(){function get(t,n){var r=t.id+','+n.id,a=e[r];return void 0===a&&(a=new WebGLRenderList,e[r]=a),a}var e={};return{get:get,dispose:function dispose(){e={}}}}function absNumericalSort(e,t){return E(t[1])-E(e[1])}function WebGLMorphtargets(e){var t={},n=new Float32Array(8);return{update:function update(r,a,o,s){var l=r.morphTargetInfluences,d=l.length,c=t[a.id];if(void 0===c){c=[];for(var u=0;u<d;u++)c[u]=[u,0];t[a.id]=c}for(var i=o.morphTargets&&a.morphAttributes.position,p=o.morphNormals&&a.morphAttributes.normal,u=0,m;u<d;u++)m=c[u],0!==m[1]&&(i&&a.removeAttribute('morphTarget'+u),p&&a.removeAttribute('morphNormal'+u));for(var u=0,m;u<d;u++)m=c[u],m[0]=u,m[1]=l[u];c.sort(absNumericalSort);for(var u=0,m;8>u;u++){if(m=c[u],m){var g=m[0],h=m[1];if(h){i&&a.addAttribute('morphTarget'+u,i[g]),p&&a.addAttribute('morphNormal'+u,p[g]),n[u]=h;continue}}n[u]=0}s.getUniforms().setValue(e,'morphTargetInfluences',n)}}}function WebGLIndexedBufferRenderer(e,t,n){function render(t,i){e.drawElements(r,i,a,t*o),n.calls++,n.vertices+=i,r===e.TRIANGLES?n.faces+=i/3:r===e.POINTS&&(n.points+=i)}function renderInstances(i,s,l){var d=t.get('ANGLE_instanced_arrays');return null===d?void console.error('THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.'):void(d.drawElementsInstancedANGLE(r,l,a,s*o,i.maxInstancedCount),n.calls++,n.vertices+=l*i.maxInstancedCount,r===e.TRIANGLES?n.faces+=i.maxInstancedCount*l/3:r===e.POINTS&&(n.points+=i.maxInstancedCount*l))}var r,a,o;this.setMode=function setMode(e){r=e},this.setIndex=function setIndex(e){a=e.type,o=e.bytesPerElement},this.render=render,this.renderInstances=renderInstances}function WebGLBufferRenderer(e,t,n){function render(t,a){e.drawArrays(r,t,a),n.calls++,n.vertices+=a,r===e.TRIANGLES?n.faces+=a/3:r===e.POINTS&&(n.points+=a)}function renderInstances(a,o,i){var s=t.get('ANGLE_instanced_arrays');if(null===s)return void console.error('THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');var l=a.attributes.position;l.isInterleavedBufferAttribute?(i=l.data.count,s.drawArraysInstancedANGLE(r,0,i,a.maxInstancedCount)):s.drawArraysInstancedANGLE(r,o,i,a.maxInstancedCount),n.calls++,n.vertices+=i*a.maxInstancedCount,r===e.TRIANGLES?n.faces+=a.maxInstancedCount*i/3:r===e.POINTS&&(n.points+=a.maxInstancedCount*i)}var r;this.setMode=function setMode(e){r=e},this.render=render,this.renderInstances=renderInstances}function WebGLGeometries(e,t,n){function onGeometryDispose(e){var a=e.target,i=r[a.id];for(var s in null!==i.index&&t.remove(i.index),i.attributes)t.remove(i.attributes[s]);a.removeEventListener('dispose',onGeometryDispose),delete r[a.id];var l=o[a.id];l&&(t.remove(l),delete o[a.id]),l=o[i.id],l&&(t.remove(l),delete o[i.id]),n.geometries--}var r={},o={};return{get:function get(e,t){var a=r[t.id];return a?a:(t.addEventListener('dispose',onGeometryDispose),t.isBufferGeometry?a=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new BufferGeometry().setFromObject(e)),a=t._bufferGeometry),r[t.id]=a,n.geometries++,a)},update:function update(n){var r=n.index,a=n.attributes;for(var o in null!==r&&t.update(r,e.ELEMENT_ARRAY_BUFFER),a)t.update(a[o],e.ARRAY_BUFFER);var s=n.morphAttributes;for(var o in s)for(var d=s[o],c=0,i=d.length;c<i;c++)t.update(d[c],e.ARRAY_BUFFER)},getWireframeAttribute:function getWireframeAttribute(n){var r=o[n.id];if(r)return r;var s=[],d=n.index,u=n.attributes;if(null!==d)for(var p=d.array,m=0,i=p.length;m<i;m+=3){var l=p[m+0],a=p[m+1],g=p[m+2];s.push(l,a,a,g,g,l)}else for(var p=u.position.array,m=0,i=p.length/3-1;m<i;m+=3){var l=m+0,a=m+1,g=m+2;s.push(l,a,a,g,g,l)}return r=new(65535<arrayMax(s)?Uint32BufferAttribute:Uint16BufferAttribute)(s,1),t.update(r,e.ELEMENT_ARRAY_BUFFER),o[n.id]=r,r}}}function UniformsCache(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case'DirectionalLight':n={direction:new Vector3,color:new Color,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case'SpotLight':n={position:new Vector3,direction:new Vector3,color:new Color,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case'PointLight':n={position:new Vector3,color:new Color,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break;case'HemisphereLight':n={direction:new Vector3,skyColor:new Color,groundColor:new Color};break;case'RectAreaLight':n={color:new Color,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};}return e[t.id]=n,n}}}function WebGLLights(){var e=new UniformsCache,t={hash:'',ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new Vector3,r=new Matrix4,a=new Matrix4;return{setup:function setup(o,s,d){for(var c=0,u=0,p=0,g=0,h=0,f=0,_=0,y=0,E=d.matrixWorldInverse,x=0,i=o.length;x<i;x++){var l=o[x],A=l.color,b=l.intensity,T=l.distance,C=l.shadow&&l.shadow.map?l.shadow.map.texture:null;if(l.isAmbientLight)c+=A.r*b,u+=A.g*b,p+=A.b*b;else if(l.isDirectionalLight){var v=e.get(l);if(v.color.copy(l.color).multiplyScalar(l.intensity),v.direction.setFromMatrixPosition(l.matrixWorld),n.setFromMatrixPosition(l.target.matrixWorld),v.direction.sub(n),v.direction.transformDirection(E),v.shadow=l.castShadow,l.castShadow){var S=l.shadow;v.shadowBias=S.bias,v.shadowRadius=S.radius,v.shadowMapSize=S.mapSize}t.directionalShadowMap[g]=C,t.directionalShadowMatrix[g]=l.shadow.matrix,t.directional[g]=v,g++}else if(l.isSpotLight){var v=e.get(l);if(v.position.setFromMatrixPosition(l.matrixWorld),v.position.applyMatrix4(E),v.color.copy(A).multiplyScalar(b),v.distance=T,v.direction.setFromMatrixPosition(l.matrixWorld),n.setFromMatrixPosition(l.target.matrixWorld),v.direction.sub(n),v.direction.transformDirection(E),v.coneCos=m(l.angle),v.penumbraCos=m(l.angle*(1-l.penumbra)),v.decay=0===l.distance?0:l.decay,v.shadow=l.castShadow,l.castShadow){var S=l.shadow;v.shadowBias=S.bias,v.shadowRadius=S.radius,v.shadowMapSize=S.mapSize}t.spotShadowMap[f]=C,t.spotShadowMatrix[f]=l.shadow.matrix,t.spot[f]=v,f++}else if(l.isRectAreaLight){var v=e.get(l);v.color.copy(A).multiplyScalar(b/(l.width*l.height)),v.position.setFromMatrixPosition(l.matrixWorld),v.position.applyMatrix4(E),a.identity(),r.copy(l.matrixWorld),r.premultiply(E),a.extractRotation(r),v.halfWidth.set(.5*l.width,0,0),v.halfHeight.set(0,.5*l.height,0),v.halfWidth.applyMatrix4(a),v.halfHeight.applyMatrix4(a),t.rectArea[_]=v,_++}else if(l.isPointLight){var v=e.get(l);if(v.position.setFromMatrixPosition(l.matrixWorld),v.position.applyMatrix4(E),v.color.copy(l.color).multiplyScalar(l.intensity),v.distance=l.distance,v.decay=0===l.distance?0:l.decay,v.shadow=l.castShadow,l.castShadow){var S=l.shadow;v.shadowBias=S.bias,v.shadowRadius=S.radius,v.shadowMapSize=S.mapSize,v.shadowCameraNear=S.camera.near,v.shadowCameraFar=S.camera.far}t.pointShadowMap[h]=C,t.pointShadowMatrix[h]=l.shadow.matrix,t.point[h]=v,h++}else if(l.isHemisphereLight){var v=e.get(l);v.direction.setFromMatrixPosition(l.matrixWorld),v.direction.transformDirection(E),v.direction.normalize(),v.skyColor.copy(l.color).multiplyScalar(b),v.groundColor.copy(l.groundColor).multiplyScalar(b),t.hemi[y]=v,y++}}t.ambient[0]=c,t.ambient[1]=u,t.ambient[2]=p,t.directional.length=g,t.spot.length=f,t.rectArea.length=_,t.point.length=h,t.hemi.length=y,t.hash=g+','+h+','+f+','+_+','+y+','+s.length},state:t}}function WebGLObjects(e,t){function update(r){var a=t.frame,o=r.geometry,i=e.get(r,o);return n[i.id]!==a&&(o.isGeometry&&i.updateFromObject(r),e.update(i),n[i.id]=a),i}var n={};return{update:update,clear:function clear(){n={}}}}function addLineNumbers(e){for(var t=e.split('\n'),n=0;n<t.length;n++)t[n]=n+1+': '+t[n];return t.join('\n')}function WebGLShader(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),!1===e.getShaderParameter(r,e.COMPILE_STATUS)&&console.error('THREE.WebGLShader: Shader couldn\'t compile.'),''!==e.getShaderInfoLog(r)&&console.warn('THREE.WebGLShader: gl.getShaderInfoLog()',t===e.VERTEX_SHADER?'vertex':'fragment',e.getShaderInfoLog(r),addLineNumbers(n)),r}function getEncodingComponents(e){switch(e){case Lt:return['Linear','( value )'];case Mt:return['sRGB','( value )'];case Dt:return['RGBE','( value )'];case Nt:return['RGBM','( value, 7.0 )'];case Pt:return['RGBM','( value, 16.0 )'];case Ot:return['RGBD','( value, 256.0 )'];case It:return['Gamma','( value, float( GAMMA_FACTOR ) )'];default:throw new Error('unsupported encoding: '+e);}}function getTexelDecodingFunction(e,t){var n=getEncodingComponents(t);return'vec4 '+e+'( vec4 value ) { return '+n[0]+'ToLinear'+n[1]+'; }'}function getTexelEncodingFunction(e,t){var n=getEncodingComponents(t);return'vec4 '+e+'( vec4 value ) { return LinearTo'+n[0]+n[1]+'; }'}function getToneMappingFunction(e,t){var n;switch(t){case be:n='Linear';break;case Te:n='Reinhard';break;case Ce:n='Uncharted2';break;case ve:n='OptimizedCineon';break;default:throw new Error('unsupported toneMapping: '+t);}return'vec3 '+e+'( vec3 color ) { return '+n+'ToneMapping( color ); }'}function generateExtensions(e,t,n){e=e||{};var r=[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?'#extension GL_OES_standard_derivatives : enable':'',(e.fragDepth||t.logarithmicDepthBuffer)&&n.get('EXT_frag_depth')?'#extension GL_EXT_frag_depth : enable':'',e.drawBuffers&&n.get('WEBGL_draw_buffers')?'#extension GL_EXT_draw_buffers : require':'',(e.shaderTextureLOD||t.envMap)&&n.get('EXT_shader_texture_lod')?'#extension GL_EXT_shader_texture_lod : enable':''];return r.filter(filterEmptyLine).join('\n')}function generateDefines(e){var t=[];for(var n in e){var r=e[n];!1===r||t.push('#define '+n+' '+r)}return t.join('\n')}function fetchAttributeLocations(e,t){for(var r={},a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<a;n++){var o=e.getActiveAttrib(t,n),i=o.name;r[i]=e.getAttribLocation(t,i)}return r}function filterEmptyLine(e){return''!==e}function replaceLightNums(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function parseIncludes(e){function replace(e,t){var n=Qt[t];if(void 0===n)throw new Error('Can not resolve #include <'+t+'>');return parseIncludes(n)}var t=/^[ \t]*#include +<([\w\d.]+)>/gm;return e.replace(t,replace)}function unrollLoops(e){var t=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return e.replace(t,function replace(e,t,n,r){for(var a='',o=parseInt(t);o<parseInt(n);o++)a+=r.replace(/\[ i \]/g,'[ '+o+' ]');return a})}function WebGLProgram(e,t,n,r,a,o){var i=e.context,s=r.defines,l=a.vertexShader,d=a.fragmentShader,c='SHADOWMAP_TYPE_BASIC';o.shadowMapType===I?c='SHADOWMAP_TYPE_PCF':o.shadowMapType===D&&(c='SHADOWMAP_TYPE_PCF_SOFT');var u='ENVMAP_TYPE_CUBE',p='ENVMAP_MODE_REFLECTION',m='ENVMAP_BLENDING_MULTIPLY';if(o.envMap){switch(r.envMap.mapping){case Re:case Fe:u='ENVMAP_TYPE_CUBE';break;case Ie:case De:u='ENVMAP_TYPE_CUBE_UV';break;case we:case Le:u='ENVMAP_TYPE_EQUIREC';break;case Me:u='ENVMAP_TYPE_SPHERE';}switch(r.envMap.mapping){case Fe:case Le:p='ENVMAP_MODE_REFRACTION';}switch(r.combine){case ye:m='ENVMAP_BLENDING_MULTIPLY';break;case Ee:m='ENVMAP_BLENDING_MIX';break;case xe:m='ENVMAP_BLENDING_ADD';}}var g=0<e.gammaFactor?e.gammaFactor:1,h=generateExtensions(r.extensions,o,t),f=generateDefines(s),_=i.createProgram(),y,E;r.isRawShaderMaterial?(y=[f,'\n'].filter(filterEmptyLine).join('\n'),E=[h,f,'\n'].filter(filterEmptyLine).join('\n')):(y=['precision '+o.precision+' float;','precision '+o.precision+' int;','#define SHADER_NAME '+a.name,f,o.supportsVertexTextures?'#define VERTEX_TEXTURES':'','#define GAMMA_FACTOR '+g,'#define MAX_BONES '+o.maxBones,o.useFog&&o.fog?'#define USE_FOG':'',o.useFog&&o.fogExp?'#define FOG_EXP2':'',o.map?'#define USE_MAP':'',o.envMap?'#define USE_ENVMAP':'',o.envMap?'#define '+p:'',o.lightMap?'#define USE_LIGHTMAP':'',o.aoMap?'#define USE_AOMAP':'',o.emissiveMap?'#define USE_EMISSIVEMAP':'',o.bumpMap?'#define USE_BUMPMAP':'',o.normalMap?'#define USE_NORMALMAP':'',o.displacementMap&&o.supportsVertexTextures?'#define USE_DISPLACEMENTMAP':'',o.specularMap?'#define USE_SPECULARMAP':'',o.roughnessMap?'#define USE_ROUGHNESSMAP':'',o.metalnessMap?'#define USE_METALNESSMAP':'',o.alphaMap?'#define USE_ALPHAMAP':'',o.vertexColors?'#define USE_COLOR':'',o.flatShading?'#define FLAT_SHADED':'',o.skinning?'#define USE_SKINNING':'',o.useVertexTexture?'#define BONE_TEXTURE':'',o.morphTargets?'#define USE_MORPHTARGETS':'',o.morphNormals&&!1===o.flatShading?'#define USE_MORPHNORMALS':'',o.doubleSided?'#define DOUBLE_SIDED':'',o.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+o.numClippingPlanes,o.shadowMapEnabled?'#define USE_SHADOWMAP':'',o.shadowMapEnabled?'#define '+c:'',o.sizeAttenuation?'#define USE_SIZEATTENUATION':'',o.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',o.logarithmicDepthBuffer&&t.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'','uniform mat4 modelMatrix;','uniform mat4 modelViewMatrix;','uniform mat4 projectionMatrix;','uniform mat4 viewMatrix;','uniform mat3 normalMatrix;','uniform vec3 cameraPosition;','attribute vec3 position;','attribute vec3 normal;','attribute vec2 uv;','#ifdef USE_COLOR','\tattribute vec3 color;','#endif','#ifdef USE_MORPHTARGETS','\tattribute vec3 morphTarget0;','\tattribute vec3 morphTarget1;','\tattribute vec3 morphTarget2;','\tattribute vec3 morphTarget3;','\t#ifdef USE_MORPHNORMALS','\t\tattribute vec3 morphNormal0;','\t\tattribute vec3 morphNormal1;','\t\tattribute vec3 morphNormal2;','\t\tattribute vec3 morphNormal3;','\t#else','\t\tattribute vec3 morphTarget4;','\t\tattribute vec3 morphTarget5;','\t\tattribute vec3 morphTarget6;','\t\tattribute vec3 morphTarget7;','\t#endif','#endif','#ifdef USE_SKINNING','\tattribute vec4 skinIndex;','\tattribute vec4 skinWeight;','#endif','\n'].filter(filterEmptyLine).join('\n'),E=[h,'precision '+o.precision+' float;','precision '+o.precision+' int;','#define SHADER_NAME '+a.name,f,o.alphaTest?'#define ALPHATEST '+o.alphaTest:'','#define GAMMA_FACTOR '+g,o.useFog&&o.fog?'#define USE_FOG':'',o.useFog&&o.fogExp?'#define FOG_EXP2':'',o.map?'#define USE_MAP':'',o.envMap?'#define USE_ENVMAP':'',o.envMap?'#define '+u:'',o.envMap?'#define '+p:'',o.envMap?'#define '+m:'',o.lightMap?'#define USE_LIGHTMAP':'',o.aoMap?'#define USE_AOMAP':'',o.emissiveMap?'#define USE_EMISSIVEMAP':'',o.bumpMap?'#define USE_BUMPMAP':'',o.normalMap?'#define USE_NORMALMAP':'',o.specularMap?'#define USE_SPECULARMAP':'',o.roughnessMap?'#define USE_ROUGHNESSMAP':'',o.metalnessMap?'#define USE_METALNESSMAP':'',o.alphaMap?'#define USE_ALPHAMAP':'',o.vertexColors?'#define USE_COLOR':'',o.gradientMap?'#define USE_GRADIENTMAP':'',o.flatShading?'#define FLAT_SHADED':'',o.doubleSided?'#define DOUBLE_SIDED':'',o.flipSided?'#define FLIP_SIDED':'','#define NUM_CLIPPING_PLANES '+o.numClippingPlanes,'#define UNION_CLIPPING_PLANES '+(o.numClippingPlanes-o.numClipIntersection),o.shadowMapEnabled?'#define USE_SHADOWMAP':'',o.shadowMapEnabled?'#define '+c:'',o.premultipliedAlpha?'#define PREMULTIPLIED_ALPHA':'',o.physicallyCorrectLights?'#define PHYSICALLY_CORRECT_LIGHTS':'',o.logarithmicDepthBuffer?'#define USE_LOGDEPTHBUF':'',o.logarithmicDepthBuffer&&t.get('EXT_frag_depth')?'#define USE_LOGDEPTHBUF_EXT':'',o.envMap&&t.get('EXT_shader_texture_lod')?'#define TEXTURE_LOD_EXT':'','uniform mat4 viewMatrix;','uniform vec3 cameraPosition;',o.toneMapping===Ae?'':'#define TONE_MAPPING',o.toneMapping===Ae?'':Qt.tonemapping_pars_fragment,o.toneMapping===Ae?'':getToneMappingFunction('toneMapping',o.toneMapping),o.dithering?'#define DITHERING':'',o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Qt.encodings_pars_fragment:'',o.mapEncoding?getTexelDecodingFunction('mapTexelToLinear',o.mapEncoding):'',o.envMapEncoding?getTexelDecodingFunction('envMapTexelToLinear',o.envMapEncoding):'',o.emissiveMapEncoding?getTexelDecodingFunction('emissiveMapTexelToLinear',o.emissiveMapEncoding):'',o.outputEncoding?getTexelEncodingFunction('linearToOutputTexel',o.outputEncoding):'',o.depthPacking?'#define DEPTH_PACKING '+r.depthPacking:'','\n'].filter(filterEmptyLine).join('\n')),l=parseIncludes(l),l=replaceLightNums(l,o),d=parseIncludes(d),d=replaceLightNums(d,o),r.isShaderMaterial||(l=unrollLoops(l),d=unrollLoops(d));var x=y+l,A=E+d,b=WebGLShader(i,i.VERTEX_SHADER,x),T=WebGLShader(i,i.FRAGMENT_SHADER,A);i.attachShader(_,b),i.attachShader(_,T),void 0===r.index0AttributeName?!0===o.morphTargets&&i.bindAttribLocation(_,0,'position'):i.bindAttribLocation(_,0,r.index0AttributeName),i.linkProgram(_);var C=i.getProgramInfoLog(_),v=i.getShaderInfoLog(b),S=i.getShaderInfoLog(T),R=!0,F=!0;!1===i.getProgramParameter(_,i.LINK_STATUS)?(R=!1,console.error('THREE.WebGLProgram: shader error: ',i.getError(),'gl.VALIDATE_STATUS',i.getProgramParameter(_,i.VALIDATE_STATUS),'gl.getProgramInfoLog',C,v,S)):''===C?(''===v||''===S)&&(F=!1):console.warn('THREE.WebGLProgram: gl.getProgramInfoLog()',C),F&&(this.diagnostics={runnable:R,material:r,programLog:C,vertexShader:{log:v,prefix:y},fragmentShader:{log:S,prefix:E}}),i.deleteShader(b),i.deleteShader(T);var w;this.getUniforms=function(){return void 0==w&&(w=new WebGLUniforms(i,_,e)),w};var L;return this.getAttributes=function(){return void 0===L&&(L=fetchAttributeLocations(i,_)),L},this.destroy=function(){i.deleteProgram(_),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn('THREE.WebGLProgram: .uniforms is now .getUniforms().'),this.getUniforms()}},attributes:{get:function(){return console.warn('THREE.WebGLProgram: .attributes is now .getAttributes().'),this.getAttributes()}}}),this.id=rn++,this.code=n,this.usedTimes=1,this.program=_,this.vertexShader=b,this.fragmentShader=T,this}function WebGLPrograms(e,t,n){function allocateBones(e){var t=e.skeleton,r=t.bones;if(n.floatVertexTextures)return 1024;var a=n.maxVertexUniforms,o=A((a-20)/4),i=x(o,r.length);return i<r.length?(console.warn('THREE.WebGLRenderer: Skeleton has '+r.length+' bones. This GPU supports '+i+'.'),0):i}function getTextureEncodingFromMap(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn('THREE.WebGLPrograms.getTextureEncodingFromMap: don\'t use render targets as textures. Use their .texture property instead.'),n=e.texture.encoding):n=Lt,n===Lt&&t&&(n=It),n}var r=[],a={MeshDepthMaterial:'depth',MeshDistanceMaterial:'distanceRGBA',MeshNormalMaterial:'normal',MeshBasicMaterial:'basic',MeshLambertMaterial:'lambert',MeshPhongMaterial:'phong',MeshToonMaterial:'phong',MeshStandardMaterial:'physical',MeshPhysicalMaterial:'physical',LineBasicMaterial:'basic',LineDashedMaterial:'dashed',PointsMaterial:'points',ShadowMaterial:'shadow'},o=['precision','supportsVertexTextures','map','mapEncoding','envMap','envMapMode','envMapEncoding','lightMap','aoMap','emissiveMap','emissiveMapEncoding','bumpMap','normalMap','displacementMap','specularMap','roughnessMap','metalnessMap','gradientMap','alphaMap','combine','vertexColors','fog','useFog','fogExp','flatShading','sizeAttenuation','logarithmicDepthBuffer','skinning','maxBones','useVertexTexture','morphTargets','morphNormals','maxMorphTargets','maxMorphNormals','premultipliedAlpha','numDirLights','numPointLights','numSpotLights','numHemiLights','numRectAreaLights','shadowMapEnabled','shadowMapType','toneMapping','physicallyCorrectLights','alphaTest','doubleSided','flipSided','numClippingPlanes','numClipIntersection','depthPacking','dithering'];this.getParameters=function(t,r,o,i,s,l,d){var c=a[t.type],u=d.isSkinnedMesh?allocateBones(d):0,p=n.precision;null!==t.precision&&(p=n.getMaxPrecision(t.precision),p!==t.precision&&console.warn('THREE.WebGLProgram.getParameters:',t.precision,'not supported, using',p,'instead.'));var m=e.getRenderTarget(),g={shaderID:c,precision:p,supportsVertexTextures:n.vertexTextures,outputEncoding:getTextureEncodingFromMap(m?m.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:getTextureEncodingFromMap(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:getTextureEncodingFromMap(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===Ie||t.envMap.mapping===De),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:getTextureEncodingFromMap(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!i,useFog:t.fog,fogExp:i&&i.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&0<u,maxBones:u,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:s,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.receiveShadow&&0<o.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===P,flipSided:t.side===N,depthPacking:void 0!==t.depthPacking&&t.depthPacking};return g},this.getProgramCode=function(t,n){var r=[];if(n.shaderID?r.push(n.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var a in t.defines)r.push(a),r.push(t.defines[a]);for(var s=0;s<o.length;s++)r.push(n[o[s]]);return r.push(t.onBeforeCompile.toString()),r.push(e.gammaOutput),r.join()},this.acquireProgram=function(n,a,o,i){for(var s=0,l=r.length,d,c;s<l;s++)if(c=r[s],c.code===i){d=c,++d.usedTimes;break}return void 0===d&&(d=new WebGLProgram(e,t,i,n,a,o),r.push(d)),d},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function WebGLTextures(e,t,n,r,a,o,s){function clampToMaxSize(e,t){if(e.width>t||e.height>t){var n=t/y(e.width,e.height),r=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');r.width=A(e.width*n),r.height=A(e.height*n);var a=r.getContext('2d');return a.drawImage(e,0,0,e.width,e.height,0,0,r.width,r.height),console.warn('THREE.WebGLRenderer: image is too big ('+e.width+'x'+e.height+'). Resized to '+r.width+'x'+r.height,e),r}return e}function isPowerOfTwo(e){return Gt.isPowerOfTwo(e.width)&&Gt.isPowerOfTwo(e.height)}function makePowerOfTwo(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS('http://www.w3.org/1999/xhtml','canvas');t.width=Gt.nearestPowerOfTwo(e.width),t.height=Gt.nearestPowerOfTwo(e.height);var n=t.getContext('2d');return n.drawImage(e,0,0,t.width,t.height),console.warn('THREE.WebGLRenderer: image is not power of two ('+e.width+'x'+e.height+'). Resized to '+t.width+'x'+t.height,e),t}return e}function textureNeedsPowerOfTwo(e){return e.wrapS!==Ne||e.wrapT!==Ne||e.minFilter!==Oe&&e.minFilter!==Ge}function textureNeedsGenerateMipmaps(e,t){return e.generateMipmaps&&t&&e.minFilter!==Oe&&e.minFilter!==Ge}function filterFallback(t){return t===Oe||t===ke||t===Ue?e.NEAREST:e.LINEAR}function onTextureDispose(e){var t=e.target;t.removeEventListener('dispose',onTextureDispose),deallocateTexture(t),s.textures--}function onRenderTargetDispose(e){var t=e.target;t.removeEventListener('dispose',onRenderTargetDispose),deallocateRenderTarget(t),s.textures--}function deallocateTexture(t){var n=r.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}r.remove(t)}function deallocateRenderTarget(t){var n=r.get(t),a=r.get(t.texture);if(t){if(void 0!==a.__webglTexture&&e.deleteTexture(a.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var o=0;6>o;o++)e.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[o]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);r.remove(t.texture),r.remove(t)}}function setTexture2D(t,a){var o=r.get(t);if(0<t.version&&o.__version!==t.version){var i=t.image;if(void 0===i)console.warn('THREE.WebGLRenderer: Texture marked for update but image is undefined',t);else if(!1===i.complete)console.warn('THREE.WebGLRenderer: Texture marked for update but image is incomplete',t);else return void uploadTexture(o,t,a)}n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_2D,o.__webglTexture)}function setTextureParameters(n,i,s){var l;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,o.convert(i.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,o.convert(i.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,o.convert(i.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,o.convert(i.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),(i.wrapS!==Ne||i.wrapT!==Ne)&&console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.',i),e.texParameteri(n,e.TEXTURE_MAG_FILTER,filterFallback(i.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,filterFallback(i.minFilter)),i.minFilter!==Oe&&i.minFilter!==Ge&&console.warn('THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.',i)),l=t.get('EXT_texture_filter_anisotropic'),l){if(i.type===Ye&&null===t.get('OES_texture_float_linear'))return;if(i.type===qe&&null===t.get('OES_texture_half_float_linear'))return;(1<i.anisotropy||r.get(i).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,x(i.anisotropy,a.getMaxAnisotropy())),r.get(i).__currentAnisotropy=i.anisotropy)}}function uploadTexture(t,r,l){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener('dispose',onTextureDispose),t.__webglTexture=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,r.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,r.unpackAlignment);var d=clampToMaxSize(r.image,a.maxTextureSize);textureNeedsPowerOfTwo(r)&&!1===isPowerOfTwo(d)&&(d=makePowerOfTwo(d));var c=isPowerOfTwo(d),u=o.convert(r.format),p=o.convert(r.type);setTextureParameters(e.TEXTURE_2D,r,c);var m=r.mipmaps,g;if(r.isDepthTexture){var h=e.DEPTH_COMPONENT;if(r.type===Ye){if(!i)throw new Error('Float Depth Texture only supported in WebGL2.0');h=e.DEPTH_COMPONENT32F}else i&&(h=e.DEPTH_COMPONENT16);r.format===st&&h===e.DEPTH_COMPONENT&&r.type!==je&&r.type!==Ke&&(console.warn('THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.'),r.type=je,p=o.convert(r.type)),r.format===lt&&(h=e.DEPTH_STENCIL,r.type!==et&&(console.warn('THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.'),r.type=et,p=o.convert(r.type))),n.texImage2D(e.TEXTURE_2D,0,h,d.width,d.height,0,u,p,null)}else if(r.isDataTexture){if(0<m.length&&c){for(var f=0,_=m.length;f<_;f++)g=m[f],n.texImage2D(e.TEXTURE_2D,f,u,g.width,g.height,0,u,p,g.data);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,u,d.width,d.height,0,u,p,d.data);}else if(r.isCompressedTexture)for(var f=0,_=m.length;f<_;f++)g=m[f],r.format!==rt&&r.format!==nt?-1<n.getCompressedTextureFormats().indexOf(u)?n.compressedTexImage2D(e.TEXTURE_2D,f,u,g.width,g.height,0,g.data):console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()'):n.texImage2D(e.TEXTURE_2D,f,u,g.width,g.height,0,u,p,g.data);else if(0<m.length&&c){for(var f=0,_=m.length;f<_;f++)g=m[f],n.texImage2D(e.TEXTURE_2D,f,u,u,p,g);r.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,u,u,p,d);textureNeedsGenerateMipmaps(r,c)&&e.generateMipmap(e.TEXTURE_2D),t.__version=r.version,r.onUpdate&&r.onUpdate(r)}function setupFrameBufferTexture(t,a,i,s){var l=o.convert(a.texture.format),d=o.convert(a.texture.type);n.texImage2D(s,0,l,a.width,a.height,0,l,d,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,i,s,r.get(a.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function setupRenderBufferStorage(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function setupDepthTexture(t,n){var a=n&&n.isWebGLRenderTargetCube;if(a)throw new Error('Depth Texture with cube render targets is not supported');if(e.bindFramebuffer(e.FRAMEBUFFER,t),!(n.depthTexture&&n.depthTexture.isDepthTexture))throw new Error('renderTarget.depthTexture must be an instance of THREE.DepthTexture');r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),setTexture2D(n.depthTexture,0);var o=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===st)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else if(n.depthTexture.format===lt)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0);else throw new Error('Unknown depthTexture format')}function setupDepthRenderbuffer(t){var n=r.get(t),a=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(a)throw new Error('target.depthTexture not supported in Cube render targets');setupDepthTexture(n.__webglFramebuffer,t)}else if(a){n.__webglDepthbuffer=[];for(var o=0;6>o;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),setupRenderBufferStorage(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}var i='undefined'!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;this.setTexture2D=setTexture2D,this.setTextureCube=function setTextureCube(t,l){var d=r.get(t);if(6===t.image.length)if(0<t.version&&d.__version!==t.version){d.__image__webglTextureCube||(t.addEventListener('dispose',onTextureDispose),d.__image__webglTextureCube=e.createTexture(),s.textures++),n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var c=t&&t.isCompressedTexture,u=t.image[0]&&t.image[0].isDataTexture,p=[],m=0;6>m;m++)p[m]=c||u?u?t.image[m].image:t.image[m]:clampToMaxSize(t.image[m],a.maxCubemapSize);var i=p[0],g=isPowerOfTwo(i),h=o.convert(t.format),f=o.convert(t.type);setTextureParameters(e.TEXTURE_CUBE_MAP,t,g);for(var m=0;6>m;m++)if(!c)u?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,h,p[m].width,p[m].height,0,h,f,p[m].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,h,h,f,p[m]);else for(var _=p[m].mipmaps,y=0,E=_.length,x;y<E;y++)x=_[y],t.format!==rt&&t.format!==nt?-1<n.getCompressedTextureFormats().indexOf(h)?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,y,h,x.width,x.height,0,x.data):console.warn('THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()'):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+m,y,h,x.width,x.height,0,h,f,x.data);textureNeedsGenerateMipmaps(t,g)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),d.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function setTextureCubeDynamic(t,a){n.activeTexture(e.TEXTURE0+a),n.bindTexture(e.TEXTURE_CUBE_MAP,r.get(t).__webglTexture)},this.setupRenderTarget=function setupRenderTarget(t){var a=r.get(t),o=r.get(t.texture);t.addEventListener('dispose',onRenderTargetDispose),o.__webglTexture=e.createTexture(),s.textures++;var l=!0===t.isWebGLRenderTargetCube,d=isPowerOfTwo(t);if(l){a.__webglFramebuffer=[];for(var c=0;6>c;c++)a.__webglFramebuffer[c]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(l){n.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),setTextureParameters(e.TEXTURE_CUBE_MAP,t.texture,d);for(var c=0;6>c;c++)setupFrameBufferTexture(a.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);textureNeedsGenerateMipmaps(t.texture,d)&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,o.__webglTexture),setTextureParameters(e.TEXTURE_2D,t.texture,d),setupFrameBufferTexture(a.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),textureNeedsGenerateMipmaps(t.texture,d)&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&setupDepthRenderbuffer(t)},this.updateRenderTargetMipmap=function updateRenderTargetMipmap(t){var a=t.texture,o=isPowerOfTwo(t);if(textureNeedsGenerateMipmaps(a,o)){var i=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(a).__webglTexture;n.bindTexture(i,s),e.generateMipmap(i),n.bindTexture(i,null)}}}function WebGLProperties(){function get(t){var n=t.uuid,r=e[n];return void 0===r&&(r={},e[n]=r),r}function remove(t){delete e[t.uuid]}var e={};return{get:get,remove:remove,clear:function clear(){e={}}}}function WebGLState(e,t,n){function createTexture(t,n,r){var a=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var s=0;s<r;s++)e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,a);return o}function enable(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function disable(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}function getCompressedTextureFormats(){if(null===u&&(u=[],t.get('WEBGL_compressed_texture_pvrtc')||t.get('WEBGL_compressed_texture_s3tc')||t.get('WEBGL_compressed_texture_etc1')))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),r=0;r<n.length;r++)u.push(n[r]);return u}function useProgram(t){return p!==t&&(e.useProgram(t),p=t,!0)}function setBlending(t,r,a,o,i,s,l,d){t===H?disable(e.BLEND):enable(e.BLEND),t===X?(i=i||r,s=s||a,l=l||o,(r!==g||i!==_)&&(e.blendEquationSeparate(n.convert(r),n.convert(i)),g=r,_=i),(a!==h||o!==f||s!==y||l!==E)&&(e.blendFuncSeparate(n.convert(a),n.convert(o),n.convert(s),n.convert(l)),h=a,f=o,y=s,E=l)):((t!==m||d!==x)&&(t===W?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===$?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===j?d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):d?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))),g=null,h=null,f=null,_=null,y=null,E=null),m=t,x=d}function setFlipSided(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function setCullFace(t){t===v?disable(e.CULL_FACE):(enable(e.CULL_FACE),t!==b&&(t===S?e.cullFace(e.BACK):t===R?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))),b=t}function setLineWidth(t){t!==T&&(M&&e.lineWidth(t),T=t)}function setPolygonOffset(t,n,r){t?(enable(e.POLYGON_OFFSET_FILL),(C!==n||F!==r)&&(e.polygonOffset(n,r),C=n,F=r)):disable(e.POLYGON_OFFSET_FILL)}function activeTexture(t){void 0===t&&(t=e.TEXTURE0+w-1),I!==t&&(e.activeTexture(t),I=t)}function bindTexture(t,n){null===I&&activeTexture();var r=D[I];void 0===r&&(r={type:void 0,texture:void 0},D[I]=r),(r.type!==t||r.texture!==n)&&(e.bindTexture(t,n||k[t]),r.type=t,r.texture=n)}function scissor(t){!1===B.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),B.copy(t))}function viewport(t){!1===O.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),O.copy(t))}var r=new function ColorBuffer(){var t=!1,n=new Vector4,r=null,o=new Vector4(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,i,s,a){!0===a&&(t*=s,r*=s,i*=s),n.set(t,r,i,s),!1===o.equals(n)&&(e.clearColor(t,r,i,s),o.copy(n))},reset:function(){t=!1,r=null,o.set(-1,0,0,0)}}},a=new function DepthBuffer(){var t=!1,n=null,r=null,a=null;return{setTest:function(t){t?enable(e.DEPTH_TEST):disable(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){r!==t&&(t?t===ce?e.depthFunc(e.NEVER):t===ue?e.depthFunc(e.ALWAYS):t===pe?e.depthFunc(e.LESS):t===me?e.depthFunc(e.LEQUAL):t===ge?e.depthFunc(e.EQUAL):t===he?e.depthFunc(e.GEQUAL):t===fe?e.depthFunc(e.GREATER):t===_e?e.depthFunc(e.NOTEQUAL):e.depthFunc(e.LEQUAL):e.depthFunc(e.LEQUAL),r=t)},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},o=new function StencilBuffer(){var t=!1,n=null,r=null,a=null,o=null,i=null,s=null,l=null,d=null;return{setTest:function(t){t?enable(e.STENCIL_TEST):disable(e.STENCIL_TEST)},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,i){(r!==t||a!==n||o!==i)&&(e.stencilFunc(t,n,i),r=t,a=n,o=i)},setOp:function(t,n,r){(i!==t||s!==n||l!==r)&&(e.stencilOp(t,n,r),i=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){d!==t&&(e.clearStencil(t),d=t)},reset:function(){t=!1,n=null,r=null,a=null,o=null,i=null,s=null,l=null,d=null}}},i=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(i),d=new Uint8Array(i),l=new Uint8Array(i),c={},u=null,p=null,m=null,g=null,h=null,f=null,_=null,y=null,E=null,x=!1,A=null,b=null,T=null,C=null,F=null,w=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),L=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),M=1<=parseFloat(L),I=null,D={},B=new Vector4,O=new Vector4,k={};return k[e.TEXTURE_2D]=createTexture(e.TEXTURE_2D,e.TEXTURE_2D,1),k[e.TEXTURE_CUBE_MAP]=createTexture(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r.setClear(0,0,0,1),a.setClear(1),o.setClear(0),enable(e.DEPTH_TEST),a.setFunc(me),setFlipSided(!1),setCullFace(S),enable(e.CULL_FACE),enable(e.BLEND),setBlending(z),{buffers:{color:r,depth:a,stencil:o},initAttributes:function initAttributes(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function enableAttribute(n){if(s[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),0!==l[n]){var r=t.get('ANGLE_instanced_arrays');r.vertexAttribDivisorANGLE(n,0),l[n]=0}},enableAttributeAndDivisor:function enableAttributeAndDivisor(n,r){if(s[n]=1,0===d[n]&&(e.enableVertexAttribArray(n),d[n]=1),l[n]!==r){var a=t.get('ANGLE_instanced_arrays');a.vertexAttribDivisorANGLE(n,r),l[n]=r}},disableUnusedAttributes:function disableUnusedAttributes(){for(var t=0,n=d.length;t!==n;++t)d[t]!==s[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:enable,disable:disable,getCompressedTextureFormats:getCompressedTextureFormats,useProgram:useProgram,setBlending:setBlending,setMaterial:function setMaterial(t){t.side===P?disable(e.CULL_FACE):enable(e.CULL_FACE),setFlipSided(t.side===N),!0===t.transparent?setBlending(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):setBlending(H),a.setFunc(t.depthFunc),a.setTest(t.depthTest),a.setMask(t.depthWrite),r.setMask(t.colorWrite),setPolygonOffset(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:setLineWidth,setPolygonOffset:setPolygonOffset,setScissorTest:function setScissorTest(t){t?enable(e.SCISSOR_TEST):disable(e.SCISSOR_TEST)},activeTexture:activeTexture,bindTexture:bindTexture,compressedTexImage2D:function compressedTexImage2D(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error('THREE.WebGLState:',e)}},texImage2D:function texImage2D(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error('THREE.WebGLState:',e)}},scissor:scissor,viewport:viewport,reset:function reset(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);c={},u=null,I=null,D={},p=null,m=null,A=null,b=null,r.reset(),a.reset(),o.reset()}}}function WebGLCapabilities(e,t,n){function getMaxAnisotropy(){if(void 0!==o)return o;var n=t.get('EXT_texture_filter_anisotropic');return o=null===n?0:e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT),o}function getMaxPrecision(t){if('highp'===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return'highp';t='mediump'}return'mediump'===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?'mediump':'lowp'}var r=void 0===n.precision?'highp':n.precision,a=getMaxPrecision(r),o;a!==r&&(console.warn('THREE.WebGLRenderer:',r,'not supported, using',a,'instead.'),r=a);var i=!0===n.logarithmicDepthBuffer&&!!t.get('EXT_frag_depth'),s=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),c=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),u=e.getParameter(e.MAX_VERTEX_ATTRIBS),p=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),m=e.getParameter(e.MAX_VARYING_VECTORS),g=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),h=0<l,f=!!t.get('OES_texture_float');return{getMaxAnisotropy:getMaxAnisotropy,getMaxPrecision:getMaxPrecision,precision:r,logarithmicDepthBuffer:i,maxTextures:s,maxVertexTextures:l,maxTextureSize:d,maxCubemapSize:c,maxAttributes:u,maxVertexUniforms:p,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:h,floatFragmentTextures:f,floatVertexTextures:h&&f}}function ArrayCamera(e){PerspectiveCamera.call(this),this.cameras=e||[]}function WebVRManager(e){function onVRDisplayPresentChange(){if(null!==n&&n.isPresenting){var r=n.getEyeParameters('left'),a=r.renderWidth,o=r.renderHeight;u=e.getPixelRatio(),c=e.getSize(),e.setDrawingBufferSize(2*a,o,1)}else t.enabled&&e.setDrawingBufferSize(c.width,c.height,u)}var t=this,n=null,r=null;'VRFrameData'in window&&(r=new window.VRFrameData);var a=new Matrix4,o=new Matrix4,i=new Matrix4,s=new PerspectiveCamera;s.bounds=new Vector4(0,0,.5,1),s.layers.enable(1);var l=new PerspectiveCamera;l.bounds=new Vector4(.5,0,.5,1),l.layers.enable(2);var d=new ArrayCamera([s,l]);d.layers.enable(1),d.layers.enable(2);var c,u;window.addEventListener('vrdisplaypresentchange',onVRDisplayPresentChange,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(r);var t=r.pose;null===t.position?e.position.set(0,0,0):e.position.fromArray(t.position),null!==t.orientation&&e.quaternion.fromArray(t.orientation),e.updateMatrixWorld();var c=n.stageParameters;if(this.standing&&c&&(o.fromArray(c.sittingToStandingTransform),i.getInverse(o),e.matrixWorld.multiply(o),e.matrixWorldInverse.multiply(i)),!1===n.isPresenting)return e;s.near=e.near,l.near=e.near,s.far=e.far,l.far=e.far,d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),s.matrixWorldInverse.fromArray(r.leftViewMatrix),l.matrixWorldInverse.fromArray(r.rightViewMatrix),this.standing&&c&&(s.matrixWorldInverse.multiply(i),l.matrixWorldInverse.multiply(i));var u=e.parent;null!==u&&(a.getInverse(u.matrixWorld),s.matrixWorldInverse.multiply(a),l.matrixWorldInverse.multiply(a)),s.matrixWorld.getInverse(s.matrixWorldInverse),l.matrixWorld.getInverse(l.matrixWorldInverse),s.projectionMatrix.fromArray(r.leftProjectionMatrix),l.projectionMatrix.fromArray(r.rightProjectionMatrix),d.projectionMatrix.copy(s.projectionMatrix);var p=n.getLayers();if(p.length){var m=p[0];null!==m.leftBounds&&4===m.leftBounds.length&&s.bounds.fromArray(m.leftBounds),null!==m.rightBounds&&4===m.rightBounds.length&&l.bounds.fromArray(m.rightBounds)}return d},this.getStandingMatrix=function(){return o},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){window.removeEventListener('vrdisplaypresentchange',onVRDisplayPresentChange)}}function WebGLExtensions(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var r;return r='WEBGL_depth_texture'===n?e.getExtension('WEBGL_depth_texture')||e.getExtension('MOZ_WEBGL_depth_texture')||e.getExtension('WEBKIT_WEBGL_depth_texture'):'EXT_texture_filter_anisotropic'===n?e.getExtension('EXT_texture_filter_anisotropic')||e.getExtension('MOZ_EXT_texture_filter_anisotropic')||e.getExtension('WEBKIT_EXT_texture_filter_anisotropic'):'WEBGL_compressed_texture_s3tc'===n?e.getExtension('WEBGL_compressed_texture_s3tc')||e.getExtension('MOZ_WEBGL_compressed_texture_s3tc')||e.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc'):'WEBGL_compressed_texture_pvrtc'===n?e.getExtension('WEBGL_compressed_texture_pvrtc')||e.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc'):'WEBGL_compressed_texture_etc1'===n?e.getExtension('WEBGL_compressed_texture_etc1'):e.getExtension(n),null===r&&console.warn('THREE.WebGLRenderer: '+n+' extension not supported.'),t[n]=r,r}}}function WebGLClipping(){function resetGlobalState(){l.value!==t&&(l.value=t,l.needsUpdate=0<n),e.numPlanes=n,e.numIntersection=0}function projectPlanes(t,n,r,a){var d=null===t?0:t.length,c=null;if(0!==d){if(c=l.value,!0!==a||null===c){var u=r+4*d,p=n.matrixWorldInverse;s.getNormalMatrix(p),(null===c||c.length<u)&&(c=new Float32Array(u));for(var m=0,i=r;m!==d;++m,i+=4)o.copy(t[m]).applyMatrix4(p,s),o.normal.toArray(c,i),c[i+3]=o.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=d,c}var e=this,t=null,n=0,r=!1,a=!1,o=new Plane,s=new Matrix3,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,a,o){var i=0!==e.length||a||0!==n||r;return r=a,t=projectPlanes(e,o,0),n=e.length,i},this.beginShadows=function(){a=!0,projectPlanes(null)},this.endShadows=function(){a=!1,resetGlobalState()},this.setState=function(e,o,s,d,c,u){if(!r||null===e||0===e.length||a&&!s)a?projectPlanes(null):resetGlobalState();else{var p=a?0:n,m=4*p,g=c.clippingState||null;l.value=g,g=projectPlanes(e,d,m,u);for(var h=0;h!==m;++h)g[h]=t[h];c.clippingState=g,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function WebGLUtils(e,t){return{convert:function convert(n){var r;if(n===Be)return e.REPEAT;if(n===Ne)return e.CLAMP_TO_EDGE;if(n===Pe)return e.MIRRORED_REPEAT;if(n===Oe)return e.NEAREST;if(n===ke)return e.NEAREST_MIPMAP_NEAREST;if(n===Ue)return e.NEAREST_MIPMAP_LINEAR;if(n===Ge)return e.LINEAR;if(n===Ve)return e.LINEAR_MIPMAP_NEAREST;if(n===He)return e.LINEAR_MIPMAP_LINEAR;if(n===ze)return e.UNSIGNED_BYTE;if(n===Ze)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Qe)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Je)return e.UNSIGNED_SHORT_5_6_5;if(n===We)return e.BYTE;if(n===$e)return e.SHORT;if(n===je)return e.UNSIGNED_SHORT;if(n===Xe)return e.INT;if(n===Ke)return e.UNSIGNED_INT;if(n===Ye)return e.FLOAT;if(n===qe&&(r=t.get('OES_texture_half_float'),null!==r))return r.HALF_FLOAT_OES;if(n===tt)return e.ALPHA;if(n===nt)return e.RGB;if(n===rt)return e.RGBA;if(n===at)return e.LUMINANCE;if(n===ot)return e.LUMINANCE_ALPHA;if(n===st)return e.DEPTH_COMPONENT;if(n===lt)return e.DEPTH_STENCIL;if(n===K)return e.FUNC_ADD;if(n===Y)return e.FUNC_SUBTRACT;if(n===q)return e.FUNC_REVERSE_SUBTRACT;if(n===J)return e.ZERO;if(n===ee)return e.ONE;if(n===te)return e.SRC_COLOR;if(n===ne)return e.ONE_MINUS_SRC_COLOR;if(n===re)return e.SRC_ALPHA;if(n===ae)return e.ONE_MINUS_SRC_ALPHA;if(n===oe)return e.DST_ALPHA;if(n===ie)return e.ONE_MINUS_DST_ALPHA;if(n===se)return e.DST_COLOR;if(n===le)return e.ONE_MINUS_DST_COLOR;if(n===de)return e.SRC_ALPHA_SATURATE;if((n===dt||n===ct||n===ut||n===pt)&&(r=t.get('WEBGL_compressed_texture_s3tc'),null!==r)){if(n===dt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===ct)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ut)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===pt)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===mt||n===gt||n===ht||n===ft)&&(r=t.get('WEBGL_compressed_texture_pvrtc'),null!==r)){if(n===mt)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===gt)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ht)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ft)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===_t&&(r=t.get('WEBGL_compressed_texture_etc1'),null!==r))return r.COMPRESSED_RGB_ETC1_WEBGL;if((n===Z||n===Q)&&(r=t.get('EXT_blend_minmax'),null!==r)){if(n===Z)return r.MIN_EXT;if(n===Q)return r.MAX_EXT}return n===et&&(r=t.get('WEBGL_depth_texture'),null!==r)?r.UNSIGNED_INT_24_8_WEBGL:0}}}function WebGLRenderer(e){function getTargetPixelRatio(){return null===b?P:1}function initGLContext(){Z=new WebGLExtensions(Y),Z.get('WEBGL_depth_texture'),Z.get('OES_texture_float'),Z.get('OES_texture_float_linear'),Z.get('OES_texture_half_float'),Z.get('OES_texture_half_float_linear'),Z.get('OES_standard_derivatives'),Z.get('ANGLE_instanced_arrays'),Z.get('OES_element_index_uint')&&(BufferGeometry.MaxIndex=4294967296),ge=new WebGLUtils(Y,Z),Q=new WebGLCapabilities(Y,Z,e),J=new WebGLState(Y,Z,ge),J.scissor(M.copy(k).multiplyScalar(P)),J.viewport(L.copy(O).multiplyScalar(P)),ee=new WebGLProperties,te=new WebGLTextures(Y,Z,J,ee,Q,ge,X),ne=new WebGLAttributes(Y),re=new WebGLGeometries(Y,ne,X),ae=new WebGLObjects(re,K),de=new WebGLMorphtargets(Y),ie=new WebGLPrograms(E,Z,Q),oe=new WebGLLights,se=new WebGLRenderLists,le=new WebGLBackground(E,J,re,l),ce=new WebGLBufferRenderer(Y,Z,K),ue=new WebGLIndexedBufferRenderer(Y,Z,K),pe=new WebGLFlareRenderer(E,Y,J,te,Q),me=new WebGLSpriteRenderer(E,Y,J,te,Q),E.info.programs=ie.programs,E.context=Y,E.capabilities=Q,E.extensions=Z,E.properties=ee,E.renderLists=se,E.state=J}function onContextLost(e){e.preventDefault(),console.log('THREE.WebGLRenderer: Context Lost.'),A=!0}function onContextRestore(){console.log('THREE.WebGLRenderer: Context Restored.'),A=!1,initGLContext()}function onMaterialDispose(e){var t=e.target;t.removeEventListener('dispose',onMaterialDispose),deallocateMaterial(t)}function deallocateMaterial(e){releaseMaterialProgramReference(e),ee.remove(e)}function releaseMaterialProgramReference(e){var t=ee.get(e).program;e.program=void 0,void 0!==t&&ie.releaseProgram(t)}function renderObjectImmediate(e,t,n){e.render(function(e){E.renderBufferImmediate(e,t,n)})}function setupVertexAttributes(e,t,n,r){if(n&&n.isInstancedBufferGeometry&&null===Z.get('ANGLE_instanced_arrays'))return void console.error('THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.');void 0===r&&(r=0),J.initAttributes();var a=n.attributes,o=t.getAttributes(),i=e.defaultAttributeValues;for(var s in o){var l=o[s];if(0<=l){var d=a[s];if(void 0!==d){var c=d.normalized,u=d.itemSize,p=ne.get(d);if(void 0===p)continue;var m=p.buffer,g=p.type,h=p.bytesPerElement;if(d.isInterleavedBufferAttribute){var f=d.data,_=f.stride,y=d.offset;f&&f.isInstancedInterleavedBuffer?(J.enableAttributeAndDivisor(l,f.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=f.meshPerAttribute*f.count)):J.enableAttribute(l),Y.bindBuffer(Y.ARRAY_BUFFER,m),Y.vertexAttribPointer(l,u,g,c,_*h,(r*_+y)*h)}else d.isInstancedBufferAttribute?(J.enableAttributeAndDivisor(l,d.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=d.meshPerAttribute*d.count)):J.enableAttribute(l),Y.bindBuffer(Y.ARRAY_BUFFER,m),Y.vertexAttribPointer(l,u,g,c,0,r*u*h)}else if(void 0!==i){var E=i[s];if(void 0!==E)switch(E.length){case 2:Y.vertexAttrib2fv(l,E);break;case 3:Y.vertexAttrib3fv(l,E);break;case 4:Y.vertexAttrib4fv(l,E);break;default:Y.vertexAttrib1fv(l,E);}}}}J.disableUnusedAttributes()}function start(){_e||((he.getDevice()||window).requestAnimationFrame(loop),_e=!0)}function loop(e){null!==ye&&ye(e),(he.getDevice()||window).requestAnimationFrame(loop)}function projectObject(e,t,n){if(e.visible){var r=e.layers.test(t.layers);if(r)if(e.isLight)u.push(e),e.castShadow&&m.push(e);else if(e.isSprite)(!e.frustumCulled||V.intersectsSprite(e))&&h.push(e);else if(e.isLensFlare)f.push(e);else if(e.isImmediateRenderObject)n&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4($),g.push(e,null,e.material,j.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||V.intersectsObject(e))){n&&j.setFromMatrixPosition(e.matrixWorld).applyMatrix4($);var a=ae.update(e),o=e.material;if(Array.isArray(o))for(var s=a.groups,d=0,i=s.length;d<i;d++){var l=s[d],c=o[l.materialIndex];c&&c.visible&&g.push(e,a,c,j.z,l)}else o.visible&&g.push(e,a,o,j.z,null)}for(var p=e.children,d=0,i=p.length;d<i;d++)projectObject(p[d],t,n)}}function renderObjects(e,t,n,r){for(var a=0,o=e.length;a<o;a++){var i=e[a],s=i.object,l=i.geometry,d=void 0===r?i.material:r,c=i.group;if(n.isArrayCamera){F=n;for(var u=n.cameras,p=0,m=u.length,g;p<m;p++)if(g=u[p],s.layers.test(g.layers)){var h=g.bounds,f=h.x*B,_=h.y*N,y=h.z*B,E=h.w*N;J.viewport(L.set(f,_,y,E).multiplyScalar(P)),renderObject(s,t,g,l,d,c)}}else F=null,renderObject(s,t,n,l,d,c)}}function renderObject(e,t,n,r,a,o){if(e.onBeforeRender(E,t,n,r,a,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){J.setMaterial(a);var i=setProgram(n,t.fog,a,e);S='',renderObjectImmediate(e,i,a)}else E.renderBufferDirect(n,t.fog,r,a,e,o);e.onAfterRender(E,t,n,r,a,o)}function initMaterial(e,t,n){var r=ee.get(e),a=ie.getParameters(e,oe.state,m,t,H.numPlanes,H.numIntersection,n),o=ie.getProgramCode(e,a),s=r.program,l=!0;if(void 0===s)e.addEventListener('dispose',onMaterialDispose);else if(s.code!==o)releaseMaterialProgramReference(e);else{if(void 0!==a.shaderID)return;l=!1}if(l){if(a.shaderID){var d=Jt[a.shaderID];r.shader={name:e.type,uniforms:Zt.clone(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else r.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(r.shader),s=ie.acquireProgram(e,r.shader,a,o),r.program=s,e.program=s}var c=s.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var u=0;u<E.maxMorphTargets;u++)0<=c['morphTarget'+u]&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(var u=0;u<E.maxMorphNormals;u++)0<=c['morphNormal'+u]&&e.numSupportedMorphNormals++}var i=r.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(r.numClippingPlanes=H.numPlanes,r.numIntersection=H.numIntersection,i.clippingPlanes=H.uniform),r.fog=t,r.lightsHash=oe.state.hash,e.lights&&(i.ambientLightColor.value=oe.state.ambient,i.directionalLights.value=oe.state.directional,i.spotLights.value=oe.state.spot,i.rectAreaLights.value=oe.state.rectArea,i.pointLights.value=oe.state.point,i.hemisphereLights.value=oe.state.hemi,i.directionalShadowMap.value=oe.state.directionalShadowMap,i.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,i.spotShadowMap.value=oe.state.spotShadowMap,i.spotShadowMatrix.value=oe.state.spotShadowMatrix,i.pointShadowMap.value=oe.state.pointShadowMap,i.pointShadowMatrix.value=oe.state.pointShadowMatrix);var p=r.program.getUniforms(),g=WebGLUniforms.seqWithValue(p.seq,i);r.uniformsList=g}function setProgram(e,t,n,r){D=0;var a=ee.get(n);if(z&&(W||e!==R)){var i=e===R&&n.id===v;H.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,a,i)}!1===n.needsUpdate&&(void 0===a.program?n.needsUpdate=!0:n.fog&&a.fog!==t?n.needsUpdate=!0:n.lights&&a.lightsHash!==oe.state.hash?n.needsUpdate=!0:void 0!==a.numClippingPlanes&&(a.numClippingPlanes!==H.numPlanes||a.numIntersection!==H.numIntersection)&&(n.needsUpdate=!0)),n.needsUpdate&&(initMaterial(n,t,r),n.needsUpdate=!1);var s=!1,l=!1,c=!1,u=a.program,m=u.getUniforms(),g=a.shader.uniforms;if(J.useProgram(u.program)&&(s=!0,l=!0,c=!0),n.id!==v&&(v=n.id,l=!0),s||e!==R){if(m.setValue(Y,'projectionMatrix',e.projectionMatrix),Q.logarithmicDepthBuffer&&m.setValue(Y,'logDepthBufFC',2/(_(e.far+1)/o)),R!==(F||e)&&(R=F||e,l=!0,c=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var h=m.map.cameraPosition;void 0!==h&&h.setValue(Y,j.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(Y,'viewMatrix',e.matrixWorldInverse)}if(n.skinning){m.setOptional(Y,r,'bindMatrix'),m.setOptional(Y,r,'bindMatrixInverse');var f=r.skeleton;if(f){var x=f.bones;if(Q.floatVertexTextures){if(void 0===f.boneTexture){var A=p(4*x.length);A=Gt.nextPowerOfTwo(d(A)),A=y(A,4);var b=new Float32Array(4*(A*A));b.set(f.boneMatrices);var T=new DataTexture(b,A,A,rt,Ye);f.boneMatrices=b,f.boneTexture=T,f.boneTextureSize=A}m.setValue(Y,'boneTexture',f.boneTexture),m.setValue(Y,'boneTextureSize',f.boneTextureSize)}else m.setOptional(Y,f,'boneMatrices')}}return l&&(m.setValue(Y,'toneMappingExposure',E.toneMappingExposure),m.setValue(Y,'toneMappingWhitePoint',E.toneMappingWhitePoint),n.lights&&markUniformsLightsNeedsUpdate(g,c),t&&n.fog&&refreshUniformsFog(g,t),n.isMeshBasicMaterial?refreshUniformsCommon(g,n):n.isMeshLambertMaterial?(refreshUniformsCommon(g,n),refreshUniformsLambert(g,n)):n.isMeshPhongMaterial?(refreshUniformsCommon(g,n),n.isMeshToonMaterial?refreshUniformsToon(g,n):refreshUniformsPhong(g,n)):n.isMeshStandardMaterial?(refreshUniformsCommon(g,n),n.isMeshPhysicalMaterial?refreshUniformsPhysical(g,n):refreshUniformsStandard(g,n)):n.isMeshDepthMaterial?(refreshUniformsCommon(g,n),refreshUniformsDepth(g,n)):n.isMeshDistanceMaterial?(refreshUniformsCommon(g,n),refreshUniformsDistance(g,n)):n.isMeshNormalMaterial?(refreshUniformsCommon(g,n),refreshUniformsNormal(g,n)):n.isLineBasicMaterial?(refreshUniformsLine(g,n),n.isLineDashedMaterial&&refreshUniformsDash(g,n)):n.isPointsMaterial?refreshUniformsPoints(g,n):n.isShadowMaterial&&(g.color.value=n.color,g.opacity.value=n.opacity),void 0!==g.ltcMat&&(g.ltcMat.value=qt.LTC_MAT_TEXTURE),void 0!==g.ltcMag&&(g.ltcMag.value=qt.LTC_MAG_TEXTURE),WebGLUniforms.upload(Y,a.uniformsList,g,E)),m.setValue(Y,'modelViewMatrix',r.modelViewMatrix),m.setValue(Y,'normalMatrix',r.normalMatrix),m.setValue(Y,'modelMatrix',r.matrixWorld),u}function refreshUniformsCommon(e,t){e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;if(t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var r=n.offset,a=n.repeat;e.offsetRepeat.value.set(r.x,r.y,a.x,a.y)}}function refreshUniformsLine(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function refreshUniformsDash(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}function refreshUniformsPoints(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*P,e.scale.value=.5*N,e.map.value=t.map,null!==t.map){var n=t.map.offset,r=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,r.x,r.y)}}function refreshUniformsFog(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}function refreshUniformsLambert(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}function refreshUniformsPhong(e,t){e.specular.value=t.specular,e.shininess.value=y(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function refreshUniformsToon(e,t){refreshUniformsPhong(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}function refreshUniformsStandard(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function refreshUniformsPhysical(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,refreshUniformsStandard(e,t)}function refreshUniformsDepth(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function refreshUniformsDistance(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}function refreshUniformsNormal(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function markUniformsLightsNeedsUpdate(e,t){e.ambientLightColor.needsUpdate=t,e.directionalLights.needsUpdate=t,e.pointLights.needsUpdate=t,e.spotLights.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}function allocTextureUnit(){var e=D;return e>=Q.maxTextures&&console.warn('THREE.WebGLRenderer: Trying to use '+e+' texture units while this GPU supports only '+Q.maxTextures),D+=1,e}console.log('THREE.WebGLRenderer',T),e=e||{};var t=void 0===e.canvas?document.createElementNS('http://www.w3.org/1999/xhtml','canvas'):e.canvas,n=void 0===e.context?null:e.context,r=void 0!==e.alpha&&e.alpha,a=void 0===e.depth||e.depth,i=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,l=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,u=[],m=[],g=null,h=[],f=[];this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=be,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var E=this,A=!1,b=null,C=null,v=-1,S='',R=null,F=null,L=new Vector4,M=new Vector4,I=null,D=0,B=t.width,N=t.height,P=1,O=new Vector4(0,0,B,N),k=new Vector4(0,0,B,N),G=!1,V=new Frustum,H=new WebGLClipping,z=!1,W=!1,$=new Matrix4,j=new Vector3,X={geometries:0,textures:0},K={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:K,memory:X,programs:null};var Y;try{var q={alpha:r,depth:a,stencil:i,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c};if(Y=n||t.getContext('webgl',q)||t.getContext('experimental-webgl',q),null===Y)if(null!==t.getContext('webgl'))throw'Error creating WebGL context with your selected attributes.';else throw'Error creating WebGL context.';void 0===Y.getShaderPrecisionFormat&&(Y.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),t.addEventListener('webglcontextlost',onContextLost,!1),t.addEventListener('webglcontextrestored',onContextRestore,!1)}catch(e){console.error('THREE.WebGLRenderer: '+e)}var Z,Q,J,ee,te,ne,re,ae,oe,ie,se,le,de,ce,ue,pe,me,ge;initGLContext();var he=new WebVRManager(E);this.vr=he;var fe=new WebGLShadowMap(E,ae,Q.maxTextureSize);this.shadowMap=fe,this.getContext=function(){return Y},this.getContextAttributes=function(){return Y.getContextAttributes()},this.forceContextLoss=function(){var e=Z.get('WEBGL_lose_context');e&&e.loseContext()},this.forceContextRestore=function(){var e=Z.get('WEBGL_lose_context');e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0===e||(P=e,this.setSize(B,N,!1))},this.getSize=function(){return{width:B,height:N}},this.setSize=function(e,n,r){var a=he.getDevice();return a&&a.isPresenting?void console.warn('THREE.WebGLRenderer: Can\'t change size while VR device is presenting.'):void(B=e,N=n,t.width=e*P,t.height=n*P,!1!==r&&(t.style.width=e+'px',t.style.height=n+'px'),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:B*P,height:N*P}},this.setDrawingBufferSize=function(e,n,r){B=e,N=n,P=r,t.width=e*r,t.height=n*r,this.setViewport(0,0,e,n)},this.setViewport=function(e,t,n,r){O.set(e,N-t-r,n,r),J.viewport(L.copy(O).multiplyScalar(P))},this.setScissor=function(e,t,n,r){k.set(e,N-t-r,n,r),J.scissor(M.copy(k).multiplyScalar(P))},this.setScissorTest=function(e){J.setScissorTest(G=e)},this.getClearColor=le.getClearColor,this.setClearColor=le.setClearColor,this.getClearAlpha=le.getClearAlpha,this.setClearAlpha=le.setClearAlpha,this.clear=function(e,t,n){var r=0;(void 0===e||e)&&(r|=Y.COLOR_BUFFER_BIT),(void 0===t||t)&&(r|=Y.DEPTH_BUFFER_BIT),(void 0===n||n)&&(r|=Y.STENCIL_BUFFER_BIT),Y.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,r){this.setRenderTarget(e),this.clear(t,n,r)},this.dispose=function(){t.removeEventListener('webglcontextlost',onContextLost,!1),t.removeEventListener('webglcontextrestored',onContextRestore,!1),se.dispose(),he.dispose()},this.renderBufferImmediate=function(e,t,n){J.initAttributes();var r=ee.get(e);e.hasPositions&&!r.position&&(r.position=Y.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Y.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Y.createBuffer()),e.hasColors&&!r.color&&(r.color=Y.createBuffer());var a=t.getAttributes();if(e.hasPositions&&(Y.bindBuffer(Y.ARRAY_BUFFER,r.position),Y.bufferData(Y.ARRAY_BUFFER,e.positionArray,Y.DYNAMIC_DRAW),J.enableAttribute(a.position),Y.vertexAttribPointer(a.position,3,Y.FLOAT,!1,0,0)),e.hasNormals){if(Y.bindBuffer(Y.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var o=0,i=3*e.count;o<i;o+=9){var s=e.normalArray,l=(s[o+0]+s[o+3]+s[o+6])/3,d=(s[o+1]+s[o+4]+s[o+7])/3,c=(s[o+2]+s[o+5]+s[o+8])/3;s[o+0]=l,s[o+1]=d,s[o+2]=c,s[o+3]=l,s[o+4]=d,s[o+5]=c,s[o+6]=l,s[o+7]=d,s[o+8]=c}Y.bufferData(Y.ARRAY_BUFFER,e.normalArray,Y.DYNAMIC_DRAW),J.enableAttribute(a.normal),Y.vertexAttribPointer(a.normal,3,Y.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Y.bindBuffer(Y.ARRAY_BUFFER,r.uv),Y.bufferData(Y.ARRAY_BUFFER,e.uvArray,Y.DYNAMIC_DRAW),J.enableAttribute(a.uv),Y.vertexAttribPointer(a.uv,2,Y.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==U&&(Y.bindBuffer(Y.ARRAY_BUFFER,r.color),Y.bufferData(Y.ARRAY_BUFFER,e.colorArray,Y.DYNAMIC_DRAW),J.enableAttribute(a.color),Y.vertexAttribPointer(a.color,3,Y.FLOAT,!1,0,0)),J.disableUnusedAttributes(),Y.drawArrays(Y.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,a,o){J.setMaterial(r);var i=setProgram(e,t,r,a),s=n.id+'_'+i.id+'_'+(!0===r.wireframe),l=!1;s!=S&&(S=s,l=!0),a.morphTargetInfluences&&(de.update(a,n,r,i),l=!0);var d=n.index,c=n.attributes.position,u=1;!0===r.wireframe&&(d=re.getWireframeAttribute(n),u=2);var p=ce,m;null!==d&&(m=ne.get(d),p=ue,p.setIndex(m)),l&&(setupVertexAttributes(r,i,n),null!==d&&Y.bindBuffer(Y.ELEMENT_ARRAY_BUFFER,m.buffer));var g=0;null===d?void 0!==c&&(g=c.count):g=d.count;var h=n.drawRange.start*u,f=n.drawRange.count*u,_=null===o?0:o.start*u,E=null===o?Infinity:o.count*u,A=y(h,_),b=x(g,h+f,_+E)-1,T=y(0,b-A+1);if(0!==T){if(a.isMesh){if(!0===r.wireframe)J.setLineWidth(r.wireframeLinewidth*getTargetPixelRatio()),p.setMode(Y.LINES);else switch(a.drawMode){case Rt:p.setMode(Y.TRIANGLES);break;case Ft:p.setMode(Y.TRIANGLE_STRIP);break;case wt:p.setMode(Y.TRIANGLE_FAN);}}else if(a.isLine){var C=r.linewidth;void 0===C&&(C=1),J.setLineWidth(C*getTargetPixelRatio()),a.isLineSegments?p.setMode(Y.LINES):a.isLineLoop?p.setMode(Y.LINE_LOOP):p.setMode(Y.LINE_STRIP)}else a.isPoints&&p.setMode(Y.POINTS);n&&n.isInstancedBufferGeometry?0<n.maxInstancedCount&&p.renderInstances(n,A,T):p.render(A,T)}},this.compile=function(e,t){u.length=0,m.length=0,e.traverse(function(e){e.isLight&&(u.push(e),e.castShadow&&m.push(e))}),oe.setup(u,m,t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)initMaterial(t.material[n],e.fog,t);else initMaterial(t.material,e.fog,t)})};var _e=!1,ye=null;this.animate=function(e){ye=e,start()},this.render=function(e,t,n,r){if(!(t&&t.isCamera))return void console.error('THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.');if(!A){S='',v=-1,R=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),he.enabled&&(t=he.getCamera(t)),$.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),V.setFromMatrix($),u.length=0,m.length=0,h.length=0,f.length=0,W=this.localClippingEnabled,z=H.init(this.clippingPlanes,W,t),g=se.get(e,t),g.init(),projectObject(e,t,E.sortObjects),!0===E.sortObjects&&g.sort(),z&&H.beginShadows(),fe.render(m,e,t),oe.setup(u,m,t),z&&H.endShadows(),K.frame++,K.calls=0,K.vertices=0,K.faces=0,K.points=0,void 0===n&&(n=null),this.setRenderTarget(n),le.render(g,e,t,r);var a=g.opaque,o=g.transparent;if(e.overrideMaterial){var i=e.overrideMaterial;a.length&&renderObjects(a,e,t,i),o.length&&renderObjects(o,e,t,i)}else a.length&&renderObjects(a,e,t),o.length&&renderObjects(o,e,t);me.render(h,e,t),pe.render(f,e,t,L),n&&te.updateRenderTargetMipmap(n),J.buffers.depth.setTest(!0),J.buffers.depth.setMask(!0),J.buffers.color.setMask(!0),J.setPolygonOffset(!1),he.enabled&&he.submitFrame()}},this.setFaceCulling=function(e,t){J.setCullFace(e),J.setFlipSided(t===w)},this.allocTextureUnit=allocTextureUnit,this.setTexture2D=function(){var e=!1;return function setTexture2D(t,n){t&&t.isWebGLRenderTarget&&(!e&&(console.warn('THREE.WebGLRenderer.setTexture2D: don\'t use render targets as textures. Use their .texture property instead.'),e=!0),t=t.texture),te.setTexture2D(t,n)}}(),this.setTexture=function(){var e=!1;return function setTexture(t,n){e||(console.warn('THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead.'),e=!0),te.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function setTextureCube(t,n){t&&t.isWebGLRenderTargetCube&&(!e&&(console.warn('THREE.WebGLRenderer.setTextureCube: don\'t use cube render targets as textures. Use their .texture property instead.'),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?te.setTextureCube(t,n):te.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return b},this.setRenderTarget=function(e){b=e,e&&void 0===ee.get(e).__webglFramebuffer&&te.setupRenderTarget(e);var t=null,n=!1;if(e){var r=ee.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=r[e.activeCubeFace],n=!0):t=r,L.copy(e.viewport),M.copy(e.scissor),I=e.scissorTest}else L.copy(O).multiplyScalar(P),M.copy(k).multiplyScalar(P),I=G;if(C!==t&&(Y.bindFramebuffer(Y.FRAMEBUFFER,t),C=t),J.viewport(L),J.scissor(M),J.setScissorTest(I),n){var a=ee.get(e.texture);Y.framebufferTexture2D(Y.FRAMEBUFFER,Y.COLOR_ATTACHMENT0,Y.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,a.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,a,o){if(!(e&&e.isWebGLRenderTarget))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.');var i=ee.get(e).__webglFramebuffer;if(i){var s=!1;i!==C&&(Y.bindFramebuffer(Y.FRAMEBUFFER,i),s=!0);try{var l=e.texture,d=l.format,c=l.type;if(d!==rt&&ge.convert(d)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.');if(c!==ze&&ge.convert(c)!==Y.getParameter(Y.IMPLEMENTATION_COLOR_READ_TYPE)&&!(c===Ye&&(Z.get('OES_texture_float')||Z.get('WEBGL_color_buffer_float')))&&!(c===qe&&Z.get('EXT_color_buffer_half_float')))return void console.error('THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.');Y.checkFramebufferStatus(Y.FRAMEBUFFER)===Y.FRAMEBUFFER_COMPLETE?0<=t&&t<=e.width-r&&0<=n&&n<=e.height-a&&Y.readPixels(t,n,r,a,ge.convert(d),ge.convert(c),o):console.error('THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.')}finally{s&&Y.bindFramebuffer(Y.FRAMEBUFFER,C)}}}}function FogExp2(e,t){this.name='',this.color=new Color(e),this.density=void 0===t?25e-5:t}function Fog(e,t,n){this.name='',this.color=new Color(e),this.near=void 0===t?1:t,this.far=void 0===n?1e3:n}function Scene(){Object3D.call(this),this.type='Scene',this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function LensFlare(e,t,n,r,a){Object3D.call(this),this.lensFlares=[],this.positionScreen=new Vector3,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,a)}function SpriteMaterial(e){Material.call(this),this.type='SpriteMaterial',this.color=new Color(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Sprite(e){Object3D.call(this),this.type='Sprite',this.material=void 0===e?new SpriteMaterial:e}function LOD(){Object3D.call(this),this.type='LOD',Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Skeleton(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn('THREE.Skeleton boneInverses is the wrong length.'),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Matrix4)}}function Bone(){Object3D.call(this),this.type='Bone'}function SkinnedMesh(e,t){Mesh.call(this,e,t),this.type='SkinnedMesh',this.bindMode='attached',this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4;var n=this.initBones(),r=new Skeleton(n);this.bind(r,this.matrixWorld),this.normalizeSkinWeights()}function LineBasicMaterial(e){Material.call(this),this.type='LineBasicMaterial',this.color=new Color(16777215),this.linewidth=1,this.linecap='round',this.linejoin='round',this.lights=!1,this.setValues(e)}function Line(e,t,n){return 1===n?(console.warn('THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead.'),new LineSegments(e,t)):void(Object3D.call(this),this.type='Line',this.geometry=void 0===e?new BufferGeometry:e,this.material=void 0===t?new LineBasicMaterial({color:16777215*Math.random()}):t)}function LineSegments(e,t){Line.call(this,e,t),this.type='LineSegments'}function LineLoop(e,t){Line.call(this,e,t),this.type='LineLoop'}function PointsMaterial(e){Material.call(this),this.type='PointsMaterial',this.color=new Color(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Points(e,t){Object3D.call(this),this.type='Points',this.geometry=void 0===e?new BufferGeometry:e,this.material=void 0===t?new PointsMaterial({color:16777215*Math.random()}):t}function Group(){Object3D.call(this),this.type='Group'}function VideoTexture(e,t,n,r,a,o,i,s,l){function update(){requestAnimationFrame(update),e.readyState>=e.HAVE_CURRENT_DATA&&(d.needsUpdate=!0)}Texture.call(this,e,t,n,r,a,o,i,s,l),this.generateMipmaps=!1;var d=this;update()}function CompressedTexture(e,t,n,r,a,o,i,s,l,d,c,u){Texture.call(this,null,o,i,s,l,d,r,a,c,u),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function DepthTexture(e,t,n,r,a,o,i,s,l,d){if(d=void 0===d?st:d,d!==st&&d!==lt)throw new Error('DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat');void 0===n&&d===st&&(n=je),void 0===n&&d===lt&&(n=et),Texture.call(this,null,r,a,o,i,s,d,n,l),this.image={width:e,height:t},this.magFilter=void 0===i?Oe:i,this.minFilter=void 0===s?Oe:s,this.flipY=!1,this.generateMipmaps=!1}function WireframeGeometry(t){BufferGeometry.call(this),this.type='WireframeGeometry';var n=[],r=[0,0],a={},s=['a','b','c'],d,i,c,l,o,u,e,p,m,g;if(t&&t.isGeometry){var h=t.faces;for(d=0,c=h.length;d<c;d++){var f=h[d];for(i=0;3>i;i++)e=f[s[i]],p=f[s[(i+1)%3]],r[0]=x(e,p),r[1]=y(e,p),m=r[0]+','+r[1],void 0===a[m]&&(a[m]={index1:r[0],index2:r[1]})}for(m in a)u=a[m],g=t.vertices[u.index1],n.push(g.x,g.y,g.z),g=t.vertices[u.index2],n.push(g.x,g.y,g.z)}else if(t&&t.isBufferGeometry){var _,E,A,b,T,C,v,S;if(g=new Vector3,null!==t.index){for(_=t.attributes.position,E=t.index,A=t.groups,0===A.length&&(A=[{start:0,count:E.count,materialIndex:0}]),(l=0,o=A.length);l<o;++l)for(b=A[l],T=b.start,C=b.count,(d=T,c=T+C);d<c;d+=3)for(i=0;3>i;i++)e=E.getX(d+i),p=E.getX(d+(i+1)%3),r[0]=x(e,p),r[1]=y(e,p),m=r[0]+','+r[1],void 0===a[m]&&(a[m]={index1:r[0],index2:r[1]});for(m in a)u=a[m],g.fromBufferAttribute(_,u.index1),n.push(g.x,g.y,g.z),g.fromBufferAttribute(_,u.index2),n.push(g.x,g.y,g.z)}else for(_=t.attributes.position,d=0,c=_.count/3;d<c;d++)for(i=0;3>i;i++)v=3*d+i,g.fromBufferAttribute(_,v),n.push(g.x,g.y,g.z),S=3*d+(i+1)%3,g.fromBufferAttribute(_,S),n.push(g.x,g.y,g.z)}this.addAttribute('position',new Float32BufferAttribute(n,3))}function ParametricGeometry(e,t,n){Geometry.call(this),this.type='ParametricGeometry',this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new ParametricBufferGeometry(e,t,n)),this.mergeVertices()}function ParametricBufferGeometry(e,t,n){BufferGeometry.call(this),this.type='ParametricBufferGeometry',this.parameters={func:e,slices:t,stacks:n};var r=[],o=[],s=[],l=[],p=1e-5,m=new Vector3,g=new Vector3,h=new Vector3,f=new Vector3,_=new Vector3,y=t+1,E,i;for(E=0;E<=n;E++){var x=E/n;for(i=0;i<=t;i++){var A=i/t;g=e(A,x,g),o.push(g.x,g.y,g.z),0<=A-p?(h=e(A-p,x,h),f.subVectors(g,h)):(h=e(A+p,x,h),f.subVectors(h,g)),0<=x-p?(h=e(A,x-p,h),_.subVectors(g,h)):(h=e(A,x+p,h),_.subVectors(h,g)),m.crossVectors(f,_).normalize(),s.push(m.x,m.y,m.z),l.push(A,x)}}for(E=0;E<n;E++)for(i=0;i<t;i++){var u=E*y+i,a=E*y+i+1,b=(E+1)*y+i+1,c=(E+1)*y+i;r.push(u,a,c),r.push(a,b,c)}this.setIndex(r),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('normal',new Float32BufferAttribute(s,3)),this.addAttribute('uv',new Float32BufferAttribute(l,2))}function PolyhedronGeometry(e,t,n,r){Geometry.call(this),this.type='PolyhedronGeometry',this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new PolyhedronBufferGeometry(e,t,n,r)),this.mergeVertices()}function PolyhedronBufferGeometry(e,t,n,r){function subdivide(e){for(var n=new Vector3,r=new Vector3,a=new Vector3,o=0;o<t.length;o+=3)getVertexByIndex(t[o+0],n),getVertexByIndex(t[o+1],r),getVertexByIndex(t[o+2],a),subdivideFace(n,r,a,e)}function subdivideFace(e,t,n,r){var a=f(2,r),o=[],s,i;for(s=0;s<=a;s++){o[s]=[];var l=e.clone().lerp(n,s/a),d=t.clone().lerp(n,s/a),c=a-s;for(i=0;i<=c;i++)o[s][i]=0===i&&s===a?l:l.clone().lerp(d,i/c)}for(s=0;s<a;s++)for(i=0;i<2*(a-s)-1;i++){var u=A(i/2);0==i%2?(pushVertex(o[s][u+1]),pushVertex(o[s+1][u]),pushVertex(o[s][u])):(pushVertex(o[s][u+1]),pushVertex(o[s+1][u+1]),pushVertex(o[s+1][u]))}}function appplyRadius(e){for(var t=new Vector3,n=0;n<o.length;n+=3)t.x=o[n+0],t.y=o[n+1],t.z=o[n+2],t.normalize().multiplyScalar(e),o[n+0]=t.x,o[n+1]=t.y,o[n+2]=t.z}function correctSeam(){for(var e=0;e<s.length;e+=6){var t=s[e+0],n=s[e+2],r=s[e+4],a=y(t,n,r),o=x(t,n,r);.9<a&&.1>o&&(.2>t&&(s[e+0]+=1),.2>n&&(s[e+2]+=1),.2>r&&(s[e+4]+=1))}}function pushVertex(e){o.push(e.x,e.y,e.z)}function getVertexByIndex(t,n){var r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function correctUVs(){for(var e=new Vector3,t=new Vector3,n=new Vector3,r=new Vector3,a=new Vector2,l=new Vector2,d=new Vector2,c=0,i=0;c<o.length;c+=9,i+=6){e.set(o[c+0],o[c+1],o[c+2]),t.set(o[c+3],o[c+4],o[c+5]),n.set(o[c+6],o[c+7],o[c+8]),a.set(s[i+0],s[i+1]),l.set(s[i+2],s[i+3]),d.set(s[i+4],s[i+5]),r.copy(e).add(t).add(n).divideScalar(3);var u=azimuth(r);correctUV(a,i+0,e,u),correctUV(l,i+2,t,u),correctUV(d,i+4,n,u)}}function correctUV(e,t,n,r){0>r&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/h+.5)}function azimuth(e){return a(e.z,-e.x)}function inclination(e){return a(-e.y,p(e.x*e.x+e.z*e.z))}BufferGeometry.call(this),this.type='PolyhedronBufferGeometry',this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var o=[],s=[];subdivide(r),appplyRadius(n),function generateUVs(){for(var e=new Vector3,t=0;t<o.length;t+=3){e.x=o[t+0],e.y=o[t+1],e.z=o[t+2];var n=azimuth(e)/2/h+.5,r=inclination(e)/h+.5;s.push(n,1-r)}correctUVs(),correctSeam()}(),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('normal',new Float32BufferAttribute(o.slice(),3)),this.addAttribute('uv',new Float32BufferAttribute(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function TetrahedronGeometry(e,t){Geometry.call(this),this.type='TetrahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new TetrahedronBufferGeometry(e,t)),this.mergeVertices()}function TetrahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type='TetrahedronBufferGeometry',this.parameters={radius:e,detail:t}}function OctahedronGeometry(e,t){Geometry.call(this),this.type='OctahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new OctahedronBufferGeometry(e,t)),this.mergeVertices()}function OctahedronBufferGeometry(e,t){PolyhedronBufferGeometry.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type='OctahedronBufferGeometry',this.parameters={radius:e,detail:t}}function IcosahedronGeometry(e,t){Geometry.call(this),this.type='IcosahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new IcosahedronBufferGeometry(e,t)),this.mergeVertices()}function IcosahedronBufferGeometry(e,n){var r=(1+2.23606797749979)/2;PolyhedronBufferGeometry.call(this,[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,n),this.type='IcosahedronBufferGeometry',this.parameters={radius:e,detail:n}}function DodecahedronGeometry(e,t){Geometry.call(this),this.type='DodecahedronGeometry',this.parameters={radius:e,detail:t},this.fromBufferGeometry(new DodecahedronBufferGeometry(e,t)),this.mergeVertices()}function DodecahedronBufferGeometry(e,n){var a=(1+2.23606797749979)/2,o=1/a;PolyhedronBufferGeometry.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-a,0,-o,a,0,o,-a,0,o,a,-o,-a,0,-o,a,0,o,-a,0,o,a,0,-a,0,-o,a,0,-o,-a,0,o,a,0,o],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,n),this.type='DodecahedronBufferGeometry',this.parameters={radius:e,detail:n}}function TubeGeometry(e,t,n,r,a,o){Geometry.call(this),this.type='TubeGeometry',this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},void 0!==o&&console.warn('THREE.TubeGeometry: taper has been removed.');var i=new TubeBufferGeometry(e,t,n,r,a);this.tangents=i.tangents,this.normals=i.normals,this.binormals=i.binormals,this.fromBufferGeometry(i),this.mergeVertices()}function TubeBufferGeometry(e,t,n,r,a){function generateBufferData(){for(_=0;_<t;_++)generateSegment(_);generateSegment(!1===a?t:0),generateUVs(),generateIndices()}function generateSegment(a){var d=e.getPointAt(a/t),p=o.normals[a],f=o.binormals[a];for(i=0;i<=r;i++){var _=2*(i/r*h),y=g(_),E=-m(_);l.x=E*p.x+y*f.x,l.y=E*p.y+y*f.y,l.z=E*p.z+y*f.z,l.normalize(),u.push(l.x,l.y,l.z),s.x=d.x+n*l.x,s.y=d.y+n*l.y,s.z=d.z+n*l.z,c.push(s.x,s.y,s.z)}}function generateIndices(){for(i=1;i<=t;i++)for(_=1;_<=r;_++){var e=(r+1)*(i-1)+(_-1),n=(r+1)*i+(_-1),a=(r+1)*i+_,o=(r+1)*(i-1)+_;f.push(e,n,o),f.push(n,a,o)}}function generateUVs(){for(_=0;_<=t;_++)for(i=0;i<=r;i++)d.x=_/t,d.y=i/r,p.push(d.x,d.y)}BufferGeometry.call(this),this.type='TubeBufferGeometry',this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},t=t||64,n=n||1,r=r||8,a=a||!1;var o=e.computeFrenetFrames(t,a);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var s=new Vector3,l=new Vector3,d=new Vector2,c=[],u=[],p=[],f=[],_,i;generateBufferData(),this.setIndex(f),this.addAttribute('position',new Float32BufferAttribute(c,3)),this.addAttribute('normal',new Float32BufferAttribute(u,3)),this.addAttribute('uv',new Float32BufferAttribute(p,2))}function TorusKnotGeometry(e,t,n,r,a,o,i){Geometry.call(this),this.type='TorusKnotGeometry',this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:a,q:o},void 0!==i&&console.warn('THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.'),this.fromBufferGeometry(new TorusKnotBufferGeometry(e,t,n,r,a,o)),this.mergeVertices()}function TorusKnotBufferGeometry(e,t,n,r,o,s){function calculatePositionOnCurve(e,t,n,r,a){var o=m(e),i=g(e),s=n/t*e,l=m(s);a.x=.5*(r*(2+l))*o,a.y=.5*(r*(2+l)*i),a.z=.5*(r*g(s))}BufferGeometry.call(this),this.type='TorusKnotBufferGeometry',this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:o,q:s},e=e||100,t=t||40,n=A(n)||64,r=A(r)||8,o=o||2,s=s||3;var l=[],f=[],_=[],y=[],E=new Vector3,x=new Vector3,C=new Vector3,S=new Vector3,R=new Vector3,F=new Vector3,T=new Vector3,w,i;for(w=0;w<=n;++w){var L=2*(w/n*o*h);for(calculatePositionOnCurve(L,o,s,e,C),calculatePositionOnCurve(L+.01,o,s,e,S),F.subVectors(S,C),T.addVectors(S,C),R.crossVectors(F,T),T.crossVectors(R,F),R.normalize(),T.normalize(),i=0;i<=r;++i){var u=2*(i/r*h),v=-t*m(u),M=t*g(u);E.x=C.x+(v*T.x+M*R.x),E.y=C.y+(v*T.y+M*R.y),E.z=C.z+(v*T.z+M*R.z),f.push(E.x,E.y,E.z),x.subVectors(E,C).normalize(),_.push(x.x,x.y,x.z),y.push(w/n),y.push(i/r)}}for(i=1;i<=n;i++)for(w=1;w<=r;w++){var I=(r+1)*(i-1)+(w-1),a=(r+1)*i+(w-1),b=(r+1)*i+w,c=(r+1)*(i-1)+w;l.push(I,a,c),l.push(a,b,c)}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(f,3)),this.addAttribute('normal',new Float32BufferAttribute(_,3)),this.addAttribute('uv',new Float32BufferAttribute(y,2))}function TorusGeometry(e,t,n,r,a){Geometry.call(this),this.type='TorusGeometry',this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:a},this.fromBufferGeometry(new TorusBufferGeometry(e,t,n,r,a)),this.mergeVertices()}function TorusBufferGeometry(e,t,n,r,o){BufferGeometry.call(this),this.type='TorusBufferGeometry',this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:o},e=e||100,t=t||40,n=A(n)||8,r=A(r)||6,o=o||2*h;var s=[],l=[],p=[],f=[],_=new Vector3,y=new Vector3,E=new Vector3,x,T;for(x=0;x<=n;x++)for(T=0;T<=r;T++){var i=T/r*o,u=2*(x/n*h);y.x=(e+t*m(u))*m(i),y.y=(e+t*m(u))*g(i),y.z=t*g(u),l.push(y.x,y.y,y.z),_.x=e*m(i),_.y=e*g(i),E.subVectors(y,_).normalize(),p.push(E.x,E.y,E.z),f.push(T/r),f.push(x/n)}for(x=1;x<=n;x++)for(T=1;T<=r;T++){var C=(r+1)*x+T-1,a=(r+1)*(x-1)+T-1,b=(r+1)*(x-1)+T,c=(r+1)*x+T;s.push(C,a,c),s.push(a,b,c)}this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('normal',new Float32BufferAttribute(p,3)),this.addAttribute('uv',new Float32BufferAttribute(f,2))}function ExtrudeGeometry(e,t){Geometry.call(this),this.type='ExtrudeGeometry',this.parameters={shapes:e,options:t},this.fromBufferGeometry(new ExtrudeBufferGeometry(e,t)),this.mergeVertices()}function ExtrudeBufferGeometry(e,t){'undefined'==typeof e||(BufferGeometry.call(this),this.type='ExtrudeBufferGeometry',e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function TextGeometry(e,t){Geometry.call(this),this.type='TextGeometry',this.parameters={text:e,parameters:t},this.fromBufferGeometry(new TextBufferGeometry(e,t)),this.mergeVertices()}function TextBufferGeometry(e,t){t=t||{};var n=t.font;if(!(n&&n.isFont))return console.error('THREE.TextGeometry: font parameter is not an instance of THREE.Font.'),new Geometry;var r=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0===t.height?50:t.height,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),ExtrudeBufferGeometry.call(this,r,t),this.type='TextBufferGeometry'}function SphereGeometry(e,t,n,r,a,o,i){Geometry.call(this),this.type='SphereGeometry',this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:i},this.fromBufferGeometry(new SphereBufferGeometry(e,t,n,r,a,o,i)),this.mergeVertices()}function SphereBufferGeometry(e,t,n,r,o,i,s){BufferGeometry.call(this),this.type='SphereBufferGeometry',this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:o,thetaStart:i,thetaLength:s},e=e||50,t=y(3,A(t)||8),n=y(2,A(n)||6),r=void 0===r?0:r,o=void 0===o?2*h:o,i=void 0===i?0:i,s=void 0===s?h:s;var l=i+s,p=0,f=[],_=new Vector3,E=new Vector3,x=[],T=[],C=[],S=[],R,F;for(F=0;F<=n;F++){var w=[],L=F/n;for(R=0;R<=t;R++){var v=R/t;_.x=-e*m(r+v*o)*g(i+L*s),_.y=e*m(i+L*s),_.z=e*g(r+v*o)*g(i+L*s),T.push(_.x,_.y,_.z),E.set(_.x,_.y,_.z).normalize(),C.push(E.x,E.y,E.z),S.push(v,1-L),w.push(p++)}f.push(w)}for(F=0;F<n;F++)for(R=0;R<t;R++){var u=f[F][R+1],a=f[F][R],b=f[F+1][R],c=f[F+1][R+1];(0!==F||0<i)&&x.push(u,a,c),(F!==n-1||l<h)&&x.push(a,b,c)}this.setIndex(x),this.addAttribute('position',new Float32BufferAttribute(T,3)),this.addAttribute('normal',new Float32BufferAttribute(C,3)),this.addAttribute('uv',new Float32BufferAttribute(S,2))}function RingGeometry(e,t,n,r,a,o){Geometry.call(this),this.type='RingGeometry',this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new RingBufferGeometry(e,t,n,r,a,o)),this.mergeVertices()}function RingBufferGeometry(e,t,n,r,o,s){BufferGeometry.call(this),this.type='RingBufferGeometry',this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:o,thetaLength:s},e=e||20,t=t||50,o=void 0===o?0:o,s=void 0===s?2*h:s,n=void 0===n?8:y(3,n),r=void 0===r?1:y(1,r);var l=[],u=[],p=[],f=[],_=e,E=(t-e)/r,x=new Vector3,A=new Vector2,T,C,v;for(C=0;C<=r;C++){for(v=0;v<=n;v++)T=o+v/n*s,x.x=_*m(T),x.y=_*g(T),u.push(x.x,x.y,x.z),p.push(0,0,1),A.x=(x.x/t+1)/2,A.y=(x.y/t+1)/2,f.push(A.x,A.y);_+=E}for(C=0;C<r;C++){var i=C*(n+1);for(v=0;v<n;v++){T=v+i;var S=T,a=T+n+1,b=T+n+2,c=T+1;l.push(S,a,c),l.push(a,b,c)}}this.setIndex(l),this.addAttribute('position',new Float32BufferAttribute(u,3)),this.addAttribute('normal',new Float32BufferAttribute(p,3)),this.addAttribute('uv',new Float32BufferAttribute(f,2))}function LatheGeometry(e,t,n,r){Geometry.call(this),this.type='LatheGeometry',this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new LatheBufferGeometry(e,t,n,r)),this.mergeVertices()}function LatheBufferGeometry(e,t,r,o){BufferGeometry.call(this),this.type='LatheBufferGeometry',this.parameters={points:e,segments:t,phiStart:r,phiLength:o},t=A(t)||12,r=r||0,o=o||2*h,o=Gt.clamp(o,0,2*h);var s=[],l=[],u=[],p=1/t,f=new Vector3,_=new Vector2,y,E,i;for(E=0;E<=t;E++){var x=r+E*p*o,T=g(x),C=m(x);for(i=0;i<=e.length-1;i++)f.x=e[i].x*T,f.y=e[i].y,f.z=e[i].x*C,l.push(f.x,f.y,f.z),_.x=E/t,_.y=i/(e.length-1),u.push(_.x,_.y)}for(E=0;E<t;E++)for(i=0;i<e.length-1;i++){y=i+E*e.length;var v=y,a=y+e.length,b=y+e.length+1,c=y+1;s.push(v,a,c),s.push(a,b,c)}if(this.setIndex(s),this.addAttribute('position',new Float32BufferAttribute(l,3)),this.addAttribute('uv',new Float32BufferAttribute(u,2)),this.computeVertexNormals(),o===2*h){var d=this.attributes.normal.array,S=new Vector3,R=new Vector3,F=new Vector3;for(y=3*(t*e.length),E=0,i=0;E<e.length;E++,i+=3)S.x=d[i+0],S.y=d[i+1],S.z=d[i+2],R.x=d[y+i+0],R.y=d[y+i+1],R.z=d[y+i+2],F.addVectors(S,R).normalize(),d[i+0]=d[y+i+0]=F.x,d[i+1]=d[y+i+1]=F.y,d[i+2]=d[y+i+2]=F.z}}function ShapeGeometry(e,t){Geometry.call(this),this.type='ShapeGeometry','object'==typeof t&&(console.warn('THREE.ShapeGeometry: Options parameter has been removed.'),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ShapeBufferGeometry(e,t)),this.mergeVertices()}function ShapeBufferGeometry(e,t){function addShape(e){var s=r.length/3,d=e.extractPoints(t),u=d.shape,p=d.holes,m,i,g;if(!1===an.isClockWise(u))for(u=u.reverse(),m=0,i=p.length;m<i;m++)g=p[m],!0===an.isClockWise(g)&&(p[m]=g.reverse());var h=an.triangulateShape(u,p);for(m=0,i=p.length;m<i;m++)g=p[m],u=u.concat(g);for(m=0,i=u.length;m<i;m++){var f=u[m];r.push(f.x,f.y,0),a.push(0,0,1),o.push(f.x,f.y)}for(m=0,i=h.length;m<i;m++){var _=h[m],y=_[0]+s,E=_[1]+s,x=_[2]+s;n.push(y,E,x),l+=3}}BufferGeometry.call(this),this.type='ShapeBufferGeometry',this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],a=[],o=[],s=0,l=0;if(!1===Array.isArray(e))addShape(e);else for(var d=0;d<e.length;d++)addShape(e[d]),this.addGroup(s,l,d),s+=l,l=0;this.setIndex(n),this.addAttribute('position',new Float32BufferAttribute(r,3)),this.addAttribute('normal',new Float32BufferAttribute(a,3)),this.addAttribute('uv',new Float32BufferAttribute(o,2))}function EdgesGeometry(t,n){BufferGeometry.call(this),this.type='EdgesGeometry',this.parameters={thresholdAngle:n},n=void 0===n?1:n;var r=[],a=m(Gt.DEG2RAD*n),o=[0,0],s={},d=['a','b','c'],c,u,p,g;t.isBufferGeometry?(g=new Geometry,g.fromBufferGeometry(t)):g=t.clone(),g.mergeVertices(),g.computeFaceNormals();for(var h=g.vertices,f=g.faces,_=0,E=f.length,l;_<E;_++){l=f[_];for(var A=0;3>A;A++)c=l[d[A]],u=l[d[(A+1)%3]],o[0]=x(c,u),o[1]=y(c,u),p=o[0]+','+o[1],void 0===s[p]?s[p]={index1:o[0],index2:o[1],face1:_,face2:void 0}:s[p].face2=_}for(p in s){var b=s[p];if(void 0===b.face2||f[b.face1].normal.dot(f[b.face2].normal)<=a){var e=h[b.index1];r.push(e.x,e.y,e.z),e=h[b.index2],r.push(e.x,e.y,e.z)}}this.addAttribute('position',new Float32BufferAttribute(r,3))}function CylinderGeometry(e,t,n,r,a,o,i,s){Geometry.call(this),this.type='CylinderGeometry',this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:i,thetaLength:s},this.fromBufferGeometry(new CylinderBufferGeometry(e,t,n,r,a,o,i,s)),this.mergeVertices()}function CylinderBufferGeometry(e,t,n,r,o,a,i,s){function generateTorso(){var h=new Vector3,A=new Vector3,T=0,C=(t-e)/n,S,x;for(x=0;x<=o;x++){var R=[],F=x/o,w=F*(t-e)+e;for(S=0;S<=r;S++){var L=S/r,M=L*s+i,I=g(M),D=m(M);A.x=w*I,A.y=-F*n+y,A.z=w*D,d.push(A.x,A.y,A.z),h.set(I,C,D).normalize(),c.push(h.x,h.y,h.z),p.push(L,1-F),R.push(f++)}_.push(R)}for(S=0;S<r;S++)for(x=0;x<o;x++){var B=_[x][S],a=_[x+1][S],b=_[x+1][S+1],N=_[x][S+1];u.push(B,a,N),u.push(a,b,N),T+=6}l.addGroup(E,T,0),E+=T}function generateCap(n){var a=new Vector2,o=new Vector3,h=0,_=!0===n?e:t,A=!0===n?1:-1,b,x,T;for(x=f,b=1;b<=r;b++)d.push(0,y*A,0),c.push(0,A,0),p.push(.5,.5),f++;for(T=f,b=0;b<=r;b++){var C=b/r,v=C*s+i,S=m(v),R=g(v);o.x=_*R,o.y=y*A,o.z=_*S,d.push(o.x,o.y,o.z),c.push(0,A,0),a.x=.5*S+.5,a.y=.5*R*A+.5,p.push(a.x,a.y),f++}for(b=0;b<r;b++){var F=x+b,w=T+b;!0===n?u.push(w,w+1,F):u.push(w+1,w,F),h+=3}l.addGroup(E,h,!0===n?1:2),E+=h}BufferGeometry.call(this),this.type='CylinderBufferGeometry',this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:o,openEnded:a,thetaStart:i,thetaLength:s};var l=this;e=void 0===e?20:e,t=void 0===t?20:t,n=void 0===n?100:n,r=A(r)||8,o=A(o)||1,a=void 0!==a&&a,i=void 0===i?0:i,s=void 0===s?2*h:s;var u=[],d=[],c=[],p=[],f=0,_=[],y=n/2,E=0;generateTorso(),!1===a&&(0<e&&generateCap(!0),0<t&&generateCap(!1)),this.setIndex(u),this.addAttribute('position',new Float32BufferAttribute(d,3)),this.addAttribute('normal',new Float32BufferAttribute(c,3)),this.addAttribute('uv',new Float32BufferAttribute(p,2))}function ConeGeometry(e,t,n,r,a,o,i){CylinderGeometry.call(this,0,e,t,n,r,a,o,i),this.type='ConeGeometry',this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:i}}function ConeBufferGeometry(e,t,n,r,a,o,i){CylinderBufferGeometry.call(this,0,e,t,n,r,a,o,i),this.type='ConeBufferGeometry',this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:i}}function CircleGeometry(e,t,n,r){Geometry.call(this),this.type='CircleGeometry',this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new CircleBufferGeometry(e,t,n,r)),this.mergeVertices()}function CircleBufferGeometry(e,t,n,r){BufferGeometry.call(this),this.type='CircleBufferGeometry',this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||50,t=void 0===t?8:y(3,t),n=void 0===n?0:n,r=void 0===r?2*h:r;var a=[],o=[],l=[],d=[],c=new Vector3,u=new Vector2,p,i;for(o.push(0,0,0),l.push(0,0,1),d.push(.5,.5),(i=0,p=3);i<=t;i++,p+=3){var s=n+i/t*r;c.x=e*m(s),c.y=e*g(s),o.push(c.x,c.y,c.z),l.push(0,0,1),u.x=(o[p]/e+1)/2,u.y=(o[p+1]/e+1)/2,d.push(u.x,u.y)}for(p=1;p<=t;p++)a.push(p,p+1,0);this.setIndex(a),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('normal',new Float32BufferAttribute(l,3)),this.addAttribute('uv',new Float32BufferAttribute(d,2))}function ShadowMaterial(e){Material.call(this),this.type='ShadowMaterial',this.color=new Color(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(e)}function RawShaderMaterial(e){ShaderMaterial.call(this,e),this.type='RawShaderMaterial'}function MeshStandardMaterial(e){Material.call(this),this.defines={STANDARD:''},this.type='MeshStandardMaterial',this.color=new Color(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshPhysicalMaterial(e){MeshStandardMaterial.call(this),this.defines={PHYSICAL:''},this.type='MeshPhysicalMaterial',this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function MeshPhongMaterial(e){Material.call(this),this.type='MeshPhongMaterial',this.color=new Color(16777215),this.specular=new Color(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshToonMaterial(e){MeshPhongMaterial.call(this),this.defines={TOON:''},this.type='MeshToonMaterial',this.gradientMap=null,this.setValues(e)}function MeshNormalMaterial(e){Material.call(this),this.type='MeshNormalMaterial',this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function MeshLambertMaterial(e){Material.call(this),this.type='MeshLambertMaterial',this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ye,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap='round',this.wireframeLinejoin='round',this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function LineDashedMaterial(e){LineBasicMaterial.call(this),this.type='LineDashedMaterial',this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function LoadingManager(e,t,n){var r=this,a=!1,o=0,i=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){i++,!1==a&&void 0!==r.onStart&&r.onStart(e,o,i),a=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,i),o==i&&(a=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)}}function FileLoader(e){this.manager=void 0===e?dn:e}function CompressedTextureLoader(e){this.manager=void 0===e?dn:e,this._parser=null}function DataTextureLoader(e){this.manager=void 0===e?dn:e,this._parser=null}function ImageLoader(e){this.manager=void 0===e?dn:e}function CubeTextureLoader(e){this.manager=void 0===e?dn:e}function TextureLoader(e){this.manager=void 0===e?dn:e}function Light(e,t){Object3D.call(this),this.type='Light',this.color=new Color(e),this.intensity=void 0===t?1:t,this.receiveShadow=void 0}function HemisphereLight(e,t,n){Light.call(this,e,n),this.type='HemisphereLight',this.castShadow=void 0,this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.groundColor=new Color(t)}function LightShadow(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Vector2(512,512),this.map=null,this.matrix=new Matrix4}function SpotLightShadow(){LightShadow.call(this,new PerspectiveCamera(50,1,.5,500))}function SpotLight(e,t,n,r,a,o){Light.call(this,e,t),this.type='SpotLight',this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,Object.defineProperty(this,'power',{get:function(){return this.intensity*h},set:function(e){this.intensity=e/h}}),this.distance=void 0===n?0:n,this.angle=void 0===r?h/3:r,this.penumbra=void 0===a?0:a,this.decay=void 0===o?1:o,this.shadow=new SpotLightShadow}function PointLight(e,t,n,r){Light.call(this,e,t),this.type='PointLight',Object.defineProperty(this,'power',{get:function(){return 4*this.intensity*h},set:function(e){this.intensity=e/(4*h)}}),this.distance=void 0===n?0:n,this.decay=void 0===r?1:r,this.shadow=new LightShadow(new PerspectiveCamera(90,1,.5,500))}function DirectionalLightShadow(){LightShadow.call(this,new OrthographicCamera(-5,5,5,-5,.5,500))}function DirectionalLight(e,t){Light.call(this,e,t),this.type='DirectionalLight',this.position.copy(Object3D.DefaultUp),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}function AmbientLight(e,t){Light.call(this,e,t),this.type='AmbientLight',this.castShadow=void 0}function RectAreaLight(e,t,n,r){Light.call(this,e,t),this.type='RectAreaLight',this.position.set(0,1,0),this.updateMatrix(),this.width=void 0===n?10:n,this.height=void 0===r?10:r}function Interpolant(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0===r?new t.constructor(n):r,this.sampleValues=t,this.valueSize=n}function CubicInterpolant(e,t,n,r){Interpolant.call(this,e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function LinearInterpolant(e,t,n,r){Interpolant.call(this,e,t,n,r)}function DiscreteInterpolant(e,t,n,r){Interpolant.call(this,e,t,n,r)}function KeyframeTrackConstructor(e,t,n,r){if(void 0===e)throw new Error('track name is undefined');if(void 0===t||0===t.length)throw new Error('no keyframes in track named '+e);this.name=e,this.times=cn.convertArray(t,this.TimeBufferType),this.values=cn.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}function VectorKeyframeTrack(e,t,n,r){KeyframeTrackConstructor.call(this,e,t,n,r)}function QuaternionLinearInterpolant(e,t,n,r){Interpolant.call(this,e,t,n,r)}function QuaternionKeyframeTrack(e,t,n,r){KeyframeTrackConstructor.call(this,e,t,n,r)}function NumberKeyframeTrack(e,t,n,r){KeyframeTrackConstructor.call(this,e,t,n,r)}function StringKeyframeTrack(e,t,n,r){KeyframeTrackConstructor.call(this,e,t,n,r)}function BooleanKeyframeTrack(e,t,n){KeyframeTrackConstructor.call(this,e,t,n)}function ColorKeyframeTrack(e,t,n,r){KeyframeTrackConstructor.call(this,e,t,n,r)}function KeyframeTrack(){KeyframeTrackConstructor.apply(this,arguments)}function AnimationClip(e,t,n){this.name=e,this.tracks=n,this.duration=void 0===t?-1:t,this.uuid=Gt.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function MaterialLoader(e){this.manager=void 0===e?dn:e,this.textures={}}function BufferGeometryLoader(e){this.manager=void 0===e?dn:e}function Loader(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function JSONLoader(e){'boolean'==typeof e&&(console.warn('THREE.JSONLoader: showStatus parameter has been removed from constructor.'),e=void 0),this.manager=void 0===e?dn:e,this.withCredentials=!1}function ObjectLoader(e){this.manager=void 0===e?dn:e,this.texturePath=''}function CatmullRom(e,t,n,r,a){var o=.5*(r-t),i=.5*(a-n),s=e*e;return(2*n-2*r+o+i)*(e*s)+(-3*n+3*r-2*o-i)*s+o*e+n}function QuadraticBezierP0(e,t){var n=1-e;return n*n*t}function QuadraticBezierP1(e,t){return 2*(1-e)*e*t}function QuadraticBezierP2(e,t){return e*e*t}function QuadraticBezier(e,t,n,r){return QuadraticBezierP0(e,t)+QuadraticBezierP1(e,n)+QuadraticBezierP2(e,r)}function CubicBezierP0(e,t){var n=1-e;return n*n*n*t}function CubicBezierP1(e,t){var n=1-e;return 3*n*n*e*t}function CubicBezierP2(e,t){return 3*(1-e)*e*e*t}function CubicBezierP3(e,t){return e*e*e*t}function CubicBezier(e,t,n,r,a){return CubicBezierP0(e,t)+CubicBezierP1(e,n)+CubicBezierP2(e,r)+CubicBezierP3(e,a)}function Curve(){this.arcLengthDivisions=200}function LineCurve(e,t){Curve.call(this),this.v1=e,this.v2=t}function CurvePath(){Curve.call(this),this.curves=[],this.autoClose=!1}function EllipseCurve(e,t,n,r,a,o,i,s){Curve.call(this),this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=a,this.aEndAngle=o,this.aClockwise=i,this.aRotation=s||0}function SplineCurve(e){Curve.call(this),this.points=void 0===e?[]:e}function CubicBezierCurve(e,t,n,r){Curve.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}function QuadraticBezierCurve(e,t,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=n}function Path(e){CurvePath.call(this),this.currentPoint=new Vector2,e&&this.fromPoints(e)}function Shape(){Path.apply(this,arguments),this.holes=[]}function ShapePath(){this.subPaths=[],this.currentPath=null}function Font(e){this.data=e}function FontLoader(e){this.manager=void 0===e?dn:e}function AudioLoader(e){this.manager=void 0===e?dn:e}function StereoCamera(){this.type='StereoCamera',this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function CubeCamera(e,t,n){Object3D.call(this),this.type='CubeCamera';var r=90,a=1,o=new PerspectiveCamera(r,a,e,t);o.up.set(0,-1,0),o.lookAt(new Vector3(1,0,0)),this.add(o);var i=new PerspectiveCamera(r,a,e,t);i.up.set(0,-1,0),i.lookAt(new Vector3(-1,0,0)),this.add(i);var s=new PerspectiveCamera(r,a,e,t);s.up.set(0,0,1),s.lookAt(new Vector3(0,1,0)),this.add(s);var l=new PerspectiveCamera(r,a,e,t);l.up.set(0,0,-1),l.lookAt(new Vector3(0,-1,0)),this.add(l);var d=new PerspectiveCamera(r,a,e,t);d.up.set(0,-1,0),d.lookAt(new Vector3(0,0,1)),this.add(d);var c=new PerspectiveCamera(r,a,e,t);c.up.set(0,-1,0),c.lookAt(new Vector3(0,0,-1)),this.add(c);this.renderTarget=new WebGLRenderTargetCube(n,n,{format:nt,magFilter:Ge,minFilter:Ge}),this.renderTarget.texture.name='CubeCamera',this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,o,n),n.activeCubeFace=1,e.render(t,i,n),n.activeCubeFace=2,e.render(t,s,n),n.activeCubeFace=3,e.render(t,l,n),n.activeCubeFace=4,e.render(t,d,n),n.texture.generateMipmaps=r,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,r){for(var a=this.renderTarget,o=0;6>o;o++)a.activeCubeFace=o,e.setRenderTarget(a),e.clear(t,n,r);e.setRenderTarget(null)}}function AudioListener(){Object3D.call(this),this.type='AudioListener',this.context=_n.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Audio(e){Object3D.call(this),this.type='Audio',this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType='empty',this.filters=[]}function PositionalAudio(e){Audio.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function AudioAnalyser(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0===t?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function PropertyMixer(e,t,n){this.binding=e,this.valueSize=n;var r=Float64Array,a;'quaternion'===t?a=this._slerp:'string'===t||'bool'===t?(r=Array,a=this._select):a=this._lerp,this.buffer=new r(4*n),this._mixBufferRegion=a,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Composite(e,t,n){var r=n||PropertyBinding.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}function PropertyBinding(e,t,n){this.path=t,this.parsedPath=n||PropertyBinding.parseTrackName(t),this.node=PropertyBinding.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function AnimationObjectGroup(){this.uuid=Gt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function AnimationAction(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,a=r.length,o=Array(a),s={endingStart:Ct,endingEnd:Ct},l=0,i;l!==a;++l)i=r[l].createInterpolant(null),o[l]=i,i.settings=s;this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Et,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=Infinity,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function AnimationMixer(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Uniform(e){'string'==typeof e&&(console.warn('THREE.Uniform: Type parameter is no longer needed.'),e=arguments[1]),this.value=e}function InstancedBufferGeometry(){BufferGeometry.call(this),this.type='InstancedBufferGeometry',this.maxInstancedCount=void 0}function InterleavedBufferAttribute(e,t,n,r){this.uuid=Gt.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}function InterleavedBuffer(e,t){this.uuid=Gt.generateUUID(),this.array=e,this.stride=t,this.count=void 0===e?0:e.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function InstancedInterleavedBuffer(e,t,n){InterleavedBuffer.call(this,e,t),this.meshPerAttribute=n||1}function InstancedBufferAttribute(e,t,n){BufferAttribute.call(this,e,t),this.meshPerAttribute=n||1}function Raycaster(e,t,n,r){this.ray=new Ray(e,t),this.near=n||0,this.far=r||Infinity,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn('THREE.Raycaster: params.PointCloud has been renamed to params.Points.'),this.Points}}})}function ascSort(e,t){return e.distance-t.distance}function intersectObject(e,t,n,r){if(!1!==e.visible&&(e.raycast(t,n),!0===r))for(var a=e.children,o=0,i=a.length;o<i;o++)intersectObject(a[o],t,n,!0)}function Clock(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Spherical(e,t,n){return this.radius=void 0===e?1:e,this.phi=void 0===t?0:t,this.theta=void 0===n?0:n,this}function Cylindrical(e,t,n){return this.radius=void 0===e?1:e,this.theta=void 0===t?0:t,this.y=void 0===n?0:n,this}function ImmediateRenderObject(e){Object3D.call(this),this.material=e,this.render=function(){}}function VertexNormalsHelper(e,t,n,r){this.object=e,this.size=void 0===t?1:t;var a=void 0===n?16711680:n,o=void 0===r?1:r,i=0,s=this.object.geometry;s&&s.isGeometry?i=3*s.faces.length:s&&s.isBufferGeometry&&(i=s.attributes.normal.count);var l=new BufferGeometry,d=new Float32BufferAttribute(3*(2*i),3);l.addAttribute('position',d),LineSegments.call(this,l,new LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function SpotLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new BufferGeometry,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],a=0,o=1,i=32;a<i;a++,o++){var s=2*(a/i*h),l=2*(o/i*h);r.push(m(s),g(s),1,m(l),g(l),1)}n.addAttribute('position',new Float32BufferAttribute(r,3));var d=new LineBasicMaterial({fog:!1});this.cone=new LineSegments(n,d),this.add(this.cone),this.update()}function getBoneList(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,getBoneList(e.children[n]));return t}function SkeletonHelper(e){for(var t=getBoneList(e),n=new BufferGeometry,r=[],a=[],o=new Color(0,0,1),s=new Color(0,1,0),l=0,i;l<t.length;l++)i=t[l],i.parent&&i.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),a.push(o.r,o.g,o.b),a.push(s.r,s.g,s.b));n.addAttribute('position',new Float32BufferAttribute(r,3)),n.addAttribute('color',new Float32BufferAttribute(a,3));var d=new LineBasicMaterial({vertexColors:V,depthTest:!1,depthWrite:!1,transparent:!0});LineSegments.call(this,n,d),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function PointLightHelper(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var r=new SphereBufferGeometry(t,4,2),a=new MeshBasicMaterial({wireframe:!0,fog:!1});Mesh.call(this,r,a),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function RectAreaLightHelper(e,t){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new LineBasicMaterial({fog:!1}),r=new BufferGeometry;r.addAttribute('position',new BufferAttribute(new Float32Array(15),3)),this.line=new Line(r,n),this.add(this.line),this.update()}function HemisphereLightHelper(e,t,n){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new OctahedronBufferGeometry(t);r.rotateY(.5*h),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=V);var a=r.getAttribute('position'),o=new Float32Array(3*a.count);r.addAttribute('color',new BufferAttribute(o,3)),this.add(new Mesh(r,this.material)),this.update()}function GridHelper(e,t,n,r){e=e||10,t=t||10,n=new Color(void 0===n?4473924:n),r=new Color(void 0===r?8947848:r);for(var a=t/2,o=e/t,s=e/2,l=[],d=[],c=0,i=0,u=-s;c<=t;c++,u+=o){l.push(-s,0,u,s,0,u),l.push(u,0,-s,u,0,s);var p=c===a?n:r;p.toArray(d,i),i+=3,p.toArray(d,i),i+=3,p.toArray(d,i),i+=3,p.toArray(d,i),i+=3}var m=new BufferGeometry;m.addAttribute('position',new Float32BufferAttribute(l,3)),m.addAttribute('color',new Float32BufferAttribute(d,3));var g=new LineBasicMaterial({vertexColors:V});LineSegments.call(this,m,g)}function PolarGridHelper(e,t,n,a,o,s){e=e||10,t=t||16,n=n||8,a=a||64,o=new Color(void 0===o?4473924:o),s=new Color(void 0===s?8947848:s);var l=[],d=[],c,u,p,f,i,_,r;for(f=0;f<=t;f++)p=f/t*(2*h),c=g(p)*e,u=m(p)*e,l.push(0,0,0),l.push(c,0,u),r=1&f?o:s,d.push(r.r,r.g,r.b),d.push(r.r,r.g,r.b);for(f=0;f<=n;f++)for(r=1&f?o:s,_=e-e/n*f,i=0;i<a;i++)p=i/a*(2*h),c=g(p)*_,u=m(p)*_,l.push(c,0,u),d.push(r.r,r.g,r.b),p=(i+1)/a*(2*h),c=g(p)*_,u=m(p)*_,l.push(c,0,u),d.push(r.r,r.g,r.b);var y=new BufferGeometry;y.addAttribute('position',new Float32BufferAttribute(l,3)),y.addAttribute('color',new Float32BufferAttribute(d,3));var E=new LineBasicMaterial({vertexColors:V});LineSegments.call(this,y,E)}function FaceNormalsHelper(e,t,n,r){this.object=e,this.size=void 0===t?1:t;var a=void 0===n?16776960:n,o=void 0===r?1:r,i=0,s=this.object.geometry;s&&s.isGeometry?i=s.faces.length:console.warn('THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.');var l=new BufferGeometry,d=new Float32BufferAttribute(3*(2*i),3);l.addAttribute('position',d),LineSegments.call(this,l,new LineBasicMaterial({color:a,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function DirectionalLightHelper(e,t,n){Object3D.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var r=new BufferGeometry;r.addAttribute('position',new Float32BufferAttribute([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var a=new LineBasicMaterial({fog:!1});this.lightPlane=new Line(r,a),this.add(this.lightPlane),r=new BufferGeometry,r.addAttribute('position',new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line(r,a),this.add(this.targetLine),this.update()}function CameraHelper(e){function addLine(e,t,n){addPoint(e,n),addPoint(t,n)}function addPoint(e,t){r.push(0,0,0),a.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}var t=new BufferGeometry,n=new LineBasicMaterial({color:16777215,vertexColors:G}),r=[],a=[],o={},i=new Color(16755200),s=new Color(16711680),l=new Color(43775),d=new Color(16777215),c=new Color(3355443);addLine('n1','n2',i),addLine('n2','n4',i),addLine('n4','n3',i),addLine('n3','n1',i),addLine('f1','f2',i),addLine('f2','f4',i),addLine('f4','f3',i),addLine('f3','f1',i),addLine('n1','f1',i),addLine('n2','f2',i),addLine('n3','f3',i),addLine('n4','f4',i),addLine('p','n1',s),addLine('p','n2',s),addLine('p','n3',s),addLine('p','n4',s),addLine('u1','u2',l),addLine('u2','u3',l),addLine('u3','u1',l),addLine('c','t',d),addLine('p','c',c),addLine('cn1','cn2',c),addLine('cn3','cn4',c),addLine('cf1','cf2',c),addLine('cf3','cf4',c),t.addAttribute('position',new Float32BufferAttribute(r,3)),t.addAttribute('color',new Float32BufferAttribute(a,3)),LineSegments.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function BoxHelper(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),a=new BufferGeometry;a.setIndex(new BufferAttribute(n,1)),a.addAttribute('position',new BufferAttribute(r,3)),LineSegments.call(this,a,new LineBasicMaterial({color:t})),this.matrixAutoUpdate=!1,this.update()}function Box3Helper(e,t){this.type='Box3Helper',this.box=e;var n=void 0===t?16776960:t,r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),a=new BufferGeometry;a.setIndex(new BufferAttribute(r,1)),a.addAttribute('position',new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),LineSegments.call(this,a,new LineBasicMaterial({color:n})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function PlaneHelper(e,t,n){this.type='PlaneHelper',this.plane=e,this.size=void 0===t?1:t;var r=void 0===n?16776960:n,a=new BufferGeometry;a.addAttribute('position',new Float32BufferAttribute([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),a.computeBoundingSphere(),Line.call(this,a,new LineBasicMaterial({color:r}));var o=new BufferGeometry;o.addAttribute('position',new Float32BufferAttribute([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new Mesh(o,new MeshBasicMaterial({color:r,opacity:.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function ArrowHelper(e,t,n,r,a,o){Object3D.call(this),void 0===r&&(r=16776960),void 0===n&&(n=1),void 0===a&&(a=.2*n),void 0===o&&(o=.2*a),void 0===En&&(En=new BufferGeometry,En.addAttribute('position',new Float32BufferAttribute([0,0,0,0,1,0],3)),xn=new CylinderBufferGeometry(0,.5,1,5,1),xn.translate(0,-.5,0)),this.position.copy(t),this.line=new Line(En,new LineBasicMaterial({color:r})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(xn,new MeshBasicMaterial({color:r})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,a,o)}function AxisHelper(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new BufferGeometry;n.addAttribute('position',new Float32BufferAttribute(t,3)),n.addAttribute('color',new Float32BufferAttribute([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new LineBasicMaterial({vertexColors:V});LineSegments.call(this,n,r)}function CubicPoly(){function init(t,o,i,s){e=t,n=i,r=-3*t+3*o-2*i-s,a=2*t-2*o+i+s}var e=0,n=0,r=0,a=0;return{initCatmullRom:function(e,t,n,r,a){init(t,n,a*(n-e),a*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,a,o,i){var s=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+i)+(r-n)/i;s*=o,l*=o,init(t,n,s,l)},calc:function(o){var t=o*o;return e+n*o+r*t+a*(t*o)}}}function CatmullRomCurve3(e){Curve.call(this),2>e.length&&console.warn('THREE.CatmullRomCurve3: Points array needs at least two entries.'),this.points=e||[],this.closed=!1}function CubicBezierCurve3(e,t,n,r){Curve.call(this),this.v0=e,this.v1=t,this.v2=n,this.v3=r}function QuadraticBezierCurve3(e,t,n){Curve.call(this),this.v0=e,this.v1=t,this.v2=n}function LineCurve3(e,t){Curve.call(this),this.v1=e,this.v2=t}function ArcCurve(e,t,n,r,a,o){EllipseCurve.call(this,e,t,n,n,r,a,o)}function Face4(e,t,n,r,a,o,i){return console.warn('THREE.Face4 has been removed. A THREE.Face3 will be created instead.'),new Face3(e,t,n,a,o,i)}function MeshFaceMaterial(e){return console.warn('THREE.MeshFaceMaterial has been removed. Use an Array instead.'),e}function MultiMaterial(e){return void 0===e&&(e=[]),console.warn('THREE.MultiMaterial has been removed. Use an Array instead.'),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function PointCloud(e,t){return console.warn('THREE.PointCloud has been renamed to THREE.Points.'),new Points(e,t)}function Particle(e){return console.warn('THREE.Particle has been renamed to THREE.Sprite.'),new Sprite(e)}function ParticleSystem(e,t){return console.warn('THREE.ParticleSystem has been renamed to THREE.Points.'),new Points(e,t)}function PointCloudMaterial(e){return console.warn('THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function ParticleBasicMaterial(e){return console.warn('THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function ParticleSystemMaterial(e){return console.warn('THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.'),new PointsMaterial(e)}function Vertex(e,t,n){return console.warn('THREE.Vertex has been removed. Use THREE.Vector3 instead.'),new Vector3(e,t,n)}function DynamicBufferAttribute(e,t){return console.warn('THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead.'),new BufferAttribute(e,t).setDynamic(!0)}function Int8Attribute(e,t){return console.warn('THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.'),new Int8BufferAttribute(e,t)}function Uint8Attribute(e,t){return console.warn('THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.'),new Uint8BufferAttribute(e,t)}function Uint8ClampedAttribute(e,t){return console.warn('THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.'),new Uint8ClampedBufferAttribute(e,t)}function Int16Attribute(e,t){return console.warn('THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.'),new Int16BufferAttribute(e,t)}function Uint16Attribute(e,t){return console.warn('THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.'),new Uint16BufferAttribute(e,t)}function Int32Attribute(e,t){return console.warn('THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.'),new Int32BufferAttribute(e,t)}function Uint32Attribute(e,t){return console.warn('THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.'),new Uint32BufferAttribute(e,t)}function Float32Attribute(e,t){return console.warn('THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.'),new Float32BufferAttribute(e,t)}function Float64Attribute(e,t){return console.warn('THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.'),new Float64BufferAttribute(e,t)}function ClosedSplineCurve3(e){console.warn('THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom',this.closed=!0}function SplineCurve3(e){console.warn('THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom'}function Spline(e){console.warn('THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.'),CatmullRomCurve3.call(this,e),this.type='catmullrom'}function BoundingBoxHelper(e,t){return console.warn('THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.'),new BoxHelper(e,t)}function EdgesHelper(e,t){return console.warn('THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.'),new LineSegments(new EdgesGeometry(e.geometry),new LineBasicMaterial({color:void 0===t?16777215:t}))}function WireframeHelper(e,t){return console.warn('THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.'),new LineSegments(new WireframeGeometry(e.geometry),new LineBasicMaterial({color:void 0===t?16777215:t}))}function XHRLoader(e){return console.warn('THREE.XHRLoader has been renamed to THREE.FileLoader.'),new FileLoader(e)}function BinaryTextureLoader(e){return console.warn('THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.'),new DataTextureLoader(e)}function Projector(){console.error('THREE.Projector has been moved to /examples/js/renderers/Projector.js.'),this.projectVector=function(e,t){console.warn('THREE.Projector: .projectVector() is now vector.project().'),e.project(t)},this.unprojectVector=function(e,t){console.warn('THREE.Projector: .unprojectVector() is now vector.unproject().'),e.unproject(t)},this.pickingRay=function(){console.error('THREE.Projector: .pickingRay() is now raycaster.setFromCamera().')}}function CanvasRenderer(){console.error('THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js'),this.domElement=document.createElementNS('http://www.w3.org/1999/xhtml','canvas'),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var r=Math.atan,a=Math.atan2,o=Math.LN2,s=Math.sign,l=Number.EPSILON,i=Number.isInteger,d=Math.ceil,c=Math.acos,u=Math.tan,p=Math.sqrt,m=Math.cos,g=Math.sin,h=Math.PI,f=Math.pow,_=Math.log,E=Math.abs,y=Math.max,x=Math.min,A=Math.floor,b=Math.round;n.r(t),n.d(t,'WebGLRenderTargetCube',function(){return WebGLRenderTargetCube}),n.d(t,'WebGLRenderTarget',function(){return WebGLRenderTarget}),n.d(t,'WebGLRenderer',function(){return WebGLRenderer}),n.d(t,'ShaderLib',function(){return Jt}),n.d(t,'UniformsLib',function(){return qt}),n.d(t,'UniformsUtils',function(){return Zt}),n.d(t,'ShaderChunk',function(){return Qt}),n.d(t,'FogExp2',function(){return FogExp2}),n.d(t,'Fog',function(){return Fog}),n.d(t,'Scene',function(){return Scene}),n.d(t,'LensFlare',function(){return LensFlare}),n.d(t,'Sprite',function(){return Sprite}),n.d(t,'LOD',function(){return LOD}),n.d(t,'SkinnedMesh',function(){return SkinnedMesh}),n.d(t,'Skeleton',function(){return Skeleton}),n.d(t,'Bone',function(){return Bone}),n.d(t,'Mesh',function(){return Mesh}),n.d(t,'LineSegments',function(){return LineSegments}),n.d(t,'LineLoop',function(){return LineLoop}),n.d(t,'Line',function(){return Line}),n.d(t,'Points',function(){return Points}),n.d(t,'Group',function(){return Group}),n.d(t,'VideoTexture',function(){return VideoTexture}),n.d(t,'DataTexture',function(){return DataTexture}),n.d(t,'CompressedTexture',function(){return CompressedTexture}),n.d(t,'CubeTexture',function(){return CubeTexture}),n.d(t,'CanvasTexture',function(){return CanvasTexture}),n.d(t,'DepthTexture',function(){return DepthTexture}),n.d(t,'Texture',function(){return Texture}),n.d(t,'CompressedTextureLoader',function(){return CompressedTextureLoader}),n.d(t,'DataTextureLoader',function(){return DataTextureLoader}),n.d(t,'CubeTextureLoader',function(){return CubeTextureLoader}),n.d(t,'TextureLoader',function(){return TextureLoader}),n.d(t,'ObjectLoader',function(){return ObjectLoader}),n.d(t,'MaterialLoader',function(){return MaterialLoader}),n.d(t,'BufferGeometryLoader',function(){return BufferGeometryLoader}),n.d(t,'DefaultLoadingManager',function(){return dn}),n.d(t,'LoadingManager',function(){return LoadingManager}),n.d(t,'JSONLoader',function(){return JSONLoader}),n.d(t,'ImageLoader',function(){return ImageLoader}),n.d(t,'FontLoader',function(){return FontLoader}),n.d(t,'FileLoader',function(){return FileLoader}),n.d(t,'Loader',function(){return Loader}),n.d(t,'Cache',function(){return ln}),n.d(t,'AudioLoader',function(){return AudioLoader}),n.d(t,'SpotLightShadow',function(){return SpotLightShadow}),n.d(t,'SpotLight',function(){return SpotLight}),n.d(t,'PointLight',function(){return PointLight}),n.d(t,'RectAreaLight',function(){return RectAreaLight}),n.d(t,'HemisphereLight',function(){return HemisphereLight}),n.d(t,'DirectionalLightShadow',function(){return DirectionalLightShadow}),n.d(t,'DirectionalLight',function(){return DirectionalLight}),n.d(t,'AmbientLight',function(){return AmbientLight}),n.d(t,'LightShadow',function(){return LightShadow}),n.d(t,'Light',function(){return Light}),n.d(t,'StereoCamera',function(){return StereoCamera}),n.d(t,'PerspectiveCamera',function(){return PerspectiveCamera}),n.d(t,'OrthographicCamera',function(){return OrthographicCamera}),n.d(t,'CubeCamera',function(){return CubeCamera}),n.d(t,'ArrayCamera',function(){return ArrayCamera}),n.d(t,'Camera',function(){return Camera}),n.d(t,'AudioListener',function(){return AudioListener}),n.d(t,'PositionalAudio',function(){return PositionalAudio}),n.d(t,'AudioContext',function(){return _n}),n.d(t,'AudioAnalyser',function(){return AudioAnalyser}),n.d(t,'Audio',function(){return Audio}),n.d(t,'VectorKeyframeTrack',function(){return VectorKeyframeTrack}),n.d(t,'StringKeyframeTrack',function(){return StringKeyframeTrack}),n.d(t,'QuaternionKeyframeTrack',function(){return QuaternionKeyframeTrack}),n.d(t,'NumberKeyframeTrack',function(){return NumberKeyframeTrack}),n.d(t,'ColorKeyframeTrack',function(){return ColorKeyframeTrack}),n.d(t,'BooleanKeyframeTrack',function(){return BooleanKeyframeTrack}),n.d(t,'PropertyMixer',function(){return PropertyMixer}),n.d(t,'PropertyBinding',function(){return PropertyBinding}),n.d(t,'KeyframeTrack',function(){return KeyframeTrack}),n.d(t,'AnimationUtils',function(){return cn}),n.d(t,'AnimationObjectGroup',function(){return AnimationObjectGroup}),n.d(t,'AnimationMixer',function(){return AnimationMixer}),n.d(t,'AnimationClip',function(){return AnimationClip}),n.d(t,'Uniform',function(){return Uniform}),n.d(t,'InstancedBufferGeometry',function(){return InstancedBufferGeometry}),n.d(t,'BufferGeometry',function(){return BufferGeometry}),n.d(t,'GeometryIdCount',function(){return GeometryIdCount}),n.d(t,'Geometry',function(){return Geometry}),n.d(t,'InterleavedBufferAttribute',function(){return InterleavedBufferAttribute}),n.d(t,'InstancedInterleavedBuffer',function(){return InstancedInterleavedBuffer}),n.d(t,'InterleavedBuffer',function(){return InterleavedBuffer}),n.d(t,'InstancedBufferAttribute',function(){return InstancedBufferAttribute}),n.d(t,'Face3',function(){return Face3}),n.d(t,'Object3D',function(){return Object3D}),n.d(t,'Raycaster',function(){return Raycaster}),n.d(t,'Layers',function(){return Layers}),n.d(t,'EventDispatcher',function(){return EventDispatcher}),n.d(t,'Clock',function(){return Clock}),n.d(t,'QuaternionLinearInterpolant',function(){return QuaternionLinearInterpolant}),n.d(t,'LinearInterpolant',function(){return LinearInterpolant}),n.d(t,'DiscreteInterpolant',function(){return DiscreteInterpolant}),n.d(t,'CubicInterpolant',function(){return CubicInterpolant}),n.d(t,'Interpolant',function(){return Interpolant}),n.d(t,'Triangle',function(){return Triangle}),n.d(t,'Math',function(){return Gt}),n.d(t,'Spherical',function(){return Spherical}),n.d(t,'Cylindrical',function(){return Cylindrical}),n.d(t,'Plane',function(){return Plane}),n.d(t,'Frustum',function(){return Frustum}),n.d(t,'Sphere',function(){return Sphere}),n.d(t,'Ray',function(){return Ray}),n.d(t,'Matrix4',function(){return Matrix4}),n.d(t,'Matrix3',function(){return Matrix3}),n.d(t,'Box3',function(){return Box3}),n.d(t,'Box2',function(){return Box2}),n.d(t,'Line3',function(){return Line3}),n.d(t,'Euler',function(){return Euler}),n.d(t,'Vector4',function(){return Vector4}),n.d(t,'Vector3',function(){return Vector3}),n.d(t,'Vector2',function(){return Vector2}),n.d(t,'Quaternion',function(){return Quaternion}),n.d(t,'Color',function(){return Color}),n.d(t,'ImmediateRenderObject',function(){return ImmediateRenderObject}),n.d(t,'VertexNormalsHelper',function(){return VertexNormalsHelper}),n.d(t,'SpotLightHelper',function(){return SpotLightHelper}),n.d(t,'SkeletonHelper',function(){return SkeletonHelper}),n.d(t,'PointLightHelper',function(){return PointLightHelper}),n.d(t,'RectAreaLightHelper',function(){return RectAreaLightHelper}),n.d(t,'HemisphereLightHelper',function(){return HemisphereLightHelper}),n.d(t,'GridHelper',function(){return GridHelper}),n.d(t,'PolarGridHelper',function(){return PolarGridHelper}),n.d(t,'FaceNormalsHelper',function(){return FaceNormalsHelper}),n.d(t,'DirectionalLightHelper',function(){return DirectionalLightHelper}),n.d(t,'CameraHelper',function(){return CameraHelper}),n.d(t,'BoxHelper',function(){return BoxHelper}),n.d(t,'Box3Helper',function(){return Box3Helper}),n.d(t,'PlaneHelper',function(){return PlaneHelper}),n.d(t,'ArrowHelper',function(){return ArrowHelper}),n.d(t,'AxisHelper',function(){return AxisHelper}),n.d(t,'CatmullRomCurve3',function(){return CatmullRomCurve3}),n.d(t,'CubicBezierCurve3',function(){return CubicBezierCurve3}),n.d(t,'QuadraticBezierCurve3',function(){return QuadraticBezierCurve3}),n.d(t,'LineCurve3',function(){return LineCurve3}),n.d(t,'ArcCurve',function(){return ArcCurve}),n.d(t,'EllipseCurve',function(){return EllipseCurve}),n.d(t,'SplineCurve',function(){return SplineCurve}),n.d(t,'CubicBezierCurve',function(){return CubicBezierCurve}),n.d(t,'QuadraticBezierCurve',function(){return QuadraticBezierCurve}),n.d(t,'LineCurve',function(){return LineCurve}),n.d(t,'Shape',function(){return Shape}),n.d(t,'Path',function(){return Path}),n.d(t,'ShapePath',function(){return ShapePath}),n.d(t,'Font',function(){return Font}),n.d(t,'CurvePath',function(){return CurvePath}),n.d(t,'Curve',function(){return Curve}),n.d(t,'ShapeUtils',function(){return an}),n.d(t,'SceneUtils',function(){return vn}),n.d(t,'WebGLUtils',function(){return WebGLUtils}),n.d(t,'WireframeGeometry',function(){return WireframeGeometry}),n.d(t,'ParametricGeometry',function(){return ParametricGeometry}),n.d(t,'ParametricBufferGeometry',function(){return ParametricBufferGeometry}),n.d(t,'TetrahedronGeometry',function(){return TetrahedronGeometry}),n.d(t,'TetrahedronBufferGeometry',function(){return TetrahedronBufferGeometry}),n.d(t,'OctahedronGeometry',function(){return OctahedronGeometry}),n.d(t,'OctahedronBufferGeometry',function(){return OctahedronBufferGeometry}),n.d(t,'IcosahedronGeometry',function(){return IcosahedronGeometry}),n.d(t,'IcosahedronBufferGeometry',function(){return IcosahedronBufferGeometry}),n.d(t,'DodecahedronGeometry',function(){return DodecahedronGeometry}),n.d(t,'DodecahedronBufferGeometry',function(){return DodecahedronBufferGeometry}),n.d(t,'PolyhedronGeometry',function(){return PolyhedronGeometry}),n.d(t,'PolyhedronBufferGeometry',function(){return PolyhedronBufferGeometry}),n.d(t,'TubeGeometry',function(){return TubeGeometry}),n.d(t,'TubeBufferGeometry',function(){return TubeBufferGeometry}),n.d(t,'TorusKnotGeometry',function(){return TorusKnotGeometry}),n.d(t,'TorusKnotBufferGeometry',function(){return TorusKnotBufferGeometry}),n.d(t,'TorusGeometry',function(){return TorusGeometry}),n.d(t,'TorusBufferGeometry',function(){return TorusBufferGeometry}),n.d(t,'TextGeometry',function(){return TextGeometry}),n.d(t,'TextBufferGeometry',function(){return TextBufferGeometry}),n.d(t,'SphereGeometry',function(){return SphereGeometry}),n.d(t,'SphereBufferGeometry',function(){return SphereBufferGeometry}),n.d(t,'RingGeometry',function(){return RingGeometry}),n.d(t,'RingBufferGeometry',function(){return RingBufferGeometry}),n.d(t,'PlaneGeometry',function(){return PlaneGeometry}),n.d(t,'PlaneBufferGeometry',function(){return PlaneBufferGeometry}),n.d(t,'LatheGeometry',function(){return LatheGeometry}),n.d(t,'LatheBufferGeometry',function(){return LatheBufferGeometry}),n.d(t,'ShapeGeometry',function(){return ShapeGeometry}),n.d(t,'ShapeBufferGeometry',function(){return ShapeBufferGeometry}),n.d(t,'ExtrudeGeometry',function(){return ExtrudeGeometry}),n.d(t,'ExtrudeBufferGeometry',function(){return ExtrudeBufferGeometry}),n.d(t,'EdgesGeometry',function(){return EdgesGeometry}),n.d(t,'ConeGeometry',function(){return ConeGeometry}),n.d(t,'ConeBufferGeometry',function(){return ConeBufferGeometry}),n.d(t,'CylinderGeometry',function(){return CylinderGeometry}),n.d(t,'CylinderBufferGeometry',function(){return CylinderBufferGeometry}),n.d(t,'CircleGeometry',function(){return CircleGeometry}),n.d(t,'CircleBufferGeometry',function(){return CircleBufferGeometry}),n.d(t,'BoxGeometry',function(){return BoxGeometry}),n.d(t,'BoxBufferGeometry',function(){return BoxBufferGeometry}),n.d(t,'ShadowMaterial',function(){return ShadowMaterial}),n.d(t,'SpriteMaterial',function(){return SpriteMaterial}),n.d(t,'RawShaderMaterial',function(){return RawShaderMaterial}),n.d(t,'ShaderMaterial',function(){return ShaderMaterial}),n.d(t,'PointsMaterial',function(){return PointsMaterial}),n.d(t,'MeshPhysicalMaterial',function(){return MeshPhysicalMaterial}),n.d(t,'MeshStandardMaterial',function(){return MeshStandardMaterial}),n.d(t,'MeshPhongMaterial',function(){return MeshPhongMaterial}),n.d(t,'MeshToonMaterial',function(){return MeshToonMaterial}),n.d(t,'MeshNormalMaterial',function(){return MeshNormalMaterial}),n.d(t,'MeshLambertMaterial',function(){return MeshLambertMaterial}),n.d(t,'MeshDepthMaterial',function(){return MeshDepthMaterial}),n.d(t,'MeshDistanceMaterial',function(){return MeshDistanceMaterial}),n.d(t,'MeshBasicMaterial',function(){return MeshBasicMaterial}),n.d(t,'LineDashedMaterial',function(){return LineDashedMaterial}),n.d(t,'LineBasicMaterial',function(){return LineBasicMaterial}),n.d(t,'Material',function(){return Material}),n.d(t,'Float64BufferAttribute',function(){return Float64BufferAttribute}),n.d(t,'Float32BufferAttribute',function(){return Float32BufferAttribute}),n.d(t,'Uint32BufferAttribute',function(){return Uint32BufferAttribute}),n.d(t,'Int32BufferAttribute',function(){return Int32BufferAttribute}),n.d(t,'Uint16BufferAttribute',function(){return Uint16BufferAttribute}),n.d(t,'Int16BufferAttribute',function(){return Int16BufferAttribute}),n.d(t,'Uint8ClampedBufferAttribute',function(){return Uint8ClampedBufferAttribute}),n.d(t,'Uint8BufferAttribute',function(){return Uint8BufferAttribute}),n.d(t,'Int8BufferAttribute',function(){return Int8BufferAttribute}),n.d(t,'BufferAttribute',function(){return BufferAttribute}),n.d(t,'REVISION',function(){return T}),n.d(t,'MOUSE',function(){return C}),n.d(t,'CullFaceNone',function(){return v}),n.d(t,'CullFaceBack',function(){return S}),n.d(t,'CullFaceFront',function(){return R}),n.d(t,'CullFaceFrontBack',function(){return F}),n.d(t,'FrontFaceDirectionCW',function(){return w}),n.d(t,'FrontFaceDirectionCCW',function(){return L}),n.d(t,'BasicShadowMap',function(){return M}),n.d(t,'PCFShadowMap',function(){return I}),n.d(t,'PCFSoftShadowMap',function(){return D}),n.d(t,'FrontSide',function(){return B}),n.d(t,'BackSide',function(){return N}),n.d(t,'DoubleSide',function(){return P}),n.d(t,'FlatShading',function(){return O}),n.d(t,'SmoothShading',function(){return k}),n.d(t,'NoColors',function(){return U}),n.d(t,'FaceColors',function(){return G}),n.d(t,'VertexColors',function(){return V}),n.d(t,'NoBlending',function(){return H}),n.d(t,'NormalBlending',function(){return z}),n.d(t,'AdditiveBlending',function(){return W}),n.d(t,'SubtractiveBlending',function(){return $}),n.d(t,'MultiplyBlending',function(){return j}),n.d(t,'CustomBlending',function(){return X}),n.d(t,'AddEquation',function(){return K}),n.d(t,'SubtractEquation',function(){return Y}),n.d(t,'ReverseSubtractEquation',function(){return q}),n.d(t,'MinEquation',function(){return Z}),n.d(t,'MaxEquation',function(){return Q}),n.d(t,'ZeroFactor',function(){return J}),n.d(t,'OneFactor',function(){return ee}),n.d(t,'SrcColorFactor',function(){return te}),n.d(t,'OneMinusSrcColorFactor',function(){return ne}),n.d(t,'SrcAlphaFactor',function(){return re}),n.d(t,'OneMinusSrcAlphaFactor',function(){return ae}),n.d(t,'DstAlphaFactor',function(){return oe}),n.d(t,'OneMinusDstAlphaFactor',function(){return ie}),n.d(t,'DstColorFactor',function(){return se}),n.d(t,'OneMinusDstColorFactor',function(){return le}),n.d(t,'SrcAlphaSaturateFactor',function(){return de}),n.d(t,'NeverDepth',function(){return ce}),n.d(t,'AlwaysDepth',function(){return ue}),n.d(t,'LessDepth',function(){return pe}),n.d(t,'LessEqualDepth',function(){return me}),n.d(t,'EqualDepth',function(){return ge}),n.d(t,'GreaterEqualDepth',function(){return he}),n.d(t,'GreaterDepth',function(){return fe}),n.d(t,'NotEqualDepth',function(){return _e}),n.d(t,'MultiplyOperation',function(){return ye}),n.d(t,'MixOperation',function(){return Ee}),n.d(t,'AddOperation',function(){return xe}),n.d(t,'NoToneMapping',function(){return Ae}),n.d(t,'LinearToneMapping',function(){return be}),n.d(t,'ReinhardToneMapping',function(){return Te}),n.d(t,'Uncharted2ToneMapping',function(){return Ce}),n.d(t,'CineonToneMapping',function(){return ve}),n.d(t,'UVMapping',function(){return Se}),n.d(t,'CubeReflectionMapping',function(){return Re}),n.d(t,'CubeRefractionMapping',function(){return Fe}),n.d(t,'EquirectangularReflectionMapping',function(){return we}),n.d(t,'EquirectangularRefractionMapping',function(){return Le}),n.d(t,'SphericalReflectionMapping',function(){return Me}),n.d(t,'CubeUVReflectionMapping',function(){return Ie}),n.d(t,'CubeUVRefractionMapping',function(){return De}),n.d(t,'RepeatWrapping',function(){return Be}),n.d(t,'ClampToEdgeWrapping',function(){return Ne}),n.d(t,'MirroredRepeatWrapping',function(){return Pe}),n.d(t,'NearestFilter',function(){return Oe}),n.d(t,'NearestMipMapNearestFilter',function(){return ke}),n.d(t,'NearestMipMapLinearFilter',function(){return Ue}),n.d(t,'LinearFilter',function(){return Ge}),n.d(t,'LinearMipMapNearestFilter',function(){return Ve}),n.d(t,'LinearMipMapLinearFilter',function(){return He}),n.d(t,'UnsignedByteType',function(){return ze}),n.d(t,'ByteType',function(){return We}),n.d(t,'ShortType',function(){return $e}),n.d(t,'UnsignedShortType',function(){return je}),n.d(t,'IntType',function(){return Xe}),n.d(t,'UnsignedIntType',function(){return Ke}),n.d(t,'FloatType',function(){return Ye}),n.d(t,'HalfFloatType',function(){return qe}),n.d(t,'UnsignedShort4444Type',function(){return Ze}),n.d(t,'UnsignedShort5551Type',function(){return Qe}),n.d(t,'UnsignedShort565Type',function(){return Je}),n.d(t,'UnsignedInt248Type',function(){return et}),n.d(t,'AlphaFormat',function(){return tt}),n.d(t,'RGBFormat',function(){return nt}),n.d(t,'RGBAFormat',function(){return rt}),n.d(t,'LuminanceFormat',function(){return at}),n.d(t,'LuminanceAlphaFormat',function(){return ot}),n.d(t,'RGBEFormat',function(){return it}),n.d(t,'DepthFormat',function(){return st}),n.d(t,'DepthStencilFormat',function(){return lt}),n.d(t,'RGB_S3TC_DXT1_Format',function(){return dt}),n.d(t,'RGBA_S3TC_DXT1_Format',function(){return ct}),n.d(t,'RGBA_S3TC_DXT3_Format',function(){return ut}),n.d(t,'RGBA_S3TC_DXT5_Format',function(){return pt}),n.d(t,'RGB_PVRTC_4BPPV1_Format',function(){return mt}),n.d(t,'RGB_PVRTC_2BPPV1_Format',function(){return gt}),n.d(t,'RGBA_PVRTC_4BPPV1_Format',function(){return ht}),n.d(t,'RGBA_PVRTC_2BPPV1_Format',function(){return ft}),n.d(t,'RGB_ETC1_Format',function(){return _t}),n.d(t,'LoopOnce',function(){return yt}),n.d(t,'LoopRepeat',function(){return Et}),n.d(t,'LoopPingPong',function(){return xt}),n.d(t,'InterpolateDiscrete',function(){return At}),n.d(t,'InterpolateLinear',function(){return bt}),n.d(t,'InterpolateSmooth',function(){return Tt}),n.d(t,'ZeroCurvatureEnding',function(){return Ct}),n.d(t,'ZeroSlopeEnding',function(){return vt}),n.d(t,'WrapAroundEnding',function(){return St}),n.d(t,'TrianglesDrawMode',function(){return Rt}),n.d(t,'TriangleStripDrawMode',function(){return Ft}),n.d(t,'TriangleFanDrawMode',function(){return wt}),n.d(t,'LinearEncoding',function(){return Lt}),n.d(t,'sRGBEncoding',function(){return Mt}),n.d(t,'GammaEncoding',function(){return It}),n.d(t,'RGBEEncoding',function(){return Dt}),n.d(t,'LogLuvEncoding',function(){return Bt}),n.d(t,'RGBM7Encoding',function(){return Nt}),n.d(t,'RGBM16Encoding',function(){return Pt}),n.d(t,'RGBDEncoding',function(){return Ot}),n.d(t,'BasicDepthPacking',function(){return kt}),n.d(t,'RGBADepthPacking',function(){return Ut}),n.d(t,'CubeGeometry',function(){return BoxGeometry}),n.d(t,'Face4',function(){return Face4}),n.d(t,'LineStrip',function(){return Sn}),n.d(t,'LinePieces',function(){return Rn}),n.d(t,'MeshFaceMaterial',function(){return MeshFaceMaterial}),n.d(t,'MultiMaterial',function(){return MultiMaterial}),n.d(t,'PointCloud',function(){return PointCloud}),n.d(t,'Particle',function(){return Particle}),n.d(t,'ParticleSystem',function(){return ParticleSystem}),n.d(t,'PointCloudMaterial',function(){return PointCloudMaterial}),n.d(t,'ParticleBasicMaterial',function(){return ParticleBasicMaterial}),n.d(t,'ParticleSystemMaterial',function(){return ParticleSystemMaterial}),n.d(t,'Vertex',function(){return Vertex}),n.d(t,'DynamicBufferAttribute',function(){return DynamicBufferAttribute}),n.d(t,'Int8Attribute',function(){return Int8Attribute}),n.d(t,'Uint8Attribute',function(){return Uint8Attribute}),n.d(t,'Uint8ClampedAttribute',function(){return Uint8ClampedAttribute}),n.d(t,'Int16Attribute',function(){return Int16Attribute}),n.d(t,'Uint16Attribute',function(){return Uint16Attribute}),n.d(t,'Int32Attribute',function(){return Int32Attribute}),n.d(t,'Uint32Attribute',function(){return Uint32Attribute}),n.d(t,'Float32Attribute',function(){return Float32Attribute}),n.d(t,'Float64Attribute',function(){return Float64Attribute}),n.d(t,'ClosedSplineCurve3',function(){return ClosedSplineCurve3}),n.d(t,'SplineCurve3',function(){return SplineCurve3}),n.d(t,'Spline',function(){return Spline}),n.d(t,'BoundingBoxHelper',function(){return BoundingBoxHelper}),n.d(t,'EdgesHelper',function(){return EdgesHelper}),n.d(t,'WireframeHelper',function(){return WireframeHelper}),n.d(t,'XHRLoader',function(){return XHRLoader}),n.d(t,'BinaryTextureLoader',function(){return BinaryTextureLoader}),n.d(t,'GeometryUtils',function(){return Fn}),n.d(t,'ImageUtils',function(){return wn}),n.d(t,'Projector',function(){return Projector}),n.d(t,'CanvasRenderer',function(){return CanvasRenderer}),void 0===l&&(l=2.220446049250313e-16),void 0===i&&(i=function(e){return'number'==typeof e&&isFinite(e)&&A(e)===e}),void 0===s&&(s=function(e){return 0>e?-1:0<e?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,'name',{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError('Cannot convert undefined or null to object');for(var t=Object(e),n=1,r;n<arguments.length;n++)if(r=arguments[n],void 0!==r&&null!==r)for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t}}(),Object.assign(EventDispatcher.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners,r=n[e];if(void 0!==r){var a=r.indexOf(t);-1!==a&&r.splice(a,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners,n=t[e.type];if(void 0!==n){e.target=this;for(var r=n.slice(0),a=0,o=r.length;a<o;a++)r[a].call(this,e)}}}});var T='87',C={LEFT:0,MIDDLE:1,RIGHT:2},v=0,S=1,R=2,F=3,w=0,L=1,M=0,I=1,D=2,B=0,N=1,P=2,O=1,k=2,U=0,G=1,V=2,H=0,z=1,W=2,$=3,j=4,X=5,K=100,Y=101,q=102,Z=103,Q=104,J=200,ee=201,te=202,ne=203,re=204,ae=205,oe=206,ie=207,se=208,le=209,de=210,ce=0,ue=1,pe=2,me=3,ge=4,he=5,fe=6,_e=7,ye=0,Ee=1,xe=2,Ae=0,be=1,Te=2,Ce=3,ve=4,Se=300,Re=301,Fe=302,we=303,Le=304,Me=305,Ie=306,De=307,Be=1e3,Ne=1001,Pe=1002,Oe=1003,ke=1004,Ue=1005,Ge=1006,Ve=1007,He=1008,ze=1009,We=1010,$e=1011,je=1012,Xe=1013,Ke=1014,Ye=1015,qe=1016,Ze=1017,Qe=1018,Je=1019,et=1020,tt=1021,nt=1022,rt=1023,at=1024,ot=1025,it=rt,st=1026,lt=1027,dt=2001,ct=2002,ut=2003,pt=2004,mt=2100,gt=2101,ht=2102,ft=2103,_t=2151,yt=2200,Et=2201,xt=2202,At=2300,bt=2301,Tt=2302,Ct=2400,vt=2401,St=2402,Rt=0,Ft=1,wt=2,Lt=3e3,Mt=3001,It=3007,Dt=3002,Bt=3003,Nt=3004,Pt=3005,Ot=3006,kt=3200,Ut=3201,Gt={DEG2RAD:h/180,RAD2DEG:180/h,generateUUID:function(){var e=['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z','a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'],t=Array(36),n=0,a;return function generateUUID(){for(var r=0;36>r;r++)8===r||13===r||18===r||23===r?t[r]='-':14===r?t[r]='4':(2>=n&&(n=0|33554432+16777216*Math.random()),a=15&n,n>>=4,t[r]=e[19===r?8|3&a:a]);return t.join('')}}(),clamp:function(e,t,n){return y(t,x(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,r,a){return r+(e-t)*(a-r)/(n-t)},lerp:function(e,n,r){return(1-r)*e+r*n},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*(3-2*e))},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+A(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Gt.DEG2RAD},radToDeg:function(e){return e*Gt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return f(2,b(_(e)/o))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e++,e}};Object.defineProperties(Vector2.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Vector2.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this):(console.warn('THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this):(console.warn('THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=x(this.x,e.x),this.y=x(this.y,e.y),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this},clamp:function(e,t){return this.x=y(e.x,x(t.x,this.x)),this.y=y(e.y,x(t.y,this.y)),this},clampScalar:function(){var e=new Vector2,t=new Vector2;return function clampScalar(n,r){return e.set(n,n),t.set(r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,x(t,n)))},floor:function(){return this.x=A(this.x),this.y=A(this.y),this},ceil:function(){return this.x=d(this.x),this.y=d(this.y),this},round:function(){return this.x=b(this.x),this.y=b(this.y),this},roundToZero:function(){return this.x=0>this.x?d(this.x):A(this.x),this.y=0>this.y?d(this.y):A(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return p(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return E(this.x)+E(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=a(this.y,this.x);return 0>e&&(e+=2*h),e},distanceTo:function(e){return p(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return E(this.x-e.x)+E(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector2: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=m(t),r=g(t),a=this.x-e.x,o=this.y-e.y;return this.x=a*n-o*r+e.x,this.y=a*r+o*n+e.y,this}});var Vt=0;Texture.DEFAULT_IMAGE=void 0,Texture.DEFAULT_MAPPING=Se,Object.defineProperty(Texture.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(Texture.prototype,EventDispatcher.prototype,{constructor:Texture,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){function getDataURL(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{t=document.createElementNS('http://www.w3.org/1999/xhtml','canvas'),t.width=e.width,t.height=e.height;var n=t.getContext('2d');e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return 2048<t.width||2048<t.height?t.toDataURL('image/jpeg',.6):t.toDataURL('image/png')}if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.5,type:'Texture',generator:'Texture.toJSON'},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=Gt.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:getDataURL(n)}),t.image=n.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:'dispose'})},transformUv:function(e){if(this.mapping===Se){if(e.multiply(this.repeat),e.add(this.offset),0>e.x||1<e.x)switch(this.wrapS){case Be:e.x-=A(e.x);break;case Ne:e.x=0>e.x?0:1;break;case Pe:1===E(A(e.x)%2)?e.x=d(e.x)-e.x:e.x-=A(e.x);}if(0>e.y||1<e.y)switch(this.wrapT){case Be:e.y-=A(e.y);break;case Ne:e.y=0>e.y?0:1;break;case Pe:1===E(A(e.y)%2)?e.y=d(e.y)-e.y:e.y-=A(e.y);}this.flipY&&(e.y=1-e.y)}}}),Object.assign(Vector4.prototype,{isVector4:!0,set:function(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0===e.w?1:e.w,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this):(console.warn('THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this):(console.warn('THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(t){var n=this.x,r=this.y,a=this.z,o=this.w,i=t.elements;return this.x=i[0]*n+i[4]*r+i[8]*a+i[12]*o,this.y=i[1]*n+i[5]*r+i[9]*a+i[13]*o,this.z=i[2]*n+i[6]*r+i[10]*a+i[14]*o,this.w=i[3]*n+i[7]*r+i[11]*a+i[15]*o,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*c(e.w);var t=p(1-e.w*e.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t=.01,n=.1,r=e.elements,a=r[0],o=r[4],i=r[8],l=r[1],d=r[5],u=r[9],m=r[2],g=r[6],f=r[10],_,A,x,y;if(E(o-l)<t&&E(i-m)<t&&E(u-g)<t){if(E(o+l)<n&&E(i+m)<n&&E(u+g)<n&&E(a+d+f-3)<n)return this.set(1,0,0,0),this;_=h;var b=(a+1)/2,T=(d+1)/2,C=(f+1)/2,v=(o+l)/4,S=(i+m)/4,R=(u+g)/4;return b>T&&b>C?b<t?(A=0,x=.707106781,y=.707106781):(A=p(b),x=v/A,y=S/A):T>C?T<t?(A=.707106781,x=0,y=.707106781):(x=p(T),A=v/x,y=R/x):C<t?(A=.707106781,x=.707106781,y=0):(y=p(C),A=S/y,x=R/y),this.set(A,x,y,_),this}var F=p((g-u)*(g-u)+(i-m)*(i-m)+(l-o)*(l-o));return .001>E(F)&&(F=1),this.x=(g-u)/F,this.y=(i-m)/F,this.z=(l-o)/F,this.w=c((a+d+f-1)/2),this},min:function(e){return this.x=x(this.x,e.x),this.y=x(this.y,e.y),this.z=x(this.z,e.z),this.w=x(this.w,e.w),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this.z=y(this.z,e.z),this.w=y(this.w,e.w),this},clamp:function(e,t){return this.x=y(e.x,x(t.x,this.x)),this.y=y(e.y,x(t.y,this.y)),this.z=y(e.z,x(t.z,this.z)),this.w=y(e.w,x(t.w,this.w)),this},clampScalar:function(){var e,t;return function clampScalar(n,r){return void 0==e&&(e=new Vector4,t=new Vector4),e.set(n,n,n,n),t.set(r,r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,x(t,n)))},floor:function(){return this.x=A(this.x),this.y=A(this.y),this.z=A(this.z),this.w=A(this.w),this},ceil:function(){return this.x=d(this.x),this.y=d(this.y),this.z=d(this.z),this.w=d(this.w),this},round:function(){return this.x=b(this.x),this.y=b(this.y),this.z=b(this.z),this.w=b(this.w),this},roundToZero:function(){return this.x=0>this.x?d(this.x):A(this.x),this.y=0>this.y?d(this.y):A(this.y),this.z=0>this.z?d(this.z):A(this.z),this.w=0>this.w?d(this.w):A(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return p(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return E(this.x)+E(this.y)+E(this.z)+E(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector4: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Object.assign(WebGLRenderTarget.prototype,EventDispatcher.prototype,{isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),WebGLRenderTargetCube.prototype=Object.create(WebGLRenderTarget.prototype),WebGLRenderTargetCube.prototype.constructor=WebGLRenderTargetCube,WebGLRenderTargetCube.prototype.isWebGLRenderTargetCube=!0,Object.assign(Quaternion,{slerp:function(e,n,r,a){return r.copy(e).slerp(n,a)},slerpFlat:function(e,n,r,o,i,d,c){var t=r[o+0],u=r[o+1],m=r[o+2],h=r[o+3],_=i[d+0],y=i[d+1],E=i[d+2],x=i[d+3];if(h!==x||t!==_||u!==y||m!==E){var A=1-c,s=t*_+u*y+m*E+h*x,b=0<=s?1:-1,T=1-s*s;if(T>l){var C=p(T),v=a(C,s*b);A=g(A*v)/C,c=g(c*v)/C}var S=c*b;if(t=t*A+_*S,u=u*A+y*S,m=m*A+E*S,h=h*A+x*S,A==1-c){var R=1/p(t*t+u*u+m*m+h*h);t*=R,u*=R,m*=R,h*=R}}e[n]=t,e[n+1]=u,e[n+2]=m,e[n+3]=h}}),Object.defineProperties(Quaternion.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Quaternion.prototype,{set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!(e&&e.isEuler))throw new Error('THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.');var n=e._x,r=e._y,a=e._z,o=e.order,i=m,s=g,l=i(n/2),d=i(r/2),c=i(a/2),u=s(n/2),p=s(r/2),h=s(a/2);return'XYZ'===o?(this._x=u*d*c+l*p*h,this._y=l*p*c-u*d*h,this._z=l*d*h+u*p*c,this._w=l*d*c-u*p*h):'YXZ'===o?(this._x=u*d*c+l*p*h,this._y=l*p*c-u*d*h,this._z=l*d*h-u*p*c,this._w=l*d*c+u*p*h):'ZXY'===o?(this._x=u*d*c-l*p*h,this._y=l*p*c+u*d*h,this._z=l*d*h+u*p*c,this._w=l*d*c-u*p*h):'ZYX'===o?(this._x=u*d*c-l*p*h,this._y=l*p*c+u*d*h,this._z=l*d*h-u*p*c,this._w=l*d*c+u*p*h):'YZX'===o?(this._x=u*d*c+l*p*h,this._y=l*p*c+u*d*h,this._z=l*d*h-u*p*c,this._w=l*d*c-u*p*h):'XZY'===o&&(this._x=u*d*c-l*p*h,this._y=l*p*c-u*d*h,this._z=l*d*h+u*p*c,this._w=l*d*c+u*p*h),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,r=g(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=m(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,n=t[0],r=t[4],a=t[8],o=t[1],i=t[5],l=t[9],d=t[2],c=t[6],u=t[10],m=n+i+u,g;return 0<m?(g=.5/p(m+1),this._w=.25/g,this._x=(c-l)*g,this._y=(a-d)*g,this._z=(o-r)*g):n>i&&n>u?(g=2*p(1+n-i-u),this._w=(c-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(a+d)/g):i>u?(g=2*p(1+i-n-u),this._w=(a-d)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+c)/g):(g=2*p(1+u-n-i),this._w=(o-r)/g,this._x=(a+d)/g,this._y=(l+c)/g,this._z=.25*g),this.onChangeCallback(),this},setFromUnitVectors:function(){var e=new Vector3,t;return function setFromUnitVectors(n,r){return void 0===e&&(e=new Vector3),t=n.dot(r)+1,t<1e-6?(t=0,E(n.x)>E(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return p(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0===t?this.multiplyQuaternions(this,e):(console.warn('THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.'),this.multiplyQuaternions(e,t))},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,r=e._y,a=e._z,o=e._w,i=t._x,s=t._y,l=t._z,d=t._w;return this._x=n*d+o*i+r*l-a*s,this._y=r*d+o*s+a*i-n*l,this._z=a*d+o*l+n*s-r*i,this._w=o*d-n*i-r*s-a*l,this.onChangeCallback(),this},slerp:function(e,n){if(0===n)return this;if(1===n)return this.copy(e);var t=this._x,r=this._y,o=this._z,i=this._w,s=i*e._w+t*e._x+r*e._y+o*e._z;if(0>s?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),1<=s)return this._w=i,this._x=t,this._y=r,this._z=o,this;var l=p(1-s*s);if(.001>E(l))return this._w=.5*(i+this._w),this._x=.5*(t+this._x),this._y=.5*(r+this._y),this._z=.5*(o+this._z),this;var d=a(l,s),c=g((1-n)*d)/l,u=g(n*d)/l;return this._w=i*c+this._w*u,this._x=t*c+this._x*u,this._y=r*c+this._y*u,this._z=o*c+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Vector3.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error('index is out of range: '+e);}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error('index is out of range: '+e);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0===t?(this.x+=e.x,this.y+=e.y,this.z+=e.z,this):(console.warn('THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.'),this.addVectors(e,t))},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0===t?(this.x-=e.x,this.y-=e.y,this.z-=e.z,this):(console.warn('THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.'),this.subVectors(e,t))},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0===t?(this.x*=e.x,this.y*=e.y,this.z*=e.z,this):(console.warn('THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.'),this.multiplyVectors(e,t))},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new Quaternion;return function applyEuler(t){return t&&t.isEuler||console.error('THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.'),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new Quaternion;return function applyAxisAngle(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(t){var n=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*n+o[3]*r+o[6]*a,this.y=o[1]*n+o[4]*r+o[7]*a,this.z=o[2]*n+o[5]*r+o[8]*a,this},applyMatrix4:function(t){var n=this.x,r=this.y,a=this.z,o=t.elements,e=1/(o[3]*n+o[7]*r+o[11]*a+o[15]);return this.x=(o[0]*n+o[4]*r+o[8]*a+o[12])*e,this.y=(o[1]*n+o[5]*r+o[9]*a+o[13])*e,this.z=(o[2]*n+o[6]*r+o[10]*a+o[14])*e,this},applyQuaternion:function(e){var t=this.x,n=this.y,r=this.z,a=e.x,o=e.y,i=e.z,s=e.w,l=s*t+o*r-i*n,d=s*n+i*t-a*r,c=s*r+a*n-o*t,u=-a*t-o*n-i*r;return this.x=l*s+u*-a+d*-i-c*-o,this.y=d*s+u*-o+c*-a-l*-i,this.z=c*s+u*-i+l*-o-d*-a,this},project:function(){var e=new Matrix4;return function project(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Matrix4;return function unproject(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(t){var n=this.x,r=this.y,a=this.z,o=t.elements;return this.x=o[0]*n+o[4]*r+o[8]*a,this.y=o[1]*n+o[5]*r+o[9]*a,this.z=o[2]*n+o[6]*r+o[10]*a,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=x(this.x,e.x),this.y=x(this.y,e.y),this.z=x(this.z,e.z),this},max:function(e){return this.x=y(this.x,e.x),this.y=y(this.y,e.y),this.z=y(this.z,e.z),this},clamp:function(e,t){return this.x=y(e.x,x(t.x,this.x)),this.y=y(e.y,x(t.y,this.y)),this.z=y(e.z,x(t.z,this.z)),this},clampScalar:function(){var e=new Vector3,t=new Vector3;return function clampScalar(n,r){return e.set(n,n,n),t.set(r,r,r),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(y(e,x(t,n)))},floor:function(){return this.x=A(this.x),this.y=A(this.y),this.z=A(this.z),this},ceil:function(){return this.x=d(this.x),this.y=d(this.y),this.z=d(this.z),this},round:function(){return this.x=b(this.x),this.y=b(this.y),this.z=b(this.z),this},roundToZero:function(){return this.x=0>this.x?d(this.x):A(this.x),this.y=0>this.y?d(this.y):A(this.y),this.z=0>this.z?d(this.z):A(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return p(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return E(this.x)+E(this.y)+E(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn('THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.'),this.crossVectors(e,t);var n=this.x,r=this.y,a=this.z;return this.x=r*e.z-a*e.y,this.y=a*e.x-n*e.z,this.z=n*e.y-r*e.x,this},crossVectors:function(e,t){var n=e.x,r=e.y,a=e.z,o=t.x,i=t.y,s=t.z;return this.x=r*s-a*i,this.y=a*o-n*s,this.z=n*i-r*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new Vector3;return function projectOnPlane(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new Vector3;return function reflect(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/p(this.lengthSq()*e.lengthSq());return c(Gt.clamp(t,-1,1))},distanceTo:function(e){return p(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r},distanceToManhattan:function(e){return E(this.x-e.x)+E(this.y-e.y)+E(this.z-e.z)},setFromSpherical:function(e){var t=g(e.phi)*e.radius;return this.x=t*g(e.theta),this.y=m(e.phi)*e.radius,this.z=t*m(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*g(e.theta),this.y=e.y,this.z=e.radius*m(e.theta),this},setFromMatrixPosition:function(t){var n=t.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn('THREE.Vector3: offset has been removed from .fromBufferAttribute().'),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Matrix4.prototype,{isMatrix4:!0,set:function(e,t,n,r,a,o,i,s,l,d,c,u,p,m,g,h){var f=this.elements;return f[0]=e,f[4]=t,f[8]=n,f[12]=r,f[1]=a,f[5]=o,f[9]=i,f[13]=s,f[2]=l,f[6]=d,f[10]=c,f[14]=u,f[3]=p,f[7]=m,f[11]=g,f[15]=h,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Matrix4().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(){var e=new Vector3;return function extractRotation(t){var n=this.elements,r=t.elements,a=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length(),i=1/e.setFromMatrixColumn(t,2).length();return n[0]=r[0]*a,n[1]=r[1]*a,n[2]=r[2]*a,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[8]=r[8]*i,n[9]=r[9]*i,n[10]=r[10]*i,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error('THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.');var n=this.elements,r=t.x,o=t.y,i=t.z,s=m(r),l=g(r),u=m(o),p=g(o),h=m(i),e=g(i);if('XYZ'===t.order){var _=s*h,y=s*e,E=l*h,x=l*e;n[0]=u*h,n[4]=-u*e,n[8]=p,n[1]=y+E*p,n[5]=_-x*p,n[9]=-l*u,n[2]=x-_*p,n[6]=E+y*p,n[10]=s*u}else if('YXZ'===t.order){var A=u*h,T=u*e,C=p*h,v=p*e;n[0]=A+v*l,n[4]=C*l-T,n[8]=s*p,n[1]=s*e,n[5]=s*h,n[9]=-l,n[2]=T*l-C,n[6]=v+A*l,n[10]=s*u}else if('ZXY'===t.order){var A=u*h,T=u*e,C=p*h,v=p*e;n[0]=A-v*l,n[4]=-s*e,n[8]=C+T*l,n[1]=T+C*l,n[5]=s*h,n[9]=v-A*l,n[2]=-s*p,n[6]=l,n[10]=s*u}else if('ZYX'===t.order){var _=s*h,y=s*e,E=l*h,x=l*e;n[0]=u*h,n[4]=E*p-y,n[8]=_*p+x,n[1]=u*e,n[5]=x*p+_,n[9]=y*p-E,n[2]=-p,n[6]=l*u,n[10]=s*u}else if('YZX'===t.order){var S=s*u,R=s*p,F=l*u,w=l*p;n[0]=u*h,n[4]=w-S*e,n[8]=F*e+R,n[1]=e,n[5]=s*h,n[9]=-l*h,n[2]=-p*h,n[6]=R*e+F,n[10]=S-w*e}else if('XZY'===t.order){var S=s*u,R=s*p,F=l*u,w=l*p;n[0]=u*h,n[4]=-e,n[8]=p*h,n[1]=S*e+w,n[5]=s*h,n[9]=R*e-F,n[2]=F*e-R,n[6]=l*h,n[10]=w*e+S}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,r=e._y,a=e._z,o=e._w,i=n+n,s=r+r,l=a+a,d=n*i,c=n*s,u=n*l,p=r*s,m=r*l,g=a*l,h=o*i,f=o*s,_=o*l;return t[0]=1-(p+g),t[4]=c-_,t[8]=u+f,t[1]=c+_,t[5]=1-(d+g),t[9]=m-h,t[2]=u-f,t[6]=m+h,t[10]=1-(d+p),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function lookAt(r,a,o){var i=this.elements;return n.subVectors(r,a),0===n.lengthSq()&&(n.z=1),n.normalize(),e.crossVectors(o,n),0===e.lengthSq()&&(1===E(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),e.crossVectors(o,n)),e.normalize(),t.crossVectors(n,e),i[0]=e.x,i[4]=t.x,i[8]=n.x,i[1]=e.y,i[5]=t.y,i[9]=n.y,i[2]=e.z,i[6]=t.z,i[10]=n.z,this}}(),multiply:function(e,t){return void 0===t?this.multiplyMatrices(this,e):(console.warn('THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.'),this.multiplyMatrices(e,t))},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,a=this.elements,o=n[0],i=n[4],s=n[8],l=n[12],d=n[1],c=n[5],u=n[9],p=n[13],m=n[2],g=n[6],h=n[10],f=n[14],_=n[3],y=n[7],E=n[11],x=n[15],A=r[0],b=r[4],T=r[8],C=r[12],v=r[1],S=r[5],R=r[9],F=r[13],w=r[2],L=r[6],M=r[10],I=r[14],D=r[3],B=r[7],N=r[11],P=r[15];return a[0]=o*A+i*v+s*w+l*D,a[4]=o*b+i*S+s*L+l*B,a[8]=o*T+i*R+s*M+l*N,a[12]=o*C+i*F+s*I+l*P,a[1]=d*A+c*v+u*w+p*D,a[5]=d*b+c*S+u*L+p*B,a[9]=d*T+c*R+u*M+p*N,a[13]=d*C+c*F+u*I+p*P,a[2]=m*A+g*v+h*w+f*D,a[6]=m*b+g*S+h*L+f*B,a[10]=m*T+g*R+h*M+f*N,a[14]=m*C+g*F+h*I+f*P,a[3]=_*A+y*v+E*w+x*D,a[7]=_*b+y*S+E*L+x*B,a[11]=_*T+y*R+E*M+x*N,a[15]=_*C+y*F+E*I+x*P,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new Vector3;return function applyToBufferAttribute(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],r=e[8],a=e[12],o=e[1],i=e[5],s=e[9],l=e[13],d=e[2],c=e[6],u=e[10],p=e[14],m=e[3],g=e[7],h=e[11],f=e[15];return m*(+a*s*c-r*l*c-a*i*u+n*l*u+r*i*p-n*s*p)+g*(+t*s*p-t*l*u+a*o*u-r*o*p+r*l*d-a*s*d)+h*(+t*l*c-t*i*p-a*o*c+n*o*p+a*i*d-n*l*d)+f*(-r*i*d-t*s*c+t*i*u+r*o*c-n*o*u+n*s*d)},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,r=e.elements,a=r[0],o=r[1],i=r[2],s=r[3],l=r[4],d=r[5],c=r[6],u=r[7],p=r[8],m=r[9],g=r[10],h=r[11],f=r[12],_=r[13],y=r[14],E=r[15],x=m*y*u-_*g*u+_*c*h-d*y*h-m*c*E+d*g*E,A=f*g*u-p*y*u-f*c*h+l*y*h+p*c*E-l*g*E,b=p*_*u-f*m*u+f*d*h-l*_*h-p*d*E+l*m*E,T=f*m*c-p*_*c-f*d*g+l*_*g+p*d*y-l*m*y,C=a*x+o*A+i*b+s*T;if(0==C){var v='THREE.Matrix4: .getInverse() can\'t invert matrix, determinant is 0';if(!0===t)throw new Error(v);else console.warn(v);return this.identity()}var S=1/C;return n[0]=x*S,n[1]=(_*g*s-m*y*s-_*i*h+o*y*h+m*i*E-o*g*E)*S,n[2]=(d*y*s-_*c*s+_*i*u-o*y*u-d*i*E+o*c*E)*S,n[3]=(m*c*s-d*g*s-m*i*u+o*g*u+d*i*h-o*c*h)*S,n[4]=A*S,n[5]=(p*y*s-f*g*s+f*i*h-a*y*h-p*i*E+a*g*E)*S,n[6]=(f*c*s-l*y*s-f*i*u+a*y*u+l*i*E-a*c*E)*S,n[7]=(l*g*s-p*c*s+p*i*u-a*g*u-l*i*h+a*c*h)*S,n[8]=b*S,n[9]=(f*m*s-p*_*s-f*o*h+a*_*h+p*o*E-a*m*E)*S,n[10]=(l*_*s-f*d*s+f*o*u-a*_*u-l*o*E+a*d*E)*S,n[11]=(p*d*s-l*m*s-p*o*u+a*m*u+l*o*h-a*d*h)*S,n[12]=T*S,n[13]=(p*_*i-f*m*i+f*o*g-a*_*g-p*o*y+a*m*y)*S,n[14]=(f*d*i-l*_*i-f*o*c+a*_*c+l*o*y-a*d*y)*S,n[15]=(l*m*i-p*d*i+p*o*c-a*m*c-l*o*g+a*d*g)*S,this},scale:function(e){var t=this.elements,n=e.x,r=e.y,a=e.z;return t[0]*=n,t[4]*=r,t[8]*=a,t[1]*=n,t[5]*=r,t[9]*=a,t[2]*=n,t[6]*=r,t[10]*=a,t[3]*=n,t[7]*=r,t[11]*=a,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return p(y(t,n,r))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=m(e),n=g(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=m(e),n=g(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=m(e),n=g(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,n){var r=m(n),a=g(n),o=1-r,t=e.x,i=e.y,s=e.z,l=o*t,d=o*i;return this.set(l*t+r,l*i-a*s,l*s+a*i,0,l*i+a*s,d*i+r,d*s-a*t,0,l*s-a*i,d*s+a*t,o*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(){var e=new Vector3,t=new Matrix4;return function decompose(n,r,a){var o=this.elements,i=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length(),d=this.determinant();0>d&&(i=-i),n.x=o[12],n.y=o[13],n.z=o[14],t.copy(this);var c=1/i,u=1/s,p=1/l;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=u,t.elements[5]*=u,t.elements[6]*=u,t.elements[8]*=p,t.elements[9]*=p,t.elements[10]*=p,r.setFromRotationMatrix(t),a.x=i,a.y=s,a.z=l,this}}(),makePerspective:function(e,t,n,r,a,o){void 0===o&&console.warn('THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.');var i=this.elements;return i[0]=2*a/(t-e),i[4]=0,i[8]=(t+e)/(t-e),i[12]=0,i[1]=0,i[5]=2*a/(n-r),i[9]=(n+r)/(n-r),i[13]=0,i[2]=0,i[6]=0,i[10]=-(o+a)/(o-a),i[14]=-2*o*a/(o-a),i[3]=0,i[7]=0,i[11]=-1,i[15]=0,this},makeOrthographic:function(e,t,n,r,a,o){var i=this.elements,s=1/(t-e),l=1/(n-r),d=1/(o-a);return i[0]=2*s,i[4]=0,i[8]=0,i[12]=-((t+e)*s),i[1]=0,i[5]=2*l,i[9]=0,i[13]=-((n+r)*l),i[2]=0,i[6]=0,i[10]=-2*d,i[14]=-((o+a)*d),i[3]=0,i[7]=0,i[11]=0,i[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;16>r;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;16>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),DataTexture.prototype=Object.create(Texture.prototype),DataTexture.prototype.constructor=DataTexture,DataTexture.prototype.isDataTexture=!0,CubeTexture.prototype=Object.create(Texture.prototype),CubeTexture.prototype.constructor=CubeTexture,CubeTexture.prototype.isCubeTexture=!0,Object.defineProperty(CubeTexture.prototype,'images',{get:function(){return this.image},set:function(e){this.image=e}});var Ht=new Texture,zt=new CubeTexture,Wt=[],$t=[],jt=new Float32Array(16),Xt=new Float32Array(9);StructuredUniform.prototype.setValue=function(e,t){for(var r=this.seq,a=0,o=r.length,n;a!==o;++a)n=r[a],n.setValue(e,t[n.id])};var Kt=/([\w\d_]+)(\])?(\[|\.)?/g;WebGLUniforms.prototype.setValue=function(e,t,n){var r=this.map[t];void 0!==r&&r.setValue(e,n,this.renderer)},WebGLUniforms.prototype.setOptional=function(e,t,n){var r=t[n];void 0!==r&&this.setValue(e,n,r)},WebGLUniforms.upload=function(e,t,r,a){for(var o=0,i=t.length;o!==i;++o){var n=t[o],s=r[n.id];!1!==s.needsUpdate&&n.setValue(e,s.value,a)}},WebGLUniforms.seqWithValue=function(e,t){for(var a=[],r=0,o=e.length,n;r!==o;++r)n=e[r],n.id in t&&a.push(n);return a};var Yt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(Color.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):'number'==typeof e?this.setHex(e):'string'==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=A(e),this.r=(255&e>>16)/255,this.g=(255&e>>8)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function hue2rgb(e,n,r){return 0>r&&(r+=1),1<r&&(r-=1),r<1/6?e+6*(n-e)*r:r<1/2?n:r<2/3?e+6*(n-e)*(2/3-r):e}return function setHSL(e,t,n){if(e=Gt.euclideanModulo(e,1),t=Gt.clamp(t,0,1),n=Gt.clamp(n,0,1),0===t)this.r=this.g=this.b=n;else{var r=.5>=n?n*(1+t):n+t-n*t,a=2*n-r;this.r=hue2rgb(a,r,e+1/3),this.g=hue2rgb(a,r,e),this.b=hue2rgb(a,r,e-1/3)}return this}}(),setStyle:function(e){function handleAlpha(t){void 0===t||1>parseFloat(t)&&console.warn('THREE.Color: Alpha component of '+e+' will be ignored.')}var t;if(t=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=t[1],r=t[2],a;switch(n){case'rgb':case'rgba':if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=x(255,parseInt(a[1],10))/255,this.g=x(255,parseInt(a[2],10))/255,this.b=x(255,parseInt(a[3],10))/255,handleAlpha(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=x(100,parseInt(a[1],10))/100,this.g=x(100,parseInt(a[2],10))/100,this.b=x(100,parseInt(a[3],10))/100,handleAlpha(a[5]),this;break;case'hsl':case'hsla':if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var o=parseFloat(a[1])/360,i=parseInt(a[2],10)/100,s=parseInt(a[3],10)/100;return handleAlpha(a[5]),this.setHSL(o,i,s)}}}else if(t=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=t[1],d=l.length;if(3===d)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}if(e&&0<e.length){var l=Yt[e];void 0===l?console.warn('THREE.Color: Unknown color '+e):this.setHex(l)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=f(e.r,t),this.g=f(e.g,t),this.b=f(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=0<t?1/t:1;return this.r=f(e.r,n),this.g=f(e.g,n),this.b=f(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=p(this.r),this.g=p(this.g),this.b=p(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return('000000'+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t=e||{h:0,s:0,l:0},n=this.r,r=this.g,a=this.b,o=y(n,r,a),i=x(n,r,a),s=(i+o)/2,l,d;if(i===o)l=0,d=0;else{var c=o-i;d=.5>=s?c/(o+i):c/(2-o-i),o===n?l=(r-a)/c+(r<a?6:0):o===r?l=(a-n)/c+2:o===a?l=(n-r)/c+4:void 0,l/=6}return t.h=l,t.s=d,t.l=s,t},getStyle:function(){return'rgb('+(0|255*this.r)+','+(0|255*this.g)+','+(0|255*this.b)+')'},offsetHSL:function(e,t,n){var r=this.getHSL();return r.h+=e,r.s+=t,r.l+=n,this.setHSL(r.h,r.s,r.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=y(0,this.r-e.r),this.g=y(0,this.g-e.g),this.b=y(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var qt={common:{diffuse:{value:new Color(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new Color(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Vector4(0,0,1,1)}}},Zt={merge:function(e){for(var t={},n=0,r;n<e.length;n++)for(var a in r=this.clone(e[n]),r)t[a]=r[a];return t},clone:function(e){var t={};for(var n in e)for(var r in t[n]={},e[n]){var a=e[n][r];t[n][r]=a&&(a.isColor||a.isMatrix3||a.isMatrix4||a.isVector2||a.isVector3||a.isVector4||a.isTexture)?a.clone():Array.isArray(a)?a.slice():a}return t}},Qt={alphamap_fragment:'#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n',alphamap_pars_fragment:'#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n',alphatest_fragment:'#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n',aomap_fragment:'#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n',aomap_pars_fragment:'#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif',begin_vertex:'\nvec3 transformed = vec3( position );\n',beginnormal_vertex:'\nvec3 objectNormal = vec3( normal );\n',bsdfs:'float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n',bumpmap_pars_fragment:'#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n',clipping_planes_fragment:'#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n',clipping_planes_pars_fragment:'#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n',clipping_planes_pars_vertex:'#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n',clipping_planes_vertex:'#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n',color_fragment:'#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif',color_pars_fragment:'#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n',color_pars_vertex:'#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif',color_vertex:'#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif',common:'#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n',cube_uv_reflection_fragment:'#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n',defaultnormal_vertex:'vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n',displacementmap_pars_vertex:'#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n',displacementmap_vertex:'#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n',emissivemap_fragment:'#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n',emissivemap_pars_fragment:'#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n',encodings_fragment:'  gl_FragColor = linearToOutputTexel( gl_FragColor );\n',encodings_pars_fragment:'\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n',envmap_fragment:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n',envmap_pars_fragment:'#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n',envmap_pars_vertex:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n',envmap_vertex:'#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n',fog_vertex:'\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif',fog_pars_vertex:'#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n',fog_fragment:'#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n',fog_pars_fragment:'#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n',gradientmap_pars_fragment:'#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n',lightmap_fragment:'#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n',lightmap_pars_fragment:'#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif',lights_lambert_vertex:'vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n',lights_pars:'uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n',lights_phong_fragment:'BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n',lights_phong_pars_fragment:'varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n',lights_physical_fragment:'PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n',lights_physical_pars_fragment:'struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n',lights_template:'\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n',logdepthbuf_fragment:'#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif',logdepthbuf_pars_fragment:'#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n',logdepthbuf_pars_vertex:'#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif',logdepthbuf_vertex:'#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n',map_fragment:'#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n',map_pars_fragment:'#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n',map_particle_fragment:'#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n',map_particle_pars_fragment:'#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n',metalnessmap_fragment:'float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n',metalnessmap_pars_fragment:'#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif',morphnormal_vertex:'#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n',morphtarget_pars_vertex:'#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif',morphtarget_vertex:'#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n',normal_fragment:'#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n',normalmap_pars_fragment:'#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n',packing:'vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n',premultiplied_alpha_fragment:'#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n',project_vertex:'vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n',dithering_fragment:'#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n',dithering_pars_fragment:'#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n',roughnessmap_fragment:'float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n',roughnessmap_pars_fragment:'#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif',shadowmap_pars_fragment:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n',shadowmap_pars_vertex:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n',shadowmap_vertex:'#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n',shadowmask_pars_fragment:'float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n',skinbase_vertex:'#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif',skinning_pars_vertex:'#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n',skinning_vertex:'#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n',skinnormal_vertex:'#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n',specularmap_fragment:'float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif',specularmap_pars_fragment:'#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif',tonemapping_fragment:'#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n',tonemapping_pars_fragment:'#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n',uv_pars_fragment:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif',uv_pars_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n',uv_vertex:'#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif',uv2_pars_fragment:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif',uv2_pars_vertex:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif',uv2_vertex:'#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif',worldpos_vertex:'#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n',cube_frag:'uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n',cube_vert:'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n',depth_frag:'#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n',depth_vert:'#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n',distanceRGBA_frag:'#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n',distanceRGBA_vert:'#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n',equirect_frag:'uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n',equirect_vert:'varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n',linedashed_frag:'uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',linedashed_vert:'uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n',meshbasic_frag:'uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',meshbasic_vert:'#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n',meshlambert_frag:'uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshlambert_vert:'#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',meshphong_frag:'#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshphong_vert:'#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',meshphysical_frag:'#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n',meshphysical_vert:'#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',normal_frag:'#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n',normal_vert:'#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n',points_frag:'uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n',points_vert:'uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n',shadow_frag:'uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n',shadow_vert:'#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n'},Jt={basic:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.fog]),vertexShader:Qt.meshbasic_vert,fragmentShader:Qt.meshbasic_frag},lambert:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.fog,qt.lights,{emissive:{value:new Color(0)}}]),vertexShader:Qt.meshlambert_vert,fragmentShader:Qt.meshlambert_frag},phong:{uniforms:Zt.merge([qt.common,qt.specularmap,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.gradientmap,qt.fog,qt.lights,{emissive:{value:new Color(0)},specular:{value:new Color(1118481)},shininess:{value:30}}]),vertexShader:Qt.meshphong_vert,fragmentShader:Qt.meshphong_frag},standard:{uniforms:Zt.merge([qt.common,qt.envmap,qt.aomap,qt.lightmap,qt.emissivemap,qt.bumpmap,qt.normalmap,qt.displacementmap,qt.roughnessmap,qt.metalnessmap,qt.fog,qt.lights,{emissive:{value:new Color(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},points:{uniforms:Zt.merge([qt.points,qt.fog]),vertexShader:Qt.points_vert,fragmentShader:Qt.points_frag},dashed:{uniforms:Zt.merge([qt.common,qt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Qt.linedashed_vert,fragmentShader:Qt.linedashed_frag},depth:{uniforms:Zt.merge([qt.common,qt.displacementmap]),vertexShader:Qt.depth_vert,fragmentShader:Qt.depth_frag},normal:{uniforms:Zt.merge([qt.common,qt.bumpmap,qt.normalmap,qt.displacementmap,{opacity:{value:1}}]),vertexShader:Qt.normal_vert,fragmentShader:Qt.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Qt.cube_vert,fragmentShader:Qt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Qt.equirect_vert,fragmentShader:Qt.equirect_frag},distanceRGBA:{uniforms:Zt.merge([qt.common,qt.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Qt.distanceRGBA_vert,fragmentShader:Qt.distanceRGBA_frag},shadow:{uniforms:Zt.merge([qt.lights,{color:{value:new Color(0)},opacity:{value:1}}]),vertexShader:Qt.shadow_vert,fragmentShader:Qt.shadow_frag}};Jt.physical={uniforms:Zt.merge([Jt.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Qt.meshphysical_vert,fragmentShader:Qt.meshphysical_frag},Object.assign(Box2.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector2;return function setFromCenterAndSize(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=+Infinity,this.max.x=this.max.y=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector2;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){var n=t||new Vector2;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){var n=t||new Vector2;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector2;return function distanceToPoint(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),CanvasTexture.prototype=Object.create(Texture.prototype),CanvasTexture.prototype.constructor=CanvasTexture;var en=0;Object.assign(Material.prototype,EventDispatcher.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0===n){console.warn('THREE.Material: \''+t+'\' parameter is undefined.');continue}if('shading'==t){console.warn('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.'),this.flatShading=n===O;continue}var r=this[t];if(void 0===r){console.warn('THREE.'+this.type+': \''+t+'\' is not a property of this material.');continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):'overdraw'==t?this[t]=+n:this[t]=n}},toJSON:function(e){function extractFromCache(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:'Material',generator:'Material.toJSON'}};if(n.uuid=this.uuid,n.type=this.type,''!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==z&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==B&&(n.side=this.side),this.vertexColors!==U&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),'round'!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),'round'!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),'{}'!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=extractFromCache(e.textures),a=extractFromCache(e.images);0<r.length&&(n.textures=r),0<a.length&&(n.images=a)}return n},clone:function(){return new this.constructor().copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,r=null;if(null!==t){var a=t.length;r=Array(a);for(var n=0;n!==a;++n)r[n]=t[n].clone()}return this.clippingPlanes=r,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),ShaderMaterial.prototype=Object.create(Material.prototype),ShaderMaterial.prototype.constructor=ShaderMaterial,ShaderMaterial.prototype.isShaderMaterial=!0,ShaderMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Zt.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},ShaderMaterial.prototype.toJSON=function(e){var t=Material.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},MeshDepthMaterial.prototype=Object.create(Material.prototype),MeshDepthMaterial.prototype.constructor=MeshDepthMaterial,MeshDepthMaterial.prototype.isMeshDepthMaterial=!0,MeshDepthMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},MeshDistanceMaterial.prototype=Object.create(Material.prototype),MeshDistanceMaterial.prototype.constructor=MeshDistanceMaterial,MeshDistanceMaterial.prototype.isMeshDistanceMaterial=!0,MeshDistanceMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Object.assign(Box3.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=+Infinity,n=+Infinity,r=+Infinity,a=-Infinity,o=-Infinity,s=-Infinity,d=0,i=e.length;d<i;d+=3){var l=e[d],c=e[d+1],u=e[d+2];l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>a&&(a=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(a,o,s),this},setFromBufferAttribute:function(e){for(var t=+Infinity,n=+Infinity,r=+Infinity,a=-Infinity,o=-Infinity,s=-Infinity,d=0,i=e.count;d<i;d++){var l=e.getX(d),c=e.getY(d),u=e.getZ(d);l<t&&(t=l),c<n&&(n=c),u<r&&(r=u),l>a&&(a=l),c>o&&(o=c),u>s&&(s=u)}return this.min.set(t,n,r),this.max.set(a,o,s),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Vector3;return function setFromCenterAndSize(t,n){var r=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(r),this.max.copy(t).add(r),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=+Infinity,this.max.x=this.max.y=this.max.z=-Infinity,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new Vector3;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new Vector3;return function expandByObject(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var r=t.geometry,a,o;if(void 0!==r)if(r.isGeometry){var i=r.vertices;for(a=0,o=i.length;a<o;a++)e.copy(i[a]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(r.isBufferGeometry){var s=r.attributes.position;if(void 0!==s)for(a=0,o=s.count;a<o;a++)e.fromBufferAttribute(s,a).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){var n=t||new Vector3;return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(){var e=new Vector3;return function intersectsSphere(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){var t,n;return 0<e.normal.x?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),0<e.normal.y?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){var n=t||new Vector3;return n.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Vector3;return function distanceToPoint(t){var n=e.copy(t).clamp(this.min,this.max);return n.sub(t).length()}}(),getBoundingSphere:function(){var e=new Vector3;return function getBoundingSphere(t){var n=t||new Sphere;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3];return function applyMatrix4(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(Sphere.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new Box3;return function setFromPoints(t,n){var r=this.center;void 0===n?e.setFromPoints(t).getCenter(r):r.copy(n);for(var a=0,o=0,i=t.length;o<i;o++)a=y(a,r.distanceToSquared(t[o]));return this.radius=p(a),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return E(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),r=t||new Vector3;return r.copy(e),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(e){var t=e||new Box3;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(Matrix3.prototype,{isMatrix3:!0,set:function(e,t,n,r,a,o,i,s,l){var d=this.elements;return d[0]=e,d[1]=r,d[2]=i,d[3]=t,d[4]=a,d[5]=s,d[6]=n,d[7]=o,d[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new Vector3;return function applyToBufferAttribute(t){for(var n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,r=t.elements,a=this.elements,o=n[0],i=n[3],s=n[6],l=n[1],d=n[4],c=n[7],u=n[2],p=n[5],m=n[8],g=r[0],h=r[3],f=r[6],_=r[1],y=r[4],E=r[7],x=r[2],A=r[5],b=r[8];return a[0]=o*g+i*_+s*x,a[3]=o*h+i*y+s*A,a[6]=o*f+i*E+s*b,a[1]=l*g+d*_+c*x,a[4]=l*h+d*y+c*A,a[7]=l*f+d*E+c*b,a[2]=u*g+p*_+m*x,a[5]=u*h+p*y+m*A,a[8]=u*f+p*E+m*b,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var t=this.elements,n=t[0],r=t[1],a=t[2],o=t[3],s=t[4],e=t[5],l=t[6],d=t[7],c=t[8];return n*s*c-n*e*d-r*o*c+r*e*l+a*o*d-a*s*l},getInverse:function(e,t){e&&e.isMatrix4&&console.error('THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.');var n=e.elements,r=this.elements,a=n[0],o=n[1],i=n[2],s=n[3],l=n[4],d=n[5],c=n[6],u=n[7],p=n[8],m=p*l-d*u,g=d*c-p*s,h=u*s-l*c,f=a*m+o*g+i*h;if(0==f){var _='THREE.Matrix3: .getInverse() can\'t invert matrix, determinant is 0';if(!0===t)throw new Error(_);else console.warn(_);return this.identity()}var y=1/f;return r[0]=m*y,r[1]=(i*u-p*o)*y,r[2]=(d*o-i*l)*y,r[3]=g*y,r[4]=(p*a-i*c)*y,r[5]=(i*s-d*a)*y,r[6]=h*y,r[7]=(o*c-u*a)*y,r[8]=(l*a-o*s)*y,this},transpose:function(){var e=this.elements,t;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},equals:function(e){for(var t=this.elements,n=e.elements,r=0;9>r;r++)if(t[r]!==n[r])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;9>n;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}),Object.assign(Plane.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new Vector3,t=new Vector3;return function setFromCoplanarPoints(n,r,a){var o=e.subVectors(a,r).cross(t.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){var n=t||new Vector3;return n.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new Vector3;return function intersectLine(n,r){var a=r||new Vector3,o=n.delta(e),i=this.normal.dot(o);if(0===i)return 0===this.distanceToPoint(n.start)?a.copy(n.start):void 0;var s=-(n.start.dot(this.normal)+this.constant)/i;return 0>s||1<s?void 0:a.copy(o).multiplyScalar(s).add(n.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return 0>t&&0<n||0>n&&0<t},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){var t=e||new Vector3;return t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new Vector3,t=new Matrix3;return function applyMatrix4(n,r){var a=r||t.getNormalMatrix(n),o=this.coplanarPoint(e).applyMatrix4(n),i=this.normal.applyMatrix3(a).normalize();return this.constant=-o.dot(i),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(Frustum.prototype,{set:function(e,t,n,r,a,o){var i=this.planes;return i[0].copy(e),i[1].copy(t),i[2].copy(n),i[3].copy(r),i[4].copy(a),i[5].copy(o),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){for(var t=this.planes,n=0;6>n;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,r=n[0],a=n[1],o=n[2],i=n[3],s=n[4],l=n[5],d=n[6],c=n[7],u=n[8],p=n[9],m=n[10],g=n[11],h=n[12],f=n[13],_=n[14],y=n[15];return t[0].setComponents(i-r,c-s,g-u,y-h).normalize(),t[1].setComponents(i+r,c+s,g+u,y+h).normalize(),t[2].setComponents(i+a,c+l,g+p,y+f).normalize(),t[3].setComponents(i-a,c-l,g-p,y-f).normalize(),t[4].setComponents(i-o,c-d,g-m,y-_).normalize(),t[5].setComponents(i+o,c+d,g+m,y+_).normalize(),this},intersectsObject:function(){var e=new Sphere;return function intersectsObject(t){var n=t.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new Sphere;return function intersectsSprite(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,r=-e.radius,a=0,o;6>a;a++)if(o=t[a].distanceToPoint(n),o<r)return!1;return!0},intersectsBox:function(){var e=new Vector3,t=new Vector3;return function intersectsBox(n){for(var r=this.planes,a=0,o;6>a;a++){o=r[a],e.x=0<o.normal.x?n.min.x:n.max.x,t.x=0<o.normal.x?n.max.x:n.min.x,e.y=0<o.normal.y?n.min.y:n.max.y,t.y=0<o.normal.y?n.max.y:n.min.y,e.z=0<o.normal.z?n.min.z:n.max.z,t.z=0<o.normal.z?n.max.z:n.min.z;var i=o.distanceToPoint(e),s=o.distanceToPoint(t);if(0>i&&0>s)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,n=0;6>n;n++)if(0>t[n].distanceToPoint(e))return!1;return!0}}),Euler.RotationOrders=['XYZ','YZX','ZXY','XZY','YXZ','ZYX'],Euler.DefaultOrder='XYZ',Object.defineProperties(Euler.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(Euler.prototype,{isEuler:!0,set:function(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var r=Math.asin,o=Gt.clamp,i=e.elements,s=i[0],l=i[4],d=i[8],c=i[1],u=i[5],p=i[9],m=i[2],g=i[6],h=i[10];return t=t||this._order,'XYZ'===t?(this._y=r(o(d,-1,1)),.99999>E(d)?(this._x=a(-p,h),this._z=a(-l,s)):(this._x=a(g,u),this._z=0)):'YXZ'===t?(this._x=r(-o(p,-1,1)),.99999>E(p)?(this._y=a(d,h),this._z=a(c,u)):(this._y=a(-m,s),this._z=0)):'ZXY'===t?(this._x=r(o(g,-1,1)),.99999>E(g)?(this._y=a(-m,h),this._z=a(-l,u)):(this._y=0,this._z=a(c,s))):'ZYX'===t?(this._y=r(-o(m,-1,1)),.99999>E(m)?(this._x=a(g,h),this._z=a(c,s)):(this._x=0,this._z=a(-l,u))):'YZX'===t?(this._z=r(o(c,-1,1)),.99999>E(c)?(this._x=a(-p,u),this._y=a(-m,s)):(this._x=0,this._y=a(d,h))):'XZY'===t?(this._z=r(-o(l,-1,1)),.99999>E(l)?(this._x=a(g,u),this._y=a(d,s)):(this._x=a(-p,h),this._y=0)):console.warn('THREE.Euler: .setFromRotationMatrix() given unsupported order: '+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Matrix4;return function setFromQuaternion(t,n,r){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,r)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new Quaternion;return function reorder(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Vector3(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(Layers.prototype,{set:function(e){this.mask=0|1<<e},enable:function(e){this.mask|=0|1<<e},toggle:function(e){this.mask^=0|1<<e},disable:function(e){this.mask&=~(0|1<<e)},test:function(e){return 0!=(this.mask&e.mask)}});var tn=0;Object3D.DefaultUp=new Vector3(0,1,0),Object3D.DefaultMatrixAutoUpdate=!0,Object.assign(Object3D.prototype,EventDispatcher.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new Quaternion;return function rotateOnAxis(t,n){return e.setFromAxisAngle(t,n),this.quaternion.multiply(e),this}}(),rotateX:function(){var e=new Vector3(1,0,0);return function rotateX(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new Vector3(0,1,0);return function rotateY(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new Vector3(0,0,1);return function rotateZ(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new Vector3;return function translateOnAxis(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new Vector3(1,0,0);return function translateX(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new Vector3(0,1,0);return function translateY(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new Vector3(0,0,1);return function translateZ(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new Matrix4;return function worldToLocal(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new Matrix4;return function lookAt(t){this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error('THREE.Object3D.add: object can\'t be added as a child of itself.',e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:'added'}),this.children.push(e)):console.error('THREE.Object3D.add: object not an instance of THREE.Object3D.',e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:'removed'}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty('id',e)},getObjectByName:function(e){return this.getObjectByProperty('name',e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,r=this.children.length;n<r;n++){var a=this.children[n],o=a.getObjectByProperty(e,t);if(void 0!==o)return o}},getWorldPosition:function(e){var t=e||new Vector3;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new Vector3,t=new Vector3;return function getWorldQuaternion(n){var r=n||new Quaternion;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,r,t),r}}(),getWorldRotation:function(){var e=new Quaternion;return function getWorldRotation(t){var n=t||new Euler;return this.getWorldQuaternion(e),n.setFromQuaternion(e,this.rotation.order,!1)}}(),getWorldScale:function(){var e=new Vector3,t=new Quaternion;return function getWorldScale(n){var r=n||new Vector3;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,r),r}}(),getWorldDirection:function(){var e=new Quaternion;return function getWorldDirection(t){var n=t||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){function serialize(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}function extractFromCache(e){var t=[];for(var n in e){var r=e[n];delete r.metadata,t.push(r)}return t}var t=void 0===e||''===e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:'Object',generator:'Object3D.toJSON'});var r={};if(r.uuid=this.uuid,r.type=this.type,''!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),'{}'!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(r.geometry=serialize(e.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],o=0,i=this.material.length;o<i;o++)a.push(serialize(e.materials,this.material[o]));r.material=a}else r.material=serialize(e.materials,this.material);if(0<this.children.length){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(t){var s=extractFromCache(e.geometries),l=extractFromCache(e.materials),d=extractFromCache(e.textures),c=extractFromCache(e.images);0<s.length&&(n.geometries=s),0<l.length&&(n.materials=l),0<d.length&&(n.textures=d),0<c.length&&(n.images=c)}return n.object=r,n},clone:function(e){return new this.constructor().copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0,r;n<e.children.length;n++)r=e.children[n],this.add(r.clone());return this}}),Camera.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Camera,isCamera:!0,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Quaternion;return function getWorldDirection(t){var n=t||new Vector3;return this.getWorldQuaternion(e),n.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Object3D.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),OrthographicCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:OrthographicCamera,isOrthographicCamera:!0,copy:function(e,t){return Camera.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,r,a,o){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:a,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,a=n-e,o=n+e,i=r+t,s=r-t;if(null!==this.view){var l=this.zoom/(this.view.width/this.view.fullWidth),d=this.zoom/(this.view.height/this.view.fullHeight),c=(this.right-this.left)/this.view.width,u=(this.top-this.bottom)/this.view.height;a+=c*(this.view.offsetX/l),o=a+c*(this.view.width/l),i-=u*(this.view.offsetY/d),s=i-u*(this.view.height/d)}this.projectionMatrix.makeOrthographic(a,o,i,s,this.near,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),PerspectiveCamera.prototype=Object.assign(Object.create(Camera.prototype),{constructor:PerspectiveCamera,isPerspectiveCamera:!0,copy:function(e,t){return Camera.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Gt.RAD2DEG*r(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=u(.5*Gt.DEG2RAD*this.fov);return .5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Gt.RAD2DEG*r(u(.5*Gt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*x(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/y(this.aspect,1)},setViewOffset:function(e,t,n,r,a,o){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:r,width:a,height:o},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*u(.5*Gt.DEG2RAD*this.fov)/this.zoom,n=2*t,r=this.aspect*n,a=-.5*r,o=this.view;if(null!==o){var i=o.fullWidth,s=o.fullHeight;a+=o.offsetX*r/i,t-=o.offsetY*n/s,r*=o.width/i,n*=o.height/s}var l=this.filmOffset;0!==l&&(a+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(a,a+r,t,t-n,e,this.far)},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(Face3.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(var t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var nn=0;Object.assign(Geometry.prototype,EventDispatcher.prototype,{isGeometry:!0,applyMatrix:function(e){for(var t=new Matrix3().getNormalMatrix(e),n=0,r=this.vertices.length,a;n<r;n++)a=this.vertices[n],a.applyMatrix4(e);for(var n=0,r=this.faces.length,o;n<r;n++){o=this.faces[n],o.normal.applyMatrix3(t).normalize();for(var i=0,s=o.vertexNormals.length;i<s;i++)o.vertexNormals[i].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Matrix4;return function rotateX(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function rotateY(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function rotateZ(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function translate(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function scale(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function lookAt(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function addFace(e,n,r,a){var i=void 0===o?[]:[u[e].clone(),u[n].clone(),u[r].clone()],c=void 0===s?[]:[t.colors[e].clone(),t.colors[n].clone(),t.colors[r].clone()],g=new Face3(e,n,r,i,c,a);t.faces.push(g),void 0!==l&&t.faceVertexUvs[0].push([p[e].clone(),p[n].clone(),p[r].clone()]),void 0!==d&&t.faceVertexUvs[1].push([m[e].clone(),m[n].clone(),m[r].clone()])}var t=this,n=null===e.index?void 0:e.index.array,r=e.attributes,a=r.position.array,o=void 0===r.normal?void 0:r.normal.array,s=void 0===r.color?void 0:r.color.array,l=void 0===r.uv?void 0:r.uv.array,d=void 0===r.uv2?void 0:r.uv2.array;void 0!==d&&(this.faceVertexUvs[1]=[]);for(var u=[],p=[],m=[],c=0,i=0;c<a.length;c+=3,i+=2)t.vertices.push(new Vector3(a[c],a[c+1],a[c+2])),void 0!==o&&u.push(new Vector3(o[c],o[c+1],o[c+2])),void 0!==s&&t.colors.push(new Color(s[c],s[c+1],s[c+2])),void 0!==l&&p.push(new Vector2(l[i],l[i+1])),void 0!==d&&m.push(new Vector2(d[i],d[i+1]));var g=e.groups;if(0<g.length)for(var c=0;c<g.length;c++)for(var h=g[c],f=h.start,_=h.count,i=f;i<f+_;i+=3)void 0===n?addFace(i,i+1,i+2,h.materialIndex):addFace(n[i],n[i+1],n[i+2],h.materialIndex);else if(void 0!==n)for(var c=0;c<n.length;c+=3)addFace(n[c],n[c+1],n[c+2]);else for(var c=0;c<a.length/3;c+=3)addFace(c,c+1,c+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,r=new Matrix4;return r.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var e=new Vector3,t=new Vector3,n=0,r=this.faces.length;n<r;n++){var a=this.faces[n],o=this.vertices[a.a],i=this.vertices[a.b],s=this.vertices[a.c];e.subVectors(s,i),t.subVectors(o,i),e.cross(t),e.normalize(),a.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,n,r,a,o,i;for(i=Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)i[t]=new Vector3;if(e){var s=new Vector3,l=new Vector3,d,c,u;for(r=0,a=this.faces.length;r<a;r++)o=this.faces[r],d=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],s.subVectors(u,c),l.subVectors(d,c),s.cross(l),i[o.a].add(s),i[o.b].add(s),i[o.c].add(s)}else for(this.computeFaceNormals(),r=0,a=this.faces.length;r<a;r++)o=this.faces[r],i[o.a].add(o.normal),i[o.b].add(o.normal),i[o.c].add(o.normal);for(t=0,n=this.vertices.length;t<n;t++)i[t].normalize();for(r=0,a=this.faces.length;r<a;r++){o=this.faces[r];var p=o.vertexNormals;3===p.length?(p[0].copy(i[o.a]),p[1].copy(i[o.b]),p[2].copy(i[o.c])):(p[0]=i[o.a].clone(),p[1]=i[o.b].clone(),p[2]=i[o.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){n=this.faces[e];var r=n.vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,r,a;for(n=0,r=this.faces.length;n<r;n++)for(a=this.faces[n],a.__originalFaceNormal?a.__originalFaceNormal.copy(a.normal):a.__originalFaceNormal=a.normal.clone(),a.__originalVertexNormals||(a.__originalVertexNormals=[]),(e=0,t=a.vertexNormals.length);e<t;e++)a.__originalVertexNormals[e]?a.__originalVertexNormals[e].copy(a.vertexNormals[e]):a.__originalVertexNormals[e]=a.vertexNormals[e].clone();var o=new Geometry;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var i=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals,l,d;for(n=0,r=this.faces.length;n<r;n++)l=new Vector3,d={a:new Vector3,b:new Vector3,c:new Vector3},i.push(l),s.push(d)}var c=this.morphNormals[e];o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals();var l,d;for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],l=c.faceNormals[n],d=c.vertexNormals[n],l.copy(a.normal),d.a.copy(a.vertexNormals[0]),d.b.copy(a.vertexNormals[1]),d.c.copy(a.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)a=this.faces[n],a.normal=a.__originalFaceNormal,a.vertexNormals=a.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,r=t.length;n<r;n++)0<n&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Sphere),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!(e&&e.isGeometry))return void console.error('THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.',e);var r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,l=e.faces,d=this.faceVertexUvs[0],c=e.faceVertexUvs[0],u=this.colors,p=e.colors,m;void 0===n&&(n=0),void 0!==t&&(m=new Matrix3().getNormalMatrix(t));for(var g=0,i=o.length;g<i;g++){var h=o[g],f=h.clone();void 0!==t&&f.applyMatrix4(t),a.push(f)}for(var g=0,i=p.length;g<i;g++)u.push(p[g].clone());for(g=0,i=l.length;g<i;g++){var _=l[g],y=_.vertexNormals,E=_.vertexColors,x,A,b;x=new Face3(_.a+r,_.b+r,_.c+r),x.normal.copy(_.normal),void 0!==m&&x.normal.applyMatrix3(m).normalize();for(var T=0,C=y.length;T<C;T++)A=y[T].clone(),void 0!==m&&A.applyMatrix3(m).normalize(),x.vertexNormals.push(A);x.color.copy(_.color);for(var T=0,C=E.length;T<C;T++)b=E[T],x.vertexColors.push(b.clone());x.materialIndex=_.materialIndex+n,s.push(x)}for(g=0,i=c.length;g<i;g++){var v=c[g],S=[];if(void 0!==v){for(var T=0,C=v.length;T<C;T++)S.push(v[T].clone());d.push(S)}}},mergeMesh:function(e){return e&&e.isMesh?void(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):void console.error('THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.',e)},mergeVertices:function(){var e={},t=[],r=[],a=10000,o,s,l,i,d,c,u,p;for(l=0,i=this.vertices.length;l<i;l++)o=this.vertices[l],s=b(o.x*a)+'_'+b(o.y*a)+'_'+b(o.z*a),void 0===e[s]?(e[s]=l,t.push(this.vertices[l]),r[l]=t.length-1):r[l]=r[e[s]];var m=[];for(l=0,i=this.faces.length;l<i;l++){d=this.faces[l],d.a=r[d.a],d.b=r[d.b],d.c=r[d.c],c=[d.a,d.b,d.c];for(var g=0;3>g;g++)if(c[g]===c[(g+1)%3]){m.push(l);break}}for(l=m.length-1;0<=l;l--){var n=m[l];for(this.faces.splice(n,1),u=0,p=this.faceVertexUvs.length;u<p;u++)this.faceVertexUvs[u].splice(n,1)}var h=this.vertices.length-t.length;return this.vertices=t,h},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function materialIndexSort(e,t){return e.materialIndex-t.materialIndex});var r=this.faceVertexUvs[0],a=this.faceVertexUvs[1],o,i;r&&r.length===t&&(o=[]),a&&a.length===t&&(i=[]);for(var n=0,s;n<t;n++)s=e[n]._id,o&&o.push(r[s]),i&&i.push(a[s]);o&&(this.faceVertexUvs[0]=o),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){function setBit(e,t,n){return n?e|1<<t:e&~(1<<t)}function getNormalIndex(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0===l[t]?(l[t]=s.length/3,s.push(e.x,e.y,e.z),l[t]):l[t]}function getColorIndex(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0===c[t]?(c[t]=d.length,d.push(e.getHex()),c[t]):c[t]}function getUvIndex(e){var t=e.x.toString()+e.y.toString();return void 0===p[t]?(p[t]=u.length/2,u.push(e.x,e.y),p[t]):p[t]}var e={metadata:{version:4.5,type:'Geometry',generator:'Geometry.toJSON'}};if(e.uuid=this.uuid,e.type=this.type,''!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var r=[],a=0,o;a<this.vertices.length;a++)o=this.vertices[a],r.push(o.x,o.y,o.z);for(var i=[],s=[],l={},d=[],c={},u=[],p={},a=0;a<this.faces.length;a++){var m=this.faces[a],g=void 0!==this.faceVertexUvs[0][a],h=0<m.normal.length(),f=0<m.vertexNormals.length,_=1!==m.color.r||1!==m.color.g||1!==m.color.b,y=0<m.vertexColors.length,E=0;if(E=setBit(E,0,0),E=setBit(E,1,!0),E=setBit(E,2,!1),E=setBit(E,3,g),E=setBit(E,4,h),E=setBit(E,5,f),E=setBit(E,6,_),E=setBit(E,7,y),i.push(E),i.push(m.a,m.b,m.c),i.push(m.materialIndex),g){var x=this.faceVertexUvs[0][a];i.push(getUvIndex(x[0]),getUvIndex(x[1]),getUvIndex(x[2]))}if(h&&i.push(getNormalIndex(m.normal)),f){var A=m.vertexNormals;i.push(getNormalIndex(A[0]),getNormalIndex(A[1]),getNormalIndex(A[2]))}if(_&&i.push(getColorIndex(m.color)),y){var b=m.vertexColors;i.push(getColorIndex(b[0]),getColorIndex(b[1]),getColorIndex(b[2]))}}return e.data={},e.data.vertices=r,e.data.normals=s,0<d.length&&(e.data.colors=d),0<u.length&&(e.data.uvs=[u]),e.data.faces=i,e},clone:function(){return new Geometry().copy(this)},copy:function(e){var t,n,r,a,o,i;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var l=e.colors;for(t=0,n=l.length;t<n;t++)this.colors.push(l[t].clone());var d=e.faces;for(t=0,n=d.length;t<n;t++)this.faces.push(d[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var c=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),r=0,a=c.length;r<a;r++){var u=c[r],p=[];for(o=0,i=u.length;o<i;o++){var m=u[o];p.push(m.clone())}this.faceVertexUvs[t].push(p)}}var g=e.morphTargets;for(t=0,n=g.length;t<n;t++){var h={name:g[t].name};if(void 0!==g[t].vertices)for(h.vertices=[],r=0,a=g[t].vertices.length;r<a;r++)h.vertices.push(g[t].vertices[r].clone());if(void 0!==g[t].normals)for(h.normals=[],r=0,a=g[t].normals.length;r<a;r++)h.normals.push(g[t].normals[r].clone());this.morphTargets.push(h)}var f=e.morphNormals;for(t=0,n=f.length;t<n;t++){var _={};if(void 0!==f[t].vertexNormals)for(_.vertexNormals=[],r=0,a=f[t].vertexNormals.length;r<a;r++){var y=f[t].vertexNormals[r],E={};E.a=y.a.clone(),E.b=y.b.clone(),E.c=y.c.clone(),_.vertexNormals.push(E)}if(void 0!==f[t].faceNormals)for(_.faceNormals=[],r=0,a=f[t].faceNormals.length;r<a;r++)_.faceNormals.push(f[t].faceNormals[r].clone());this.morphNormals.push(_)}var x=e.skinWeights;for(t=0,n=x.length;t<n;t++)this.skinWeights.push(x[t].clone());var A=e.skinIndices;for(t=0,n=A.length;t<n;t++)this.skinIndices.push(A[t].clone());var b=e.lineDistances;for(t=0,n=b.length;t<n;t++)this.lineDistances.push(b[t]);var T=e.boundingBox;null!==T&&(this.boundingBox=T.clone());var C=e.boundingSphere;return null!==C&&(this.boundingSphere=C.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),Object.defineProperty(BufferAttribute.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(BufferAttribute.prototype,{isBufferAttribute:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.count=void 0===e?0:e.length/this.itemSize,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var r=0,a=this.itemSize;r<a;r++)this.array[e+r]=t.array[n+r];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,r=0,a=e.length,o;r<a;r++)o=e[r],void 0===o&&(console.warn('THREE.BufferAttribute.copyColorsArray(): color is undefined',r),o=new Color),t[n++]=o.r,t[n++]=o.g,t[n++]=o.b;return this},copyIndicesArray:function(e){for(var t=this.array,n=0,r=0,a=e.length,o;r<a;r++)o=e[r],t[n++]=o.a,t[n++]=o.b,t[n++]=o.c;return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length,o;r<a;r++)o=e[r],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector2sArray(): vector is undefined',r),o=new Vector2),t[n++]=o.x,t[n++]=o.y;return this},copyVector3sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length,o;r<a;r++)o=e[r],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector3sArray(): vector is undefined',r),o=new Vector3),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z;return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length,o;r<a;r++)o=e[r],void 0===o&&(console.warn('THREE.BufferAttribute.copyVector4sArray(): vector is undefined',r),o=new Vector4),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w;return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this},setXYZW:function(e,t,n,r,a){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=a,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),Int8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int8BufferAttribute.prototype.constructor=Int8BufferAttribute,Uint8BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8BufferAttribute.prototype.constructor=Uint8BufferAttribute,Uint8ClampedBufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint8ClampedBufferAttribute.prototype.constructor=Uint8ClampedBufferAttribute,Int16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int16BufferAttribute.prototype.constructor=Int16BufferAttribute,Uint16BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint16BufferAttribute.prototype.constructor=Uint16BufferAttribute,Int32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Int32BufferAttribute.prototype.constructor=Int32BufferAttribute,Uint32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Uint32BufferAttribute.prototype.constructor=Uint32BufferAttribute,Float32BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float32BufferAttribute.prototype.constructor=Float32BufferAttribute,Float64BufferAttribute.prototype=Object.create(BufferAttribute.prototype),Float64BufferAttribute.prototype.constructor=Float64BufferAttribute,Object.assign(DirectGeometry.prototype,{computeGroups:function(e){for(var t=[],n=void 0,r=e.faces,a=0,o,i;a<r.length;a++)i=r[a],i.materialIndex!==n&&(n=i.materialIndex,void 0!=o&&(o.count=3*a-o.start,t.push(o)),o={start:3*a,materialIndex:n});void 0!==o&&(o.count=3*a-o.start,t.push(o)),this.groups=t},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=e.morphTargets,l=s.length,d;if(0<l){d=[];for(var c=0;c<l;c++)d[c]=[];this.morphTargets.position=d}var i=e.morphNormals,u=i.length,p;if(0<u){p=[];for(var c=0;c<u;c++)p[c]=[];this.morphTargets.normal=p}for(var m=e.skinIndices,g=e.skinWeights,h=m.length===n.length,f=g.length===n.length,c=0,_;c<t.length;c++){_=t[c],this.vertices.push(n[_.a],n[_.b],n[_.c]);var y=_.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var E=_.normal;this.normals.push(E,E,E)}var x=_.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var A=_.color;this.colors.push(A,A,A)}if(!0===a){var b=r[0][c];void 0===b?(console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ',c),this.uvs.push(new Vector2,new Vector2,new Vector2)):this.uvs.push(b[0],b[1],b[2])}if(!0===o){var b=r[1][c];void 0===b?(console.warn('THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ',c),this.uvs2.push(new Vector2,new Vector2,new Vector2)):this.uvs2.push(b[0],b[1],b[2])}for(var T=0,C;T<l;T++)C=s[T].vertices,d[T].push(C[_.a],C[_.b],C[_.c]);for(var T=0,v;T<u;T++)v=i[T].vertexNormals[c],p[T].push(v.a,v.b,v.c);h&&this.skinIndices.push(m[_.a],m[_.b],m[_.c]),f&&this.skinWeights.push(g[_.a],g[_.b],g[_.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}}),BufferGeometry.MaxIndex=65535,Object.assign(BufferGeometry.prototype,EventDispatcher.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){this.index=Array.isArray(e)?new(65535<arrayMax(e)?Uint32BufferAttribute:Uint16BufferAttribute)(e,1):e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?'index'===e?(console.warn('THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.'),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn('THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).'),void this.addAttribute(e,new BufferAttribute(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0===n?0:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=new Matrix3().getNormalMatrix(e);r.applyToBufferAttribute(n),n.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Matrix4;return function rotateX(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Matrix4;return function rotateY(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Matrix4;return function rotateZ(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Matrix4;return function translate(t,n,r){return e.makeTranslation(t,n,r),this.applyMatrix(e),this}}(),scale:function(){var e=new Matrix4;return function scale(t,n,r){return e.makeScale(t,n,r),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Object3D;return function lookAt(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Float32BufferAttribute(3*t.vertices.length,3),r=new Float32BufferAttribute(3*t.colors.length,3);if(this.addAttribute('position',n.copyVector3sArray(t.vertices)),this.addAttribute('color',r.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var a=new Float32BufferAttribute(t.lineDistances.length,1);this.addAttribute('lineDistance',a.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var n=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(n=void 0,t.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(t);n.verticesNeedUpdate=t.verticesNeedUpdate,n.normalsNeedUpdate=t.normalsNeedUpdate,n.colorsNeedUpdate=t.colorsNeedUpdate,n.uvsNeedUpdate=t.uvsNeedUpdate,n.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=n}var r;return!0===t.verticesNeedUpdate&&(r=this.attributes.position,void 0!==r&&(r.copyVector3sArray(t.vertices),r.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(r=this.attributes.normal,void 0!==r&&(r.copyVector3sArray(t.normals),r.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(r=this.attributes.color,void 0!==r&&(r.copyColorsArray(t.colors),r.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(r=this.attributes.uv,void 0!==r&&(r.copyVector2sArray(t.uvs),r.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(r=this.attributes.lineDistance,void 0!==r&&(r.copyArray(t.lineDistances),r.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=new DirectGeometry().fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute('position',new BufferAttribute(t,3).copyVector3sArray(e.vertices)),0<e.normals.length){var n=new Float32Array(3*e.normals.length);this.addAttribute('normal',new BufferAttribute(n,3).copyVector3sArray(e.normals))}if(0<e.colors.length){var r=new Float32Array(3*e.colors.length);this.addAttribute('color',new BufferAttribute(r,3).copyColorsArray(e.colors))}if(0<e.uvs.length){var a=new Float32Array(2*e.uvs.length);this.addAttribute('uv',new BufferAttribute(a,2).copyVector2sArray(e.uvs))}if(0<e.uvs2.length){var o=new Float32Array(2*e.uvs2.length);this.addAttribute('uv2',new BufferAttribute(o,2).copyVector2sArray(e.uvs2))}if(0<e.indices.length){var s=65535<arrayMax(e.indices)?Uint32Array:Uint16Array,d=new s(3*e.indices.length);this.setIndex(new BufferAttribute(d,1).copyIndicesArray(e.indices))}for(var c in this.groups=e.groups,e.morphTargets){for(var u=[],p=e.morphTargets[c],m=0,i=p.length;m<i;m++){var l=p[m],g=new Float32BufferAttribute(3*l.length,3);u.push(g.copyVector3sArray(l))}this.morphAttributes[c]=u}if(0<e.skinIndices.length){var h=new Float32BufferAttribute(4*e.skinIndices.length,4);this.addAttribute('skinIndex',h.copyVector4sArray(e.skinIndices))}if(0<e.skinWeights.length){var f=new Float32BufferAttribute(4*e.skinWeights.length,4);this.addAttribute('skinWeight',f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Box3);var e=this.attributes.position;void 0===e?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(e),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new Box3,t=new Vector3;return function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(r);for(var a=0,o=0,i=n.count;o<i;o++)t.x=n.getX(o),t.y=n.getY(o),t.z=n.getZ(o),a=y(a,r.distanceToSquared(t));this.boundingSphere.radius=p(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var r=t.position.array;if(void 0===t.normal)this.addAttribute('normal',new BufferAttribute(new Float32Array(r.length),3));else for(var a=t.normal.array,o=0,i=a.length;o<i;o++)a[o]=0;var s=t.normal.array,l=new Vector3,d=new Vector3,c=new Vector3,u=new Vector3,p=new Vector3,m,g,h;if(e){var f=e.array;0===n.length&&this.addGroup(0,f.length);for(var _=0,y=n.length;_<y;++_)for(var E=n[_],x=E.start,A=E.count,o=x,i=x+A;o<i;o+=3)m=3*f[o+0],g=3*f[o+1],h=3*f[o+2],l.fromArray(r,m),d.fromArray(r,g),c.fromArray(r,h),u.subVectors(c,d),p.subVectors(l,d),u.cross(p),s[m]+=u.x,s[m+1]+=u.y,s[m+2]+=u.z,s[g]+=u.x,s[g+1]+=u.y,s[g+2]+=u.z,s[h]+=u.x,s[h+1]+=u.y,s[h+2]+=u.z}else for(var o=0,i=r.length;o<i;o+=9)l.fromArray(r,o),d.fromArray(r,o+3),c.fromArray(r,o+6),u.subVectors(c,d),p.subVectors(l,d),u.cross(p),s[o]=u.x,s[o+1]=u.y,s[o+2]=u.z,s[o+3]=u.x,s[o+4]=u.y,s[o+5]=u.z,s[o+6]=u.x,s[o+7]=u.y,s[o+8]=u.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!(e&&e.isBufferGeometry))return void console.error('THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.',e);void 0===t&&(t=0);var n=this.attributes;for(var r in n)if(void 0!==e.attributes[r])for(var a=n[r],o=a.array,s=e.attributes[r],l=s.array,d=s.itemSize,c=0,i=d*t;c<l.length;c++,i++)o[i]=l[c];return this},normalizeNormals:function(){var e=new Vector3;return function normalizeNormals(){for(var t=this.attributes.normal,n=0,r=t.count;n<r;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn('THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.'),this;var e=new BufferGeometry,t=this.index.array,n=this.attributes;for(var r in n){for(var a=n[r],o=a.array,s=a.itemSize,d=new o.constructor(t.length*s),c=0,u=0,p=0,i=t.length;p<i;p++){c=t[p]*s;for(var l=0;l<s;l++)d[u++]=o[c++]}e.addAttribute(r,new BufferAttribute(d,s))}return e},toJSON:function(){var e={metadata:{version:4.5,type:'BufferGeometry',generator:'BufferGeometry.toJSON'}};if(e.uuid=this.uuid,e.type=this.type,''!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var r=this.index;if(null!==r){var a=Array.prototype.slice.call(r.array);e.data.index={type:r.array.constructor.name,array:a}}var o=this.attributes;for(var n in o){var i=o[n],a=Array.prototype.slice.call(i.array);e.data.attributes[n]={itemSize:i.itemSize,type:i.array.constructor.name,array:a,normalized:i.normalized}}var s=this.groups;0<s.length&&(e.data.groups=JSON.parse(JSON.stringify(s)));var l=this.boundingSphere;return null!==l&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e},clone:function(){return new BufferGeometry().copy(this)},copy:function(e){var t,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var a=e.index;null!==a&&this.setIndex(a.clone());var o=e.attributes;for(t in o){var i=o[t];this.addAttribute(t,i.clone())}var s=e.morphAttributes;for(t in s){var l=[],d=s[t];for(n=0,r=d.length;n<r;n++)l.push(d[n].clone());this.morphAttributes[t]=l}var c=e.groups;for(n=0,r=c.length;n<r;n++){var u=c[n];this.addGroup(u.start,u.count,u.materialIndex)}var p=e.boundingBox;null!==p&&(this.boundingBox=p.clone());var m=e.boundingSphere;return null!==m&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:'dispose'})}}),BoxGeometry.prototype=Object.create(Geometry.prototype),BoxGeometry.prototype.constructor=BoxGeometry,BoxBufferGeometry.prototype=Object.create(BufferGeometry.prototype),BoxBufferGeometry.prototype.constructor=BoxBufferGeometry,PlaneGeometry.prototype=Object.create(Geometry.prototype),PlaneGeometry.prototype.constructor=PlaneGeometry,PlaneBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PlaneBufferGeometry.prototype.constructor=PlaneBufferGeometry,MeshBasicMaterial.prototype=Object.create(Material.prototype),MeshBasicMaterial.prototype.constructor=MeshBasicMaterial,MeshBasicMaterial.prototype.isMeshBasicMaterial=!0,MeshBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},Object.assign(Ray.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){var n=t||new Vector3;return n.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new Vector3;return function recast(n){return this.origin.copy(this.at(n,e)),this}}(),closestPointToPoint:function(e,t){var n=t||new Vector3;n.subVectors(e,this.origin);var r=n.dot(this.direction);return 0>r?n.copy(this.origin):n.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return p(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new Vector3;return function distanceSqToPoint(t){var n=e.subVectors(t,this.origin).dot(this.direction);return 0>n?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function distanceSqToSegment(r,a,o,i){e.copy(r).add(a).multiplyScalar(.5),t.copy(a).sub(r).normalize(),n.copy(this.origin).sub(e);var s=.5*r.distanceTo(a),l=-this.direction.dot(t),d=n.dot(this.direction),u=-n.dot(t),p=n.lengthSq(),c=E(1-l*l),m,g,h,f;if(!(0<c))g=0<l?-s:s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*u)+p;else if(m=l*u-d,g=l*d-u,f=s*c,!(0<=m))g<=-f?(m=y(0,-(-l*s+d)),g=0<m?-s:x(y(-s,-u),s),h=-m*m+g*(g+2*u)+p):g<=f?(m=0,g=x(y(-s,-u),s),h=g*(g+2*u)+p):(m=y(0,-(l*s+d)),g=0<m?s:x(y(-s,-u),s),h=-m*m+g*(g+2*u)+p);else if(!(g>=-f))g=-s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*u)+p;else if(g<=f){var _=1/c;m*=_,g*=_,h=m*(m+l*g+2*d)+g*(l*m+g+2*u)+p}else g=s,m=y(0,-(l*g+d)),h=-m*m+g*(g+2*u)+p;return o&&o.copy(this.direction).multiplyScalar(m).add(this.origin),i&&i.copy(t).multiplyScalar(g).add(e),h}}(),intersectSphere:function(){var e=new Vector3;return function intersectSphere(t,n){e.subVectors(t.center,this.origin);var r=e.dot(this.direction),a=e.dot(e)-r*r,o=t.radius*t.radius;if(a>o)return null;var i=p(o-a),s=r-i,l=r+i;return 0>s&&0>l?null:0>s?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var n=e.normal.dot(this.direction);if(0===n)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/n;return 0<=r?r:null},intersectPlane:function(e,n){var r=this.distanceToPlane(e);return null===r?null:this.at(r,n)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);if(0===t)return!0;var n=e.normal.dot(this.direction);return!!(0>n*t)},intersectBox:function(e,t){var n=1/this.direction.x,r=1/this.direction.y,a=1/this.direction.z,o=this.origin,i,s,l,d,c,u;return(0<=n?(i=(e.min.x-o.x)*n,s=(e.max.x-o.x)*n):(i=(e.max.x-o.x)*n,s=(e.min.x-o.x)*n),0<=r?(l=(e.min.y-o.y)*r,d=(e.max.y-o.y)*r):(l=(e.max.y-o.y)*r,d=(e.min.y-o.y)*r),i>d||l>s)?null:((l>i||i!=i)&&(i=l),(d<s||s!=s)&&(s=d),0<=a?(c=(e.min.z-o.z)*a,u=(e.max.z-o.z)*a):(c=(e.max.z-o.z)*a,u=(e.min.z-o.z)*a),i>u||c>s)?null:((c>i||i!=i)&&(i=c),(u<s||s!=s)&&(s=u),0>s?null:this.at(0<=i?i:s,t))},intersectsBox:function(){var e=new Vector3;return function intersectsBox(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new Vector3,t=new Vector3,n=new Vector3,r=new Vector3;return function intersectTriangle(o,a,i,s,l){t.subVectors(a,o),n.subVectors(i,o),r.crossVectors(t,n);var d=this.direction.dot(r),c;if(0<d){if(s)return null;c=1}else if(0>d)c=-1,d=-d;else return null;e.subVectors(this.origin,o);var u=c*this.direction.dot(n.crossVectors(e,n));if(0>u)return null;var p=c*this.direction.dot(t.cross(e));if(0>p)return null;if(u+p>d)return null;var m=-c*e.dot(r);return 0>m?null:this.at(m/d,l)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(Line3.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){var t=e||new Vector3;return t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){var t=e||new Vector3;return t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new Vector3;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new Vector3,n=new Vector3;return function closestPointToPointParameter(r,a){e.subVectors(r,this.start),n.subVectors(this.end,this.start);var o=n.dot(n),i=n.dot(e),s=i/o;return a&&(s=Gt.clamp(s,0,1)),s}}(),closestPointToPoint:function(e,n,r){var a=this.closestPointToPointParameter(e,n),t=r||new Vector3;return this.delta(t).multiplyScalar(a).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(Triangle,{normal:function(){var e=new Vector3;return function normal(t,n,r,a){var o=a||new Vector3;o.subVectors(r,n),e.subVectors(t,n),o.cross(e);var i=o.lengthSq();return 0<i?o.multiplyScalar(1/p(i)):o.set(0,0,0)}}(),barycoordFromPoint:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function barycoordFromPoint(r,o,a,i,s){e.subVectors(i,o),t.subVectors(a,o),n.subVectors(r,o);var l=e.dot(e),d=e.dot(t),c=e.dot(n),p=t.dot(t),m=t.dot(n),g=l*p-d*d,h=s||new Vector3;if(0==g)return h.set(-2,-1,-1);var f=1/g,_=(p*c-d*m)*f,u=(l*m-d*c)*f;return h.set(1-_-u,u,_)}}(),containsPoint:function(){var e=new Vector3;return function containsPoint(t,n,r,a){var o=Triangle.barycoordFromPoint(t,n,r,a,e);return 0<=o.x&&0<=o.y&&1>=o.x+o.y}}()}),Object.assign(Triangle.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new Vector3,t=new Vector3;return function area(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){var t=e||new Vector3;return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return Triangle.normal(this.a,this.b,this.c,e)},plane:function(e){var t=e||new Plane;return t.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return Triangle.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return Triangle.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(){var e=new Plane,t=[new Line3,new Line3,new Line3],n=new Vector3,r=new Vector3;return function closestPointToPoint(a,o){var s=o||new Vector3,l=Infinity;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(a,n),!0===this.containsPoint(n))s.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var d=0;d<t.length;d++){t[d].closestPointToPoint(n,!0,r);var i=n.distanceToSquared(r);i<l&&(l=i,s.copy(r))}}return s}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Mesh.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Mesh,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Object3D.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry,t,n,r;if(e.isBufferGeometry){var a=e.morphAttributes,o=Object.keys(a);if(0<o.length){var i=a[o[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(t=0,n=i.length);t<n;t++)r=i[t].name||t+'',this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}}else{var s=e.morphTargets;if(void 0!==s&&0<s.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},(t=0,n=s.length);t<n;t++)r=s[t].name||t+'',this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=t}},raycast:function(){function uvIntersection(e,t,n,r,a,o,i){return Triangle.barycoordFromPoint(e,t,n,r,c),a.multiplyScalar(c.x),o.multiplyScalar(c.y),i.multiplyScalar(c.z),a.add(o).add(i),a.clone()}function checkIntersection(e,t,n,r,a,o,i,s){var l;if(l=t.side===N?r.intersectTriangle(i,o,a,!0,s):r.intersectTriangle(a,o,i,t.side!==P,s),null===l)return null;g.copy(s),g.applyMatrix4(e.matrixWorld);var d=n.ray.origin.distanceTo(g);return d<n.near||d>n.far?null:{distance:d,point:g.clone(),object:e}}function checkBufferGeometryIntersection(e,n,r,l,d,g,a,h){o.fromBufferAttribute(l,g),i.fromBufferAttribute(l,a),s.fromBufferAttribute(l,h);var c=checkIntersection(e,e.material,n,r,o,i,s,m);return c&&(d&&(t.fromBufferAttribute(d,g),u.fromBufferAttribute(d,a),p.fromBufferAttribute(d,h),c.uv=uvIntersection(m,o,i,s,t,u,p)),c.face=new Face3(g,a,h,Triangle.normal(o,i,s)),c.faceIndex=g),c}var e=new Matrix4,n=new Ray,r=new Sphere,o=new Vector3,i=new Vector3,s=new Vector3,a=new Vector3,l=new Vector3,d=new Vector3,t=new Vector2,u=new Vector2,p=new Vector2,c=new Vector3,m=new Vector3,g=new Vector3;return function raycast(g,h){var _=this.geometry,y=this.material,E=this.matrixWorld;if(void 0!==y&&(null===_.boundingSphere&&_.computeBoundingSphere(),r.copy(_.boundingSphere),r.applyMatrix4(E),!1!==g.ray.intersectsSphere(r))&&(e.getInverse(E),n.copy(g.ray).applyMatrix4(e),null===_.boundingBox||!1!==n.intersectsBox(_.boundingBox))){var x;if(_.isBufferGeometry){var T=_.index,C=_.attributes.position,v=_.attributes.uv,S,R,b,c,F;if(null!==T)for(c=0,F=T.count;c<F;c+=3)S=T.getX(c),R=T.getX(c+1),b=T.getX(c+2),x=checkBufferGeometryIntersection(this,g,n,C,v,S,R,b),x&&(x.faceIndex=A(c/3),h.push(x));else for(c=0,F=C.count;c<F;c+=3)S=c,R=c+1,b=c+2,x=checkBufferGeometryIntersection(this,g,n,C,v,S,R,b),x&&(x.index=S,h.push(x))}else if(_.isGeometry){var w=Array.isArray(y),L=_.vertices,M=_.faces,I=_.faceVertexUvs[0],D,B,N,P;0<I.length&&(P=I);for(var O=0,f=M.length;O<f;O++){var k=M[O],U=w?y[k.materialIndex]:y;if(void 0!==U){if(D=L[k.a],B=L[k.b],N=L[k.c],!0===U.morphTargets){var G=_.morphTargets,V=this.morphTargetInfluences;o.set(0,0,0),i.set(0,0,0),s.set(0,0,0);for(var H=0,z=G.length,W;H<z;H++)if(W=V[H],0!==W){var $=G[H].vertices;o.addScaledVector(a.subVectors($[k.a],D),W),i.addScaledVector(l.subVectors($[k.b],B),W),s.addScaledVector(d.subVectors($[k.c],N),W)}o.add(D),i.add(B),s.add(N),D=o,B=i,N=s}if(x=checkIntersection(this,U,g,n,D,B,N,m),x){if(P&&P[O]){var j=P[O];t.copy(j[0]),u.copy(j[1]),p.copy(j[2]),x.uv=uvIntersection(m,D,B,N,t,u,p)}x.face=k,x.faceIndex=O,h.push(x)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var rn=0;ArrayCamera.prototype=Object.assign(Object.create(PerspectiveCamera.prototype),{constructor:ArrayCamera,isArrayCamera:!0}),FogExp2.prototype.isFogExp2=!0,FogExp2.prototype.clone=function(){return new FogExp2(this.color.getHex(),this.density)},FogExp2.prototype.toJSON=function(){return{type:'FogExp2',color:this.color.getHex(),density:this.density}},Fog.prototype.isFog=!0,Fog.prototype.clone=function(){return new Fog(this.color.getHex(),this.near,this.far)},Fog.prototype.toJSON=function(){return{type:'Fog',color:this.color.getHex(),near:this.near,far:this.far}},Scene.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Scene,copy:function(e,t){return Object3D.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),LensFlare.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LensFlare,isLensFlare:!0,copy:function(e){Object3D.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,r,a,o){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===o&&(o=1),void 0===a&&(a=new Color(16777215)),void 0===r&&(r=z),n=x(n,y(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:o,color:a,blending:r})},updateLensFlares:function(){var e=this.lensFlares.length,t=2*-this.positionScreen.x,n=2*-this.positionScreen.y,r,a;for(r=0;r<e;r++)a=this.lensFlares[r],a.x=this.positionScreen.x+t*a.distance,a.y=this.positionScreen.y+n*a.distance,a.wantedRotation=.25*(a.x*h),a.rotation+=.25*(a.wantedRotation-a.rotation)}}),SpriteMaterial.prototype=Object.create(Material.prototype),SpriteMaterial.prototype.constructor=SpriteMaterial,SpriteMaterial.prototype.isSpriteMaterial=!0,SpriteMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Sprite.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Sprite,isSprite:!0,raycast:function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function raycast(r,a){t.setFromMatrixPosition(this.matrixWorld),r.ray.closestPointToPoint(t,e),n.setFromMatrixScale(this.matrixWorld);var o=n.x*n.y/4;if(!(t.distanceToSquared(e)>o)){var i=r.ray.origin.distanceTo(e);i<r.near||i>r.far||a.push({distance:i,point:e.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),LOD.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:LOD,copy:function(e){Object3D.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,r=t.length,a;n<r;n++)a=t[n],this.addLevel(a.object.clone(),a.distance);return this},addLevel:function(e,t){void 0===t&&(t=0),t=E(t);for(var n=this.levels,r=0;r<n.length&&!(t<n[r].distance);r++);n.splice(r,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,r=t.length;n<r&&!(e<t[n].distance);n++);return t[n-1].object},raycast:function(){var e=new Vector3;return function raycast(t,n){e.setFromMatrixPosition(this.matrixWorld);var r=t.ray.origin.distanceTo(e);this.getObjectForDistance(r).raycast(t,n)}}(),update:function(){var e=new Vector3,t=new Vector3;return function update(n){var r=this.levels;if(1<r.length){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var a=e.distanceTo(t);r[0].object.visible=!0;for(var o=1,i=r.length;o<i&&a>=r[o].distance;o++)r[o-1].object.visible=!1,r[o].object.visible=!0;for(;o<i;o++)r[o].object.visible=!1}}}(),toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,r=0,a=n.length,o;r<a;r++)o=n[r],t.object.levels.push({object:o.object.uuid,distance:o.distance});return t}}),Object.assign(Skeleton.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length,n;e<t;e++)n=new Matrix4,this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)e=this.bones[t],e&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new Matrix4,t=new Matrix4;return function update(){for(var n=this.bones,r=this.boneInverses,a=this.boneMatrices,o=this.boneTexture,s=0,i=n.length,l;s<i;s++)l=n[s]?n[s].matrixWorld:t,e.multiplyMatrices(l,r[s]),e.toArray(a,16*s);void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Skeleton(this.bones,this.boneInverses)}}),Bone.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Bone,isBone:!0}),SkinnedMesh.prototype=Object.assign(Object.create(Mesh.prototype),{constructor:SkinnedMesh,isSkinnedMesh:!0,initBones:function(){var e=[],t,n,r,a;if(this.geometry&&void 0!==this.geometry.bones){for(r=0,a=this.geometry.bones.length;r<a;r++)n=this.geometry.bones[r],t=new Bone,e.push(t),t.name=n.name,t.position.fromArray(n.pos),t.quaternion.fromArray(n.rotq),void 0!==n.scl&&t.scale.fromArray(n.scl);for(r=0,a=this.geometry.bones.length;r<a;r++)n=this.geometry.bones[r],-1!==n.parent&&null!==n.parent&&void 0!==e[n.parent]?e[n.parent].add(e[r]):this.add(e[r])}return this.updateMatrixWorld(!0),e},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];e=1/n.lengthManhattan(),e===Infinity?n.set(1,0,0,0):n.multiplyScalar(e)}else if(this.geometry&&this.geometry.isBufferGeometry){var r=new Vector4,a=this.geometry.attributes.skinWeight;for(t=0;t<a.count;t++)r.x=a.getX(t),r.y=a.getY(t),r.z=a.getZ(t),r.w=a.getW(t),e=1/r.lengthManhattan(),e===Infinity?r.set(1,0,0,0):r.multiplyScalar(e),a.setXYZW(t,r.x,r.y,r.z,r.w)}},updateMatrixWorld:function(e){Mesh.prototype.updateMatrixWorld.call(this,e),'attached'===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):'detached'===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn('THREE.SkinnedMesh: Unrecognized bindMode: '+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),LineBasicMaterial.prototype=Object.create(Material.prototype),LineBasicMaterial.prototype.constructor=LineBasicMaterial,LineBasicMaterial.prototype.isLineBasicMaterial=!0,LineBasicMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Line.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Line,isLine:!0,raycast:function(){var e=new Matrix4,t=new Ray,n=new Sphere;return function raycast(r,o){var s=r.linePrecision,d=s*s,c=this.geometry,u=this.matrixWorld;if(null===c.boundingSphere&&c.computeBoundingSphere(),n.copy(c.boundingSphere),n.applyMatrix4(u),!1!==r.ray.intersectsSphere(n)){e.getInverse(u),t.copy(r.ray).applyMatrix4(e);var p=new Vector3,m=new Vector3,g=new Vector3,h=new Vector3,f=this&&this.isLineSegments?2:1;if(c.isBufferGeometry){var _=c.index,y=c.attributes,E=y.position.array;if(null!==_)for(var x=_.array,A=0,T=x.length-1;A<T;A+=f){var l=x[A],a=x[A+1];p.fromArray(E,3*l),m.fromArray(E,3*a);var b=t.distanceSqToSegment(p,m,h,g);if(!(b>d)){h.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(h);C<r.near||C>r.far||o.push({distance:C,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else for(var A=0,T=E.length/3-1;A<T;A+=f){p.fromArray(E,3*A),m.fromArray(E,3*A+3);var b=t.distanceSqToSegment(p,m,h,g);if(!(b>d)){h.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(h);C<r.near||C>r.far||o.push({distance:C,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}else if(c.isGeometry)for(var v=c.vertices,S=v.length,A=0,b;A<S-1;A+=f)if(b=t.distanceSqToSegment(v[A],v[A+1],h,g),!(b>d)){h.applyMatrix4(this.matrixWorld);var C=r.ray.origin.distanceTo(h);C<r.near||C>r.far||o.push({distance:C,point:g.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),LineSegments.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineSegments,isLineSegments:!0}),LineLoop.prototype=Object.assign(Object.create(Line.prototype),{constructor:LineLoop,isLineLoop:!0}),PointsMaterial.prototype=Object.create(Material.prototype),PointsMaterial.prototype.constructor=PointsMaterial,PointsMaterial.prototype.isPointsMaterial=!0,PointsMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Points.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Points,isPoints:!0,raycast:function(){var e=new Matrix4,t=new Ray,n=new Sphere;return function raycast(r,o){function testPoint(e,n){var a=t.distanceSqToPoint(e);if(a<g){var i=t.closestPointToPoint(e);i.applyMatrix4(c);var l=r.ray.origin.distanceTo(i);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:p(a),point:i.clone(),index:n,face:null,object:s})}}var s=this,d=this.geometry,c=this.matrixWorld,u=r.params.Points.threshold;if(null===d.boundingSphere&&d.computeBoundingSphere(),n.copy(d.boundingSphere),n.applyMatrix4(c),n.radius+=u,!1!==r.ray.intersectsSphere(n)){e.getInverse(c),t.copy(r.ray).applyMatrix4(e);var m=u/((this.scale.x+this.scale.y+this.scale.z)/3),g=m*m,h=new Vector3;if(d.isBufferGeometry){var f=d.index,_=d.attributes,y=_.position.array;if(null!==f)for(var E=f.array,x=0,i=E.length,A;x<i;x++)A=E[x],h.fromArray(y,3*A),testPoint(h,A);else for(var x=0,a=y.length/3;x<a;x++)h.fromArray(y,3*x),testPoint(h,x)}else for(var l=d.vertices,x=0,a=l.length;x<a;x++)testPoint(l[x],x)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Group.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Group}),VideoTexture.prototype=Object.create(Texture.prototype),VideoTexture.prototype.constructor=VideoTexture,CompressedTexture.prototype=Object.create(Texture.prototype),CompressedTexture.prototype.constructor=CompressedTexture,CompressedTexture.prototype.isCompressedTexture=!0,DepthTexture.prototype=Object.create(Texture.prototype),DepthTexture.prototype.constructor=DepthTexture,DepthTexture.prototype.isDepthTexture=!0,WireframeGeometry.prototype=Object.create(BufferGeometry.prototype),WireframeGeometry.prototype.constructor=WireframeGeometry,ParametricGeometry.prototype=Object.create(Geometry.prototype),ParametricGeometry.prototype.constructor=ParametricGeometry,ParametricBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ParametricBufferGeometry.prototype.constructor=ParametricBufferGeometry,PolyhedronGeometry.prototype=Object.create(Geometry.prototype),PolyhedronGeometry.prototype.constructor=PolyhedronGeometry,PolyhedronBufferGeometry.prototype=Object.create(BufferGeometry.prototype),PolyhedronBufferGeometry.prototype.constructor=PolyhedronBufferGeometry,TetrahedronGeometry.prototype=Object.create(Geometry.prototype),TetrahedronGeometry.prototype.constructor=TetrahedronGeometry,TetrahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),TetrahedronBufferGeometry.prototype.constructor=TetrahedronBufferGeometry,OctahedronGeometry.prototype=Object.create(Geometry.prototype),OctahedronGeometry.prototype.constructor=OctahedronGeometry,OctahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),OctahedronBufferGeometry.prototype.constructor=OctahedronBufferGeometry,IcosahedronGeometry.prototype=Object.create(Geometry.prototype),IcosahedronGeometry.prototype.constructor=IcosahedronGeometry,IcosahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),IcosahedronBufferGeometry.prototype.constructor=IcosahedronBufferGeometry,DodecahedronGeometry.prototype=Object.create(Geometry.prototype),DodecahedronGeometry.prototype.constructor=DodecahedronGeometry,DodecahedronBufferGeometry.prototype=Object.create(PolyhedronBufferGeometry.prototype),DodecahedronBufferGeometry.prototype.constructor=DodecahedronBufferGeometry,TubeGeometry.prototype=Object.create(Geometry.prototype),TubeGeometry.prototype.constructor=TubeGeometry,TubeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TubeBufferGeometry.prototype.constructor=TubeBufferGeometry,TorusKnotGeometry.prototype=Object.create(Geometry.prototype),TorusKnotGeometry.prototype.constructor=TorusKnotGeometry,TorusKnotBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusKnotBufferGeometry.prototype.constructor=TorusKnotBufferGeometry,TorusGeometry.prototype=Object.create(Geometry.prototype),TorusGeometry.prototype.constructor=TorusGeometry,TorusBufferGeometry.prototype=Object.create(BufferGeometry.prototype),TorusBufferGeometry.prototype.constructor=TorusBufferGeometry;var an={area:function(e){for(var t=e.length,n=0,r=t-1,a=0;a<t;r=a++)n+=e[r].x*e[a].y-e[a].x*e[r].y;return .5*n},triangulate:function(){function snip(e,t,r,a,o,n){var i,s,d,c,u,p,m,g,h;if(s=e[n[t]].x,d=e[n[t]].y,c=e[n[r]].x,u=e[n[r]].y,p=e[n[a]].x,m=e[n[a]].y,0>=(c-s)*(m-d)-(u-d)*(p-s))return!1;var f,_,y,E,x,A,b,T,C,v,S,R,F,w,L;for(f=p-c,_=m-u,y=s-p,E=d-m,x=c-s,A=u-d,i=0;i<o;i++)if(g=e[n[i]].x,h=e[n[i]].y,(g!==s||h!==d)&&(g!==c||h!==u)&&(g!==p||h!==m)&&(b=g-s,T=h-d,C=g-c,v=h-u,S=g-p,R=h-m,L=f*v-_*C,F=x*T-A*b,w=y*R-E*S,L>=-l&&w>=-l&&F>=-l))return!1;return!0}return function triangulate(e,r){var o=e.length;if(3>o)return null;var n=[],i=[],l=[],d,u,p;if(0<an.area(e))for(u=0;u<o;u++)i[u]=u;else for(u=0;u<o;u++)i[u]=o-1-u;var m=o,g=2*m;for(u=m-1;2<m;){if(0>=g--)return console.warn('THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()'),r?l:n;if(d=u,m<=d&&(d=0),u=d+1,m<=u&&(u=0),p=u+1,m<=p&&(p=0),snip(e,d,u,p,m,i)){var h,a,f,c,s;for(h=i[d],a=i[u],f=i[p],n.push([e[h],e[a],e[f]]),l.push([i[d],i[u],i[p]]),(c=u,s=u+1);s<m;c++,s++)i[c]=i[s];m--,g=2*m}}return r?l:n}}(),triangulateShape:function(e,t){function removeDupEndPts(e){var t=e.length;2<t&&e[t-1].equals(e[0])&&e.pop()}function point_in_segment_2D_colin(e,t,n){return e.x===t.x?e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y:e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x}function intersect_segments_2D(e,t,n,r,a){var o=t.x-e.x,i=t.y-e.y,s=r.x-n.x,d=r.y-n.y,c=e.x-n.x,u=e.y-n.y,p=i*s-o*d,m=i*c-o*u;if(E(p)>l){var g;if(0<p){if(0>m||m>p)return[];if(g=d*c-s*u,0>g||g>p)return[]}else{if(0<m||m<p)return[];if(g=d*c-s*u,0<g||g<p)return[]}if(0===g)return a&&(0==m||m==p)?[]:[e];if(g===p)return a&&(0==m||m==p)?[]:[t];if(0==m)return[n];if(m==p)return[r];var h=g/p;return[{x:e.x+h*o,y:e.y+h*i}]}if(0!=m||d*c!=s*u)return[];var f=0==o&&0==i,_=0==s&&0==d;if(f&&_)return e.x!==n.x||e.y!==n.y?[]:[e];if(f)return point_in_segment_2D_colin(n,r,e)?[e]:[];if(_)return point_in_segment_2D_colin(e,t,n)?[n]:[];var y,x,A,b,T,C,v,S;return 0==o?(e.y<t.y?(y=e,A=e.y,x=t,b=t.y):(y=t,A=t.y,x=e,b=e.y),n.y<r.y?(T=n,v=n.y,C=r,S=r.y):(T=r,v=r.y,C=n,S=n.y)):(e.x<t.x?(y=e,A=e.x,x=t,b=t.x):(y=t,A=t.x,x=e,b=e.x),n.x<r.x?(T=n,v=n.x,C=r,S=r.x):(T=r,v=r.x,C=n,S=n.x)),A<=v?b<v?[]:b===v?a?[]:[T]:b<=S?[T,x]:[T,C]:A>S?[]:A===S?a?[]:[y]:b<=S?[y,x]:[y,C]}function isPointInsideAngle(e,t,n,r){var a=t.x-e.x,o=t.y-e.y,i=n.x-e.x,s=n.y-e.y,d=r.x-e.x,c=r.y-e.y,u=a*s-o*i,p=a*c-o*d;if(E(u)>l){var m=d*s-c*i;return 0<u?0<=p&&0<=m:0<=p||0<=m}return 0<p}function removeHoles(e,t){function isCutLineInsideAngles(e,t){var r=n.length-1,a=e-1;0>a&&(a=r);var o=e+1;o>r&&(o=0);var i=isPointInsideAngle(n[e],n[a],n[o],s[t]);if(!i)return!1;var l=s.length-1,d=t-1;0>d&&(d=l);var c=t+1;return c>l&&(c=0),i=isPointInsideAngle(s[t],s[d],s[c],n[e]),!!i}function intersectsShapeEdge(e,t){var r,a,o;for(r=0;r<n.length;r++)if(a=r+1,a%=n.length,o=intersect_segments_2D(e,t,n[r],n[a],!0),0<o.length)return!0;return!1}function intersectsHoleEdge(e,n){var a,o,i,s,l;for(a=0;a<r.length;a++)for(o=t[r[a]],i=0;i<o.length;i++)if(s=i+1,s%=o.length,l=intersect_segments_2D(e,n,o[i],o[s],!0),0<l.length)return!0;return!1}for(var n=e.concat(),r=[],a=[],o=0,i=t.length,s,l,d,c,u,p,m,g,h,f,_;o<i;o++)r.push(o);for(var y=0,E=2*r.length;0<r.length;){if(E--,0>E){console.log('THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!');break}for(d=y;d<n.length;d++){c=n[d],l=-1;for(var o=0;o<r.length;o++)if(p=r[o],m=c.x+':'+c.y+':'+p,void 0===a[m]){s=t[p];for(var x=0;x<s.length;x++)if(u=s[x],isCutLineInsideAngles(d,x)&&!intersectsShapeEdge(c,u)&&!intersectsHoleEdge(c,u)){l=x,r.splice(o,1),g=n.slice(0,d+1),h=n.slice(d),f=s.slice(l),_=s.slice(0,l+1),n=g.concat(f).concat(_).concat(h),y=d;break}if(0<=l)break;a[m]=!0}if(0<=l)break}}return n}removeDupEndPts(e),t.forEach(removeDupEndPts);for(var n={},r=e.concat(),a=0,o=t.length,s,i,d,c,u,p;a<o;a++)Array.prototype.push.apply(r,t[a]);for(s=0,i=r.length;s<i;s++)u=r[s].x+':'+r[s].y,void 0!==n[u]&&console.warn('THREE.ShapeUtils: Duplicate point',u,s),n[u]=s;var m=removeHoles(e,t),g=an.triangulate(m,!1);for(s=0,i=g.length;s<i;s++)for(c=g[s],d=0;3>d;d++)u=c[d].x+':'+c[d].y,p=n[u],void 0!==p&&(c[d]=p);return g.concat()},isClockWise:function(e){return 0>an.area(e)}};ExtrudeGeometry.prototype=Object.create(Geometry.prototype),ExtrudeGeometry.prototype.constructor=ExtrudeGeometry,ExtrudeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ExtrudeBufferGeometry.prototype.constructor=ExtrudeBufferGeometry,ExtrudeBufferGeometry.prototype.getArrays=function(){var e=this.getAttribute('position'),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute('uv'),r=n?Array.prototype.slice.call(n.array):[],a=this.index,o=a?Array.prototype.slice.call(a.array):[];return{position:t,uv:r,index:o}},ExtrudeBufferGeometry.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var r=0,a;r<n;r++)a=e[r],this.addShape(a,t);this.setIndex(t.arrays.index),this.addAttribute('position',new Float32BufferAttribute(t.arrays.position,3)),this.addAttribute('uv',new Float32BufferAttribute(t.arrays.uv,2))},ExtrudeBufferGeometry.prototype.addShape=function(e,n){function scalePt2(e,t,n){return t||console.error('THREE.ExtrudeGeometry: vec does not exist'),t.clone().multiplyScalar(n).add(e)}function getBevelVec(e,t,n){var r=e.x-t.x,a=e.y-t.y,o=n.x-e.x,i=n.y-e.y,d=r*r+a*a,c,u,m;if(E(r*i-a*o)>l){var g=p(d),h=p(o*o+i*i),f=t.x-a/g,_=t.y+r/g,y=n.x-i/h,x=n.y+o/h,A=((y-f)*i-(x-_)*o)/(r*i-a*o);c=f+r*A-e.x,u=_+a*A-e.y;var b=c*c+u*u;if(2>=b)return new Vector2(c,u);m=p(b/2)}else{var T=!1;r>l?o>l&&(T=!0):r<-l?o<-l&&(T=!0):s(a)===s(i)&&(T=!0),T?(c=-a,u=r,m=p(d)):(c=r,u=a,m=p(d/2))}return new Vector2(c/m,u/m)}function buildLidFaces(){var e=o.length/3;if(x){var t=0,r=$*t;for(Y=0;Y<X;Y++)J=H[Y],f3(J[2]+r,J[1]+r,J[0]+r);for(t=T+2*y,r=$*t,Y=0;Y<X;Y++)J=H[Y],f3(J[0]+r,J[1]+r,J[2]+r)}else{for(Y=0;Y<X;Y++)J=H[Y],f3(J[2],J[1],J[0]);for(Y=0;Y<X;Y++)J=H[Y],f3(J[0]+$*T,J[1]+$*T,J[2]+$*T)}D.addGroup(e,o.length/3-e,void 0===n.material?0:n.material)}function buildSideFaces(){var e=o.length/3,t=0;for(sidewalls(W,t),t+=W.length,(G=0,V=P.length);G<V;G++)U=P[G],sidewalls(U,t),t+=U.length;D.addGroup(e,o.length/3-e,void 0===n.extrudeMaterial?1:n.extrudeMaterial)}function sidewalls(e,t){var n,r;for(Y=e.length;0<=--Y;){n=Y,r=Y-1,0>r&&(r=e.length-1);var o=0,i=T+2*y;for(o=0;o<i;o++){var s=$*o,l=$*(o+1),u=t+n+s,a=t+r+s,p=t+r+l,c=t+n+l;f4(u,a,p,c,e,o,i,n,r)}}}function v(e,t,n){c.push(e),c.push(t),c.push(n)}function f3(e,t,n){addVertex(e),addVertex(t),addVertex(n);var r=o.length/3,a=R.generateTopUV(D,o,r-3,r-2,r-1);addUV(a[0]),addUV(a[1]),addUV(a[2])}function f4(e,t,n,r){addVertex(e),addVertex(t),addVertex(r),addVertex(t),addVertex(n),addVertex(r);var a=o.length/3,i=R.generateSideWallUV(D,o,a-6,a-3,a-2,a-1);addUV(i[0]),addUV(i[1]),addUV(i[3]),addUV(i[1]),addUV(i[2]),addUV(i[3])}function addVertex(e){a.push(o.length/3),o.push(c[3*e+0]),o.push(c[3*e+1]),o.push(c[3*e+2])}function addUV(e){d.push(e.x),d.push(e.y)}var r=n.arrays?n.arrays:this.getArrays(),o=r.position,a=r.index,d=r.uv,c=[],u=void 0===n.amount?100:n.amount,f=void 0===n.bevelThickness?6:n.bevelThickness,_=void 0===n.bevelSize?f-2:n.bevelSize,y=void 0===n.bevelSegments?3:n.bevelSegments,x=void 0===n.bevelEnabled||n.bevelEnabled,A=void 0===n.curveSegments?12:n.curveSegments,T=void 0===n.steps?1:n.steps,C=n.extrudePath,S=!1,R=void 0===n.UVGenerator?ExtrudeGeometry.WorldUVGenerator:n.UVGenerator,F,w,L,M,I;C&&(F=C.getSpacedPoints(T),S=!0,x=!1,w=void 0===n.frames?C.computeFrenetFrames(T,!1):n.frames,L=new Vector3,M=new Vector3,I=new Vector3),x||(y=0,f=0,_=0);var D=this,B=e.extractPoints(A),N=B.shape,P=B.holes,O=!an.isClockWise(N),U,G,V;if(O)for(N=N.reverse(),G=0,V=P.length;G<V;G++)U=P[G],an.isClockWise(U)&&(P[G]=U.reverse());var H=an.triangulateShape(N,P),W=N;for(G=0,V=P.length;G<V;G++)U=P[G],N=N.concat(U);for(var $=N.length,X=H.length,K=[],Y=0,i=W.length,q=i-1,j=Y+1,k,b,Z,t,Q,J;Y<i;Y++,q++,j++)q===i&&(q=0),j===i&&(j=0),K[Y]=getBevelVec(W[Y],W[q],W[j]);var ee=[],te=K.concat(),ne;for(G=0,V=P.length;G<V;G++){for(U=P[G],ne=[],(Y=0,i=U.length,q=i-1,j=Y+1);Y<i;Y++,q++,j++)q===i&&(q=0),j===i&&(j=0),ne[Y]=getBevelVec(U[Y],U[q],U[j]);ee.push(ne),te=te.concat(ne)}for(k=0;k<y;k++){for(Z=k/y,t=f*m(Z*h/2),b=_*g(Z*h/2),(Y=0,i=W.length);Y<i;Y++)Q=scalePt2(W[Y],K[Y],b),v(Q.x,Q.y,-t);for(G=0,V=P.length;G<V;G++)for(U=P[G],ne=ee[G],(Y=0,i=U.length);Y<i;Y++)Q=scalePt2(U[Y],ne[Y],b),v(Q.x,Q.y,-t)}for(b=_,Y=0;Y<$;Y++)Q=x?scalePt2(N[Y],te[Y],b):N[Y],S?(M.copy(w.normals[0]).multiplyScalar(Q.x),L.copy(w.binormals[0]).multiplyScalar(Q.y),I.copy(F[0]).add(M).add(L),v(I.x,I.y,I.z)):v(Q.x,Q.y,0);var re;for(re=1;re<=T;re++)for(Y=0;Y<$;Y++)Q=x?scalePt2(N[Y],te[Y],b):N[Y],S?(M.copy(w.normals[re]).multiplyScalar(Q.x),L.copy(w.binormals[re]).multiplyScalar(Q.y),I.copy(F[re]).add(M).add(L),v(I.x,I.y,I.z)):v(Q.x,Q.y,u/T*re);for(k=y-1;0<=k;k--){for(Z=k/y,t=f*m(Z*h/2),b=_*g(Z*h/2),(Y=0,i=W.length);Y<i;Y++)Q=scalePt2(W[Y],K[Y],b),v(Q.x,Q.y,u+t);for(G=0,V=P.length;G<V;G++)for(U=P[G],ne=ee[G],(Y=0,i=U.length);Y<i;Y++)Q=scalePt2(U[Y],ne[Y],b),S?v(Q.x,Q.y+F[T-1].y,F[T-1].x+t):v(Q.x,Q.y,u+t)}buildLidFaces(),buildSideFaces(),n.arrays||(this.setIndex(a),this.addAttribute('position',new Float32BufferAttribute(o,3)),this.addAttribute('uv',new Float32BufferAttribute(n.arrays.uv,2)))},ExtrudeGeometry.WorldUVGenerator={generateTopUV:function(e,t,n,r,a){var o=t[3*n],i=t[3*n+1],s=t[3*r],l=t[3*r+1],d=t[3*a],c=t[3*a+1];return[new Vector2(o,i),new Vector2(s,l),new Vector2(d,c)]},generateSideWallUV:function(e,t,n,r,a,o){var i=t[3*n],s=t[3*n+1],l=t[3*n+2],d=t[3*r],c=t[3*r+1],u=t[3*r+2],p=t[3*a],m=t[3*a+1],g=t[3*a+2],h=t[3*o],f=t[3*o+1],_=t[3*o+2];return .01>E(s-c)?[new Vector2(i,1-l),new Vector2(d,1-u),new Vector2(p,1-g),new Vector2(h,1-_)]:[new Vector2(s,1-l),new Vector2(c,1-u),new Vector2(m,1-g),new Vector2(f,1-_)]}},TextGeometry.prototype=Object.create(Geometry.prototype),TextGeometry.prototype.constructor=TextGeometry,TextBufferGeometry.prototype=Object.create(ExtrudeBufferGeometry.prototype),TextBufferGeometry.prototype.constructor=TextBufferGeometry,SphereGeometry.prototype=Object.create(Geometry.prototype),SphereGeometry.prototype.constructor=SphereGeometry,SphereBufferGeometry.prototype=Object.create(BufferGeometry.prototype),SphereBufferGeometry.prototype.constructor=SphereBufferGeometry,RingGeometry.prototype=Object.create(Geometry.prototype),RingGeometry.prototype.constructor=RingGeometry,RingBufferGeometry.prototype=Object.create(BufferGeometry.prototype),RingBufferGeometry.prototype.constructor=RingBufferGeometry,LatheGeometry.prototype=Object.create(Geometry.prototype),LatheGeometry.prototype.constructor=LatheGeometry,LatheBufferGeometry.prototype=Object.create(BufferGeometry.prototype),LatheBufferGeometry.prototype.constructor=LatheBufferGeometry,ShapeGeometry.prototype=Object.create(Geometry.prototype),ShapeGeometry.prototype.constructor=ShapeGeometry,ShapeBufferGeometry.prototype=Object.create(BufferGeometry.prototype),ShapeBufferGeometry.prototype.constructor=ShapeBufferGeometry,EdgesGeometry.prototype=Object.create(BufferGeometry.prototype),EdgesGeometry.prototype.constructor=EdgesGeometry,CylinderGeometry.prototype=Object.create(Geometry.prototype),CylinderGeometry.prototype.constructor=CylinderGeometry,CylinderBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CylinderBufferGeometry.prototype.constructor=CylinderBufferGeometry,ConeGeometry.prototype=Object.create(CylinderGeometry.prototype),ConeGeometry.prototype.constructor=ConeGeometry,ConeBufferGeometry.prototype=Object.create(CylinderBufferGeometry.prototype),ConeBufferGeometry.prototype.constructor=ConeBufferGeometry,CircleGeometry.prototype=Object.create(Geometry.prototype),CircleGeometry.prototype.constructor=CircleGeometry,CircleBufferGeometry.prototype=Object.create(BufferGeometry.prototype),CircleBufferGeometry.prototype.constructor=CircleBufferGeometry;var on=Object.freeze({WireframeGeometry:WireframeGeometry,ParametricGeometry:ParametricGeometry,ParametricBufferGeometry:ParametricBufferGeometry,TetrahedronGeometry:TetrahedronGeometry,TetrahedronBufferGeometry:TetrahedronBufferGeometry,OctahedronGeometry:OctahedronGeometry,OctahedronBufferGeometry:OctahedronBufferGeometry,IcosahedronGeometry:IcosahedronGeometry,IcosahedronBufferGeometry:IcosahedronBufferGeometry,DodecahedronGeometry:DodecahedronGeometry,DodecahedronBufferGeometry:DodecahedronBufferGeometry,PolyhedronGeometry:PolyhedronGeometry,PolyhedronBufferGeometry:PolyhedronBufferGeometry,TubeGeometry:TubeGeometry,TubeBufferGeometry:TubeBufferGeometry,TorusKnotGeometry:TorusKnotGeometry,TorusKnotBufferGeometry:TorusKnotBufferGeometry,TorusGeometry:TorusGeometry,TorusBufferGeometry:TorusBufferGeometry,TextGeometry:TextGeometry,TextBufferGeometry:TextBufferGeometry,SphereGeometry:SphereGeometry,SphereBufferGeometry:SphereBufferGeometry,RingGeometry:RingGeometry,RingBufferGeometry:RingBufferGeometry,PlaneGeometry:PlaneGeometry,PlaneBufferGeometry:PlaneBufferGeometry,LatheGeometry:LatheGeometry,LatheBufferGeometry:LatheBufferGeometry,ShapeGeometry:ShapeGeometry,ShapeBufferGeometry:ShapeBufferGeometry,ExtrudeGeometry:ExtrudeGeometry,ExtrudeBufferGeometry:ExtrudeBufferGeometry,EdgesGeometry:EdgesGeometry,ConeGeometry:ConeGeometry,ConeBufferGeometry:ConeBufferGeometry,CylinderGeometry:CylinderGeometry,CylinderBufferGeometry:CylinderBufferGeometry,CircleGeometry:CircleGeometry,CircleBufferGeometry:CircleBufferGeometry,BoxGeometry:BoxGeometry,BoxBufferGeometry:BoxBufferGeometry});ShadowMaterial.prototype=Object.create(Material.prototype),ShadowMaterial.prototype.constructor=ShadowMaterial,ShadowMaterial.prototype.isShadowMaterial=!0,RawShaderMaterial.prototype=Object.create(ShaderMaterial.prototype),RawShaderMaterial.prototype.constructor=RawShaderMaterial,RawShaderMaterial.prototype.isRawShaderMaterial=!0,MeshStandardMaterial.prototype=Object.create(Material.prototype),MeshStandardMaterial.prototype.constructor=MeshStandardMaterial,MeshStandardMaterial.prototype.isMeshStandardMaterial=!0,MeshStandardMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.defines={STANDARD:''},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshPhysicalMaterial.prototype=Object.create(MeshStandardMaterial.prototype),MeshPhysicalMaterial.prototype.constructor=MeshPhysicalMaterial,MeshPhysicalMaterial.prototype.isMeshPhysicalMaterial=!0,MeshPhysicalMaterial.prototype.copy=function(e){return MeshStandardMaterial.prototype.copy.call(this,e),this.defines={PHYSICAL:''},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},MeshPhongMaterial.prototype=Object.create(Material.prototype),MeshPhongMaterial.prototype.constructor=MeshPhongMaterial,MeshPhongMaterial.prototype.isMeshPhongMaterial=!0,MeshPhongMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshToonMaterial.prototype=Object.create(MeshPhongMaterial.prototype),MeshToonMaterial.prototype.constructor=MeshToonMaterial,MeshToonMaterial.prototype.isMeshToonMaterial=!0,MeshToonMaterial.prototype.copy=function(e){return MeshPhongMaterial.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},MeshNormalMaterial.prototype=Object.create(Material.prototype),MeshNormalMaterial.prototype.constructor=MeshNormalMaterial,MeshNormalMaterial.prototype.isMeshNormalMaterial=!0,MeshNormalMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},MeshLambertMaterial.prototype=Object.create(Material.prototype),MeshLambertMaterial.prototype.constructor=MeshLambertMaterial,MeshLambertMaterial.prototype.isMeshLambertMaterial=!0,MeshLambertMaterial.prototype.copy=function(e){return Material.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},LineDashedMaterial.prototype=Object.create(LineBasicMaterial.prototype),LineDashedMaterial.prototype.constructor=LineDashedMaterial,LineDashedMaterial.prototype.isLineDashedMaterial=!0,LineDashedMaterial.prototype.copy=function(e){return LineBasicMaterial.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var sn=Object.freeze({ShadowMaterial:ShadowMaterial,SpriteMaterial:SpriteMaterial,RawShaderMaterial:RawShaderMaterial,ShaderMaterial:ShaderMaterial,PointsMaterial:PointsMaterial,MeshPhysicalMaterial:MeshPhysicalMaterial,MeshStandardMaterial:MeshStandardMaterial,MeshPhongMaterial:MeshPhongMaterial,MeshToonMaterial:MeshToonMaterial,MeshNormalMaterial:MeshNormalMaterial,MeshLambertMaterial:MeshLambertMaterial,MeshDepthMaterial:MeshDepthMaterial,MeshDistanceMaterial:MeshDistanceMaterial,MeshBasicMaterial:MeshBasicMaterial,LineDashedMaterial:LineDashedMaterial,LineBasicMaterial:LineBasicMaterial,Material:Material}),ln={enabled:!1,files:{},add:function(e,t){!1===this.enabled||(this.files[e]=t)},get:function(e){return!1===this.enabled?void 0:this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},dn=new LoadingManager;Object.assign(FileLoader.prototype,{load:function(e,t,n,r){void 0===e&&(e=''),void 0!==this.path&&(e=this.path+e);var a=this,o=ln.get(e);if(void 0!==o)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var s=/^data:(.*?)(;base64)?,(.*)$/,l=e.match(s);if(l){var d=l[1],c=!!l[2],u=l[3];u=window.decodeURIComponent(u),c&&(u=window.atob(u));try{var p=(this.responseType||'').toLowerCase(),m;switch(p){case'arraybuffer':case'blob':m=new ArrayBuffer(u.length);for(var g=new Uint8Array(m),h=0;h<u.length;h++)g[h]=u.charCodeAt(h);'blob'===p&&(m=new Blob([m],{type:d}));break;case'document':var i=new DOMParser;m=i.parseFromString(u,d);break;case'json':m=JSON.parse(u);break;default:m=u;}window.setTimeout(function(){t&&t(m),a.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),a.manager.itemEnd(e),a.manager.itemError(e)},0)}}else{var f=new XMLHttpRequest;for(var _ in f.open('GET',e,!0),f.addEventListener('load',function(n){var o=n.target.response;ln.add(e,o),200===this.status?(t&&t(o),a.manager.itemEnd(e)):0===this.status?(console.warn('THREE.FileLoader: HTTP Status 0 received.'),t&&t(o),a.manager.itemEnd(e)):(r&&r(n),a.manager.itemEnd(e),a.manager.itemError(e))},!1),void 0!==n&&f.addEventListener('progress',function(e){n(e)},!1),f.addEventListener('error',function(t){r&&r(t),a.manager.itemEnd(e),a.manager.itemError(e)},!1),void 0!==this.responseType&&(f.responseType=this.responseType),void 0!==this.withCredentials&&(f.withCredentials=this.withCredentials),f.overrideMimeType&&f.overrideMimeType(void 0===this.mimeType?'text/plain':this.mimeType),this.requestHeader)f.setRequestHeader(_,this.requestHeader[_]);f.send(null)}return a.manager.itemStart(e),f},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(CompressedTextureLoader.prototype,{load:function(e,t,n,r){function loadTexture(c){l.load(e[c],function(e){var n=a._parser(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},d+=1,6===d&&(1===n.mipmapCount&&(s.minFilter=Ge),s.format=n.format,s.needsUpdate=!0,t&&t(s))},n,r)}var a=this,o=[],s=new CompressedTexture;s.image=o;var l=new FileLoader(this.manager);if(l.setPath(this.path),l.setResponseType('arraybuffer'),Array.isArray(e))for(var d=0,c=0,i=e.length;c<i;++c)loadTexture(c);else l.load(e,function(e){var n=a._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,l=0;l<r;l++){o[l]={mipmaps:[]};for(var d=0;d<n.mipmapCount;d++)o[l].mipmaps.push(n.mipmaps[l*n.mipmapCount+d]),o[l].format=n.format,o[l].width=n.width,o[l].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Ge),s.format=n.format,s.needsUpdate=!0,t&&t(s)},n,r);return s},setPath:function(e){return this.path=e,this}}),Object.assign(DataTextureLoader.prototype,{load:function(e,t,n,r){var a=this,o=new DataTexture,i=new FileLoader(this.manager);return i.setResponseType('arraybuffer'),i.load(e,function(e){var n=a._parser(e);n&&(void 0===n.image?void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data):o.image=n.image,o.wrapS=void 0===n.wrapS?Ne:n.wrapS,o.wrapT=void 0===n.wrapT?Ne:n.wrapT,o.magFilter=void 0===n.magFilter?Ge:n.magFilter,o.minFilter=void 0===n.minFilter?He:n.minFilter,o.anisotropy=void 0===n.anisotropy?1:n.anisotropy,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=Ge),o.needsUpdate=!0,t&&t(o,n))},n,r),o}}),Object.assign(ImageLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,r){void 0===e&&(e=''),void 0!==this.path&&(e=this.path+e);var a=this,o=ln.get(e);if(void 0!==o)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var i=document.createElementNS('http://www.w3.org/1999/xhtml','img');return i.addEventListener('load',function(){ln.add(e,this),t&&t(this),a.manager.itemEnd(e)},!1),i.addEventListener('error',function(t){r&&r(t),a.manager.itemEnd(e),a.manager.itemError(e)},!1),'data:'!==e.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),a.manager.itemStart(e),i.src=e,i},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(CubeTextureLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,r){function loadTexture(n){o.load(e[n],function(e){a.images[n]=e,s++,6===s&&(a.needsUpdate=!0,t&&t(a))},void 0,r)}var a=new CubeTexture,o=new ImageLoader(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,l=0;l<e.length;++l)loadTexture(l);return a},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(TextureLoader.prototype,{crossOrigin:'Anonymous',load:function(e,t,n,r){var a=new ImageLoader(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=new Texture;return o.image=a.load(e,function(){var n=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data\:image\/jpeg/);o.format=n?nt:rt,o.needsUpdate=!0,void 0!==t&&t(o)},n,r),o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Light.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Light,isLight:!0,copy:function(e){return Object3D.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Object3D.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),HemisphereLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:HemisphereLight,isHemisphereLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(LightShadow.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),SpotLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:SpotLightShadow,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*Gt.RAD2DEG*e.angle,r=this.mapSize.width/this.mapSize.height,a=e.distance||t.far;(n!==t.fov||r!==t.aspect||a!==t.far)&&(t.fov=n,t.aspect=r,t.far=a,t.updateProjectionMatrix())}}),SpotLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:SpotLight,isSpotLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),PointLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:PointLight,isPointLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),DirectionalLightShadow.prototype=Object.assign(Object.create(LightShadow.prototype),{constructor:DirectionalLightShadow}),DirectionalLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:DirectionalLight,isDirectionalLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),AmbientLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:AmbientLight,isAmbientLight:!0}),RectAreaLight.prototype=Object.assign(Object.create(Light.prototype),{constructor:RectAreaLight,isRectAreaLight:!0,copy:function(e){return Light.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=Light.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}});var cn={arraySlice:function(e,t,n){return cn.isTypedArray(e)?new e.constructor(e.subarray(t,void 0===n?e.length:n)):e.slice(t,n)},convertArray:function(e,t,n){return e&&(n||e.constructor!==t)?'number'==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){function compareTime(t,n){return e[t]-e[n]}for(var t=e.length,n=Array(t),r=0;r!==t;++r)n[r]=r;return n.sort(compareTime),n},sortedArray:function(e,t,n){for(var r=e.length,a=new e.constructor(r),o=0,i=0,s;i!==r;++o){s=n[o]*t;for(var l=0;l!==t;++l)a[i++]=e[s+l]}return a},flattenJSON:function(e,t,n,r){for(var a=1,o=e[0];void 0!==o&&void 0===o[r];)o=e[a++];if(void 0!==o){var i=o[r];if(void 0!==i)if(Array.isArray(i))do i=o[r],void 0!==i&&(t.push(o.time),n.push.apply(n,i)),o=e[a++];while(void 0!==o);else if(void 0!==i.toArray)do i=o[r],void 0!==i&&(t.push(o.time),i.toArray(n,n.length)),o=e[a++];while(void 0!==o);else do i=o[r],void 0!==i&&(t.push(o.time),n.push(i)),o=e[a++];while(void 0!==o)}}};Object.assign(Interpolant.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,r=t[n],a=t[n-1];validate_interval:{seek:{var o;linear_scan:{forward_scan:if(!(e<r)){for(var i=n+2;;){if(void 0===r){if(e<a)break forward_scan;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,a)}if(n===i)break;if(a=r,r=t[++n],e<r)break seek}o=t.length;break linear_scan}if(!(e>=a)){var s=t[1];e<s&&(n=2,a=s);for(var i=n-2;;){if(void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(n===i)break;if(r=a,a=t[--n-1],e>=a)break seek}o=n,n=0;break linear_scan}break validate_interval}for(;n<o;){var l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],a=t[n-1],void 0===a)return this._cachedIndex=0,this.beforeStart_(0,e,r);if(void 0===r)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,a,e)}this._cachedIndex=n,this.intervalChanged_(n,a,r)}return this.interpolate_(n,a,e,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,a=0;a!==r;++a)t[a]=n[e*r+a];return t},interpolate_:function(){throw new Error('call to abstract method')},intervalChanged_:function(){}}),Object.assign(Interpolant.prototype,{beforeStart_:Interpolant.prototype.copySampleValue_,afterEnd_:Interpolant.prototype.copySampleValue_}),CubicInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:CubicInterpolant,DefaultSettings_:{endingStart:Ct,endingEnd:Ct},intervalChanged_:function(e,t,n){var r=this.parameterPositions,a=e-2,o=e+1,i=r[a],s=r[o];if(void 0===i)switch(this.getSettings_().endingStart){case vt:a=e,i=2*t-n;break;case St:a=r.length-2,i=t+r[a]-r[a+1];break;default:a=e,i=n;}if(void 0===s)switch(this.getSettings_().endingEnd){case vt:o=e,s=2*n-t;break;case St:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t;}var l=.5*(n-t),d=this.valueSize;this._weightPrev=l/(t-i),this._weightNext=l/(s-n),this._offsetPrev=a*d,this._offsetNext=o*d},interpolate_:function(e,n,r,t){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,d=this._offsetPrev,c=this._offsetNext,u=this._weightPrev,m=this._weightNext,g=(r-n)/(t-n),p=g*g,h=p*g,f=0;f!==s;++f)a[f]=(-u*h+2*u*p-u*g)*o[d+f]+((1+u)*h+(-1.5-2*u)*p+(-.5+u)*g+1)*o[l-s+f]+((-1-m)*h+(1.5+m)*p+.5*g)*o[l+f]+(m*h-m*p)*o[c+f];return a}}),LinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:LinearInterpolant,interpolate_:function(e,n,r,t){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,l=e*s,d=(r-n)/(t-n),c=0;c!==s;++c)a[c]=o[l-s+c]*(1-d)+o[l+c]*d;return a}}),DiscreteInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:DiscreteInterpolant,interpolate_:function(e){return this.copySampleValue_(e-1)}});var un;un={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:bt,InterpolantFactoryMethodDiscrete:function(e){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new LinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new CubicInterpolant(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;if(e===At?t=this.InterpolantFactoryMethodDiscrete:e===bt?t=this.InterpolantFactoryMethodLinear:e===Tt?t=this.InterpolantFactoryMethodSmooth:void 0,void 0===t){var n='unsupported interpolation for '+this.ValueTypeName+' keyframe track named '+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return void console.warn('THREE.KeyframeTrackPrototype:',n)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return At;case this.InterpolantFactoryMethodLinear:return bt;case this.InterpolantFactoryMethodSmooth:return Tt;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,a=t.length;r!==a;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,a=t.length;r!==a;++r)t[r]*=e;return this},trim:function(e,t){for(var n=this.times,r=n.length,a=0,o=r-1;a!==r&&n[a]<e;)++a;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==a||o!==r){a>=o&&(o=y(o,1),a=o-1);var i=this.getValueSize();this.times=cn.arraySlice(n,a,o),this.values=cn.arraySlice(this.values,a*i,o*i)}return this},validate:function(){var e=!0,t=this.getValueSize();0!=t-A(t)&&(console.error('THREE.KeyframeTrackPrototype: Invalid value size in track.',this),e=!1);var r=this.times,a=this.values,o=r.length;0===o&&(console.error('THREE.KeyframeTrackPrototype: Track is empty.',this),e=!1);for(var s=null,l=0,i;l!==o;l++){if(i=r[l],'number'==typeof i&&isNaN(i)){console.error('THREE.KeyframeTrackPrototype: Time is not a valid number.',this,l,i),e=!1;break}if(null!==s&&s>i){console.error('THREE.KeyframeTrackPrototype: Out of order keys.',this,l,i,s),e=!1;break}s=i}if(void 0!==a&&cn.isTypedArray(a))for(var l=0,d=a.length,n;l!==d;++l)if(n=a[l],isNaN(n)){console.error('THREE.KeyframeTrackPrototype: Value is not a valid number.',this,l,n),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),r=this.getInterpolation()===Tt,a=1,o=e.length-1,s=1;s<o;++s){var i=!1,l=e[s],d=e[s+1];if(l!==d&&(1!==s||l!==l[0]))if(!r){for(var c=s*n,u=0,p;u!==n;++u)if(p=t[c+u],p!==t[c-n+u]||p!==t[c+n+u]){i=!0;break}}else i=!0;if(i){if(s!==a){e[a]=e[s];for(var m=s*n,g=a*n,u=0;u!==n;++u)t[g+u]=t[m+u]}++a}}if(0<o){e[a]=e[o];for(var m=o*n,g=a*n,u=0;u!==n;++u)t[g+u]=t[m+u];++a}return a!==e.length&&(this.times=cn.arraySlice(e,0,a),this.values=cn.arraySlice(t,0,a*n)),this}},VectorKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:VectorKeyframeTrack,ValueTypeName:'vector'}),QuaternionLinearInterpolant.prototype=Object.assign(Object.create(Interpolant.prototype),{constructor:QuaternionLinearInterpolant,interpolate_:function(e,n,r,t){for(var a=this.resultBuffer,o=this.sampleValues,i=this.valueSize,s=e*i,l=s+i;s!==l;s+=4)Quaternion.slerpFlat(a,0,o,s-i,o,s,(r-n)/(t-n));return a}}),QuaternionKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:QuaternionKeyframeTrack,ValueTypeName:'quaternion',DefaultInterpolation:bt,InterpolantFactoryMethodLinear:function(e){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),NumberKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:NumberKeyframeTrack,ValueTypeName:'number'}),StringKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:StringKeyframeTrack,ValueTypeName:'string',ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),BooleanKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:BooleanKeyframeTrack,ValueTypeName:'bool',ValueBufferType:Array,DefaultInterpolation:At,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),ColorKeyframeTrack.prototype=Object.assign(Object.create(un),{constructor:ColorKeyframeTrack,ValueTypeName:'color'}),KeyframeTrack.prototype=un,un.constructor=KeyframeTrack,Object.assign(KeyframeTrack,{parse:function(e){if(void 0===e.type)throw new Error('track type undefined, can not parse');var t=KeyframeTrack._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],r=[];cn.flattenJSON(e.keys,n,r,'value'),e.times=n,e.values=r}return void 0===t.parse?new t(e.name,e.times,e.values,e.interpolation):t.parse(e)},toJSON:function(e){var t=e.constructor,n;if(void 0!==t.toJSON)n=t.toJSON(e);else{n={name:e.name,times:cn.convertArray(e.times,Array),values:cn.convertArray(e.values,Array)};var r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case'scalar':case'double':case'float':case'number':case'integer':return NumberKeyframeTrack;case'vector':case'vector2':case'vector3':case'vector4':return VectorKeyframeTrack;case'color':return ColorKeyframeTrack;case'quaternion':return QuaternionKeyframeTrack;case'bool':case'boolean':return BooleanKeyframeTrack;case'string':return StringKeyframeTrack;}throw new Error('Unsupported typeName: '+e)}}),Object.assign(AnimationClip,{parse:function(e){for(var t=[],r=e.tracks,a=1/(e.fps||1),o=0,i=r.length;o!==i;++o)t.push(KeyframeTrack.parse(r[o]).scale(a));return new AnimationClip(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,a={name:e.name,duration:e.duration,tracks:t},o=0,i=r.length;o!==i;++o)t.push(KeyframeTrack.toJSON(r[o]));return a},CreateFromMorphTargetSequence:function(e,t,n,r){for(var a=t.length,o=[],s=0;s<a;s++){var i=[],l=[];i.push((s+a-1)%a,s,(s+1)%a),l.push(0,1,0);var d=cn.getKeyframeOrder(i);i=cn.sortedArray(i,1,d),l=cn.sortedArray(l,1,d),r||0!==i[0]||(i.push(a),l.push(l[0])),o.push(new NumberKeyframeTrack('.morphTargetInfluences['+t[s].name+']',i,l).scale(1/n))}return new AnimationClip(e,-1,o)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var r=e;n=r.geometry&&r.geometry.animations||r.animations}for(var a=0;a<n.length;a++)if(n[a].name===t)return n[a];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var r={},a=/^([\w-]*?)([\d]+)$/,o=0,i=e.length;o<i;o++){var s=e[o],l=s.name.match(a);if(l&&1<l.length){var d=l[1],c=r[d];c||(r[d]=c=[]),c.push(s)}}var u=[];for(var d in r)u.push(AnimationClip.CreateFromMorphTargetSequence(d,r[d],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error('THREE.AnimationClip: No animation in JSONLoader data.'),null;for(var n=function(e,t,n,r,a){if(0!==n.length){var o=[],i=[];cn.flattenJSON(n,o,i,r),0!==o.length&&a.push(new e(t,o,i))}},r=[],a=e.name||'default',o=e.length||-1,i=e.fps||30,s=e.hierarchy||[],l=0,d;l<s.length;l++)if(d=s[l].keys,d&&0!==d.length)if(d[0].morphTargets){for(var c={},u=0;u<d.length;u++)if(d[u].morphTargets)for(var p=0;p<d[u].morphTargets.length;p++)c[d[u].morphTargets[p]]=-1;for(var m in c){for(var g=[],h=[],p=0,f;p!==d[u].morphTargets.length;++p)f=d[u],g.push(f.time),h.push(f.morphTarget===m?1:0);r.push(new NumberKeyframeTrack('.morphTargetInfluence['+m+']',g,h))}o=c.length*(i||1)}else{var _='.bones['+t[l].name+']';n(VectorKeyframeTrack,_+'.position',d,'pos',r),n(QuaternionKeyframeTrack,_+'.quaternion',d,'rot',r),n(VectorKeyframeTrack,_+'.scale',d,'scl',r)}if(0===r.length)return null;var y=new AnimationClip(a,o,r);return y}}),Object.assign(AnimationClip.prototype,{resetDuration:function(){for(var e=this.tracks,t=0,r=0,a=e.length,n;r!==a;++r)n=this.tracks[r],t=y(t,n.times[n.times.length-1]);this.duration=t},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(MaterialLoader.prototype,{load:function(e,t,n,r){var a=this,o=new FileLoader(a.manager);o.load(e,function(e){t(a.parse(JSON.parse(e)))},n,r)},setTextures:function(e){this.textures=e},parse:function(e){function getTexture(e){return void 0===t[e]&&console.warn('THREE.MaterialLoader: Undefined texture',e),t[e]}var t=this.textures,n=new sn[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearCoat&&(n.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(n.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(n.uniforms=e.uniforms),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=getTexture(e.map)),void 0!==e.alphaMap&&(n.alphaMap=getTexture(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=getTexture(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=getTexture(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=new Vector2().fromArray(r)}return void 0!==e.displacementMap&&(n.displacementMap=getTexture(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=getTexture(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=getTexture(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=getTexture(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=getTexture(e.specularMap)),void 0!==e.envMap&&(n.envMap=getTexture(e.envMap)),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.lightMap&&(n.lightMap=getTexture(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=getTexture(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=getTexture(e.gradientMap)),n}}),Object.assign(BufferGeometryLoader.prototype,{load:function(e,t,n,r){var a=this,o=new FileLoader(a.manager);o.load(e,function(e){t(a.parse(JSON.parse(e)))},n,r)},parse:function(e){var t=new BufferGeometry,r=e.data.index;if(void 0!==r){var a=new pn[r.type](r.array);t.setIndex(new BufferAttribute(a,1))}var o=e.data.attributes;for(var s in o){var l=o[s],a=new pn[l.type](l.array);t.addAttribute(s,new BufferAttribute(a,l.itemSize,l.normalized))}var d=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==d)for(var c=0,i=d.length,n;c!==i;++c)n=d[c],t.addGroup(n.start,n.count,n.materialIndex);var u=e.data.boundingSphere;if(void 0!==u){var p=new Vector3;void 0!==u.center&&p.fromArray(u.center),t.boundingSphere=new Sphere(p,u.radius)}return t}});var pn={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:'undefined'==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Loader.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,r=t.length;n<r;n+=2){var a=t[n],o=t[n+1];if(a.test(e))return o}return null}},Object.assign(Loader.prototype,{crossOrigin:void 0,extractUrlBase:function(e){var t=e.split('/');return 1===t.length?'./':(t.pop(),t.join('/')+'/')},initMaterials:function(e,t,n){for(var r=[],a=0;a<e.length;++a)r[a]=this.createMaterial(e[a],t,n);return r},createMaterial:function(){var e={NoBlending:H,NormalBlending:z,AdditiveBlending:W,SubtractiveBlending:$,MultiplyBlending:j,CustomBlending:X},t=new Color,n=new TextureLoader,r=new MaterialLoader;return function createMaterial(a,o,i){function loadTexture(e,t,r,a,l){var d=o+e,c=Loader.Handlers.get(d),u;null===c?(n.setCrossOrigin(i),u=n.load(d)):u=c.load(d),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=Be),1!==t[1]&&(u.wrapT=Be)),void 0!==r&&u.offset.fromArray(r),void 0!==a&&('repeat'===a[0]&&(u.wrapS=Be),'mirror'===a[0]&&(u.wrapS=Pe),'repeat'===a[1]&&(u.wrapT=Be),'mirror'===a[1]&&(u.wrapT=Pe)),void 0!==l&&(u.anisotropy=l);var p=Gt.generateUUID();return s[p]=u,p}var s={},l={uuid:Gt.generateUUID(),type:'MeshLambertMaterial'};for(var d in a){var c=a[d];switch(d){case'DbgColor':case'DbgIndex':case'opticalDensity':case'illumination':break;case'DbgName':l.name=c;break;case'blending':l.blending=e[c];break;case'colorAmbient':case'mapAmbient':console.warn('THREE.Loader.createMaterial:',d,'is no longer supported.');break;case'colorDiffuse':l.color=t.fromArray(c).getHex();break;case'colorSpecular':l.specular=t.fromArray(c).getHex();break;case'colorEmissive':l.emissive=t.fromArray(c).getHex();break;case'specularCoef':l.shininess=c;break;case'shading':'basic'===c.toLowerCase()&&(l.type='MeshBasicMaterial'),'phong'===c.toLowerCase()&&(l.type='MeshPhongMaterial'),'standard'===c.toLowerCase()&&(l.type='MeshStandardMaterial');break;case'mapDiffuse':l.map=loadTexture(c,a.mapDiffuseRepeat,a.mapDiffuseOffset,a.mapDiffuseWrap,a.mapDiffuseAnisotropy);break;case'mapDiffuseRepeat':case'mapDiffuseOffset':case'mapDiffuseWrap':case'mapDiffuseAnisotropy':break;case'mapEmissive':l.emissiveMap=loadTexture(c,a.mapEmissiveRepeat,a.mapEmissiveOffset,a.mapEmissiveWrap,a.mapEmissiveAnisotropy);break;case'mapEmissiveRepeat':case'mapEmissiveOffset':case'mapEmissiveWrap':case'mapEmissiveAnisotropy':break;case'mapLight':l.lightMap=loadTexture(c,a.mapLightRepeat,a.mapLightOffset,a.mapLightWrap,a.mapLightAnisotropy);break;case'mapLightRepeat':case'mapLightOffset':case'mapLightWrap':case'mapLightAnisotropy':break;case'mapAO':l.aoMap=loadTexture(c,a.mapAORepeat,a.mapAOOffset,a.mapAOWrap,a.mapAOAnisotropy);break;case'mapAORepeat':case'mapAOOffset':case'mapAOWrap':case'mapAOAnisotropy':break;case'mapBump':l.bumpMap=loadTexture(c,a.mapBumpRepeat,a.mapBumpOffset,a.mapBumpWrap,a.mapBumpAnisotropy);break;case'mapBumpScale':l.bumpScale=c;break;case'mapBumpRepeat':case'mapBumpOffset':case'mapBumpWrap':case'mapBumpAnisotropy':break;case'mapNormal':l.normalMap=loadTexture(c,a.mapNormalRepeat,a.mapNormalOffset,a.mapNormalWrap,a.mapNormalAnisotropy);break;case'mapNormalFactor':l.normalScale=[c,c];break;case'mapNormalRepeat':case'mapNormalOffset':case'mapNormalWrap':case'mapNormalAnisotropy':break;case'mapSpecular':l.specularMap=loadTexture(c,a.mapSpecularRepeat,a.mapSpecularOffset,a.mapSpecularWrap,a.mapSpecularAnisotropy);break;case'mapSpecularRepeat':case'mapSpecularOffset':case'mapSpecularWrap':case'mapSpecularAnisotropy':break;case'mapMetalness':l.metalnessMap=loadTexture(c,a.mapMetalnessRepeat,a.mapMetalnessOffset,a.mapMetalnessWrap,a.mapMetalnessAnisotropy);break;case'mapMetalnessRepeat':case'mapMetalnessOffset':case'mapMetalnessWrap':case'mapMetalnessAnisotropy':break;case'mapRoughness':l.roughnessMap=loadTexture(c,a.mapRoughnessRepeat,a.mapRoughnessOffset,a.mapRoughnessWrap,a.mapRoughnessAnisotropy);break;case'mapRoughnessRepeat':case'mapRoughnessOffset':case'mapRoughnessWrap':case'mapRoughnessAnisotropy':break;case'mapAlpha':l.alphaMap=loadTexture(c,a.mapAlphaRepeat,a.mapAlphaOffset,a.mapAlphaWrap,a.mapAlphaAnisotropy);break;case'mapAlphaRepeat':case'mapAlphaOffset':case'mapAlphaWrap':case'mapAlphaAnisotropy':break;case'flipSided':l.side=N;break;case'doubleSided':l.side=P;break;case'transparency':console.warn('THREE.Loader.createMaterial: transparency has been renamed to opacity'),l.opacity=c;break;case'depthTest':case'depthWrite':case'colorWrite':case'opacity':case'reflectivity':case'transparent':case'visible':case'wireframe':l[d]=c;break;case'vertexColors':!0===c&&(l.vertexColors=V),'face'===c&&(l.vertexColors=G);break;default:console.error('THREE.Loader.createMaterial: Unsupported',d,c);}}return'MeshBasicMaterial'===l.type&&delete l.emissive,'MeshPhongMaterial'!==l.type&&delete l.specular,1>l.opacity&&(l.transparent=!0),r.setTextures(s),r.parse(l)}}()}),Object.assign(JSONLoader.prototype,{load:function(e,t,n,r){var a=this,o=this.texturePath&&'string'==typeof this.texturePath?this.texturePath:Loader.prototype.extractUrlBase(e),i=new FileLoader(this.manager);i.setWithCredentials(this.withCredentials),i.load(e,function(n){var r=JSON.parse(n),i=r.metadata;if(void 0!==i){var s=i.type;if(void 0!==s){if('object'===s.toLowerCase())return void console.error('THREE.JSONLoader: '+e+' should be loaded with THREE.ObjectLoader instead.');if('scene'===s.toLowerCase())return void console.error('THREE.JSONLoader: '+e+' should be loaded with THREE.SceneLoader instead.')}}var l=a.parse(r,o);t(l.geometry,l.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(){function parseModel(e,t){function isBitSet(e,t){return e&1<<t}var n=e.faces,r=e.vertices,a=e.normals,o=e.colors,s=e.scale,l=0,d,i,c,p,m,g,h,f,_,y,E,x,A,b,T,C,S,R,F,w,L,M,I,D,B,N,u;if(void 0!==e.uvs){for(d=0;d<e.uvs.length;d++)e.uvs[d].length&&l++;for(d=0;d<l;d++)t.faceVertexUvs[d]=[]}for(p=0,m=r.length;p<m;)R=new Vector3,R.x=r[p++]*s,R.y=r[p++]*s,R.z=r[p++]*s,t.vertices.push(R);for(p=0,m=n.length;p<m;)if(y=n[p++],E=isBitSet(y,0),x=isBitSet(y,1),A=isBitSet(y,3),b=isBitSet(y,4),T=isBitSet(y,5),C=isBitSet(y,6),S=isBitSet(y,7),E){if(w=new Face3,w.a=n[p],w.b=n[p+1],w.c=n[p+3],L=new Face3,L.a=n[p+1],L.b=n[p+2],L.c=n[p+3],p+=4,x&&(_=n[p++],w.materialIndex=_,L.materialIndex=_),c=t.faces.length,A)for(d=0;d<l;d++)for(D=e.uvs[d],t.faceVertexUvs[d][c]=[],t.faceVertexUvs[d][c+1]=[],i=0;4>i;i++)f=n[p++],N=D[2*f],u=D[2*f+1],B=new Vector2(N,u),2!==i&&t.faceVertexUvs[d][c].push(B),0!==i&&t.faceVertexUvs[d][c+1].push(B);if(b&&(h=3*n[p++],w.normal.set(a[h++],a[h++],a[h]),L.normal.copy(w.normal)),T)for(d=0;4>d;d++)h=3*n[p++],I=new Vector3(a[h++],a[h++],a[h]),2!==d&&w.vertexNormals.push(I),0!==d&&L.vertexNormals.push(I);if(C&&(g=n[p++],M=o[g],w.color.setHex(M),L.color.setHex(M)),S)for(d=0;4>d;d++)g=n[p++],M=o[g],2!==d&&w.vertexColors.push(new Color(M)),0!==d&&L.vertexColors.push(new Color(M));t.faces.push(w),t.faces.push(L)}else{if(F=new Face3,F.a=n[p++],F.b=n[p++],F.c=n[p++],x&&(_=n[p++],F.materialIndex=_),c=t.faces.length,A)for(d=0;d<l;d++)for(D=e.uvs[d],t.faceVertexUvs[d][c]=[],i=0;3>i;i++)f=n[p++],N=D[2*f],u=D[2*f+1],B=new Vector2(N,u),t.faceVertexUvs[d][c].push(B);if(b&&(h=3*n[p++],F.normal.set(a[h++],a[h++],a[h])),T)for(d=0;3>d;d++)h=3*n[p++],I=new Vector3(a[h++],a[h++],a[h]),F.vertexNormals.push(I);if(C&&(g=n[p++],F.color.setHex(o[g])),S)for(d=0;3>d;d++)g=n[p++],F.vertexColors.push(new Color(o[g]));t.faces.push(F)}}function parseSkin(e,t){var n=void 0===e.influencesPerVertex?2:e.influencesPerVertex;if(e.skinWeights)for(var r=0,o=e.skinWeights.length;r<o;r+=n){var i=e.skinWeights[r],s=1<n?e.skinWeights[r+1]:0,l=2<n?e.skinWeights[r+2]:0,u=3<n?e.skinWeights[r+3]:0;t.skinWeights.push(new Vector4(i,s,l,u))}if(e.skinIndices)for(var r=0,o=e.skinIndices.length;r<o;r+=n){var p=e.skinIndices[r],a=1<n?e.skinIndices[r+1]:0,m=2<n?e.skinIndices[r+2]:0,c=3<n?e.skinIndices[r+3]:0;t.skinIndices.push(new Vector4(p,a,m,c))}t.bones=e.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn('When skinning, number of vertices ('+t.vertices.length+'), skinIndices ('+t.skinIndices.length+'), and skinWeights ('+t.skinWeights.length+') should match.')}function parseMorphing(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var r=0,a=e.morphTargets.length;r<a;r++){t.morphTargets[r]={},t.morphTargets[r].name=e.morphTargets[r].name,t.morphTargets[r].vertices=[];for(var o=t.morphTargets[r].vertices,i=e.morphTargets[r].vertices,s=0,l=i.length,d;s<l;s+=3)d=new Vector3,d.x=i[s]*n,d.y=i[s+1]*n,d.z=i[s+2]*n,o.push(d)}if(void 0!==e.morphColors&&0<e.morphColors.length){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var c=t.faces,u=e.morphColors[0].colors,r=0,a=c.length;r<a;r++)c[r].color.fromArray(u,3*r)}}function parseAnimations(e,t){var n=[],r=[];void 0!==e.animation&&r.push(e.animation),void 0!==e.animations&&(e.animations.length?r=r.concat(e.animations):r.push(e.animations));for(var a=0,o;a<r.length;a++)o=AnimationClip.parseAnimation(r[a],t.bones),o&&n.push(o);if(t.morphTargets){var i=AnimationClip.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(i)}0<n.length&&(t.animations=n)}return function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0===e.scale?1:1/e.scale;var n=new Geometry;if(parseModel(e,n),parseSkin(e,n),parseMorphing(e,n),parseAnimations(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var r=Loader.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:r}}}()}),Object.assign(ObjectLoader.prototype,{load:function(e,t,n,r){''===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf('/')+1));var a=this,o=new FileLoader(a.manager);o.load(e,function(n){var o=null;try{o=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error('THREE:ObjectLoader: Can\'t parse '+e+'.',t.message)}var i=o.metadata;return void 0===i||void 0===i.type||'geometry'===i.type.toLowerCase()?void console.error('THREE.ObjectLoader: Can\'t load '+e+'. Use THREE.JSONLoader instead.'):void a.parse(o,t)},n,r)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),r=this.parseImages(e.images,function(){void 0!==t&&t(i)}),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),i=this.parseObject(e.object,n,o);return e.animations&&(i.animations=this.parseAnimations(e.animations)),(void 0===e.images||0===e.images.length)&&void 0!==t&&t(i),i},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new JSONLoader,r=new BufferGeometryLoader,a=0,o=e.length;a<o;a++){var i=e[a],s;switch(i.type){case'PlaneGeometry':case'PlaneBufferGeometry':s=new on[i.type](i.width,i.height,i.widthSegments,i.heightSegments);break;case'BoxGeometry':case'BoxBufferGeometry':case'CubeGeometry':s=new on[i.type](i.width,i.height,i.depth,i.widthSegments,i.heightSegments,i.depthSegments);break;case'CircleGeometry':case'CircleBufferGeometry':s=new on[i.type](i.radius,i.segments,i.thetaStart,i.thetaLength);break;case'CylinderGeometry':case'CylinderBufferGeometry':s=new on[i.type](i.radiusTop,i.radiusBottom,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength);break;case'ConeGeometry':case'ConeBufferGeometry':s=new on[i.type](i.radius,i.height,i.radialSegments,i.heightSegments,i.openEnded,i.thetaStart,i.thetaLength);break;case'SphereGeometry':case'SphereBufferGeometry':s=new on[i.type](i.radius,i.widthSegments,i.heightSegments,i.phiStart,i.phiLength,i.thetaStart,i.thetaLength);break;case'DodecahedronGeometry':case'IcosahedronGeometry':case'OctahedronGeometry':case'TetrahedronGeometry':s=new on[i.type](i.radius,i.detail);break;case'RingGeometry':case'RingBufferGeometry':s=new on[i.type](i.innerRadius,i.outerRadius,i.thetaSegments,i.phiSegments,i.thetaStart,i.thetaLength);break;case'TorusGeometry':case'TorusBufferGeometry':s=new on[i.type](i.radius,i.tube,i.radialSegments,i.tubularSegments,i.arc);break;case'TorusKnotGeometry':case'TorusKnotBufferGeometry':s=new on[i.type](i.radius,i.tube,i.tubularSegments,i.radialSegments,i.p,i.q);break;case'LatheGeometry':case'LatheBufferGeometry':s=new on[i.type](i.points,i.segments,i.phiStart,i.phiLength);break;case'BufferGeometry':s=r.parse(i);break;case'Geometry':s=n.parse(i,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+i.type+'"');continue;}s.uuid=i.uuid,void 0!==i.name&&(s.name=i.name),t[i.uuid]=s}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var r=new MaterialLoader;r.setTextures(t);for(var a=0,o=e.length,i;a<o;a++)if(i=e[a],'MultiMaterial'===i.type){for(var s=[],l=0;l<i.materials.length;l++)s.push(r.parse(i.materials[l]));n[i.uuid]=s}else n[i.uuid]=r.parse(i)}return n},parseAnimations:function(e){for(var t=[],n=0,r;n<e.length;n++)r=AnimationClip.parse(e[n]),t.push(r);return t},parseImages:function(e,t){function loadImage(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}var n=this,r={};if(void 0!==e&&0<e.length){var a=new LoadingManager(t),o=new ImageLoader(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,i=e.length;s<i;s++){var l=e[s],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;r[l.uuid]=loadImage(d)}}return r},parseTextures:function(e,t){function parseConstant(e,t){return'number'==typeof e?e:(console.warn('THREE.ObjectLoader.parseTexture: Constant should be in numeric form.',e),t[e])}var n={};if(void 0!==e)for(var r=0,a=e.length,o;r<a;r++){o=e[r],void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn('THREE.ObjectLoader: Undefined image',o.image);var i=new Texture(t[o.image]);i.needsUpdate=!0,i.uuid=o.uuid,void 0!==o.name&&(i.name=o.name),void 0!==o.mapping&&(i.mapping=parseConstant(o.mapping,mn)),void 0!==o.offset&&i.offset.fromArray(o.offset),void 0!==o.repeat&&i.repeat.fromArray(o.repeat),void 0!==o.wrap&&(i.wrapS=parseConstant(o.wrap[0],gn),i.wrapT=parseConstant(o.wrap[1],gn)),void 0!==o.minFilter&&(i.minFilter=parseConstant(o.minFilter,hn)),void 0!==o.magFilter&&(i.magFilter=parseConstant(o.magFilter,hn)),void 0!==o.anisotropy&&(i.anisotropy=o.anisotropy),void 0!==o.flipY&&(i.flipY=o.flipY),n[o.uuid]=i}return n},parseObject:function(){var e=new Matrix4;return function parseObject(t,n,r){function getGeometry(e){return void 0===n[e]&&console.warn('THREE.ObjectLoader: Undefined geometry',e),n[e]}function getMaterial(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,a=e.length,o;n<a;n++)o=e[n],void 0===r[o]&&console.warn('THREE.ObjectLoader: Undefined material',o),t.push(r[o]);return t}return void 0===r[e]&&console.warn('THREE.ObjectLoader: Undefined material',e),r[e]}}var a;switch(t.type){case'Scene':a=new Scene,void 0!==t.background&&i(t.background)&&(a.background=new Color(t.background)),void 0!==t.fog&&('Fog'===t.fog.type?a.fog=new Fog(t.fog.color,t.fog.near,t.fog.far):'FogExp2'===t.fog.type&&(a.fog=new FogExp2(t.fog.color,t.fog.density)));break;case'PerspectiveCamera':a=new PerspectiveCamera(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case'OrthographicCamera':a=new OrthographicCamera(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case'AmbientLight':a=new AmbientLight(t.color,t.intensity);break;case'DirectionalLight':a=new DirectionalLight(t.color,t.intensity);break;case'PointLight':a=new PointLight(t.color,t.intensity,t.distance,t.decay);break;case'RectAreaLight':a=new RectAreaLight(t.color,t.intensity,t.width,t.height);break;case'SpotLight':a=new SpotLight(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case'HemisphereLight':a=new HemisphereLight(t.color,t.groundColor,t.intensity);break;case'SkinnedMesh':console.warn('THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.');case'Mesh':var o=getGeometry(t.geometry),s=getMaterial(t.material);a=o.bones&&0<o.bones.length?new SkinnedMesh(o,s):new Mesh(o,s);break;case'LOD':a=new LOD;break;case'Line':a=new Line(getGeometry(t.geometry),getMaterial(t.material),t.mode);break;case'LineLoop':a=new LineLoop(getGeometry(t.geometry),getMaterial(t.material));break;case'LineSegments':a=new LineSegments(getGeometry(t.geometry),getMaterial(t.material));break;case'PointCloud':case'Points':a=new Points(getGeometry(t.geometry),getMaterial(t.material));break;case'Sprite':a=new Sprite(getMaterial(t.material));break;case'Group':a=new Group;break;default:a=new Object3D;}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0===t.matrix?(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)):(e.fromArray(t.matrix),e.decompose(a.position,a.quaternion,a.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var d=t.children,c=0;c<d.length;c++)a.add(this.parseObject(d[c],n,r));if('LOD'===t.type)for(var u=t.levels,p=0;p<u.length;p++){var l=u[p],m=a.getObjectByProperty('uuid',l.object);void 0!==m&&a.addLevel(m,l.distance)}return a}}()});var mn={UVMapping:Se,CubeReflectionMapping:Re,CubeRefractionMapping:Fe,EquirectangularReflectionMapping:we,EquirectangularRefractionMapping:Le,SphericalReflectionMapping:Me,CubeUVReflectionMapping:Ie,CubeUVRefractionMapping:De},gn={RepeatWrapping:Be,ClampToEdgeWrapping:Ne,MirroredRepeatWrapping:Pe},hn={NearestFilter:Oe,NearestMipMapNearestFilter:ke,NearestMipMapLinearFilter:Ue,LinearFilter:Ge,LinearMipMapNearestFilter:Ve,LinearMipMapLinearFilter:He};Object.assign(Curve.prototype,{getPoint:function(){return console.warn('THREE.Curve: .getPoint() not implemented.'),null},getPointAt:function(e){var n=this.getUtoTmapping(e);return this.getPoint(n)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n=this.getPoint(0),r=0,a,o;for(t.push(0),o=1;o<=e;o++)a=this.getPoint(o/e),r+=a.distanceTo(n),t.push(r),n=a;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,n){var r=this.getLengths(),a=0,o=r.length,i;i=n?n:e*r[o-1];for(var s=0,l=o-1,d;s<=l;)if(a=A(s+(l-s)/2),d=r[a]-i,0>d)s=a+1;else if(0<d)l=a-1;else{l=a;break}if(a=l,r[a]===i)return a/(o-1);var c=r[a],u=r[a+1],p=(i-c)/(u-c),m=(a+p)/(o-1);return m},getTangent:function(e){var t=1e-4,n=e-t,r=e+t;0>n&&(n=0),1<r&&(r=1);var a=this.getPoint(n),o=this.getPoint(r),i=o.clone().sub(a);return i.normalize()},getTangentAt:function(e){var n=this.getUtoTmapping(e);return this.getTangent(n)},computeFrenetFrames:function(e,t){var n=new Vector3,r=[],a=[],o=[],s=new Vector3,d=new Matrix4,p,i,u;for(p=0;p<=e;p++)i=p/e,r[p]=this.getTangentAt(i),r[p].normalize();a[0]=new Vector3,o[0]=new Vector3;var m=Number.MAX_VALUE,g=E(r[0].x),h=E(r[0].y),f=E(r[0].z);for(g<=m&&(m=g,n.set(1,0,0)),h<=m&&(m=h,n.set(0,1,0)),f<=m&&n.set(0,0,1),s.crossVectors(r[0],n).normalize(),a[0].crossVectors(r[0],s),o[0].crossVectors(r[0],a[0]),p=1;p<=e;p++)a[p]=a[p-1].clone(),o[p]=o[p-1].clone(),s.crossVectors(r[p-1],r[p]),s.length()>l&&(s.normalize(),u=c(Gt.clamp(r[p-1].dot(r[p]),-1,1)),a[p].applyMatrix4(d.makeRotationAxis(s,u))),o[p].crossVectors(r[p],a[p]);if(!0===t)for(u=c(Gt.clamp(a[0].dot(a[e]),-1,1)),u/=e,0<r[0].dot(s.crossVectors(a[0],a[e]))&&(u=-u),p=1;p<=e;p++)a[p].applyMatrix4(d.makeRotationAxis(r[p],u*p)),o[p].crossVectors(r[p],a[p]);return{tangents:r,normals:a,binormals:o}}}),LineCurve.prototype=Object.create(Curve.prototype),LineCurve.prototype.constructor=LineCurve,LineCurve.prototype.isLineCurve=!0,LineCurve.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},LineCurve.prototype.getPointAt=function(e){return this.getPoint(e)},LineCurve.prototype.getTangent=function(){var e=this.v2.clone().sub(this.v1);return e.normalize()},CurvePath.prototype=Object.assign(Object.create(Curve.prototype),{constructor:CurvePath,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new LineCurve(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=t){var a=n[r]-t,o=this.curves[r],i=o.getLength(),s=0===i?0:1-a/i;return o.getPointAt(s)}r++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t=[],n=0,r=this.curves,a;n<r.length;n++)for(var o=r[n],i=o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(i),l=0,d;l<s.length;l++)d=s[l],a&&a.equals(d)||(t.push(d),a=d);return this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new Geometry,n=0,r=e.length,a;n<r;n++)a=e[n],t.vertices.push(new Vector3(a.x,a.y,a.z||0));return t}}),EllipseCurve.prototype=Object.create(Curve.prototype),EllipseCurve.prototype.constructor=EllipseCurve,EllipseCurve.prototype.isEllipseCurve=!0,EllipseCurve.prototype.getPoint=function(e){for(var t=2*h,n=this.aEndAngle-this.aStartAngle,r=E(n)<l;0>n;)n+=t;for(;n>t;)n-=t;n<l&&(r?n=0:n=t),!0!==this.aClockwise||r||(n===t?n=-t:n-=t);var a=this.aStartAngle+e*n,o=this.aX+this.xRadius*m(a),i=this.aY+this.yRadius*g(a);if(0!==this.aRotation){var s=m(this.aRotation),d=g(this.aRotation),c=o-this.aX,u=i-this.aY;o=c*s-u*d+this.aX,i=c*d+u*s+this.aY}return new Vector2(o,i)},SplineCurve.prototype=Object.create(Curve.prototype),SplineCurve.prototype.constructor=SplineCurve,SplineCurve.prototype.isSplineCurve=!0,SplineCurve.prototype.getPoint=function(e){var t=this.points,n=(t.length-1)*e,r=A(n),a=n-r,o=t[0===r?r:r-1],i=t[r],s=t[r>t.length-2?t.length-1:r+1],l=t[r>t.length-3?t.length-1:r+2];return new Vector2(CatmullRom(a,o.x,i.x,s.x,l.x),CatmullRom(a,o.y,i.y,s.y,l.y))},CubicBezierCurve.prototype=Object.create(Curve.prototype),CubicBezierCurve.prototype.constructor=CubicBezierCurve,CubicBezierCurve.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,a=this.v3;return new Vector2(CubicBezier(e,t.x,n.x,r.x,a.x),CubicBezier(e,t.y,n.y,r.y,a.y))},QuadraticBezierCurve.prototype=Object.create(Curve.prototype),QuadraticBezierCurve.prototype.constructor=QuadraticBezierCurve,QuadraticBezierCurve.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new Vector2(QuadraticBezier(e,t.x,n.x,r.x),QuadraticBezier(e,t.y,n.y,r.y))};var fn=Object.assign(Object.create(CurvePath.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new LineCurve(this.currentPoint.clone(),new Vector2(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){var a=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,r));this.curves.push(a),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,a,o){var i=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(e,t),new Vector2(n,r),new Vector2(a,o));this.curves.push(i),this.currentPoint.set(a,o)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new SplineCurve(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,r,a,o){var i=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+i,t+s,n,r,a,o)},absarc:function(e,t,n,r,a,o){this.absellipse(e,t,n,n,r,a,o)},ellipse:function(e,t,n,r,a,o,i,s){var l=this.currentPoint.x,d=this.currentPoint.y;this.absellipse(e+l,t+d,n,r,a,o,i,s)},absellipse:function(e,t,n,r,a,o,i,s){var l=new EllipseCurve(e,t,n,r,a,o,i,s);if(0<this.curves.length){var d=l.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(l);var c=l.getPoint(1);this.currentPoint.copy(c)}});Path.prototype=fn,fn.constructor=Path,Shape.prototype=Object.assign(Object.create(fn),{constructor:Shape,getPointsHoles:function(e){for(var t=[],n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}}),Object.assign(ShapePath.prototype,{moveTo:function(e,t){this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,r){this.currentPath.quadraticCurveTo(e,t,n,r)},bezierCurveTo:function(e,t,n,r,a,o){this.currentPath.bezierCurveTo(e,t,n,r,a,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function toShapesNoHoles(e){for(var t=[],n=0,r=e.length;n<r;n++){var a=e[n],o=new Shape;o.curves=a.curves,t.push(o)}return t}function isPointInsidePolygon(e,t){for(var n=t.length,r=!1,a=n-1,o=0;o<n;a=o++){var i=t[a],s=t[o],d=s.x-i.x,c=s.y-i.y;if(E(c)>l){if(0>c&&(i=t[o],d=-d,s=t[a],c=-c),e.y<i.y||e.y>s.y)continue;if(e.y!==i.y){var u=c*(e.x-i.x)-d*(e.y-i.y);if(0==u)return!0;if(0>u)continue;r=!r}else if(e.x===i.x)return!0}else{if(e.y!==i.y)continue;if(s.x<=e.x&&e.x<=i.x||i.x<=e.x&&e.x<=s.x)return!0}}return r}var n=an.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===t)return toShapesNoHoles(r);var a=[],o,s,d;if(1===r.length)return s=r[0],d=new Shape,d.curves=s.curves,a.push(d),a;var c=!n(r[0].getPoints());c=e?!c:c;var u=[],p=[],m=[],g=0,h;p[g]=void 0,m[g]=[];for(var f=0,i=r.length;f<i;f++)s=r[f],h=s.getPoints(),o=n(h),o=e?!o:o,o?(!c&&p[g]&&g++,p[g]={s:new Shape,p:h},p[g].s.curves=s.curves,c&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!p[0])return toShapesNoHoles(r);if(1<p.length){for(var _=!1,y=[],x=0,A=p.length;x<A;x++)u[x]=[];for(var x=0,A=p.length,b;x<A;x++){b=m[x];for(var T=0;T<b.length;T++){for(var C=b[T],v=!0,S=0;S<p.length;S++)isPointInsidePolygon(C.p,p[S].p)&&(x!==S&&y.push({froms:x,tos:S,hole:T}),v?(v=!1,u[S].push(C)):_=!0);v&&u[x].push(C)}}0<y.length&&!_&&(m=u)}for(var f=0,R=p.length,F;f<R;f++){d=p[f].s,a.push(d),F=m[f];for(var w=0,L=F.length;w<L;w++)d.holes.push(F[w].h)}return a}}),Object.assign(Font.prototype,{isFont:!0,generateShapes:function(e,t,n){function createPaths(e){for(var n=(e+'').split(''),a=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*a,s=0,l=0,d=[],c=0,i;c<n.length;c++)if(i=n[c],'\n'===i)s=0,l-=o;else{var u=createPath(i,a,s,l);s+=u.offsetX,d.push(u.path)}return d}function createPath(e,a,o,s){var d=r.glyphs[e]||r.glyphs['?'];if(d){var c=new ShapePath,u=[],p,m,g,h,f,_,y,E,x,A,b;if(d.o)for(var T=d._cachedOutline||(d._cachedOutline=d.o.split(' ')),C=0,i=T.length,l;C<i;)switch(l=T[C++],l){case'm':p=T[C++]*a+o,m=T[C++]*a+s,c.moveTo(p,m);break;case'l':p=T[C++]*a+o,m=T[C++]*a+s,c.lineTo(p,m);break;case'q':if(g=T[C++]*a+o,h=T[C++]*a+s,y=T[C++]*a+o,E=T[C++]*a+s,c.quadraticCurveTo(y,E,g,h),b=u[u.length-1],b){f=b.x,_=b.y;for(var v=1,S;v<=n;v++)S=v/n,QuadraticBezier(S,f,y,g),QuadraticBezier(S,_,E,h)}break;case'b':if(g=T[C++]*a+o,h=T[C++]*a+s,y=T[C++]*a+o,E=T[C++]*a+s,x=T[C++]*a+o,A=T[C++]*a+s,c.bezierCurveTo(y,E,x,A,g,h),b=u[u.length-1],b){f=b.x,_=b.y;for(var v=1,S;v<=n;v++)S=v/n,CubicBezier(S,f,y,x,g),CubicBezier(S,_,E,A,h)}}return{offsetX:d.ha*a,path:c}}}void 0===t&&(t=100),void 0===n&&(n=4);for(var r=this.data,a=createPaths(e),o=[],i=0,s=a.length;i<s;i++)Array.prototype.push.apply(o,a[i].toShapes());return o}}),Object.assign(FontLoader.prototype,{load:function(e,t,n,r){var a=this,o=new FileLoader(this.manager);o.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn('THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.'),n=JSON.parse(e.substring(65,e.length-2))}var r=a.parse(n);t&&t(r)},n,r)},parse:function(e){return new Font(e)}});var _n={getContext:function(){return void 0===yn&&(yn=new(window.AudioContext||window.webkitAudioContext)),yn},setContext:function(e){yn=e}},yn;Object.assign(AudioLoader.prototype,{load:function(e,t,n,r){var a=new FileLoader(this.manager);a.setResponseType('arraybuffer'),a.load(e,function(e){var n=_n.getContext();n.decodeAudioData(e,function(e){t(e)})},n,r)}}),Object.assign(StereoCamera.prototype,{update:function(){var e=new Matrix4,t=new Matrix4,n,r,a,o,i,s,l,d;return function update(c){var p=n!==this||r!==c.focus||a!==c.fov||o!==c.aspect*this.aspect||i!==c.near||s!==c.far||l!==c.zoom||d!==this.eyeSep;if(p){n=this,r=c.focus,a=c.fov,o=c.aspect*this.aspect,i=c.near,s=c.far,l=c.zoom;var m=c.projectionMatrix.clone();d=this.eyeSep/2;var g=d*i/r,h=i*u(.5*(Gt.DEG2RAD*a))/l,f,_;t.elements[12]=-d,e.elements[12]=d,f=-h*o+g,_=h*o+g,m.elements[0]=2*i/(_-f),m.elements[8]=(_+f)/(_-f),this.cameraL.projectionMatrix.copy(m),f=-h*o-g,_=h*o-g,m.elements[0]=2*i/(_-f),m.elements[8]=(_+f)/(_-f),this.cameraR.projectionMatrix.copy(m)}this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(t),this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(e)}}()}),CubeCamera.prototype=Object.create(Object3D.prototype),CubeCamera.prototype.constructor=CubeCamera,AudioListener.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:AudioListener,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new Vector3,t=new Quaternion,n=new Vector3,r=new Vector3;return function updateMatrixWorld(a){Object3D.prototype.updateMatrixWorld.call(this,a);var o=this.context.listener,i=this.up;this.matrixWorld.decompose(e,t,n),r.set(0,0,-1).applyQuaternion(t),o.positionX?(o.positionX.setValueAtTime(e.x,this.context.currentTime),o.positionY.setValueAtTime(e.y,this.context.currentTime),o.positionZ.setValueAtTime(e.z,this.context.currentTime),o.forwardX.setValueAtTime(r.x,this.context.currentTime),o.forwardY.setValueAtTime(r.y,this.context.currentTime),o.forwardZ.setValueAtTime(r.z,this.context.currentTime),o.upX.setValueAtTime(i.x,this.context.currentTime),o.upY.setValueAtTime(i.y,this.context.currentTime),o.upZ.setValueAtTime(i.z,this.context.currentTime)):(o.setPosition(e.x,e.y,e.z),o.setOrientation(r.x,r.y,r.z,i.x,i.y,i.z))}}()}),Audio.prototype=Object.assign(Object.create(Object3D.prototype),{constructor:Audio,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType='audioNode',this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType='buffer',this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn('THREE.Audio: Audio is already playing.');if(!1===this.hasPlaybackControl)return void console.warn('THREE.Audio: this Audio has no playback control.');var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn('THREE.Audio: this Audio has no playback control.'),!1):this.loop},setLoop:function(e){return!1===this.hasPlaybackControl?void console.warn('THREE.Audio: this Audio has no playback control.'):(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),PositionalAudio.prototype=Object.assign(Object.create(Audio.prototype),{constructor:PositionalAudio,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new Vector3;return function updateMatrixWorld(t){Object3D.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(AudioAnalyser.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(PropertyMixer.prototype,{accumulate:function(e,t){var n=this.buffer,r=this.valueSize,a=e*r+r,o=this.cumulativeWeight;if(0===o){for(var s=0;s!==r;++s)n[a+s]=n[s];o=t}else{o+=t;var i=t/o;this._mixBufferRegion(n,a,0,i,r)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,n=this.buffer,r=e*t+t,a=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,1>a){this._mixBufferRegion(n,r,3*t,1-a,t)}for(var s=t;s!==t+t;++s)if(n[s]!==n[s+t]){o.setValue(n,r);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,r=3*n;e.getValue(t,r);for(var a=n;a!==r;++a)t[a]=t[r+a%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,n,r,a,t){if(.5<=a)for(var o=0;o!==t;++o)e[n+o]=e[r+o]},_slerp:function(e,n,r,a){Quaternion.slerpFlat(e,n,e,n,e,r,a)},_lerp:function(e,n,r,a,t){for(var o=0,i;o!==t;++o)i=n+o,e[i]=e[i]*(1-a)+e[r+o]*a}}),Object.assign(Composite.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,a=this._targetGroup.nCachedObjects_,o=r.length;a!==o;++a)r[a].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(PropertyBinding,{Composite:Composite,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new PropertyBinding.Composite(e,t,n):new PropertyBinding(e,t,n)},sanitizeNodeName:function(e){return e.replace(/\s/g,'_').replace(/[^\w-]/g,'')},parseTrackName:function(){var e=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,n=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,r=/\.([\w-]+)(?:\[(.+)\])?/,a=new RegExp('^'+e.source+t.source+n.source+r.source+'$'),o=['material','materials','bones'];return function(e){var t=a.exec(e);if(!t)throw new Error('PropertyBinding: Cannot parse trackName: '+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf('.');if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==o.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error('PropertyBinding: can not parse propertyName from trackName: '+e);return n}}(),findNode:function(e,t){if(!t||''===t||'root'===t||'.'===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0,r;n<e.bones.length;n++)if(r=e.bones[n],r.name===t)return r;return null},r=n(e.skeleton);if(r)return r}if(e.children){var a=function(e){for(var n=0,r;n<e.length;n++){if(r=e[n],r.name===t||r.uuid===t)return r;var o=a(r.children);if(o)return o}return null},o=a(e.children);if(o)return o}return null}}),Object.assign(PropertyBinding.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function getValue_direct(e,t){e[t]=this.node[this.propertyName]},function getValue_array(e,t){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)e[t++]=r[a]},function getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function setValue_direct(e,t){this.node[this.propertyName]=e[t]},function setValue_direct_setNeedsUpdate(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_array(e,t){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=e[t++]},function setValue_array_setNeedsUpdate(e,t){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=e[t++];this.targetObject.needsUpdate=!0},function setValue_array_setMatrixWorldNeedsUpdate(e,t){for(var r=this.resolvedProperty,a=0,o=r.length;a!==o;++a)r[a]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)},function setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function getValue_unbound(e,t){this.bind(),this.getValue(e,t)},setValue:function getValue_unbound(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,a=t.propertyIndex;if(e||(e=PropertyBinding.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error('THREE.PropertyBinding: Trying to update node for track: '+this.path+' but it wasn\'t found.');if(n){var o=t.objectIndex;switch(n){case'materials':if(!e.material)return void console.error('THREE.PropertyBinding: Can not bind to material as node does not have a material.',this);if(!e.material.materials)return void console.error('THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.',this);e=e.material.materials;break;case'bones':if(!e.skeleton)return void console.error('THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.',this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[n])return void console.error('THREE.PropertyBinding: Can not bind to objectName of node undefined.',this);e=e[n];}if(void 0!==o){if(void 0===e[o])return void console.error('THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.',this,e);e=e[o]}}var i=e[r];if(void 0===i){var l=t.nodeName;return void console.error('THREE.PropertyBinding: Trying to update property for track: '+l+'.'+r+' but it wasn\'t found.',e)}var d=this.Versioning.None;void 0===e.needsUpdate?void 0!==e.matrixWorldNeedsUpdate&&(d=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e):(d=this.Versioning.NeedsUpdate,this.targetObject=e);var c=this.BindingType.Direct;if(void 0!==a){if('morphTargetInfluences'===r){if(!e.geometry)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.',this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.',this);for(var s=0;s<this.node.geometry.morphAttributes.position.length;s++)if(e.geometry.morphAttributes.position[s].name===a){a=s;break}}else{if(!e.geometry.morphTargets)return void console.error('THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.',this);for(var s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===a){a=s;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=i,this.propertyIndex=a}else void 0!==i.fromArray&&void 0!==i.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=i):Array.isArray(i)?(c=this.BindingType.EntireArray,this.resolvedProperty=i):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][d]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(PropertyBinding.prototype,{_getValue_unbound:PropertyBinding.prototype.getValue,_setValue_unbound:PropertyBinding.prototype.setValue}),Object.assign(AnimationObjectGroup.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._paths,s=this._parsedPaths,l=this._bindings,d=l.length,c=0,i=arguments.length;c!==i;++c){var n=arguments[c],u=n.uuid,p=a[u],g=void 0;if(void 0===p){p=t++,a[u]=p,e.push(n);for(var h=0,f=d;h!==f;++h)l[h].push(new PropertyBinding(n,o[h],s[h]))}else if(p<r){g=e[p];var m=--r,_=e[m];a[_.uuid]=p,e[p]=_,a[u]=m,e[m]=n;for(var h=0,f=d;h!==f;++h){var y=l[h],E=y[m],x=y[p];y[p]=E,void 0===x&&(x=new PropertyBinding(n,o[h],s[h])),y[m]=x}}else e[p]!==g&&console.error('THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.')}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,o=a.length,s=0,i=arguments.length;s!==i;++s){var n=arguments[s],l=n.uuid,d=r[l];if(void 0!==d&&d>=t){var c=t++,u=e[c];r[u.uuid]=d,e[d]=u,r[l]=c,e[c]=n;for(var p=0;p!==o;++p){var m=a[p],g=m[c],h=m[d];m[d]=g,m[c]=h}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._bindings,s=o.length,l=0,i=arguments.length;l!==i;++l){var n=arguments[l],d=n.uuid,c=a[d];if(void 0!==c)if(delete a[d],c<r){var u=--r,p=e[u],g=--t,h=e[g];a[p.uuid]=c,e[c]=p,a[h.uuid]=u,e[u]=h,e.pop();for(var f=0,_=s;f!==_;++f){var m=o[f],y=m[u],E=m[g];m[c]=y,m[u]=E,m.pop()}}else{var g=--t,h=e[g];a[h.uuid]=c,e[c]=h,e.pop();for(var f=0,_=s,m;f!==_;++f)m=o[f],m[c]=m[g],m.pop()}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,a=r[e],o=this._bindings;if(void 0!==a)return o[a];var s=this._paths,l=this._parsedPaths,d=this._objects,c=d.length,u=this.nCachedObjects_,p=Array(c);a=o.length,r[e]=a,s.push(e),l.push(t),o.push(p);for(var m=u,i=d.length,n;m!==i;++m)n=d[m],p[m]=new PropertyBinding(n,e,t);return p},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var r=this._paths,a=this._parsedPaths,o=this._bindings,i=o.length-1,s=o[i],l=e[i];t[l]=n,o[n]=s,o.pop(),a[n]=a[i],a.pop(),r[n]=r[i],r.pop()}}}),Object.assign(AnimationAction.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var r=this._clip.duration,a=e._clip.duration;e.warp(1,a/r,t),this.warp(r/a,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var r=this._mixer,a=r.time,o=this._timeScaleInterpolant,i=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=a,s[1]=a+n,l[0]=e/i,l[1]=t/i,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);var a=this._startTime;if(null!==a){var o=(e-a)*n;if(0>o||0===n)return;this._startTime=null,t=n*o}t*=this._updateTimeScale(e);var i=this._updateTime(t),s=this._updateWeight(e);if(0<s)for(var l=this._interpolants,d=this._propertyBindings,c=0,u=l.length;c!==u;++c)l[c].evaluate(i),d[c].accumulate(r,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,a=this._loopCount;if(r===yt){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));handle_stop:{if(t>=n)t=n;else if(0>t)t=0;else break handle_stop;this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:'finished',action:this,direction:0>e?-1:1})}}else{var o=r===xt;if(-1===a&&(0<=e?(a=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||0>t){var i=A(t/n);t-=n*i,a+=E(i);var s=this.repetitions-a;if(0>s)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<e?n:0,this._mixer.dispatchEvent({type:'finished',action:this,direction:0<e?1:-1});else{if(0==s){var l=0>e;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this._mixer.dispatchEvent({type:'loop',action:this,loopDelta:i})}}if(o&&1==(1&a))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=vt,r.endingEnd=vt):(r.endingStart=e?this.zeroSlopeAtStart?vt:Ct:St,r.endingEnd=t?this.zeroSlopeAtEnd?vt:Ct:St)},_scheduleFading:function(e,t,n){var r=this._mixer,a=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var i=o.parameterPositions,s=o.sampleValues;return i[0]=a,s[0]=t,i[1]=a+e,s[1]=n,this}}),Object.assign(AnimationMixer.prototype,EventDispatcher.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,r=e._clip.tracks,a=r.length,o=e._propertyBindings,s=e._interpolants,l=n.uuid,d=this._bindingsByRootAndName,c=d[l];void 0===c&&(c={},d[l]=c);for(var u=0;u!==a;++u){var i=r[u],p=i.name,m=c[p];if(void 0!==m)o[u]=m;else{if(m=o[u],void 0!==m){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,p));continue}var g=t&&t._propertyBindings[u].binding.parsedPath;m=new PropertyMixer(PropertyBinding.create(n,p,g),i.ValueTypeName,i.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,p),o[u]=m}s[u].resultBuffer=m.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,a=this._actionsByClip[r];this._bindAction(e,a&&a.knownActions[0]),this._addInactiveAction(e,r,t)}for(var o=e._propertyBindings,s=0,i=o.length,n;s!==i;++s)n=o[s],0==n.useCount++&&(this._lendBinding(n),n.saveOriginalState());this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,a=t.length,n;r!==a;++r)n=t[r],0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n));this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var r=this._actions,a=this._actionsByClip,o=a[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,a[t]=o;else{var i=o.knownActions;e._byClipCacheIndex=i.length,i.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;var a=e._clip.uuid,o=this._actionsByClip,i=o[a],s=i.knownActions,l=s[s.length-1],d=e._byClipCacheIndex;l._byClipCacheIndex=d,s[d]=l,s.pop(),e._byClipCacheIndex=null;var c=i.actionByRoot,u=(e._localRoot||this._root).uuid;delete c[u],0===s.length&&delete o[a],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,a=t.length,n;r!==a;++r)n=t[r],0==--n.referenceCount&&this._removeInactiveBinding(n)},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_addInactiveBinding:function(e,t,n){var r=this._bindingsByRootAndName,a=r[t],o=this._bindings;void 0===a&&(a={},r[t]=a),a[n]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,r=n.rootNode.uuid,a=n.path,o=this._bindingsByRootAndName,i=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete i[a];remove_empty_map:{for(var d in i)break remove_empty_map;delete o[r]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,a=t[r];e._cacheIndex=r,t[r]=e,a._cacheIndex=n,t[n]=a},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&(n=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,a=t[r];e.__cacheIndex=r,t[r]=e,a.__cacheIndex=n,t[n]=a},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,r=n.uuid,a='string'==typeof e?AnimationClip.findByName(n,e):e,o=null===a?e:a.uuid,i=this._actionsByClip[o],s=null;if(void 0!==i){var l=i.actionByRoot[r];if(void 0!==l)return l;s=i.knownActions[0],null===a&&(a=s._clip)}if(null===a)return null;var d=new AnimationAction(this,a,t);return this._bindAction(d,s),this._addInactiveAction(d,o,r),d},existingAction:function(e,t){var n=t||this._root,r=n.uuid,a='string'==typeof e?AnimationClip.findByName(n,e):e,o=a?a.uuid:e,i=this._actionsByClip[o];return void 0===i?null:i.actionByRoot[r]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var a=0;a!==t;++a)e[a].reset();for(var a=0;a!==r;++a)n[a].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,r=this.time+=e,a=s(e),o=this._accuIndex^=1,l=0,i;l!==n;++l)i=t[l],i._update(r,e,a,o);for(var d=this._bindings,c=this._nActiveBindings,l=0;l!==c;++l)d[l].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,a=this._actionsByClip,o=a[r];if(void 0!==o){for(var s=o.knownActions,l=0,i=s.length,n;l!==i;++l){n=s[l],this._deactivateAction(n);var d=n._cacheIndex,c=t[t.length-1];n._cacheIndex=null,n._byClipCacheIndex=null,c._cacheIndex=d,t[d]=c,t.pop(),this._removeInactiveBindingsForAction(n)}delete a[r]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var r in n){var a=n[r].actionByRoot,o=a[t];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var i=this._bindingsByRootAndName,s=i[t];if(void 0!==s)for(var l in s){var d=s[l];d.restoreOriginalState(),this._removeInactiveBinding(d)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Uniform.prototype.clone=function(){return new Uniform(void 0===this.value.clone?this.value:this.value.clone())},InstancedBufferGeometry.prototype=Object.assign(Object.create(BufferGeometry.prototype),{constructor:InstancedBufferGeometry,isInstancedBufferGeometry:!0,addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},copy:function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var r in n){var a=n[r];this.addAttribute(r,a.clone())}for(var o=e.groups,s=0,i=o.length,l;s<i;s++)l=o[s],this.addGroup(l.start,l.count,l.materialIndex);return this}}),Object.defineProperties(InterleavedBufferAttribute.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(InterleavedBufferAttribute.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this},setXYZW:function(e,t,n,r,a){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=a,this}}),Object.defineProperty(InterleavedBuffer.prototype,'needsUpdate',{set:function(e){!0===e&&this.version++}}),Object.assign(InterleavedBuffer.prototype,{isInterleavedBuffer:!0,setArray:function(e){if(Array.isArray(e))throw new TypeError('THREE.BufferAttribute: array should be a Typed Array.');this.count=void 0===e?0:e.length/this.stride,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var r=0,a=this.stride;r<a;r++)this.array[e+r]=t.array[n+r];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),InstancedInterleavedBuffer.prototype=Object.assign(Object.create(InterleavedBuffer.prototype),{constructor:InstancedInterleavedBuffer,isInstancedInterleavedBuffer:!0,copy:function(e){return InterleavedBuffer.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),InstancedBufferAttribute.prototype=Object.assign(Object.create(BufferAttribute.prototype),{constructor:InstancedBufferAttribute,isInstancedBufferAttribute:!0,copy:function(e){return BufferAttribute.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(Raycaster.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error('THREE.Raycaster: Unsupported camera type.')},intersectObject:function(e,t){var n=[];return intersectObject(e,this,n,t),n.sort(ascSort),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn('THREE.Raycaster.intersectObjects: objects is not an Array.'),n;for(var r=0,a=e.length;r<a;r++)intersectObject(e[r],this,n,t);return n.sort(ascSort),n}}),Object.assign(Clock.prototype,{start:function(){this.startTime=('undefined'==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=('undefined'==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Spherical.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){var e=1e-6;return this.phi=y(e,x(h-e,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=a(e.x,e.z),this.phi=c(Gt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Cylindrical.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return new this.constructor().copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=p(e.x*e.x+e.z*e.z),this.theta=a(e.x,e.z),this.y=e.y,this}}),ImmediateRenderObject.prototype=Object.create(Object3D.prototype),ImmediateRenderObject.prototype.constructor=ImmediateRenderObject,ImmediateRenderObject.prototype.isImmediateRenderObject=!0,VertexNormalsHelper.prototype=Object.create(LineSegments.prototype),VertexNormalsHelper.prototype.constructor=VertexNormalsHelper,VertexNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Matrix3;return function update(){var r=['a','b','c'];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var a=this.object.matrixWorld,o=this.geometry.attributes.position,s=this.object.geometry;if(s&&s.isGeometry)for(var d=s.vertices,c=s.faces,u=0,p=0,i=c.length,l;p<i;p++){l=c[p];for(var m=0,g=l.vertexNormals.length;m<g;m++){var h=d[l[r[m]]],f=l.vertexNormals[m];e.copy(h).applyMatrix4(a),t.copy(f).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),++u,o.setXYZ(u,t.x,t.y,t.z),++u}}else if(s&&s.isBufferGeometry)for(var _=s.attributes.position,y=s.attributes.normal,u=0,m=0,g=_.count;m<g;m++)e.set(_.getX(m),_.getY(m),_.getZ(m)).applyMatrix4(a),t.set(y.getX(m),y.getY(m),y.getZ(m)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),o.setXYZ(u,e.x,e.y,e.z),++u,o.setXYZ(u,t.x,t.y,t.z),++u;o.needsUpdate=!0}}(),SpotLightHelper.prototype=Object.create(Object3D.prototype),SpotLightHelper.prototype.constructor=SpotLightHelper,SpotLightHelper.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},SpotLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3;return function update(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,r=n*u(this.light.angle);this.cone.scale.set(r,r,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0===this.color?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),SkeletonHelper.prototype=Object.create(LineSegments.prototype),SkeletonHelper.prototype.constructor=SkeletonHelper,SkeletonHelper.prototype.onBeforeRender=function(){var e=new Vector3,t=new Matrix4,n=new Matrix4;return function onBeforeRender(){var r=this.bones,a=this.geometry,o=a.getAttribute('position');n.getInverse(this.root.matrixWorld);for(var s=0,i=0,l;s<r.length;s++)l=r[s],l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(i,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(i+1,e.x,e.y,e.z),i+=2);a.getAttribute('position').needsUpdate=!0}}(),PointLightHelper.prototype=Object.create(Mesh.prototype),PointLightHelper.prototype.constructor=PointLightHelper,PointLightHelper.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},PointLightHelper.prototype.update=function(){void 0===this.color?this.material.color.copy(this.light.color):this.material.color.set(this.color)},RectAreaLightHelper.prototype=Object.create(Object3D.prototype),RectAreaLightHelper.prototype.constructor=RectAreaLightHelper,RectAreaLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},RectAreaLightHelper.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,r=n.array;r[0]=e,r[1]=-t,r[2]=0,r[3]=e,r[4]=t,r[5]=0,r[6]=-e,r[7]=t,r[8]=0,r[9]=-e,r[10]=-t,r[11]=0,r[12]=e,r[13]=-t,r[14]=0,n.needsUpdate=!0,void 0===this.color?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},HemisphereLightHelper.prototype=Object.create(Object3D.prototype),HemisphereLightHelper.prototype.constructor=HemisphereLightHelper,HemisphereLightHelper.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},HemisphereLightHelper.prototype.update=function(){var e=new Vector3,t=new Color,n=new Color;return function update(){var r=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var a=r.geometry.getAttribute('color');t.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,i=a.count,s;o<i;o++)s=o<i/2?t:n,a.setXYZ(o,s.r,s.g,s.b);a.needsUpdate=!0}r.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),GridHelper.prototype=Object.create(LineSegments.prototype),GridHelper.prototype.constructor=GridHelper,PolarGridHelper.prototype=Object.create(LineSegments.prototype),PolarGridHelper.prototype.constructor=PolarGridHelper,FaceNormalsHelper.prototype=Object.create(LineSegments.prototype),FaceNormalsHelper.prototype.constructor=FaceNormalsHelper,FaceNormalsHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Matrix3;return function update(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry,s=o.vertices,d=o.faces,c=0,u=0,i=d.length;u<i;u++){var l=d[u],p=l.normal;e.copy(s[l.a]).add(s[l.b]).add(s[l.c]).divideScalar(3).applyMatrix4(r),t.copy(p).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(c,e.x,e.y,e.z),++c,a.setXYZ(c,t.x,t.y,t.z),++c}a.needsUpdate=!0}}(),DirectionalLightHelper.prototype=Object.create(Object3D.prototype),DirectionalLightHelper.prototype.constructor=DirectionalLightHelper,DirectionalLightHelper.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},DirectionalLightHelper.prototype.update=function(){var e=new Vector3,t=new Vector3,n=new Vector3;return function update(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0===this.color?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),CameraHelper.prototype=Object.create(LineSegments.prototype),CameraHelper.prototype.constructor=CameraHelper,CameraHelper.prototype.update=function(){function setPoint(a,o,s,d){e.set(o,s,d).unproject(t);var c=r[a];if(void 0!==c)for(var u=n.getAttribute('position'),p=0,i=c.length;p<i;p++)u.setXYZ(c[p],e.x,e.y,e.z)}var e=new Vector3,t=new Camera,n,r;return function update(){n=this.geometry,r=this.pointMap;var e=1,a=1;t.projectionMatrix.copy(this.camera.projectionMatrix),setPoint('c',0,0,-1),setPoint('t',0,0,1),setPoint('n1',-e,-a,-1),setPoint('n2',e,-a,-1),setPoint('n3',-e,a,-1),setPoint('n4',e,a,-1),setPoint('f1',-e,-a,1),setPoint('f2',e,-a,1),setPoint('f3',-e,a,1),setPoint('f4',e,a,1),setPoint('u1',.7*e,1.1*a,-1),setPoint('u2',.7*-e,1.1*a,-1),setPoint('u3',0,2*a,-1),setPoint('cf1',-e,0,1),setPoint('cf2',e,0,1),setPoint('cf3',0,-a,1),setPoint('cf4',0,a,1),setPoint('cn1',-e,0,-1),setPoint('cn2',e,0,-1),setPoint('cn3',0,-a,-1),setPoint('cn4',0,a,-1),n.getAttribute('position').needsUpdate=!0}}(),BoxHelper.prototype=Object.create(LineSegments.prototype),BoxHelper.prototype.constructor=BoxHelper,BoxHelper.prototype.update=function(){var e=new Box3;return function update(t){if(void 0!==t&&console.warn('THREE.BoxHelper: .update() has no longer arguments.'),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,r=e.max,a=this.geometry.attributes.position,o=a.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=n.x,o[4]=r.y,o[5]=r.z,o[6]=n.x,o[7]=n.y,o[8]=r.z,o[9]=r.x,o[10]=n.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=n.z,o[15]=n.x,o[16]=r.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=r.x,o[22]=n.y,o[23]=n.z,a.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),BoxHelper.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Box3Helper.prototype=Object.create(LineSegments.prototype),Box3Helper.prototype.constructor=Box3Helper,Box3Helper.prototype.onBeforeRender=function(){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5))},PlaneHelper.prototype=Object.create(Line.prototype),PlaneHelper.prototype.constructor=PlaneHelper,PlaneHelper.prototype.onBeforeRender=function(){var e=-this.plane.constant;1e-8>E(e)&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var En,xn;ArrowHelper.prototype=Object.create(Object3D.prototype),ArrowHelper.prototype.constructor=ArrowHelper,ArrowHelper.prototype.setDirection=function(){var e=new Vector3,t;return function setDirection(n){.99999<n.y?this.quaternion.set(0,0,0,1):-.99999>n.y?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=c(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),ArrowHelper.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,y(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ArrowHelper.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},AxisHelper.prototype=Object.create(LineSegments.prototype),AxisHelper.prototype.constructor=AxisHelper;var An=new Vector3,bn=new CubicPoly,Tn=new CubicPoly,Cn=new CubicPoly;CatmullRomCurve3.prototype=Object.create(Curve.prototype),CatmullRomCurve3.prototype.constructor=CatmullRomCurve3,CatmullRomCurve3.prototype.getPoint=function(e){var t=this.points,n=t.length,r=(n-(this.closed?0:1))*e,a=A(r),o=r-a;this.closed?a+=0<a?0:(A(E(a)/t.length)+1)*t.length:0==o&&a===n-1&&(a=n-2,o=1);var i,s,l,d;if(this.closed||0<a?i=t[(a-1)%n]:(An.subVectors(t[0],t[1]).add(t[0]),i=An),s=t[a%n],l=t[(a+1)%n],this.closed||a+2<n?d=t[(a+2)%n]:(An.subVectors(t[n-1],t[n-2]).add(t[n-1]),d=An),void 0===this.type||'centripetal'===this.type||'chordal'===this.type){var c='chordal'===this.type?.5:.25,u=f(i.distanceToSquared(s),c),p=f(s.distanceToSquared(l),c),m=f(l.distanceToSquared(d),c);1e-4>p&&(p=1),1e-4>u&&(u=p),1e-4>m&&(m=p),bn.initNonuniformCatmullRom(i.x,s.x,l.x,d.x,u,p,m),Tn.initNonuniformCatmullRom(i.y,s.y,l.y,d.y,u,p,m),Cn.initNonuniformCatmullRom(i.z,s.z,l.z,d.z,u,p,m)}else if('catmullrom'===this.type){var g=void 0===this.tension?.5:this.tension;bn.initCatmullRom(i.x,s.x,l.x,d.x,g),Tn.initCatmullRom(i.y,s.y,l.y,d.y,g),Cn.initCatmullRom(i.z,s.z,l.z,d.z,g)}return new Vector3(bn.calc(o),Tn.calc(o),Cn.calc(o))},CubicBezierCurve3.prototype=Object.create(Curve.prototype),CubicBezierCurve3.prototype.constructor=CubicBezierCurve3,CubicBezierCurve3.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2,a=this.v3;return new Vector3(CubicBezier(e,t.x,n.x,r.x,a.x),CubicBezier(e,t.y,n.y,r.y,a.y),CubicBezier(e,t.z,n.z,r.z,a.z))},QuadraticBezierCurve3.prototype=Object.create(Curve.prototype),QuadraticBezierCurve3.prototype.constructor=QuadraticBezierCurve3,QuadraticBezierCurve3.prototype.getPoint=function(e){var t=this.v0,n=this.v1,r=this.v2;return new Vector3(QuadraticBezier(e,t.x,n.x,r.x),QuadraticBezier(e,t.y,n.y,r.y),QuadraticBezier(e,t.z,n.z,r.z))},LineCurve3.prototype=Object.create(Curve.prototype),LineCurve3.prototype.constructor=LineCurve3,LineCurve3.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new Vector3;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t},ArcCurve.prototype=Object.create(EllipseCurve.prototype),ArcCurve.prototype.constructor=ArcCurve;var vn={createMultiMaterialObject:function(e,t){for(var n=new Group,r=0,a=t.length;r<a;r++)n.add(new Mesh(e,t[r]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){e.applyMatrix(new Matrix4().getInverse(n.matrixWorld)),t.remove(e),n.add(e)}},Sn=0,Rn=1;Curve.create=function(e,t){return console.log('THREE.Curve.create() has been deprecated'),e.prototype=Object.create(Curve.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},ClosedSplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),SplineCurve3.prototype=Object.create(CatmullRomCurve3.prototype),Spline.prototype=Object.create(CatmullRomCurve3.prototype),Object.assign(Spline.prototype,{initFromArray:function(){console.error('THREE.Spline: .initFromArray() has been removed.')},getControlPointsArray:function(){console.error('THREE.Spline: .getControlPointsArray() has been removed.')},reparametrizeByArcLength:function(){console.error('THREE.Spline: .reparametrizeByArcLength() has been removed.')}}),GridHelper.prototype.setColors=function(){console.error('THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.')},SkeletonHelper.prototype.update=function(){console.error('THREE.SkeletonHelper: update() no longer needs to be called.')},Object.assign(Box2.prototype,{center:function(e){return console.warn('THREE.Box2: .center() has been renamed to .getCenter().'),this.getCenter(e)},empty:function(){return console.warn('THREE.Box2: .empty() has been renamed to .isEmpty().'),this.isEmpty()},isIntersectionBox:function(e){return console.warn('THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},size:function(e){return console.warn('THREE.Box2: .size() has been renamed to .getSize().'),this.getSize(e)}}),Object.assign(Box3.prototype,{center:function(e){return console.warn('THREE.Box3: .center() has been renamed to .getCenter().'),this.getCenter(e)},empty:function(){return console.warn('THREE.Box3: .empty() has been renamed to .isEmpty().'),this.isEmpty()},isIntersectionBox:function(e){return console.warn('THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn('THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().'),this.intersectsSphere(e)},size:function(e){return console.warn('THREE.Box3: .size() has been renamed to .getSize().'),this.getSize(e)}}),Line3.prototype.center=function(e){return console.warn('THREE.Line3: .center() has been renamed to .getCenter().'),this.getCenter(e)},Gt.random16=function(){return console.warn('THREE.Math.random16() has been deprecated. Use Math.random() instead.'),Math.random()},Object.assign(Matrix3.prototype,{flattenToArrayOffset:function(e,t){return console.warn('THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.'),this.toArray(e,t)},multiplyVector3:function(e){return console.warn('THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.'),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error('THREE.Matrix3: .multiplyVector3Array() has been removed.')},applyToBuffer:function(e){return console.warn('THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.'),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error('THREE.Matrix3: .applyToVector3Array() has been removed.')}}),Object.assign(Matrix4.prototype,{extractPosition:function(e){return console.warn('THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().'),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn('THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.'),this.toArray(e,t)},getPosition:function(){var e;return function getPosition(){return void 0==e&&(e=new Vector3),console.warn('THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.'),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn('THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().'),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn('THREE.Matrix4: .multiplyToArray() has been removed.')},multiplyVector3:function(e){return console.warn('THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn('THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error('THREE.Matrix4: .multiplyVector3Array() has been removed.')},rotateAxis:function(e){console.warn('THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.'),e.transformDirection(this)},crossVector:function(e){return console.warn('THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.'),e.applyMatrix4(this)},translate:function(){console.error('THREE.Matrix4: .translate() has been removed.')},rotateX:function(){console.error('THREE.Matrix4: .rotateX() has been removed.')},rotateY:function(){console.error('THREE.Matrix4: .rotateY() has been removed.')},rotateZ:function(){console.error('THREE.Matrix4: .rotateZ() has been removed.')},rotateByAxis:function(){console.error('THREE.Matrix4: .rotateByAxis() has been removed.')},applyToBuffer:function(e){return console.warn('THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead.'),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error('THREE.Matrix4: .applyToVector3Array() has been removed.')},makeFrustum:function(e,t,n,r,a,o){return console.warn('THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.'),this.makePerspective(e,t,r,n,a,o)}}),Plane.prototype.isIntersectionLine=function(e){return console.warn('THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().'),this.intersectsLine(e)},Quaternion.prototype.multiplyVector3=function(e){return console.warn('THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.'),e.applyQuaternion(this)},Object.assign(Ray.prototype,{isIntersectionBox:function(e){return console.warn('THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().'),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn('THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().'),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn('THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().'),this.intersectsSphere(e)}}),Object.assign(Shape.prototype,{extrude:function(e){return console.warn('THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.'),new ExtrudeGeometry(this,e)},makeGeometry:function(e){return console.warn('THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.'),new ShapeGeometry(this,e)}}),Object.assign(Vector2.prototype,{fromAttribute:function(e,t,n){return console.error('THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Object.assign(Vector3.prototype,{setEulerFromRotationMatrix:function(){console.error('THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.')},setEulerFromQuaternion:function(){console.error('THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.')},getPositionFromMatrix:function(e){return console.warn('THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().'),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn('THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().'),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn('THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().'),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn('THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.'),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error('THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Object.assign(Vector4.prototype,{fromAttribute:function(e,t,n){return console.error('THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().'),this.fromBufferAttribute(e,t,n)}}),Geometry.prototype.computeTangents=function(){console.warn('THREE.Geometry: .computeTangents() has been removed.')},Object.assign(Object3D.prototype,{getChildByName:function(e){return console.warn('THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().'),this.getObjectByName(e)},renderDepth:function(){console.warn('THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.')},translate:function(e,t){return console.warn('THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.'),this.translateOnAxis(t,e)}}),Object.defineProperties(Object3D.prototype,{eulerOrder:{get:function(){return console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),this.rotation.order},set:function(e){console.warn('THREE.Object3D: .eulerOrder is now .rotation.order.'),this.rotation.order=e}},useQuaternion:{get:function(){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.')},set:function(){console.warn('THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.')}}}),Object.defineProperties(LOD.prototype,{objects:{get:function(){return console.warn('THREE.LOD: .objects has been renamed to .levels.'),this.levels}}}),Object.defineProperty(Skeleton.prototype,'useVertexTexture',{get:function(){console.warn('THREE.Skeleton: useVertexTexture has been removed.')},set:function(){console.warn('THREE.Skeleton: useVertexTexture has been removed.')}}),Object.defineProperty(Curve.prototype,'__arcLengthDivisions',{get:function(){return console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.'),this.arcLengthDivisions},set:function(e){console.warn('THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.'),this.arcLengthDivisions=e}}),PerspectiveCamera.prototype.setLens=function(e,t){console.warn('THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup.'),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Light.prototype,{onlyShadow:{set:function(){console.warn('THREE.Light: .onlyShadow has been removed.')}},shadowCameraFov:{set:function(e){console.warn('THREE.Light: .shadowCameraFov is now .shadow.camera.fov.'),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn('THREE.Light: .shadowCameraLeft is now .shadow.camera.left.'),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn('THREE.Light: .shadowCameraRight is now .shadow.camera.right.'),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn('THREE.Light: .shadowCameraTop is now .shadow.camera.top.'),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn('THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.'),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn('THREE.Light: .shadowCameraNear is now .shadow.camera.near.'),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn('THREE.Light: .shadowCameraFar is now .shadow.camera.far.'),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn('THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.')}},shadowBias:{set:function(e){console.warn('THREE.Light: .shadowBias is now .shadow.bias.'),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn('THREE.Light: .shadowDarkness has been removed.')}},shadowMapWidth:{set:function(e){console.warn('THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.'),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn('THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.'),this.shadow.mapSize.height=e}}}),Object.defineProperties(BufferAttribute.prototype,{length:{get:function(){return console.warn('THREE.BufferAttribute: .length has been deprecated. Use .count instead.'),this.array.length}}}),Object.assign(BufferGeometry.prototype,{addIndex:function(e){console.warn('THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().'),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn('THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.'),console.warn('THREE.BufferGeometry: .addDrawCall() is now .addGroup().'),this.addGroup(e,t)},clearDrawCalls:function(){console.warn('THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().'),this.clearGroups()},computeTangents:function(){console.warn('THREE.BufferGeometry: .computeTangents() has been removed.')},computeOffsets:function(){console.warn('THREE.BufferGeometry: .computeOffsets() has been removed.')}}),Object.defineProperties(BufferGeometry.prototype,{drawcalls:{get:function(){return console.error('THREE.BufferGeometry: .drawcalls has been renamed to .groups.'),this.groups}},offsets:{get:function(){return console.warn('THREE.BufferGeometry: .offsets has been renamed to .groups.'),this.groups}}}),Object.defineProperties(Uniform.prototype,{dynamic:{set:function(){console.warn('THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.')}},onUpdate:{value:function(){return console.warn('THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.'),this}}}),Object.defineProperties(Material.prototype,{wrapAround:{get:function(){console.warn('THREE.Material: .wrapAround has been removed.')},set:function(){console.warn('THREE.Material: .wrapAround has been removed.')}},wrapRGB:{get:function(){return console.warn('THREE.Material: .wrapRGB has been removed.'),new Color}},shading:{get:function(){console.error('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.')},set:function(e){console.warn('THREE.'+this.type+': .shading has been removed. Use the boolean .flatShading instead.'),this.flatShading=e===O}}}),Object.defineProperties(MeshPhongMaterial.prototype,{metal:{get:function(){return console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.'),!1},set:function(){console.warn('THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead')}}}),Object.defineProperties(ShaderMaterial.prototype,{derivatives:{get:function(){return console.warn('THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.'),this.extensions.derivatives},set:function(e){console.warn('THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.'),this.extensions.derivatives=e}}}),Object.assign(WebGLRenderer.prototype,{getCurrentRenderTarget:function(){return console.warn('THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().'),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn('THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().'),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn('THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.'),this.capabilities.precision},supportsFloatTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \'OES_texture_float\' ).'),this.extensions.get('OES_texture_float')},supportsHalfFloatTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \'OES_texture_half_float\' ).'),this.extensions.get('OES_texture_half_float')},supportsStandardDerivatives:function(){return console.warn('THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \'OES_standard_derivatives\' ).'),this.extensions.get('OES_standard_derivatives')},supportsCompressedTextureS3TC:function(){return console.warn('THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \'WEBGL_compressed_texture_s3tc\' ).'),this.extensions.get('WEBGL_compressed_texture_s3tc')},supportsCompressedTexturePVRTC:function(){return console.warn('THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \'WEBGL_compressed_texture_pvrtc\' ).'),this.extensions.get('WEBGL_compressed_texture_pvrtc')},supportsBlendMinMax:function(){return console.warn('THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \'EXT_blend_minmax\' ).'),this.extensions.get('EXT_blend_minmax')},supportsVertexTextures:function(){return console.warn('THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.'),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn('THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \'ANGLE_instanced_arrays\' ).'),this.extensions.get('ANGLE_instanced_arrays')},enableScissorTest:function(e){console.warn('THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().'),this.setScissorTest(e)},initMaterial:function(){console.warn('THREE.WebGLRenderer: .initMaterial() has been removed.')},addPrePlugin:function(){console.warn('THREE.WebGLRenderer: .addPrePlugin() has been removed.')},addPostPlugin:function(){console.warn('THREE.WebGLRenderer: .addPostPlugin() has been removed.')},updateShadowMap:function(){console.warn('THREE.WebGLRenderer: .updateShadowMap() has been removed.')}}),Object.defineProperties(WebGLRenderer.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.'),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.'),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn('THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace.'),this.shadowMap.cullFace=e}}}),Object.defineProperties(WebGLShadowMap.prototype,{cullFace:{get:function(){return this.renderReverseSided?R:S},set:function(e){var t=e!==S;console.warn('WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to '+t+'.'),this.renderReverseSided=t}}}),Object.defineProperties(WebGLRenderTarget.prototype,{wrapS:{get:function(){return console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.'),this.texture.wrapS},set:function(e){console.warn('THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.'),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.'),this.texture.wrapT},set:function(e){console.warn('THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.'),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.'),this.texture.magFilter},set:function(e){console.warn('THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.'),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.'),this.texture.minFilter},set:function(e){console.warn('THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.'),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.'),this.texture.anisotropy},set:function(e){console.warn('THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.'),this.texture.anisotropy=e}},offset:{get:function(){return console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.'),this.texture.offset},set:function(e){console.warn('THREE.WebGLRenderTarget: .offset is now .texture.offset.'),this.texture.offset=e}},repeat:{get:function(){return console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.'),this.texture.repeat},set:function(e){console.warn('THREE.WebGLRenderTarget: .repeat is now .texture.repeat.'),this.texture.repeat=e}},format:{get:function(){return console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.'),this.texture.format},set:function(e){console.warn('THREE.WebGLRenderTarget: .format is now .texture.format.'),this.texture.format=e}},type:{get:function(){return console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.'),this.texture.type},set:function(e){console.warn('THREE.WebGLRenderTarget: .type is now .texture.type.'),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.'),this.texture.generateMipmaps},set:function(e){console.warn('THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.'),this.texture.generateMipmaps=e}}}),Audio.prototype.load=function(e){console.warn('THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.');var t=this,n=new AudioLoader;return n.load(e,function(e){t.setBuffer(e)}),this},AudioAnalyser.prototype.getData=function(){return console.warn('THREE.AudioAnalyser: .getData() is now .getFrequencyData().'),this.getFrequencyData()},CubeCamera.prototype.updateCubeMap=function(e,t){return console.warn('THREE.CubeCamera: .updateCubeMap() is now .update().'),this.update(e,t)};var Fn={merge:function(e,t,n){console.warn('THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.');var r;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),r=t.matrix,t=t.geometry),e.merge(t,r,n)},center:function(e){return console.warn('THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.'),e.center()}},wn={crossOrigin:void 0,loadTexture:function(e,t,n,r){console.warn('THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.');var a=new TextureLoader;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadTextureCube:function(e,t,n,r){console.warn('THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.');var a=new CubeTextureLoader;a.setCrossOrigin(this.crossOrigin);var o=a.load(e,n,void 0,r);return t&&(o.mapping=t),o},loadCompressedTexture:function(){console.error('THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.')},loadCompressedTextureCube:function(){console.error('THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.')}}},"./node_modules/webgl-debug/index.js":/*!*******************************************!*\
  !*** ./node_modules/webgl-debug/index.js ***!
  \*******************************************//*! no static exports found */function(e,t,n){(function(t){WebGLDebugUtils=function(){function init(e){if(null==a)for(var t in a={},o={},e)'number'==typeof e[t]&&(a[e[t]]=t,o[t]=e[t])}function checkInit(){if(null==a)throw'WebGLDebugUtils.init(ctx) not called'}function mightBeEnum(e){return checkInit(),void 0!==a[e]}function glEnumToString(e){checkInit();var t=a[e];return void 0===t?'/*UNKNOWN WebGL ENUM*/ 0x'+e.toString(16)+'':'gl.'+t}function glFunctionArgToString(e,t,n,a){var s=r[e];if(void 0!==s){var s=s[t];if(void 0!==s&&s[n]){if('object'==typeof s[n]&&void 0!==s[n].enumBitwiseOr){for(var l=s[n].enumBitwiseOr,d=0,c=[],u=0,i;u<l.length;++u)i=o[l[u]],0!=(a&i)&&(d|=i,c.push(glEnumToString(i)));return d===a?c.join(' | '):glEnumToString(a)}return glEnumToString(a)}}return null===a?'null':void 0===a?'undefined':a.toString()}function makePropertyWrapper(e,t,n){e.__defineGetter__(n,function(){return t[n]}),e.__defineSetter__(n,function(e){t[n]=e})}function makeDebugContext(e,t,r,a){function makeErrorWrapper(e,n){return function(){r&&r(n,arguments);var i=e[n].apply(e,arguments),s=a.getError();return 0!=s&&(o[s]=!0,t(s,n,arguments)),i}}a=a||e,init(e),t=t||function(e,t,r){for(var a='',o=r.length,i=0;i<o;++i)a+=(0==i?'':', ')+glFunctionArgToString(t,o,i,r[i]);n('WebGL error '+glEnumToString(e)+' in '+t+'('+a+')')};var o={},i={};for(var s in e)if('function'!=typeof e[s])makePropertyWrapper(i,e,s);else if('getExtension'!=s)i[s]=makeErrorWrapper(e,s);else{var l=makeErrorWrapper(e,s);i[s]=function(){var n=l.apply(e,arguments);return makeDebugContext(n,t,r,a)}}return i.getError=function(){for(var t in o)if(o.hasOwnProperty(t)&&o[t])return o[t]=!1,t;return e.NO_ERROR},i}function resetToInitialState(e){var t=e.getParameter(e.MAX_VERTEX_ATTRIBS),n=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,n);for(var r=0;r<t;++r)e.disableVertexAttribArray(r),e.vertexAttribPointer(r,4,e.FLOAT,!1,0,0),e.vertexAttrib1f(r,0);e.deleteBuffer(n);for(var a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),r=0;r<a;++r)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_CUBE_MAP,null),e.bindTexture(e.TEXTURE_2D,null);for(e.activeTexture(e.TEXTURE0),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.DITHER),e.disable(e.SCISSOR_TEST),e.blendColor(0,0,0,0),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.clearColor(0,0,0,0),e.clearDepth(1),e.clearStencil(-1),e.colorMask(!0,!0,!0,!0),e.cullFace(e.BACK),e.depthFunc(e.LESS),e.depthMask(!0),e.depthRange(0,1),e.frontFace(e.CCW),e.hint(e.GENERATE_MIPMAP_HINT,e.DONT_CARE),e.lineWidth(1),e.pixelStorei(e.PACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_ALIGNMENT,4),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),e.UNPACK_COLORSPACE_CONVERSION_WEBGL&&e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,e.BROWSER_DEFAULT_WEBGL),e.polygonOffset(0,0),e.sampleCoverage(1,!1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilMask(4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.viewport(0,0,e.canvas.width,e.canvas.height),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);e.getError(););}'undefined'==typeof window&&(window=t);var e=function(e){window.console&&window.console.log&&window.console.log(e)},n=function(t){window.console&&window.console.error?window.console.error(t):e(t)},r={enable:{1:{0:!0}},disable:{1:{0:!0}},getParameter:{1:{0:!0}},drawArrays:{3:{0:!0}},drawElements:{4:{0:!0,2:!0}},createShader:{1:{0:!0}},getShaderParameter:{2:{1:!0}},getProgramParameter:{2:{1:!0}},getShaderPrecisionFormat:{2:{0:!0,1:!0}},getVertexAttrib:{2:{1:!0}},vertexAttribPointer:{6:{2:!0}},bindTexture:{2:{0:!0}},activeTexture:{1:{0:!0}},getTexParameter:{2:{0:!0,1:!0}},texParameterf:{3:{0:!0,1:!0}},texParameteri:{3:{0:!0,1:!0,2:!0}},texImage2D:{9:{0:!0,2:!0,6:!0,7:!0},6:{0:!0,2:!0,3:!0,4:!0}},texSubImage2D:{9:{0:!0,6:!0,7:!0},7:{0:!0,4:!0,5:!0}},copyTexImage2D:{8:{0:!0,2:!0}},copyTexSubImage2D:{8:{0:!0}},generateMipmap:{1:{0:!0}},compressedTexImage2D:{7:{0:!0,2:!0}},compressedTexSubImage2D:{8:{0:!0,6:!0}},bindBuffer:{2:{0:!0}},bufferData:{3:{0:!0,2:!0}},bufferSubData:{3:{0:!0}},getBufferParameter:{2:{0:!0,1:!0}},pixelStorei:{2:{0:!0,1:!0}},readPixels:{7:{4:!0,5:!0}},bindRenderbuffer:{2:{0:!0}},bindFramebuffer:{2:{0:!0}},checkFramebufferStatus:{1:{0:!0}},framebufferRenderbuffer:{4:{0:!0,1:!0,2:!0}},framebufferTexture2D:{5:{0:!0,1:!0,2:!0}},getFramebufferAttachmentParameter:{3:{0:!0,1:!0,2:!0}},getRenderbufferParameter:{2:{0:!0,1:!0}},renderbufferStorage:{4:{0:!0,1:!0}},clear:{1:{0:{enumBitwiseOr:['COLOR_BUFFER_BIT','DEPTH_BUFFER_BIT','STENCIL_BUFFER_BIT']}}},depthFunc:{1:{0:!0}},blendFunc:{2:{0:!0,1:!0}},blendFuncSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},blendEquation:{1:{0:!0}},blendEquationSeparate:{2:{0:!0,1:!0}},stencilFunc:{3:{0:!0}},stencilFuncSeparate:{4:{0:!0,1:!0}},stencilMaskSeparate:{2:{0:!0}},stencilOp:{3:{0:!0,1:!0,2:!0}},stencilOpSeparate:{4:{0:!0,1:!0,2:!0,3:!0}},cullFace:{1:{0:!0}},frontFace:{1:{0:!0}},drawArraysInstancedANGLE:{4:{0:!0}},drawElementsInstancedANGLE:{5:{0:!0,2:!0}},blendEquationEXT:{1:{0:!0}}},a=null,o=null;return{init:init,mightBeEnum:mightBeEnum,glEnumToString:glEnumToString,glFunctionArgToString:glFunctionArgToString,glFunctionArgsToString:function glFunctionArgsToString(e,t){for(var n='',r=t.length,a=0;a<r;++a)n+=(0==a?'':', ')+glFunctionArgToString(e,r,a,t[a]);return n},makeDebugContext:makeDebugContext,makeLostContextSimulatingCanvas:function makeLostContextSimulatingCanvas(e){function wrapEvent(e){return'function'==typeof e?e:function(t){e.handleEvent(t)}}function clearErrors(){for(var e=Object.keys(u),t=0;t<e.length;++t)delete u[e]}function loseContextIfTime(){++l,o||s!=l||e.loseContext()}function makeLostContextFunctionWrapper(e,t){var n=e[t];return function(){if(loseContextIfTime(),!o){var t=n.apply(e,arguments);return t}}}function freeResources(){for(var e=0,t;e<i.length;++e)t=i[e],t instanceof WebGLBuffer?p.deleteBuffer(t):t instanceof WebGLFramebuffer?p.deleteFramebuffer(t):t instanceof WebGLProgram?p.deleteProgram(t):t instanceof WebGLRenderbuffer?p.deleteRenderbuffer(t):t instanceof WebGLShader?p.deleteShader(t):t instanceof WebGLTexture&&p.deleteTexture(t)}function makeWebGLContextEvent(e){return{statusMessage:e,preventDefault:function(){d=!0}}}function makeLostContextSimulatingContext(e){for(var t in e)'function'==typeof e[t]?r[t]=makeLostContextFunctionWrapper(e,t):makePropertyWrapper(r,e,t);r.getError=function(){if(loseContextIfTime(),!o)for(var e;e=p.getError();)u[e]=!0;for(var e in u)if(u[e])return delete u[e],e;return r.NO_ERROR};for(var n=['createBuffer','createFramebuffer','createProgram','createRenderbuffer','createShader','createTexture'],s=0,l;s<n.length;++s)l=n[s],r[l]=function(t){return function(){if(loseContextIfTime(),o)return null;var n=t.apply(e,arguments);return n.__webglDebugContextLostId__=a,i.push(n),n}}(e[l]);for(var d=['getActiveAttrib','getActiveUniform','getBufferParameter','getContextAttributes','getAttachedShaders','getFramebufferAttachmentParameter','getParameter','getProgramParameter','getProgramInfoLog','getRenderbufferParameter','getShaderParameter','getShaderInfoLog','getShaderSource','getTexParameter','getUniform','getUniformLocation','getVertexAttrib'],s=0,l;s<d.length;++s)l=d[s],r[l]=function(t){return function(){return loseContextIfTime(),o?null:t.apply(e,arguments)}}(r[l]);for(var c=['isBuffer','isEnabled','isFramebuffer','isProgram','isRenderbuffer','isShader','isTexture'],s=0,l;s<c.length;++s)l=c[s],r[l]=function(t){return function(){return loseContextIfTime(),!o&&t.apply(e,arguments)}}(r[l]);return r.checkFramebufferStatus=function(t){return function(){return loseContextIfTime(),o?r.FRAMEBUFFER_UNSUPPORTED:t.apply(e,arguments)}}(r.checkFramebufferStatus),r.getAttribLocation=function(t){return function(){return loseContextIfTime(),o?-1:t.apply(e,arguments)}}(r.getAttribLocation),r.getVertexAttribOffset=function(t){return function(){return loseContextIfTime(),o?0:t.apply(e,arguments)}}(r.getVertexAttribOffset),r.isContextLost=function(){return o},r}var t=[],n=[],r={},a=1,o=!1,i=[],s=0,l=0,d=!1,c=0,u={},p,r;e.getContext=function(t){return function(){var n=t.apply(e,arguments);if(n instanceof WebGLRenderingContext){if(n!=p){if(p)throw'got different context';p=n,r=makeLostContextSimulatingContext(p)}return r}return n}}(e.getContext);var m=function(e){t.push(wrapEvent(e))},g=function(e){n.push(wrapEvent(e))};return function wrapAddEventListener(e){var t=e.addEventListener;e.addEventListener=function(n,r){'webglcontextlost'===n?m(r):'webglcontextrestored'===n?g(r):t.apply(e,arguments)}}(e),e.loseContext=function(){if(!o){for(o=!0,s=0,++a;p.getError(););clearErrors(),u[p.CONTEXT_LOST_WEBGL]=!0;var n=makeWebGLContextEvent('context lost'),r=t.slice();setTimeout(function(){for(var t=0;t<r.length;++t)r[t](n);0<=c&&setTimeout(function(){e.restoreContext()},c)},0)}},e.restoreContext=function(){o&&n.length&&setTimeout(function(){if(!d)throw'can not restore. webglcontestlost listener did not call event.preventDefault';freeResources(),resetToInitialState(p),o=!1,l=0,d=!1;for(var e=n.slice(),t=makeWebGLContextEvent('context restored'),r=0;r<e.length;++r)e[r](t)},0)},e.loseContextInNCalls=function(e){if(o)throw'You can not ask a lost contet to be lost';s=l+e},e.getNumCalls=function(){return l},e.setRestoreTimeout=function(e){c=e},e},resetToInitialState:resetToInitialState}}(),e.exports=WebGLDebugUtils}).call(this,n(/*! ./../webpack/buildin/global.js */'./node_modules/webpack/buildin/global.js'))},"./node_modules/webpack/buildin/global.js":/*!***********************************!*\
  !*** (webpack)/buildin/global.js ***!
  \***********************************//*! no static exports found */function(e){var t=function(){return this}();try{t=t||new Function('return this')()}catch(n){'object'==typeof window&&(t=window)}e.exports=t},"./src/init.js":/*!*********************!*\
  !*** ./src/init.js ***!
  \*********************//*! exports provided: DEBUG, ABORTED, abort, canvas, gl, gpu, gui, params, camera, cameraControls, resizeCanvas, makeRenderLoop */function(e,t,n){'use strict';function abort(e){throw h=!0,e}function setSize(e,t){f.width=e,f.height=t,v.aspect=e/t,v.updateProjectionMatrix()}function resizeCanvas(){var e=f.clientWidth,t=f.clientHeight;(f.width!=e||f.height!=t)&&setSize(e,t)}function makeRenderLoop(e){return function tick(){S.update(),C.begin(),e(),C.end(),h||requestAnimationFrame(tick)}}n.r(t),n.d(t,'DEBUG',function(){return m}),n.d(t,'ABORTED',function(){return h}),n.d(t,'abort',function(){return abort}),n.d(t,'canvas',function(){return f}),n.d(t,'gl',function(){return y}),n.d(t,'gpu',function(){return A}),n.d(t,'gui',function(){return b}),n.d(t,'params',function(){return T}),n.d(t,'camera',function(){return v}),n.d(t,'cameraControls',function(){return S}),n.d(t,'resizeCanvas',function(){return resizeCanvas}),n.d(t,'makeRenderLoop',function(){return makeRenderLoop});var r=n(/*! dat.gui */'./node_modules/dat.gui/build/dat.gui.module.js'),a=n(/*! webgl-debug */'./node_modules/webgl-debug/index.js'),o=n.n(a),i=n(/*! stats-js */'./node_modules/stats-js/build/stats.min.js'),s=n.n(i),l=n(/*! three */'./node_modules/three/build/three.module.js'),d=n(/*! three-orbitcontrols */'./node_modules/three-orbitcontrols/OrbitControls.js'),c=n.n(d),u=n(/*! spectorjs */'./node_modules/spectorjs/dist/spector.bundle.js'),p=n.n(u),m=!1,g=n(/*! three */'./node_modules/three/build/three.module.js'),h=!1,f=document.getElementById('canvas'),_=f.getContext('webgl2');_.webgl2='undefined'!=typeof WebGL2RenderingContext&&_ instanceof WebGL2RenderingContext,_.webgl2?console.log('WebGL 2 activated.'):console.log('WebGL 2 is not available. Make sure it is available and properly enabled in this browser');var y=_;y.viewport(0,0,y.canvas.clientWidth,y.canvas.clientHeight);var E=n(/*! gpu.js */'./node_modules/gpu.js/src/index.js'),x=E.GPU,A=new x({mode:'webgl2',canvas:f,context:_}),b=new r['default'].GUI({width:500}),T={title:'gpu.js bioCrowds with webgl2 sdfs',render_mode:0,pause:!1,reset:!0};b.add(T,'title'),b.add(T,'render_mode',{Simulation:'0',Just_Marionette_Movement:'-1',Agent_ids:'1',First_Pass_of_Weightings_of_Pixel_for_Agent:'2',Velocity_Weightings_for_Update:'3',Agent_Positions:'4',Velocities_of_Agents_at_Positions:'5',Combination_Agent_ids_Velocity_and_Weights:'6'}).onChange(function(e){f.style.display=0==e||-1==e?'block':'none'}).listen(),b.add(T,'pause');b.add({click_to_reset_the_sim:function click_to_reset_the_sim(){T.reset=!0,console.log('the sim was reset.')}},'click_to_reset_the_sim');var C=new s.a;C.setMode(0),C.domElement.style.position='absolute',C.domElement.style.left='0px',C.domElement.style.top='0px',document.body.appendChild(C.domElement);var v=new l.PerspectiveCamera(120,f.clientWidth/f.clientHeight,.1,2e3);console.log(v.getWorldDirection()),v.position.applyQuaternion(new g.Quaternion().setFromAxisAngle(new g.Vector3(0,1,0),Math.PI));var S=new c.a(v,f);S.enableDamping=!1,S.enableZoom=!0,S.rotateSpeed=1,S.zoomSpeed=.5,S.panSpeed=2,v.position.applyQuaternion(new g.Quaternion().setFromAxisAngle(new g.Vector3(0,1,0),3*Math.PI/4)),S.update(),setSize(f.clientWidth,f.clientHeight),window.addEventListener('resize',function(){return setSize(f.clientWidth,f.clientHeight)});n(/*! ./main */'./src/main.js')},"./src/kernelFunctions.js":/*!********************************!*\
  !*** ./src/kernelFunctions.js ***!
  \********************************//*! exports provided: initialVec3toVec2KernelPassing, initialColorsToImage, colorByVoronoi, summedWeightPerAgent, pixelWeights, actualVoronoiWeightingPerPixel, positionsUpdate, positionsToViableArray, velocitiesToViableArray, positionsToScreenVisual, velToScreenVisual, allColoringVisual, velocityAtPositionsVisual, renderCheck, renderCheckAbs, agentIndexCheck, agentIndexVisCheck */function(e,t,n){'use strict';function coneDepth(e,t,n,a){var o=r((e-n)*(e-n)+(t-a)*(t-a));return o*2}function computeMarkerWeight(e,t,n,a,o,i){var s=e-n,l=t-a,d=e-o,c=t-i,u=r(s*s+l*l),p=r(d*d+c*c);return(1+(s*d+l*c)/(u*p))/(1+u)}function colorToIndex(e,t){var n=e*t,r=a(n)-n;return 0>r&&(r*=-1),1e-5>r?a(n):Math.ceil(n)}function clampNumber(e,t,n){return Math.max(t,Math.min(n,e))}var r=Math.sqrt,o=Math.abs,a=Math.floor;n.r(t),n.d(t,'initialVec3toVec2KernelPassing',function(){return m}),n.d(t,'initialColorsToImage',function(){return g}),n.d(t,'colorByVoronoi',function(){return h}),n.d(t,'summedWeightPerAgent',function(){return f}),n.d(t,'pixelWeights',function(){return _}),n.d(t,'actualVoronoiWeightingPerPixel',function(){return y}),n.d(t,'positionsUpdate',function(){return E}),n.d(t,'positionsToViableArray',function(){return x}),n.d(t,'velocitiesToViableArray',function(){return A}),n.d(t,'positionsToScreenVisual',function(){return b}),n.d(t,'velToScreenVisual',function(){return T}),n.d(t,'allColoringVisual',function(){return C}),n.d(t,'velocityAtPositionsVisual',function(){return v}),n.d(t,'renderCheck',function(){return S}),n.d(t,'renderCheckAbs',function(){return R}),n.d(t,'agentIndexCheck',function(){return F}),n.d(t,'agentIndexVisCheck',function(){return w});var i=n(/*! ./init */'./src/init.js'),s=n(/*! ./utils */'./src/utils.js'),l=n(/*! gl-matrix */'./node_modules/gl-matrix/lib/gl-matrix.js'),d=162142895431250380000,c=80,u=.05,p=5;i.gpu.addFunction(coneDepth,{paramTypes:{p_x:'Number',p_y:'Number',cone_x:'Number',cone_y:'Number'},returnType:'Number'});i.gpu.addFunction(computeMarkerWeight,{paramTypes:{agent_x:'Number',agent_y:'Number',marker_x:'Number',marker_y:'Number',target_x:'Number',target_y:'Number'},returnType:'Number'});i.gpu.addFunction(colorToIndex,{paramTypes:{channel_value:'Number',numParticles:'Number'},returnType:'Number'}),i.gpu.addFunction(clampNumber,{paramTypes:{a:'Number',b:'Number',c:'Number'},returnType:'Number'});var m=i.gpu.createKernel(function(e){var t=this.thread.x,n=this.thread.y,r=(1-t)*this.constants.screen_x+t*this.constants.screen_y;return e[n][t]/r}).setConstants({screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT}).setOutput([2,s.NUM_PARTICLES]).setImmutable(!0).setPipeline(!0),g=i.gpu.createKernel(function(e){var t=this.thread.x,n=this.thread.y;return e[n][t]}).setConstants({screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT}).setOutput([3,s.NUM_PARTICLES]).setPipeline(!0),h=i.gpu.createKernel(function(e,t,n,r){for(var a=this.constants.flt_max,s=-1,l=this.constants.flt_max,d=-1,c=0,u=0,p=0,m=this.thread.y,g=this.thread.x,h=0;h<this.constants.length;++h)u=e[h][0]*this.constants.screen_x,p=e[h][1]*this.constants.screen_y,c=coneDepth(m,g,u,p),c<a?(l=a,a=c,d=s,s=h):c<l&&(l=c,d=h);var i=o(m-e[s][0]*this.constants.screen_x),f=o(g-e[s][1]*this.constants.screen_y),_=o(m-e[d][0]*this.constants.screen_x),y=o(g-e[d][1]*this.constants.screen_y),E=i*i+f*f;return o(E/(E+(_*_+y*y))-.5)<this.constants.pixel_rad?1:t[s][r]}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,flt_max:d,agent_vis_rad:c,pixel_rad:u}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setImmutable(!0).setPipeline(!0),f=i.gpu.createKernel(function(e,t,n){for(var r=t[this.thread.x][0]*this.constants.screen_x,a=t[this.thread.x][1]*this.constants.screen_y,o=clampNumber(r-this.constants.agent_vis_rad,0,this.constants.screen_x),s=clampNumber(r+this.constants.agent_vis_rad,0,this.constants.screen_y),l=clampNumber(a-this.constants.agent_vis_rad,0,this.constants.screen_x),d=clampNumber(a+this.constants.agent_vis_rad,0,this.constants.screen_y),c=-1,u=0,p=o;p<s;++p)for(var i=l;i<d;++i)c=colorToIndex(n[p][i],this.constants.length),c==this.thread.x&&(u+=e[p][i]);return u}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,flt_max:d,agent_vis_rad:c}).setOutput([s.NUM_PARTICLES]).setImmutable(!0).setPipeline(!0),_=i.gpu.createKernel(function(e,t,n,r){var a=this.thread.y,o=this.thread.x,i=colorToIndex(t[a][o],this.constants.length);return i==this.constants.length?0:computeMarkerWeight(e[i][0]*this.constants.screen_x,e[i][1]*this.constants.screen_y,a,o,r[i][0]*this.constants.screen_x,r[i][1]*this.constants.screen_y)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setImmutable(!0).setPipeline(!0),y=i.gpu.createKernel(function(e,t,n,r,a,o,i){var s=this.thread.y,l=this.thread.x,d=colorToIndex(r[s][l],this.constants.length);if(d==this.constants.length)return 0;var c=s-e[d][0]*this.constants.screen_x,u=l-e[d][1]*this.constants.screen_y,p=t[s][l]/n[d];return 0==i?c*p:1==i?u*p:-1}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,flt_max:d,agent_vis_rad:c,pixel_rad:u}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setImmutable(!0).setPipeline(!0),E=i.gpu.createKernel(function(e,t,n){var a=this.thread.x,o=this.thread.y,i=r(t[o]*t[o]+n[o]*n[o]),s=t[o];1==a&&(s=n[o]);var l=e[o][a]+s/i*.01;return clampNumber(l,0,1)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT}).setOutput([2,s.NUM_PARTICLES]).setImmutable(!0).setPipeline(!0),x=i.gpu.createKernel(function(e){var t=a(this.thread.x/3),n=this.thread.x%3,r=this.constants.screen_x;return 1==n?0:(2==n&&(n-=1,r=this.constants.screen_y),r*e[t][n])}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT}).setOutput([3*s.NUM_PARTICLES]).setPipeline(!0),A=i.gpu.createKernel(function(e,t){var n=a(this.thread.x/3),r=this.thread.x%3;return 1==r?0:(2==r&&(r-=1),e[n][r]-t[n][r])}).setConstants({length:s.NUM_PARTICLES}).setOutput([3*s.NUM_PARTICLES]).setPipeline(!0),b=i.gpu.createKernel(function(e){for(var t=this.thread.y,n=this.thread.x,r=0;r<this.constants.length;++r)o(e[r][0]*this.constants.screen_x-t)<this.constants.draw_rad&&o(e[r][1]*this.constants.screen_y-n)<this.constants.draw_rad&&this.color(e[r][0],0,e[r][1])}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),T=i.gpu.createKernel(function(e,t,n){for(var r=this.thread.y,a=this.thread.x,s=0,l=0;l<this.constants.length;++l)o(e[l][0]*this.constants.screen_x-r)<this.constants.draw_rad&&o(e[l][1]*this.constants.screen_y-a)<this.constants.draw_rad&&(this.color(t[l],0,n[l]),s=1);0==s&&this.color(1,1,1)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),C=i.gpu.createKernel(function(e,t,n){for(var r=this.thread.y,a=this.thread.x,s=e[r][a],l=t[r][a],d=0,c=0;c<this.constants.length;++c)o(n[c][0]*this.constants.screen_x-r)<this.constants.draw_rad&&o(n[c][1]*this.constants.screen_y-a)<this.constants.draw_rad&&(s=1,d=1);this.color(s,l,d)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),v=i.gpu.createKernel(function(e,t){for(var n=0,r=0,a=0,s=this.thread.y,l=this.thread.x,d=0;d<this.constants.length;++d)o(t[d][0]*this.constants.screen_x-s)<this.constants.draw_rad&&o(t[d][1]*this.constants.screen_y-l)<this.constants.draw_rad&&(r=e[d][0],a=e[d][1]);this.color(n,r,a)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),S=i.gpu.createKernel(function(e,t){0==t?this.color(e[this.thread.y][this.thread.x],0,0):1==t?this.color(0,e[this.thread.y][this.thread.x],0):2==t?this.color(0,0,e[this.thread.y][this.thread.x]):this.color(-1,-1,-1)}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),R=i.gpu.createKernel(function(e,t){var n=10;this.color(o(n*e[this.thread.y][this.thread.x]),0,o(n*t[this.thread.y][this.thread.x]))}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0),F=i.gpu.createKernel(function(e,t){var n=colorToIndex(e[this.thread.y][this.thread.x],this.constants.length);return t[n][0]}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setPipeline(!0),w=i.gpu.createKernel(function(e,t){var n=colorToIndex(e[this.thread.y][this.thread.x],this.constants.length);n>=this.constants.length?this.color(1,0,0):this.color(t[n][0],0,0)}).setConstants({length:s.NUM_PARTICLES,screen_x:s.FLOOR_WIDTH,screen_y:s.FLOOR_HEIGHT,draw_rad:p}).setOutput([s.FLOOR_WIDTH,s.FLOOR_HEIGHT]).setGraphical(!0)},"./src/main.js":/*!*********************!*\
  !*** ./src/main.js ***!
  \*********************//*! no exports provided */function(e,t,n){'use strict';n.r(t);var r=n(/*! ./renderer */'./src/renderer.js'),a=n(/*! ./scene */'./src/scene.js'),o=n(/*! ./init */'./src/init.js'),i=n(/*! ./kernelFunctions */'./src/kernelFunctions.js'),s=n(/*! ./utils */'./src/utils.js'),l=n(/*! three */'./node_modules/three/build/three.module.js'),d=new r['default'],c=new a['default'];o.camera.position.set(0,10,0);var u=[s.NUM_PARTICLES],p=[s.NUM_PARTICLES],m=[s.NUM_PARTICLES],g,h,f,_,y,E,x,A,b,T,C,v;Object(o.makeRenderLoop)(function(){o.params.pause||(o.params.reset&&(o.params.reset=!1,y=0,x=0,A=0,g=Object(i.initialVec3toVec2KernelPassing)(c.particle_positions),f=Object(i.initialVec3toVec2KernelPassing)(c.particle_targets),_=Object(i.initialColorsToImage)(c.particle_colors),b=Object(i.colorByVoronoi)(g,_,f,0),o.cameraControls.reset(),o.camera.position.set(10,10,10),o.camera.position.applyQuaternion(new l.Quaternion().setFromAxisAngle(new l.Vector3(0,1,0),Math.PI)),o.cameraControls.update()),o.DEBUG&&y<E&&(A=Date.now(),console.log(x-A),x=A,console.log('iter:'+y)),o.DEBUG&&y<E&&(A=Date.now(),x=A,console.log('render update')),b=Object(i.colorByVoronoi)(g,_,f,0),v=Object(i.pixelWeights)(g,b,_,f),u=Object(i.summedWeightPerAgent)(v,g,b,_,f),T=Object(i.actualVoronoiWeightingPerPixel)(g,v,u,b,_,f,0),C=Object(i.actualVoronoiWeightingPerPixel)(g,v,u,b,_,f,1),p=Object(i.summedWeightPerAgent)(T,g,b,_,f),m=Object(i.summedWeightPerAgent)(C,g,b,_,f),-1!=o.params.render_mode&&(h=Object(i.positionsUpdate)(g,p,m)),0<o.params.render_mode&&(1==o.params.render_mode?(Object(i.renderCheck)(b,0),document.getElementsByTagName('body')[0].appendChild(i.renderCheck.getCanvas())):2==o.params.render_mode?(Object(i.renderCheck)(v,2),document.getElementsByTagName('body')[0].appendChild(i.renderCheck.getCanvas())):3==o.params.render_mode?(Object(i.renderCheckAbs)(T,C),document.getElementsByTagName('body')[0].appendChild(i.renderCheckAbs.getCanvas())):4==o.params.render_mode?(Object(i.positionsToScreenVisual)(g),document.getElementsByTagName('body')[0].appendChild(i.positionsToScreenVisual.getCanvas())):5==o.params.render_mode?(Object(i.velToScreenVisual)(g,p,m),document.getElementsByTagName('body')[0].appendChild(i.velToScreenVisual.getCanvas())):6==o.params.render_mode&&(Object(i.allColoringVisual)(b,T,g),document.getElementsByTagName('body')[0].appendChild(i.allColoringVisual.getCanvas()))),d.updateAgents(Object(i.positionsToViableArray)(h),Object(i.velocitiesToViableArray)(h,g)),d.update(),g=h,++y,o.DEBUG&&y<E&&(A=Date.now(),x=A,console.log('end: render update')))})()},"./src/renderer.js":/*!*************************!*\
  !*** ./src/renderer.js ***!
  \*************************//*! exports provided: default */function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}n.r(t);var r=n(/*! ./init */'./src/init.js'),a=n(/*! gl-matrix */'./node_modules/gl-matrix/lib/gl-matrix.js'),o=n(/*! ./utils */'./src/utils.js'),s=n(/*! ./walker.js */'./src/walker.js'),i=function(){function Renderer(){_classCallCheck(this,Renderer),this.startTime=Date.now(),this.walker=new s['default'],this.worldDimension=500,this.numAgents=16,this.texDimension=Math.sqrt(16*this.numAgents),this.agentPos=[],this.agentFwd=[],this.agentOff=Array(this.numAgents),this.agentGen=Array(this.numAgents),this.agentNer=Array(this.numAgents),this.agentWei=Array(this.numAgents),this.agentHap=Array(this.numAgents),this.agentRad=Array(this.numAgents);for(var e=0;e<this.numAgents;e++)try{throw e}catch(t){this.agentOff[e]=360*Math.random(),this.agentGen[t]=5*Math.random(),this.agentNer[t]=5*Math.random(),this.agentWei[t]=5*Math.random(),this.agentHap[t]=5*Math.random(),this.agentRad[t]=.4*Math.random()+.3}this.tex_shader_program=Object(o.initShaderProgram)(r.gl,tex_vertex_shader_src,tex_fragment_shader_src),this.crowd_shader_program=Object(o.initShaderProgram)(r.gl,crowd_vertex_shader_src,crowd_fragment_shader_src),this.tex_uniforms={v_position:r.gl.getAttribLocation(this.tex_shader_program,'v_position'),agentPositions:r.gl.getUniformLocation(this.tex_shader_program,'agentPositions'),agentForwards:r.gl.getUniformLocation(this.tex_shader_program,'agentForwards'),time:r.gl.getUniformLocation(this.tex_shader_program,'time'),texDim:r.gl.getUniformLocation(this.tex_shader_program,'texDim'),worldDim:r.gl.getUniformLocation(this.tex_shader_program,'worldDim'),agentTimeOffset:r.gl.getUniformLocation(this.tex_shader_program,'agentTimeOffset'),agentGender:r.gl.getUniformLocation(this.tex_shader_program,'agentGender'),agentNervous:r.gl.getUniformLocation(this.tex_shader_program,'agentNervous'),agentWeight:r.gl.getUniformLocation(this.tex_shader_program,'agentWeight'),agentHappy:r.gl.getUniformLocation(this.tex_shader_program,'agentHappy')},this.crowd_uniforms={v_position:r.gl.getAttribLocation(this.crowd_shader_program,'v_position'),resolution:r.gl.getUniformLocation(this.crowd_shader_program,'resolution'),camera:r.gl.getUniformLocation(this.crowd_shader_program,'camera'),target:r.gl.getUniformLocation(this.crowd_shader_program,'target'),time:r.gl.getUniformLocation(this.crowd_shader_program,'time'),fov:r.gl.getUniformLocation(this.crowd_shader_program,'fov'),raymarchMaximumDistance:r.gl.getUniformLocation(this.crowd_shader_program,'raymarchMaximumDistance'),raymarchPrecision:r.gl.getUniformLocation(this.crowd_shader_program,'raymarchPrecision'),u_image:r.gl.getUniformLocation(this.crowd_shader_program,'u_image'),texDim:r.gl.getUniformLocation(this.crowd_shader_program,'texDim'),worldDim:r.gl.getUniformLocation(this.crowd_shader_program,'worldDim'),agentRadius:r.gl.getUniformLocation(this.crowd_shader_program,'agentRadius')},this.quad_vertex_buffer_data=new Float32Array([-1,-1,0,1,1,-1,0,1,-1,1,0,1,-1,1,0,1,1,-1,0,1,1,1,0,1])}return Renderer.prototype.update=function update(){this.drawScene()},Renderer.prototype.updateAgents=function updateAgents(e,t){this.agentPos=e,this.agentFwd=t},Renderer.prototype.drawScene=function drawScene(){r.gl.viewport(0,0,this.texDimension,this.texDimension);var e=r.gl.createTexture();r.gl.bindTexture(r.gl.TEXTURE_2D,e),r.gl.texParameteri(r.gl.TEXTURE_2D,r.gl.TEXTURE_MAG_FILTER,r.gl.NEAREST),r.gl.texParameteri(r.gl.TEXTURE_2D,r.gl.TEXTURE_MIN_FILTER,r.gl.NEAREST),r.gl.texImage2D(r.gl.TEXTURE_2D,0,r.gl.RGBA,this.texDimension,this.texDimension,0,r.gl.RGBA,r.gl.UNSIGNED_BYTE,null);var t=r.gl.createFramebuffer();r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,t),r.gl.framebufferTexture2D(r.gl.FRAMEBUFFER,r.gl.COLOR_ATTACHMENT0,r.gl.TEXTURE_2D,e,0),r.gl.useProgram(this.tex_shader_program),r.gl.clear(r.gl.DEPTH_BUFFER_BIT);var n=r.gl.createBuffer();r.gl.bindBuffer(r.gl.ARRAY_BUFFER,n),r.gl.bufferData(r.gl.ARRAY_BUFFER,this.quad_vertex_buffer_data,r.gl.STATIC_DRAW),r.gl.enableVertexAttribArray(this.tex_uniforms.v_position),r.gl.vertexAttribPointer(this.tex_uniforms.v_position,4,r.gl.FLOAT,!1,0,0),r.gl.activeTexture(r.gl.TEXTURE0+2),r.gl.bindTexture(r.gl.TEXTURE_2D,this.agentPos.texture),r.gl.uniform1i(this.tex_uniforms.agentPositions,1),r.gl.activeTexture(r.gl.TEXTURE0+3),r.gl.bindTexture(r.gl.TEXTURE_2D,this.agentFwd.texture),r.gl.uniform1i(this.tex_uniforms.agentForwards,2),r.gl.uniform1fv(this.tex_uniforms.agentTimeOffset,this.agentOff),r.gl.uniform1fv(this.tex_uniforms.agentGender,this.agentGen),r.gl.uniform1fv(this.tex_uniforms.agentNervous,this.agentNer),r.gl.uniform1fv(this.tex_uniforms.agentWeight,this.agentWei),r.gl.uniform1fv(this.tex_uniforms.agentHappy,this.agentHap),r.gl.uniform1f(this.tex_uniforms.time,.001*(Date.now()-this.startTime)),r.gl.uniform1i(this.tex_uniforms.texDim,this.texDimension),r.gl.uniform1f(this.tex_uniforms.worldDim,this.worldDimension),r.gl.drawArrays(r.gl.TRIANGLES,0,6),r.gl.viewport(0,0,r.canvas.clientWidth,r.canvas.clientHeight),r.gl.bindTexture(r.gl.TEXTURE_2D,null),r.gl.bindFramebuffer(r.gl.FRAMEBUFFER,null),r.gl.clearColor(.2,0,.2,1),r.gl.clearDepth(1),r.gl.clear(r.gl.COLOR_BUFFER_BIT|r.gl.DEPTH_BUFFER_BIT),r.gl.useProgram(this.crowd_shader_program);var a=r.gl.createBuffer();r.gl.bindBuffer(r.gl.ARRAY_BUFFER,a),r.gl.bufferData(r.gl.ARRAY_BUFFER,this.quad_vertex_buffer_data,r.gl.STATIC_DRAW),r.gl.enableVertexAttribArray(this.crowd_uniforms.v_position),r.gl.vertexAttribPointer(this.crowd_uniforms.v_position,4,r.gl.FLOAT,!1,0,0),r.gl.uniform2f(this.crowd_uniforms.resolution,r.canvas.clientWidth,r.canvas.clientHeight),r.gl.uniform1f(this.crowd_uniforms.time,.001*(Date.now()-this.startTime)),r.gl.uniform1f(this.crowd_uniforms.fov,r.camera.fov*Math.PI/180),r.gl.uniform1f(this.crowd_uniforms.raymarchMaximumDistance,this.worldDimension),r.gl.uniform1f(this.crowd_uniforms.raymarchPrecision,.01),r.gl.uniform3f(this.crowd_uniforms.camera,r.camera.position.x,r.camera.position.y,r.camera.position.z),r.gl.uniform3f(this.crowd_uniforms.target,0,10,0),r.gl.uniform1i(this.crowd_uniforms.texDim,this.texDimension),r.gl.uniform1f(this.crowd_uniforms.worldDim,this.worldDimension),r.gl.uniform1fv(this.crowd_uniforms.agentRadius,this.agentRad),r.gl.uniform1i(this.crowd_uniforms.u_image,0),r.gl.activeTexture(r.gl.TEXTURE0),r.gl.bindTexture(r.gl.TEXTURE_2D,e),r.gl.drawArrays(r.gl.TRIANGLES,0,6),r.gl.bindBuffer(r.gl.ARRAY_BUFFER,null),r.gl.bindVertexArray(null)},Renderer}();t['default']=i},"./src/scene.js":/*!**********************!*\
  !*** ./src/scene.js ***!
  \**********************//*! exports provided: default */function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}n.r(t);var r=n(/*! ./init */'./src/init.js'),a=n(/*! gl-matrix */'./node_modules/gl-matrix/lib/gl-matrix.js'),o=n(/*! ./utils */'./src/utils.js');t['default']=function Scene(){_classCallCheck(this,Scene),this._simStep=0,this.particle_positions=[],this.particle_velocities=[],this.particle_colors=[],this.particle_targets=[];for(var e=0;e<o.NUM_PARTICLES;++e)this.particle_positions.push(a.vec3.create()),this.particle_velocities.push(a.vec3.create()),this.particle_colors.push(a.vec3.create()),this.particle_targets.push(a.vec3.create());for(var e=0;e<o.NUM_PARTICLES;++e)this.particle_positions[e][0]=Math.random()*o.FLOOR_WIDTH,this.particle_positions[e][1]=Math.random()*o.FLOOR_HEIGHT,this.particle_positions[e][2]=0,this.particle_velocities[e][0]=0,this.particle_velocities[e][1]=0,this.particle_velocities[e][2]=0,this.particle_colors[e][0]=e/o.NUM_PARTICLES,this.particle_colors[e][1]=e/o.NUM_PARTICLES,this.particle_colors[e][2]=e/o.NUM_PARTICLES,0==e%2?(this.particle_targets[e][0]=o.FLOOR_WIDTH-o.FLOOR_WIDTH/4,this.particle_targets[e][1]=e/o.NUM_PARTICLES*o.FLOOR_HEIGHT,this.particle_targets[e][2]=0):(this.particle_targets[e][0]=o.FLOOR_WIDTH/4,this.particle_targets[e][1]=e/o.NUM_PARTICLES*o.FLOOR_HEIGHT,this.particle_targets[e][2]=0)}},"./src/utils.js":/*!**********************!*\
  !*** ./src/utils.js ***!
  \**********************//*! exports provided: NUM_PARTICLES, FLOOR_WIDTH, FLOOR_HEIGHT, saveCanvas, initShaderProgram, canvasToImage, draw2dImage, resizeSpecificCanvas, mat4FromArray */function(e,t,n){'use strict';function downloadURI(e,t){var n=document.createElement('a');n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function saveCanvas(){downloadURI(r.canvas.toDataURL('image/png'),'webgl-canvas-'+Date.now()+'.png')}function initShaderProgram(e,t,n){var r=loadShader(e,t,e.VERTEX_SHADER),a=loadShader(e,n,e.FRAGMENT_SHADER),o=e.createProgram();return e.attachShader(o,r),e.attachShader(o,a),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(console.log('Shader program cannot initializing: '+e.getProgramInfoLog(o)),null)}function loadShader(e,t,n){var r=e.createShader(n);return e.shaderSource(r,t),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.log('Cannot compile shaders:'+e.getShaderInfoLog(r)),e.deleteShader(r),null)}function canvasToImage(e){e||console.log('canvasToImage: input_canvas is undefined');var t=document.createElement('img');return t.src=e.toDataURL(),t}function draw2dImage(e,t,n){return s.addEventListener('load',function(){t.drawImage(s,0,0)}),s.setAttribute('src',n),t}function resizeSpecificCanvas(e){var t=e.clientWidth,n=e.clientHeight;return(e.width!=t||e.height!=n)&&(e.width=t,e.height=n),e}function mat4FromArray(e,t){e?!t&&console.log('mat4FromArray: array undefined'):console.log('mat4FromArray: output_mat4 undefined');for(var n=0;16>n;++n)e[n]=t[n]}n.r(t),n.d(t,'NUM_PARTICLES',function(){return a}),n.d(t,'FLOOR_WIDTH',function(){return o}),n.d(t,'FLOOR_HEIGHT',function(){return i}),n.d(t,'saveCanvas',function(){return saveCanvas}),n.d(t,'initShaderProgram',function(){return initShaderProgram}),n.d(t,'canvasToImage',function(){return canvasToImage}),n.d(t,'draw2dImage',function(){return draw2dImage}),n.d(t,'resizeSpecificCanvas',function(){return resizeSpecificCanvas}),n.d(t,'mat4FromArray',function(){return mat4FromArray});var r=n(/*! ./init */'./src/init.js'),a=64,o=700,i=700,s=new window.Image},"./src/walker.js":/*!***********************!*\
  !*** ./src/walker.js ***!
  \***********************//*! exports provided: default */function(e,t,n){'use strict';function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError('Cannot call a class as a function')}var r=Math.cos,a=Math.sin,o=Math.PI;n.r(t);var i=n(/*! gl-matrix */'./node_modules/gl-matrix/lib/gl-matrix.js'),s=n(/*! three */'./node_modules/three/build/three.module.js'),l=function(){function Walker(){_classCallCheck(this,Walker),this.meanwalker=[-10.7519383725583,-3.72746649802272,-16.466685709658,-65.2177300475541,44.661335747837,-16.466685709658,-65.2177300475541,44.661335747837,17.7610082741684,15.8662806749498,74.7273524036626,-52.4475178141205,15.8662806749498,74.7273524036626,-52.4475178141205,0,0,183.820336741237,220.478676488392,251.013364295138,-183.820336741237,-220.478676488392,-251.013364295138,0,94.4979146895428,72.7179566209974,50.9485900809081,-94.4979146895428,-72.7179566209974,-50.9485900809081,1640.61993723311,1366.6742993586,1402.32109635485,1130.65231705128,907.447654999956,1402.32109635485,1130.65231705128,907.447654999956,1015.0295481002,909.516923870395,524.108918400734,162.337873145943,909.516923870395,524.108918400734,162.337873145943,126.030870377155,-693889390390723e-31,-763278329429795e-31,6.01188539660724,18.6532785884334,35.168904918911,-6.01188539660724,-18.6532785884334,-35.168904918911,-971445146547012e-31,.85583935993545,-66.7599801603397,-.00136779054226829,-.855839359935451,66.7599801603397,.00136779054226821,16.7454749227664,13.6539217228521,14.4561843900628,18.2079200377397,12.2517881770354,14.4561843900628,18.2079200377397,12.2517881770354,11.0805683180636,12.7013089491983,-11.6385045948174,-16.8400386203203,12.7013089491983,-11.6385045948174,-16.8400386203203,-242861286636753e-31,-346944695195361e-31,-2.74690764163242,-4.12039184625044,3.90729059644772,2.74690764163242,4.12039184625044,-3.90729059644772,-277555756156289e-31,6.0560609647142,-1.14939409468544,-54.9132000272359,-6.0560609647142,1.14939409468544,54.9132000272359,1,0,0,-10.5990547628726,-81.6328045581542,-188.021237194147,10.5990547628726,81.6328045581542,188.021237194147,0,7.51975855144645,147.708816974537,322.46460362452,-7.51975855144645,-147.708816974537,-322.46460362452,5.16274050080685,-.398924078714644,.682139326943909,-22.724670410904,-2.67261175746871,.682139326943909,-22.724670410904,-2.67261175746871,-4.87628414766496,-.384609053714416,-5.45192419278888,3.10930244892261,-.384609053714416,-5.45192419278888,3.10930244892261,0,0,-5.02980895672233,5.4082726923341,-48.3290365382949,5.02980895672233,-5.4082726923341,48.3290365382949,0,2.16443515803395,21.0488520130996,-38.6505735454448,-2.16443515803395,-21.0488520130996,38.6505735454448,11.301384163533,5.04640285684089,9.71946135141663,9.21520988370216,4.20442453473104,.0864653905040408,9.21520988370216,4.20442453473104,.0864653905040406,14.0190823730271,14.2108772033409,24.0899676140367,-51.2214686002918,14.2108772033409,24.0899676140367,-51.2214686002918,-294902990916057e-31,-208166817117217e-31,.409655146504848,-2.13770523265812,-.166911902672378,-.409655146504848,2.13770523265812,.166911902672378,0,.128126516280133,3.41361458305222,1.50135626982485,-.128126516280133,-3.41361458305222,-1.50135626982485,-2.71924845380677,-3.00211552243835,-3.52015839198105,-5.41544778625127,-11.7893450407488,-3.52015839198105,-5.41544778625127,-11.7893450407488,-3.36532602257169,-4.21217395862763,-13.3552651024839,29.5052192061985,-4.21217395862763,-13.3552651024839,29.5052192061985,0,-.777824905615586,.182070540329546,-.266938159883533,-1.44755932031152,-2.33835042367754,-.266938159883533,-1.44755932031152,-2.33835042367754,.308319043161397,-.64475549181795,-31.9081123051583,10.0432538072851,-.64475549181795,-31.9081123051583,10.0432538072851,0,138777878078145e-31,-.4651308638072,-1.01059316019605,-3.22047187794453,.4651308638072,1.01059316019605,3.22047187794453,121430643318377e-31,-.652057779184334,-5.39933599975214,-2.65932524348569,.652057779184334,5.39933599975214,2.65932524348569,-20.8947287998807,-20.8939662029067,-20.4660022882249,-13.9663497069928,3.72651392566029,-20.4660022882249,-13.9663497069928,3.72651392566029,-20.8148027436241,-19.3607066652156,-12.4747872187268,-12.1435006547985,-19.3607066652156,-12.4747872187268,-12.1435006547985,0],this.genderaxis=[10.8622752381147,3.87784584606416,3.96644411626268,3.85579242843092,2.20245821571388,3.96644411626268,3.85579242843092,2.20245821571388,-1.91706656439971,-2.88401118505139,-7.71017967887297,-5.23282986301825,-2.88401118505139,-7.71017967887297,-5.23282986301825,0,0,2.33504968867266,5.35207779836652,.896955890332611,-2.33504968867266,-5.35207779836652,-.896955890332611,0,-4.92072625597757,6.13262704447186,4.90290566512624,4.92072625597757,-6.13262704447186,-4.90290566512624,.598322945574293,-.820230066738596,1.10163845162971,2.74334260600583,-.954369366369163,1.10163845162971,2.74334260600583,-.954369366369163,-4.07022663674413,-4.5315810093439,-1.9174147757701,-2.68748748543046,-4.5315810093439,-1.9174147757701,-2.68748748543046,-.890102321103325,-832667268468867e-31,-555111512312578e-31,1.30515160463045,.697114232970961,-.527484841356247,-1.30515160463045,-.697114232970961,.527484841356248,-277555756156289e-31,.0485813554947454,1.82721802473303,-.00338294354078825,-.0485813554947455,-1.82721802473303,.00338294354078825,5.01816863098923,3.20435623460813,3.55019257928635,1.80610030041737,-1.36322519248119,3.55019257928635,1.80610030041738,-1.36322519248119,-.162180926939796,-1.59859605581916,-2.25377676330274,.169346972086787,-1.59859605581916,-2.25377676330274,.169346972086787,-693889390390723e-32,-346944695195361e-32,-1.43489570265418,-1.33939655573188,-2.94792693327534,1.43489570265418,1.33939655573188,2.94792693327534,0,-1.72218146089708,-2.56033660634584,-.740142747399359,1.72218146089708,2.56033660634584,.740142747399359,.034207395201156,0,0,.50895749811239,10.8092969078574,17.5970954067276,-.50895749811239,-10.8092969078574,-17.5970954067276,-277555756156289e-31,-.768659543801708,-3.28343975390831,-4.10636698720229,.768659543801708,3.28343975390831,4.10636698720229,3.00122757985203,.99540454173169,1.05848994151511,-.953610312585894,-2.2087593437931,1.05848994151511,-.953610312585894,-2.2087593437931,-.665648010096331,-1.09272854820708,-.356435265191952,-.252999700189796,-1.09272854820708,-.356435265191952,-.252999700189796,693889390390723e-32,0,-1.62054857692189,-4.68841758693348,-1.34999678078504,1.62054857692189,4.68841758693348,1.34999678078504,346944695195361e-32,-.24203076680066,-2.61872493398542,-1.3140922430098,.24203076680066,2.61872493398542,1.3140922430098,.348889753128268,.860562851303457,-.458459262279532,-.27592558441124,-.320091182027612,-.667765665467602,-.27592558441124,-.320091182027612,-.667765665467603,-1.62704716356786,-1.49325355842263,2.1374462006464,1.37280884103637,-1.49325355842263,2.1374462006464,1.37280884103637,-277555756156289e-31,-138777878078145e-31,-.00400167616055201,-.0820685931886628,.33762561402375,.00400167616055198,.0820685931886629,-.33762561402375,-138777878078145e-31,.00516524711570088,1.30236325923525,.405743234314944,-.00516524711570093,-1.30236325923525,-.405743234314944,-.186397660789509,-.154535028531196,-.336599188354126,-.0999716867334504,.217840087631619,-.336599188354126,-.0999716867334503,.217840087631619,-.161083943571017,-.245518701880568,1.95664779431894,1.05702171892267,-.245518701880568,1.95664779431894,1.05702171892267,0,.759222556825001,.355377914840419,.353595133224375,-.425647703311692,1.05136089417181,.353595133224375,-.425647703311692,1.05136089417181,-.248022688099012,-.429277241010223,1.17633656323907,-.240189659908589,-.429277241010223,1.17633656323907,-.240189659908589,-277555756156289e-31,-208166817117217e-31,.016422717738074,1.33953448719773,.913474371405699,-.0164227177380741,-1.33953448719773,-.913474371405699,-138777878078145e-31,.00970342000951549,-.279947291858412,.889223046696579,-.00970342000951552,.279947291858412,-.889223046696579,-.766276468753209,-.558612770425893,-.631510924081967,-1.74294715459389,-3.04002900775738,-.631510924081967,-1.74294715459389,-3.04002900775738,-.802355169400983,-.880726423552862,-1.56721947803708,-.338692149454206,-.880726423552862,-1.56721947803708,-.338692149454206,0],this.weightaxis=[-8.60322982096967,-4.39777268443819,-4.31654137593974,-1.02419968988667,-1.60591703899923,-4.31654137593974,-1.02419968988667,-1.60591703899923,-4.26099331081557,-2.32629930281409,6.43969549700463,10.0935693318593,-2.32629930281409,6.43969549700463,10.0935693318593,0,0,3.71622029046712,6.65597759326383,9.69562192919174,-3.71622029046712,-6.65597759326383,-9.69562192919174,0,7.78736639282353,.0787433078343267,-1.26556630921202,-7.78736639282353,-.0787433078343267,1.26556630921202,.0596088709303616,.817695654477612,-3.95444231532143,-6.22768530651593,-12.9325434566197,-3.95444231532143,-6.22768530651593,-12.9325434566197,11.2221263908486,10.3804686577979,7.29828647571261,2.28212360340294,10.3804686577979,7.29828647571261,2.28212360340294,4.55185600891705,623921190478346e-31,961506336619311e-32,-1.03881331001095,1.17656495856413,5.02239268004826,1.03881331001095,-1.17656495856413,-5.02239268004826,480753168309656e-32,-.552115811903587,-3.59626076398225,.0146124883231591,.552115811903588,3.59626076398225,-.014612488323159,-.845208137045764,.225742151854656,-.162288739590334,.768519833706678,1.38266394169628,-.162288739590334,.768519833706659,1.38266394169628,2.2338618526944,2.37246823360433,-2.62595872751184,-.160888799369168,2.37246823360433,-2.62595872751184,-.160888799369168,-347752600781346e-31,-413723920383398e-31,.84983102742614,.730621878292606,3.31882760712525,-.84983102742614,-.730621878292606,-3.31882760712525,0,.937032237142068,1.66858338568437,.606406841881119,-.937032237142068,-1.66858338568437,-.606406841881119,0,0,0,-2.91479968579839,1.9908650545833,14.8457174549164,2.91479968579839,-1.9908650545833,-14.8457174549164,-431619923154484e-31,-1.49629823768662,-4.65169274010743,-3.5699595564498,1.49629823768662,4.65169274010743,3.5699595564498,-.389314859668211,-.722941359031102,-1.11155939802322,1.97896062813978,2.34449642252038,-1.11155939802322,1.97896062813978,2.34449642252038,-.862357708685933,-1.5548643796591,-1.70314919425028,1.98849454708394,-1.5548643796591,-1.70314919425028,1.98849454708394,-611637879189553e-31,-479695239985449e-31,.0313780976365884,-1.41383220880015,7.79009045809917,-.0313780976365884,1.41383220880015,-7.79009045809917,-545666559587501e-31,-.945524264476216,1.94598558199536,4.07786448889072,.945524264476216,-1.94598558199536,-4.07786448889072,-.854887153611129,-.124788851245166,.594542218404294,.760752724745457,.957793598700929,-1.53748528891728,.760752724745457,.957793598700929,-1.53748528891728,1.00760066357486,.884790964265378,-1.68363749086776,-1.07391675519032,.884790964265378,-1.68363749086776,-1.07391675519032,287922936823689e-31,263885278408208e-31,.0427992390747824,-.982282749429476,-.627035878127249,-.0427992390747823,.982282749429476,.627035878127249,17019480184855e-30,-.00592021574889225,2.18799810355824,-1.32408123662573,.00592021574889231,-2.18799810355824,1.32408123662573,1.43566255610034,1.57932517557856,1.70940351164603,1.34079760022902,-.326156828395397,1.70940351164603,1.34079760022902,-.326156828395397,1.61550112667063,1.59438617934391,-.945301734607545,-1.4507723825316,1.59438617934391,-.945301734607528,-1.4507723825316,0,-1.14199452482802,-.908274325058428,-1.23592692595839,-.0488368203386743,1.78428901641138,-1.23592692595839,-.0488368203386725,1.78428901641138,-.0206058483765944,-.0498759350552304,-1.9514425427784,-.975952785179369,-.0498759350552304,-1.9514425427784,-.97595278517937,480753168309656e-32,125999345120496e-31,-.0778248096444307,-1.05713452199503,.140159622942414,.0778248096444309,1.05713452199503,-.140159622942414,263885278408208e-31,.0958178614773403,-2.29016183152658,-.981655940758735,-.0958178614773402,2.29016183152658,.981655940758735,.873163814765254,.691630217779826,.460659242794834,-1.21243959156637,-4.95415159635425,.460659242794834,-1.21243959156637,-4.95415159635425,.912366138079486,1.1111424379197,.506354668509017,-.645344827798356,1.1111424379197,.506354668509017,-.645344827798356,0],this.nervousaxis=[1.608,-4.892,-5.1408,-10.2248,4.3596,-5.1408,-10.2248,4.3596,-.4336,.817,1.139,12.0732,.817,1.139,12.0732,0,0,12.227,2.881,-.9562,-12.227,-2.881,.9562,0,8.3682,-2.2468,-5.0328,-8.3682,2.2468,5.0328,5.182,2.5256,-9.0168,-9.2494,-9.1792,-9.0168,-9.2494,-9.1792,15.8384,15.6524,1.5146,1.9362,15.6524,1.5146,1.9362,14.974,0,0,1.93498627759188,8.55163596816083,15.1677381022684,-1.93498627759188,-8.55163596816083,-15.1677381022684,0,.0238269291828461,-.244238930292991,4.39508124233437,-.0238269291828461,.244238930292991,-4.39508124233437,-1.89858387288271,-.927809352857772,-1.10742752703369,1.23096755420124,-2.22327591578999,-1.10742752703369,1.23096755420124,-2.22327591578999,-.574144540287477,-.272324131191442,-1.66297412423435,-3.52473328883379,-.272324131191442,-1.66297412423435,-3.52473328883379,-444089209850063e-31,-444089209850063e-31,.295973921644049,-.952476234327165,4.62764712369284,-.29597392164405,.952476234327165,-4.62764712369284,-444089209850063e-31,.755561531385885,.96965704641076,-1.04874475563672,-.755561531385885,-.96965704641076,1.04874475563672,0,-888178419700125e-31,-888178419700125e-31,-2.27213865455679,2.62068190134895,10.46424956607,2.27213865455679,-2.62068190134895,-10.46424956607,-133226762955019e-30,.505149005191256,9.023283935737,12.4419154069332,-.505149005191256,-9.023283935737,-12.4419154069332,1.31302213143179,-1.56994681589844,-1.6132516828964,-1.93476231111313,1.24600961564034,-1.6132516828964,-1.93476231111313,1.24600961564034,-.916102246945221,-1.15341023385907,.0679548535942194,1.21923750048419,-1.15341023385907,.0679548535942194,1.21923750048419,444089209850063e-31,444089209850063e-31,-.866748197406053,-2.37620306856168,-1.04181193052172,.866748197406053,2.37620306856168,1.04181193052172,444089209850063e-31,-.296525162996019,1.25545730805391,3.71906045091021,.29652516299602,-1.25545730805391,-3.71906045091021,0,2.15229559017491,2.63997203948315,2.88310527131121,1.08475359067976,-1.84315670321758,2.88310527131121,1.08475359067976,-1.84315670321758,1.85591583782068,1.31826611955976,-4.08303895625175,-6.91689571702907,1.31826611955976,-4.08303895625175,-6.91689571702907,0,0,.0988529041750603,.0502665499295525,1.01706930838328,-.0988529041750603,-.0502665499295526,-1.01706930838328,444089209850063e-31,.0182012962139708,.618271764328891,.528820419727892,-.0182012962139707,-.618271764328891,-.528820419727892,1.27953376484632,1.05464034445745,1.06849192617536,1.29477915707343,-1.80131176088519,1.06849192617536,1.29477915707343,-1.80131176088519,1.05127818065678,1.14328402799826,.147983699397682,.758893489554762,1.14328402799826,.147983699397682,.758893489554763,0,-.762854122695589,-.950093864177193,-.896770402353652,-1.16680283146184,-1.26709316444533,-.896770402353652,-1.16680283146184,-1.26709316444533,-1.68350389453852,-1.96917864045415,-1.073952457854,2.29589238418201,-1.96917864045415,-1.073952457854,2.29589238418201,-77715611723761e-30,-555111512312578e-31,.0240354599738873,-1.13762060193993,-1.84086075028633,-.0240354599738874,1.13762060193993,1.84086075028633,-555111512312578e-31,-.00731797896493922,-1.00726341412445,-1.67921538930502,.00731797896493909,1.00726341412445,1.67921538930502,-1.77067835154163,-1.72694930552193,-2.02147369107245,-3.46120440517578,-5.42293017289516,-2.02147369107245,-3.46120440517578,-5.42293017289516,-1.81913811099514,-1.80524552106467,-.308170447500367,-1.31680547975447,-1.80524552106467,-.308170447500367,-1.31680547975447,0],this.happyaxis=[-3.6804,3.8492,3.1128,.3552,1.2418,3.1128,.3552,1.2418,-5.3888,-7.6816,.0542000000000002,4.2798,-7.6816,.0542000000000002,4.2798,0,0,-3.5408,3.0712,7.0442,3.5408,-3.0712,-7.0442,0,2.1176,2.575,2.1302,-2.1176,-2.575,-2.1302,4.72,-2.9876,1.291,1.9114,3.0876,1.291,1.9114,3.0876,-6.9384,-6.1032,-6.0298,2.6348,-6.1032,-6.0298,2.6348,-11.7576,-444089209850063e-31,-333066907387547e-31,-.666342789075971,-6.0838299041835,-8.09295988385648,.666342789075971,6.0838299041835,8.09295988385648,-444089209850063e-31,.335225594087923,2.46216812769978,-2.29332046445224,-.335225594087923,-2.46216812769978,2.29332046445224,-1.31118412456019,-.256508018691095,-.358033814045386,1.44243860485824,3.33623660331717,-.358033814045386,1.44243860485824,3.33623660331717,1.02104033366303,2.37903282916426,1.83761034778044,1.17579017959672,2.37903282916426,1.83761034778044,1.17579017959672,444089209850063e-31,444089209850063e-31,1.44553490065014,3.25201037152906,1.52786297776612,-1.44553490065014,-3.25201037152906,-1.52786297776612,444089209850063e-31,1.41987741110572,2.03949815862409,.704496177795203,-1.41987741110572,-2.03949815862409,-.704496177795203,0,0,0,2.32089005501046,8.2004699241545,9.02785264380681,-2.32089005501046,-8.2004699241545,-9.02785264380682,0,1.80607391904883,19.5478576675537,40.2099356339615,-1.80607391904883,-19.5478576675537,-40.2099356339615,3.31999492040294,2.47801758596406,2.63198730012136,.250964203054187,-4.2740278434618,2.63198730012136,.250964203054187,-4.2740278434618,-.380111558668358,-.937259386594074,-1.36618028449039,-.662055959541116,-.937259386594074,-1.36618028449039,-.662055959541116,-444089209850063e-31,-444089209850063e-31,-1.34022486583498,-2.76114288356605,-1.42272873070436,1.34022486583498,2.76114288356605,1.42272873070436,-444089209850063e-31,-.981461694327258,4.8738444231396,-3.72794395551649,.981461694327258,-4.8738444231396,3.72794395551649,0,1.30627261918698,1.81803679205044,1.68843663143742,2.56463742946301,1.43182649653633,1.68843663143742,2.56463742946301,1.43182649653633,1.18074184338601,1.43513171383725,6.90719763233261,-1.1115336009357,1.43513171383725,6.90719763233261,-1.1115336009357,-388578058618805e-31,-333066907387547e-31,-.0601636152042345,-.41317835167411,.627694869579082,.0601636152042344,.41317835167411,-.627694869579082,-277555756156289e-31,.00366706940309695,.297968425724437,1.09982632273336,-.00366706940309698,-.297968425724437,-1.09982632273336,-1.60810360624062,-1.52910873346637,-1.53785179605942,-.812853930949932,-.767842482084008,-1.53785179605942,-.812853930949932,-.767842482084008,-1.66422626280928,-1.7494947574052,-1.26111226605018,3.21392723077718,-1.7494947574052,-1.26111226605018,3.21392723077718,0,-.0833652467301549,.372450671567337,.387201887418256,1.10961312870629,1.03513527802723,.387201887418255,1.10961312870629,1.03513527802723,1.44049499106293,1.53278623556534,2.20949939757829,-1.11392398932374,1.53278623556534,2.20949939757829,-1.11392398932374,0,222044604925031e-31,.0876067315082398,1.18328003858253,1.74422204741945,-.0876067315082397,-1.18328003858253,-1.74422204741945,-222044604925031e-31,-.001718313706187,.68205874913478,.581814282931261,.001718313706187,-.68205874913478,-.581814282931261,-6.12734886158736,-6.16231355914618,-6.30453521311102,-6.78278462041507,-7.60669697586982,-6.30453521311102,-6.78278462041507,-7.60669697586982,-6.09902206473922,-6.12172192882131,-2.59588583193055,3.35944140524417,-6.12172192882131,-2.59588583193055,3.35944140524417,0],this.paused=!1,this.markers=[];for(var e=0;46>e;e++)this.markers.push(0);this.vertices=[],this.values=[];for(var e=0;15>e;e++)this.vertices.push(new s.Vector3(0,0,0)),this.values.push(0,0,0);this.position=new s.Vector3(0,0,0),this.forward=new s.Vector3(0,0,.1),this.reset()}return Walker.prototype.reset=function reset(){this.speed=1,this.gender=5,this.nervous=0,this.weight=0,this.happy=0,this.walkertime=0,this.initphase=0,this.starttime=this.lasttime=.001*Date.now(),this.sizes=[1.25,1.25,1,1,.5,1,1,.5,1,.75,1,1.5,.75,1,1.5]},Walker.prototype.update=function update(){var e=5e-4*Date.now()-this.starttime,t=e-this.lasttime,n=this.meanwalker[45]+this.gender*this.genderaxis[45]+this.weight*this.weightaxis[45]+this.nervous*this.nervousaxis[45]+this.happy*this.happyaxis[45];this.walkertime+=2*t*o*(120/(n/this.speed));for(var l=0;46>l;)this.markers[l]=this.meanwalker[l]+this.weightaxis[l]*this.weight+this.genderaxis[l]*this.gender+this.nervousaxis[l]*this.nervous+this.happyaxis[l]*this.happy+(this.meanwalker[l+46]+this.genderaxis[l+46]*this.gender+this.weightaxis[l+46]*this.weight+this.nervousaxis[l+46]*this.nervous+this.happyaxis[l+46]*this.happy)*a(this.walkertime+this.initphase*o/180)+(this.meanwalker[l+92]+this.genderaxis[l+92]*this.gender+this.weightaxis[l+92]*this.weight+this.nervousaxis[l+92]*this.nervous+this.happyaxis[l+92]*this.happy)*r(this.walkertime+this.initphase*o/180)+(this.meanwalker[l+138]+this.genderaxis[l+138]*this.gender+this.weightaxis[l+138]*this.weight+this.nervousaxis[l+138]*this.nervous+this.happyaxis[l+138]*this.happy)*a(2*(this.walkertime+this.initphase*o/180))+(this.meanwalker[l+184]+this.genderaxis[l+184]*this.gender+this.weightaxis[l+184]*this.weight+this.nervousaxis[l+184]*this.nervous+this.happyaxis[l+184]*this.happy)*r(2*(this.walkertime+this.initphase*o/180)),l++;for(l=0,this.values=[],this.sizes=[];15>l;){this.vertices[l].x=this.markers[l+15],this.vertices[l].y=this.markers[l+30],this.vertices[l].z=this.markers[l];var i=this.vertices[l].multiplyScalar(.01);this.values.push(i.x,i.y,i.z),8==l,l++}this.lasttime=e;var d=new s.Quaternion().setFromAxisAngle(new s.Vector3(0,1,0),(2*Math.random()-1)*o/360);this.forward.applyQuaternion(d),this.position.add(this.forward);var c=[],u=this.position;return this.vertices.forEach(function(e){var t=e.applyQuaternion(d);c.push(t.x+u.x),c.push(t.y+u.y),c.push(t.z+u.z)}),c},Walker}();t['default']=l}});